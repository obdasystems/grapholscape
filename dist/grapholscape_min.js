function GrapholScape(e,t,a){this.highlight_color="rgb(81,149,199)",this.container=t,this.diagrams=[],this.actual_diagram=-1,this.container.style.fontSize="14px",this.container.style.color="#666",this.container.requestFullscreen=this.container.requestFullscreen||this.container.mozRequestFullscreen||this.container.mozRequestFullScreen||this.container.webkitRequestFullscreen||this.container.msRequestFullscreen,document.cancelFullscreen=document.cancelFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;var i=document.createElement("div");i.setAttribute("id","cy"),this.container.appendChild(i),this.cy=cytoscape({container:t.firstElementChild,autoungrabify:!0,wheelSensitivity:.4,maxZoom:2.5,minZoom:.02,style:[{selector:"node",style:{height:"data(height)",width:"data(width)","background-color":"data(fillColor)",shape:"data(shape)","border-width":1,"border-color":"#000","border-style":"solid","font-size":12}},{selector:"[label]",style:{label:"data(label)","text-margin-x":"data(labelXpos)","text-margin-y":"data(labelYpos)","text-wrap":"wrap"}},{selector:"edge",style:{width:1,"line-color":"#000","target-arrow-color":"#000","target-arrow-shape":"data(target_arrow)","target-arrow-fill":"data(arrow_fill)","line-style":"data(style)","curve-style":"bezier","arrow-scale":1.3}},{selector:"[segment_distances]",style:{"curve-style":"segments","segment-distances":"data(segment_distances)","segment-weights":"data(segment_weights)","edge-distances":"node-position"}},{selector:"[source_arrow]",style:{"source-arrow-color":"#000","source-arrow-shape":"data(source_arrow)","source-arrow-fill":"data(arrow_fill)"}},{selector:"[source_endpoint]",style:{"source-endpoint":"data(source_endpoint)"}},{selector:"[target_endpoint]",style:{"target-endpoint":"data(target_endpoint)"}},{selector:"[?functional][!inverseFunctional]",style:{"border-width":5,"border-color":"#000","border-style":"double"}},{selector:"[?inverseFunctional][!functional]",style:{"border-width":4,"border-color":"#000","border-style":"solid"}},{selector:"[edge_label]",style:{label:"data(edge_label)","font-size":10,"text-rotation":"autorotate","text-margin-y":-10}},{selector:"[target_label]",style:{"target-label":"data(target_label)","font-size":10,"target-text-offset":15,"target-text-margin-y":-5}},{selector:"[shape_points]",style:{"shape-polygon-points":"data(shape_points)"}},{selector:"edge:selected",style:{"line-color":this.highlight_color,"source-arrow-color":this.highlight_color,"target-arrow-color":this.highlight_color,width:"4","z-index":"100"}},{selector:"node:selected",style:{"border-color":this.highlight_color,"border-width":"4","z-index":"100"}},{selector:".filtered",style:{display:"none"}},{selector:".facet",style:{"background-opacity":0}},{selector:".hidden",style:{visibility:"hidden"}},{selector:".no_border",style:{"border-width":0}},{selector:".no_overlay",style:{"overlay-opacity":0,"overlay-padding":0}}],layout:{name:"preset"}}),this.cy_aux=cytoscape(),this.predicates;var n=this;if(a=a||null)this.init(a);else{var r=new FileReader;r.onloadend=function(){n.init(r.result)},r.readAsText(e)}this.cy.on("select",".predicate",function(e){n.showDetails(e.target)}),this.cy.on("select","*",function(e){e.target.hasClass("predicate")||document.getElementById("details").classList.add("hide"),e.target.isEdge()&&"input"!=e.target.data("type")?(document.getElementById("owl_translator").classList.remove("hide"),document.getElementById("owl_axiomes").innerHTML=n.edgeToOwlString(e.target)):e.target.isNode()&&"facet"!=e.target.data("type")?(document.getElementById("owl_translator").classList.remove("hide"),document.getElementById("owl_axiomes").innerHTML=n.nodeToOwlString(e.target,!0)):document.getElementById("owl_translator").classList.add("hide")}),this.cy.on("tap",function(e){if(e.target===n.cy){var t;document.getElementById("details").classList.add("hide"),document.getElementById("owl_translator").classList.add("hide");var a=document.getElementsByClassName("bottom_window");for(t=0;t<a.length;t++)a[t].classList.add("hide");var i=document.getElementsByClassName("gcollapsible");for(t=0;t<i.length;t++)"details_body"!=i[t].id&&"translator_body"!=i[t].id&&0!=i[t].clientHeight&&(i[t].parentNode.getElementsByClassName("module_button")[0]?toggle(i[t].parentNode.getElementsByClassName("module_button")[0]):toggle(i[t]))}})}function toggle(e){if(e.classList.contains("bottom_button")){var t=0,a=document.getElementsByClassName("bottom_window");for(t=0;t<a.length;t++)e.parentNode.getElementsByClassName("bottom_window")[0]!=a[t]&&a[t].classList.add("hide");e.parentNode.getElementsByClassName("bottom_window")[0].classList.toggle("hide")}else{var i=e.parentNode.getElementsByClassName("gcollapsible")[0];if("0"==i.clientHeight?i.style.maxHeight="450px":i.style.maxHeight="0",e.classList.contains("module_button")){var n=e.firstElementChild.innerHTML;"arrow_drop_up"==n?e.firstElementChild.innerHTML="arrow_drop_down":"arrow_drop_down"==n&&(e.firstElementChild.innerHTML="arrow_drop_up")}"diagram_list"!=i.id&&"slider_body"!=i.id||("0"==i.clientWidth?i.style.width="100%":i.style.width="0"),"slider_body"==i.id&&e.parentNode.getElementsByTagName("hr")[0].classList.toggle("hide")}}function search(e){var t=document.getElementById("predicates_list");""==e?(t.style.maxHeight=0,document.getElementById("predicates-list-button").getElementsByTagName("i")[0].innerHTML="arrow_drop_down"):(document.getElementById("predicates-list-button").getElementsByTagName("i")[0].innerHTML="arrow_drop_up",t.style.maxHeight="450px"),document.getElementById("search").value=e;var a=e.toLowerCase(),i=t.getElementsByClassName("predicate"),n=0;for(n=0;n<i.length;n++)i[n].getElementsByClassName("info")[0].innerHTML.toLowerCase().indexOf(a)>-1?i[n].style.display="":i[n].style.display="none";document.getElementById("search").focus()}function toggleSubRows(e){var t=e.parentNode.parentNode.getElementsByClassName("sub_row_wrapper")[0];"inherit"==t.style.display?(t.style.display="none",e.firstChild.innerHTML="keyboard_arrow_right"):(t.style.display="inherit",e.firstChild.innerHTML="keyboard_arrow_down")}function goTo(e,t){var a=t.getAttribute("diagram"),i=t.getAttribute("node_id");toggle(document.getElementById("predicates-list-button")),e.centerOnNode(i,a,1.25)}function getFirstChild(e){return null==e||null==e.firstChild?null:(1!=(e=e.firstChild).nodeType&&(e=getNextSibling(e)),e)}function getNextSibling(e){if(null==e||null==e.nextSibling)return null;for(e=e.nextSibling;1!=e.nodeType;){if(null==e.nextSibling)return null;e=e.nextSibling}return e}function isPredicate(e){switch(e.getAttribute("type")){case"concept":case"attribute":case"role":case"individual":return!0}return!1}function getDistanceWeight(e,t,a){var i=[];i.x=a[0]-t.x,i.y=a[1]-t.y;var n=[];n.x=e.x-t.x,n.y=e.y-t.y;var r,s=[];if(0==n.x)s.x=0,s.y=i.y;else if(0==n.y)s.x=i.x,s.y=0,r=0;else{r=n.y/n.x;var o=i.y+i.x/r;s.x=o*r/(Math.pow(r,2)+1),s.y=s.x*r}var l=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),d=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))/l;n.x>0&&s.x<0&&(d=-d),n.x<0&&s.x>0&&(d=-d);var c=Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2));return n.x<0&&i.y>r*i.x&&(c=-c),n.x>0&&i.y<r*i.x&&(c=-c),0==n.x&&n.y>0&&i.x>0&&(c=-c),0==n.x&&n.y<0&&i.x<0&&(c=-c),[c,d]}function getNewEndpoint(e,t,a){var i=[];i.x=e.x-t.position("x"),i.y=e.y-t.position("y");var n=[];if(n.x=a[0]-t.position("x"),n.y=a[1]-t.position("y"),i.x==n.x){if(n.y>0)return i.y=t.data("height")/2,i;if(n.y<0)return i.y=-t.data("height")/2,i}else if(i.y==n.y){if(n.x>0)return i.x=t.data("width")/2,i;if(n.x<0)return i.x=-t.data("width")/2,i}return i}function makeDraggable(e){var t=0,a=0,i=0,n=0;function r(r){r=r||window.event,t=i-r.clientX,a=n-r.clientY,i=r.clientX,n=r.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-t+"px"}function s(){document.onmouseup=null,document.onmousemove=null}e.classList.add("draggable"),e.getElementsByClassName("module_head")[0].onmousedown=function(e){e=e||window.event,i=e.clientX,n=e.clientY,document.onmouseup=s,document.onmousemove=r}}GrapholScape.prototype.init=function(e){var t,a,i=new DOMParser,n=e instanceof XMLDocument?e:i.parseFromString(e,"text/xml");this.xmlDocument=n,this.diagrams=n.getElementsByTagName("diagram");var r,s,o,l,d=n.getElementsByTagName("ontology")[0];if(this.ontology_name=d.getElementsByTagName("name")[0].textContent,d.getElementsByTagName("version")[0]?this.ontology_version=d.getElementsByTagName("version")[0].textContent:this.ontology_version="Undefined",this.xmlPredicates=n.getElementsByTagName("predicate"),0==n.getElementsByTagName("IRI_prefixes_nodes_dict").length)this.default_iri=n.getElementsByTagName("iri")[0];else{this.iri_prefixes=n.getElementsByTagName("prefix");var c=n.getElementsByTagName("iri");for(t=0;t<c.length;t++)if(0==c[t].getElementsByTagName("prefix").length){this.default_iri=c[t];break}}for(this.collection=this.cy_aux.collection(),t=0;t<this.diagrams.length;t++){for(o=[],r=this.diagrams[t].getElementsByTagName("node"),s=this.diagrams[t].getElementsByTagName("edge"),l=0,a=0;a<r.length;a++)o.push(this.NodeXmlToJson(r[a])),"property-assertion"===o[l].data.type||"facet"===o[l].data.type||o[l].data.functional&&o[l].data.inverseFunctional?(this.addFakeNodes(o),l+=o.length-l):l++;for(this.collection=this.collection.union(this.cy_aux.collection(o)),o=[],a=0;a<s.length;a++)o.push(this.EdgeXmlToJson(s[a]));this.collection=this.collection.union(this.cy_aux.collection(o))}this.getIdentityForNeutralNodes(),this.predicates=this.collection.filter(".predicate").sort(function(e,t){return e.data("label").localeCompare(t.data("label"))}),this.createUi()},GrapholScape.prototype.drawDiagram=function(e){var t=this.getDiagramId(e);if(t<0)return console.log("Error: diagram not found"),null;this.cy.remove("*"),this.cy.add(this.collection.filter("[diagram_id = "+t+"]"));var a,i=document.getElementsByClassName("filtr_option");for(a=0;a<i.length;a++)i[a].firstElementChild.firstElementChild.checked||this.filter(i[a].firstElementChild.firstElementChild.id);return this.cy.fit(),this.actual_diagram=t,document.getElementById("title").innerHTML=e,!0},GrapholScape.prototype.getDiagramId=function(e){var t;for(t=0;t<this.diagrams.length;t++)if(this.diagrams[t].getAttribute("name")===e)return t;return-1},GrapholScape.prototype.getDiagramName=function(e){return this.diagrams[e].getAttribute("name")},GrapholScape.prototype.centerOnNode=function(e,t,a){this.actual_diagram!=this.getDiagramId(t)&&this.drawDiagram(t);var i=this.cy.getElementById(e);this.centerOnPosition(i.position("x"),i.position("y"),a),this.cy.collection(":selected").unselect(),i.select()},GrapholScape.prototype.centerOnPosition=function(e,t,a){this.cy.reset();var i=this.cy.width()/2,n=this.cy.height()/2;e-=i,t-=n,this.cy.pan({x:-e,y:-t}),this.cy.zoom({level:a,renderedPosition:{x:i,y:n}})},GrapholScape.prototype.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},GrapholScape.prototype.toggleFullscreen=function(e,t,a,i){var n=this.container;this.isFullscreen()?document.cancelFullscreen():n.requestFullscreen()},GrapholScape.prototype.showDetails=function(e){document.getElementById("details").classList.remove("hide");var t=document.getElementById("details_body");t.innerHTML='<table class="details_table">  <tr><th>Name</th><td>'+e.data("label").replace(/\n/g,"")+"</td></tr>  <tr><th>Type</th><td>"+e.data("type")+'</td></tr>  <tr><th>IRI</th><td><a style="text-decoration:underline" href="/documentation/predicate/'+e.data("type")+"/"+e.data("label").replace("\n","")+'">'+e.data("iri")+"</a></td></tr></table>","role"!=e.data("type")&&"attribute"!=e.data("type")||(e.data("functional")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Functional</span></div>'),e.data("inverseFunctional")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Inverse Functional</span></div>'),e.data("asymmetric")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Asymmetric</span></div>'),e.data("irreflexive")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Irreflexive</span></div>'),e.data("reflexive")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Asymmetric</span></div>'),e.data("symmetric")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Symmetric</span></div>'),e.data("transitive")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Transitive</span></div>')),e.data("description")&&(t.innerHTML+='<div class="table_header"><strong>Description</strong></div><div class="descr">'+this.renderDescription(e.data("description"))+"</div>")},GrapholScape.prototype.renderDescription=function(e){return e.replace(/(href=.)\/predicate\//g,"$1/documentation/predicate/")},GrapholScape.prototype.NodeXmlToJson=function(e){var t,a=this.getDiagramId(e.parentNode.getAttribute("name")),i={data:{id_xml:e.getAttribute("id"),diagram_id:a,id:e.getAttribute("id")+"_"+a,fillColor:e.getAttribute("color"),type:e.getAttribute("type")},position:{},classes:e.getAttribute("type")};switch(i.data.type){case"concept":case"domain-restriction":i.data.shape="rectangle",i.data.identity="concept";break;case"range-restriction":i.data.shape="rectangle",i.data.identity="neutral";break;case"role":i.data.shape="diamond",i.data.identity="role";break;case"attribute":i.data.shape="ellipse",i.data.identity="attribute";break;case"union":case"disjoint-union":case"complement":case"intersection":case"enumeration":i.data.shape="hexagon",i.data.identity="neutral";break;case"role-inverse":case"role-chain":i.data.shape="hexagon",i.data.identity="role","role-chain"==i.data.type&&(i.data.inputs=e.getAttribute("inputs").split(","));break;case"datatype-restriction":i.data.shape="hexagon",i.data.identity="value_domain";break;case"value-domain":i.data.shape="roundrectangle",i.data.identity="value_domain";break;case"property-assertion":i.data.shape="roundrectangle",i.data.identity="neutral",i.data.inputs=e.getAttribute("inputs").split(",");break;case"individual":i.data.shape="octagon",i.data.identity="individual";break;case"facet":i.data.shape="polygon",i.data.shape_points="-0.9 -1 1 -1 0.9 1 -1 1",i.data.fillColor="#ffffff",i.data.identity="facet";break;default:console.error("tipo di nodo sconosciuto")}var n=getFirstChild(e);if(i.data.width=parseInt(n.getAttribute("width")),i.data.width<0&&(i.data.width=-i.data.width),i.data.height=parseInt(n.getAttribute("height")),i.data.height<0&&(i.data.height=-i.data.height),"facet"==i.data.type&&(i.data.height=40),i.position.x=parseInt(n.getAttribute("x")),i.position.y=parseInt(n.getAttribute("y")),null!=(n=getNextSibling(n))&&(i.data.label=n.textContent,i.data.labelXpos=parseInt(n.getAttribute("x"))-i.position.x+1,i.data.labelYpos=parseInt(n.getAttribute("y"))-i.position.y+(i.data.height+2)/2+parseInt(n.getAttribute("height"))/4,t=i.data.label.replace(/\n/g,"")),isPredicate(e)){var r,s,o,l,d,c;if(i.classes+=" predicate",null!=e.getAttribute("remaining_characters"))if(s=e.getAttribute("remaining_characters").replace(/\n/g,""),o=t.length-s.length,":"!=(l=t.substring(0,o))&&l){for(k=0;k<this.iri_prefixes.length;k++)if(l==this.iri_prefixes[k].getAttribute("prefix_value")+":"){r=this.iri_prefixes[k].parentNode.parentNode.getAttribute("iri_value");break}}else r=this.default_iri.getAttribute("iri_value")||this.default_iri.textContent;else r=this.default_iri.getAttribute("iri_value")||this.default_iri.textContent,l="",s=t;for(-1!=l.search(/"[\w]+"\^\^[\w]+:/)?(s=t,r="",l=l.substring(l.lastIndexOf("^")+1,l.lastIndexOf(":")+1)):"/"==!r.substr(-1,1)&&"#"==!r.substr(-1,1)&&(r+="/"),i.data.remaining_chars=s,i.data.prefix_iri=l,i.data.iri=r+s,d=0;d<this.xmlPredicates.length;d++)if(t==(c=this.xmlPredicates[d]).getAttribute("name")&&i.data.type==c.getAttribute("type")){i.data.description=c.getElementsByTagName("description")[0].textContent,i.data.description=i.data.description.replace(/&lt;/g,"<"),i.data.description=i.data.description.replace(/&gt;/g,">"),i.data.description=i.data.description.replace(/font-family:'monospace'/g,""),i.data.description=i.data.description.replace(/&amp;/g,"&"),i.data.description=i.data.description.replace(/font-size:0pt/g,"font-size:inherit");var p=i.data.description.indexOf("<p"),u=i.data.description.indexOf("</body");i.data.description=i.data.description.substring(p,u),"attribute"!=i.data.type&&"role"!=i.data.type||(i.data.functional=parseInt(c.getElementsByTagName("functional")[0].textContent)),"role"==i.data.type&&(i.data.inverseFunctional=parseInt(c.getElementsByTagName("inverseFunctional")[0].textContent),i.data.asymmetric=parseInt(c.getElementsByTagName("asymmetric")[0].textContent),i.data.irreflexive=parseInt(c.getElementsByTagName("irreflexive")[0].textContent),i.data.symmetric=parseInt(c.getElementsByTagName("symmetric")[0].textContent),i.data.transitive=parseInt(c.getElementsByTagName("transitive")[0].textContent));break}}else i.data.prefix_iri="",i.data.remaining_chars=t,"value-domain"!=i.data.type&&"facet"!=i.data.type||(i.data.prefix_iri=t.split(":")[0]+":",i.data.remaining_chars=t.split(":")[1]);return i},GrapholScape.prototype.EdgeXmlToJson=function(e){var t,a=this.getDiagramId(e.parentNode.getAttribute("name")),i={data:{target:e.getAttribute("target")+"_"+a,source:e.getAttribute("source")+"_"+a,id:e.getAttribute("id")+"_"+a,id_xml:e.getAttribute("id"),diagram_id:a,type:e.getAttribute("type")}};switch(i.data.type){case"inclusion":i.data.style="solid",i.data.target_arrow="triangle",i.data.arrow_fill="filled";break;case"input":i.data.style="dashed",i.data.target_arrow="diamond",i.data.arrow_fill="hollow";break;case"equivalence":i.data.style="solid",i.data.source_arrow="triangle",i.data.target_arrow="triangle",i.data.arrow_fill="filled";break;case"membership":i.data.style="solid",i.data.target_arrow="triangle",i.data.arrow_fill="filled",i.data.edge_label="instance Of";break;default:console.error("tipo di arco non implementato <"+e.getAttribute("type")+">")}var n=this.collection.getElementById(i.data.source),r=this.collection.getElementById(i.data.target);if("role-chain"==r.data("type")||"property-assertion"==r.data("type"))for(t=0;t<r.data("inputs").length;t++)if(r.data("inputs")[t]==i.data.id_xml){i.data.target_label=t+1;break}var s,o=getFirstChild(e),l=[],d=[],c=[],p=0;for(s=0;s<e.childNodes.length;s++)if(1==e.childNodes[s].nodeType){if(l[p]=[],l[p].push(parseInt(o.getAttribute("x"))),l[p].push(parseInt(o.getAttribute("y"))),null==getNextSibling(o))break;if(o=getNextSibling(o),p>0){var u=getDistanceWeight(r.position(),n.position(),l[p]);c.push(u[0]),d.push(u[1])}p++}p>1&&(i.data.segment_distances=c,i.data.segment_weights=d);var h=[];h.x=l[0][0],h.y=l[0][1],0==(h=getNewEndpoint(h,n,l[1])).x&&0==h.y||(i.data.source_endpoint=[],i.data.source_endpoint.push(h.x),i.data.source_endpoint.push(h.y));var m=[];return m.x=l[l.length-1][0],m.y=l[l.length-1][1],0==(m=getNewEndpoint(m,r,l[l.length-2])).x&&0==m.y||(i.data.target_endpoint=[],i.data.target_endpoint.push(m.x),i.data.target_endpoint.push(m.y)),i},GrapholScape.prototype.addFakeNodes=function(e){var t=e[e.length-1];if("facet"==t.data.type){t.data.label=t.data.label.replace("^^","\n\n"),t.data.labelYpos=t.data.height;var a={selectable:!1,data:{height:t.data.height,width:t.data.width,fillColor:"#ddd",shape:"polygon",shape_points:"-0.9 -1 1 -1 0.95 0 -0.95 0",diagram_id:t.data.diagram_id,parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x,y:t.position.y}},i={selectable:!1,data:{height:t.data.height,width:t.data.width,fillColor:"#fff",shape:"polygon",shape_points:"-0.95 0 0.95 0 0.9 1 -1 1",diagram_id:t.data.diagram_id,parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x,y:t.position.y}};return e[e.length-1]=a,e.push(i),void e.push(t)}if(1==t.data.functional&&1==t.data.inverseFunctional){var n={selectable:!1,data:{height:t.data.height,width:t.data.width,fillColor:"#000",shape:"polygon",shape_points:"0 -1 1 0 0 1",diagram_id:t.data.diagram_id},position:{x:t.position.x,y:t.position.y}},r={selectable:!1,data:{height:t.data.height,width:t.data.width+2,fillColor:"#fcfcfc",shape:"polygon",shape_points:"0 -1 -1 0 0 1",diagram_id:t.data.diagram_id},position:{x:t.position.x,y:t.position.y}};t.data.labelXpos,t.data.labelYpos;t.data.height-=8,t.data.width-=10,null!=t.data.label&&(t.data.labelYpos-=4),e[e.length-1]=r,e.push(n),e.push(t)}if("property-assertion"==t.data.type){var s={selectable:!1,classes:"no_overlay",data:{height:t.data.height,width:t.data.height,shape:"ellipse",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x-(t.data.width-t.data.height)/2,y:t.position.y}},o={selectable:!1,classes:"no_overlay",data:{height:t.data.height,width:t.data.height,shape:"ellipse",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x+(t.data.width-t.data.height)/2,y:t.position.y}},l={data:{selectable:!1,height:t.data.height,width:t.data.width-t.data.height,shape:"rectangle",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:t.position},d={data:{type:"property-assertion",height:t.data.height-1,width:t.data.width-t.data.height,shape:"rectangle",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:t.position,classes:"property-assertion no_border"};t.classes+=" hidden",e[e.length-1]=t,e.push(l),e.push(s),e.push(o),e.push(d)}},GrapholScape.prototype.filter=function(e){var t,a,i=this;switch(e){case"val_check":a="value-domain";break;case"attr_check":a="attribute",document.getElementById("attr_check").checked?document.getElementById("val_check").removeAttribute("disabled"):document.getElementById("val_check").setAttribute("disabled","true");break;case"indiv_check":a="individual";break;case"forall_check":a="forall";break;case"not_check":a="complement"}t="forall"==a?this.cy.$('[type $= "-restriction"][label = "forall"], .forall_check'):this.cy.$('[type = "'+a+'"], .'+e),document.getElementById(e).checked?(t.removeClass("filtered"),t.removeClass(e)):t.forEach(function(t){!function e(t,a){t.addClass("filtered "+a);i.cy.nodes('[parent_node_id = "'+t.id()+'"]').addClass("filtered "+a);var n='[source = "'+t.data("id")+'"]';t.connectedEdges(n).forEach(function(t){var i='edge:visible[source = "'+t.target().id()+'"]',n='edge:visible[target = "'+t.target().id()+'"][type != "input"]',r=t.target().connectedEdges(i).size()+t.target().connectedEdges(n).size();!t.target().hasClass("filtered")&&(r<=0||"input"==t.data("type"))&&(t.target().hasClass("predicate")||e(t.target(),a))});n='[target ="'+t.data("id")+'"]';t.connectedEdges(n).forEach(function(t){var i='edge:visible[source = "'+t.source().id()+'"]',n='edge:visible[target = "'+t.source().id()+'"][type != "input"]',r=t.source().connectedEdges(i).size()+t.source().connectedEdges(n).size();t.source().hasClass("filtered")||0!=r||t.source().hasClass("predicate")||e(t.source(),a)})}(t,e)});var n,r=document.getElementsByClassName("filtr_option"),s=0;for(n=0;n<r.length;n++)if(!r[n].firstElementChild.firstElementChild.checked){r[n].parentNode.nextElementSibling.getElementsByTagName("i")[0].style.color="rgb(81,149,199)",s=1;break}s||(r[0].parentNode.nextElementSibling.getElementsByTagName("i")[0].style.color="")},GrapholScape.prototype.getIdentityForNeutralNodes=function(){this.collection.filter('node[identity = "neutral"]').forEach(function(e){e.data("identity",function e(t){var a=t.incomers('[type = "input"]').sources();var i=a.data("identity");if("neutral"==i)return e(a);switch(t.data("type")){case"range-restriction":return"role"==i?"concept":"attribute"==i?"value_domain":i;case"enumeration":return"individual"==i?"concept":i;default:return i}}(e))})},GrapholScape.prototype.getOccurrencesOfPredicate=function(e){for(var t=document.getElementById("predicates_list").getElementsByClassName("predicate"),a={},i=0;i<t.length;i++){if(t[i].getElementsByClassName("info")[0].innerHTML===e){for(var n=t[i].getElementsByClassName("sub_row"),r=0;r<n.length;r++){var s=n[r],o=s.getAttribute("diagram"),l=s.getAttribute("node_id");o in a?a[o].push(l):a[o]=[l]}break}}return a},GrapholScape.prototype.edgeToOwlString=function(e){var t=e.source(),a=e.target(),i='<span class="owl_error">Malformed Axiom</span>',n='<span class="owl_error">Missing Operand</span>';switch(e.data("type")){case"inclusion":return"concept"==t.data("identity")&&"concept"==a.data("identity")?"domain-restriction"==t.data("type")&&"self"!=t.data("label")&&"self"!=a.data("label")?function(e,t){var a=t.source().incomers('[type = "input"]').sources();if(a.size()>1)return s(e,t);if("role"==a.data("type"))return"ObjectPropertyDomain("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")";if("attribute"==a.data("type"))return"DataPropertyDomain("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")"}(this,e):"range-restriction"==t.data("type")&&"self"!=t.data("label")&&"self"!=a.data("label")?l(this,e):"complement"==a.data("type")||"complement"==t.data("type")?function(e,t){var a="DisjointClasses(";return t.forEach(function(t){"complement"==t.data("type")&&(t=t.incomers('[type = "input"]').source()),a+=e.nodeToOwlString(t)+" "}),a=a.slice(0,a.length-1),a+=")"}(this,e.connectedNodes()):s(this,e):"role"==t.data("identity")&&"role"==a.data("identity")?"complement"==a.data("type")?d(this,e):o(this,e):"value_domain"==t.data("identity")&&"value_domain"==a.data("identity")?l(this,e):"attribute"==t.data("identity")&&"attribute"==a.data("identity")?"complement"==a.data("type")?d(this,e):o(this,e):i;case"equivalence":return"concept"==t.data("identity")&&"concept"==a.data("identity")?function(e,t){return"EquivalentClasses("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}(this,e):"role"==t.data("identity")&&"role"==a.data("identity")?"role-inverse"==t.data("type")||"role-inverse"==a.data("type")?function(e,t){var a,i;"role-inverse"==t.source().data("type")?(i=t.target(),a=t.source().incomers('[type = "input"]').sources().first()):(i=t.source(),a=t.target().incomers('[type = "input"]').sources().first());return a.length?"InverseObjectProperties("+e.nodeToOwlString(i)+" "+e.nodeToOwlString(a)+")":n}(this,e):r(this,e):"attribute"==t.data("identity")&&"attribute"==a.data("identity")?r(this,e):i;case"membership":return"concept"==a.data("identity")?function(e,t){return"ClassAssertion("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}(this,e):function(e,t){var a,i="Object";"attribute"==t.target().data("identity")&&(i="Data");if(a=i+"PropertyAssertion("+e.nodeToOwlString(t.target())+" ","property-assertion"==t.source().data("type")){var n=t.source();n.data("inputs").forEach(function(t){input=e.cy.$('edge[id_xml = "'+t+'"]').source(),a+=e.nodeToOwlString(input)+" "}),a=a.slice(0,a.length-1)}else a+=e.nodeToOwlString(t.source());return a+")"}(this,e)}function r(e,t){return"Equivalent"+("role"==t.source().data("idenity")?"Object":"Data")+"Properties("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}function s(e,t){return"SubClassOf("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}function o(e,t){var a;if("role"==t.target().data("identity"))a="Object";else{if("attribute"!=t.target().data("type"))return null;a="Data"}return"Sub"+a+"PropertyOf("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}function l(e,t){var a=t.source().incomers('[type = "input"]').sources();return a.size()>1?s(e,t):"role"==a.data("type")?"ObjectPropertyRange("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")":"attribute"==a.data("type")?"DataPropertyRange("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")":void 0}function d(e,t){var a,i;if("role"==t.target().data("identity"))a="Object";else{if("attribute"!=t.target().data("identity"))return null;a="Data"}return i="Disjoint"+a+"Properties(",t.connectedNodes().forEach(function(t){"complement"==t.data("type")&&(t=t.incomers('[type = "input"]').source()),i+=e.nodeToOwlString(t)+" "}),(i=i.slice(0,i.length-1))+")"}},GrapholScape.prototype.nodeToOwlString=function(e,t){var a='<span class="axiom_predicate_prefix">owl:</span><span class="axiom_predefinite_obj">Thing</span>',i='<span class="axiom_predicate_prefix">rdfs:</span><span class="axiom_predefinite_obj">Literal</span>',n='<span class="owl_error">Missing Operand</span>',r=t||null;if(r&&(e.hasClass("predicate")||"value-domain"==e.data("type"))){var s,o='<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_'+e.data("type")+'">'+e.data("remaining_chars")+"</span>";switch(e.data("type")){case"concept":return"Declaration("+(s="Class")+"("+o+"))";case"role":var l="Declaration("+(s="ObjectProperty")+"("+o+"))";return e.data("functional")&&(l+="<br/>Functional"+s+"("+o+")"),e.data("inverseFunctional")&&(l+="<br/>InverseFunctional"+s+"("+o+")"),e.data("asymmetric")&&(l+="<br />Asymmetric"+s+"("+o+")"),e.data("irreflexive")&&(l+="<br/>Irreflexive"+s+"("+o+")"),e.data("reflexive")&&(l+="<br/>Reflexive"+s+"("+o+")"),e.data("symmetric")&&(l+="<br/>Symmetric"+s+"("+o+")"),e.data("transitive")&&(l+="<br/>Transitive"+s+"("+o+")"),l;case"attribute":l="Declaration("+(s="DataProperty")+"("+o+"))";return e.data("functional")&&(l+="<br/>Functional"+s+"("+o+"))"),l;case"individual":if(-1!=e.data("remaining_chars").search(/"[\w]+"\^\^[\w]+:/)){var d=e.data("remaining_chars").split("^^")[0],c=e.data("remaining_chars").split(":")[1];o='<span class="owl_value">'+d+'</span>^^<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_value-domain">'+c+"</span>"}return"Declaration("+(s="NamedIndividual")+"("+o+"))";case"value-domain":return"Declaration("+(s="Datatype")+"("+o+"))"}}switch(e.data("type")){case"individual":if(-1!=e.data("remaining_chars").search(/"[\w]+"\^\^[\w]+:/)){d=e.data("remaining_chars").split("^^")[0],c=e.data("remaining_chars").split(":")[1];return'<span class="owl_value">'+d+'</span>^^<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_value-domain">'+c+"</span>"}case"concept":case"role":case"value-domain":case"attribute":case"individual":return'<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_'+e.data("type")+'">'+e.data("remaining_chars")+"</span>";case"facet":var p=e.data("remaining_chars").split("^^");return'<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_value-domain">'+p[0]+'</span><span class="owl_value">'+p[1]+"</span>";case"domain-restriction":case"range-restriction":var u,h,m=e.connectedEdges('edge[target = "'+e.id()+'"][type = "input"]');if(!m.length)return n;if(m.forEach(function(e){"role"!=e.source().data("type")&&"attribute"!=e.source().data("type")||(u=e.source()),"role"!=e.source().data("type")&&"attribute"!=e.source().data("type")&&(h=e.source())}),!(u.length>0))return n;if("attribute"==u.data("type")&&"range-restriction"==e.data("type"))return"Undefined";if("exists"==e.data("label"))return function(e,t,n,r){var s,o;"role"==t.data("type")&&(s="Object");"attribute"==t.data("type")&&(s="Data");o=s+"SomeValuesFrom(",o+="range-restriction"==r?_(e,t):e.nodeToOwlString(t);return o+=n||"Object"!=s?n||"Data"!=s?" "+e.nodeToOwlString(n)+")":" "+i+")":" "+a+")"}(this,u,h,e.data("type"));if("forall"==e.data("label"))return function(e,t,n,r){var s,o;"role"==t.data("type")&&(s="Object");"attribute"==t.data("type")&&(s="Data");o=s+"AllValuesFrom(",o+="range-restriction"==r?_(e,t):e.nodeToOwlString(t);return o+=n||"Object"!=s?n||"Data"!=s?" "+e.nodeToOwlString(n)+")":" "+i+")":" "+a+")"}(this,u,h,e.data("type"));if(-1!=e.data("label").search(/\(([-]|[\d]+),([-]|[\d]+)\)/)){var g=e.data("label").replace(/\(|\)/g,"").split(/,/);return function e(t,a,i,n,r){var s;"role"==a.data("type")&&(s="Object");"attribute"==a.data("type")&&(s="Data");if("-"==n[0])return"range-restriction"==r?i?s+"MaxCardinality("+n[1]+" "+_(t,a)+" "+t.nodeToOwlString(i)+")":s+"MaxCardinality("+n[1]+" "+_(t,a)+")":i?s+"MaxCardinality("+n[1]+" "+t.nodeToOwlString(a)+" "+t.nodeToOwlString(i)+")":s+"MaxCardinality("+n[1]+" "+t.nodeToOwlString(a)+")";if("-"==n[1])return"range-restriction"==r?i?s+"MinCardinality("+n[0]+" "+_(t,a)+" "+t.nodeToOwlString(i)+")":s+"MinCardinality("+n[0]+" "+_(t,a)+")":i?s+"MinCardinality("+n[0]+" "+t.nodeToOwlString(a)+" "+t.nodeToOwlString(i)+")":s+"MinCardinality("+n[0]+" "+t.nodeToOwlString(a)+")";if("-"!=n[0]&&"-"!=n[1]){var o=[],l=[];return o.push(n[0]),o.push("-"),l.push("-"),l.push(n[1]),s+"IntersectionOf("+e(t,a,i,o,r)+" "+e(t,a,i,l,r)+")"}}(this,u,h,g,e.data("type"))}if("self"==e.data("label"))return function(e,t,a){return"range-restriction"==a?"ObjectHasSelf("+_(e,t)+")":"ObjectHasSelf("+e.nodeToOwlString(t)+")"}(this,u,e.data("type"));case"role-inverse":var y=e.incomers('[type = "input"]').sources();return y.length?_(this,y):n;case"role-chain":return e.data("inputs").length?function(e,t){var a="ObjectPropertyChain(";return t.forEach(function(t){y=e.cy.$('edge[id_xml = "'+t+'"]').source(),a+=e.nodeToOwlString(y)+" "}),a=a.slice(0,a.length-1),a+=")"}(this,e.data("inputs")):n;case"union":case"intersection":case"complement":case"enumeration":case"disjoint-union":if(!(b=e.incomers('[type = "input"]').sources()).length)return n;var f="Object";return"concept"!=e.data("identity")&&"role"!=e.data("identity")&&(f="Data"),"disjoint-union"==e.data("type")?r?v(this,b,"union",f)+"<br />"+function(e,t){var a="DisjointClasses(";return t.forEach(function(t){a+=e.nodeToOwlString(t)+" "}),a=a.slice(0,a.length-1),a+=")"}(this,b):v(this,b,"union",f):v(this,b,e.data("type"),f);case"datatype-restriction":var b;return(b=e.incomers('[type = "input"]').sources()).length?function(e,t){var a="DatatypeRestriction(",i=t.filter('[type = "value-domain"]').first();return a+=e.nodeToOwlString(i)+" ",t.forEach(function(t){"facet"==t.data("type")&&(a+=e.nodeToOwlString(t)+"^^",a+=e.nodeToOwlString(i)+" ")}),a=a.slice(0,a.length-1),a+=")"}(this,b):n;case"property-assertion":return"Undefined"}function _(e,t){return"ObjectInverseOf("+e.nodeToOwlString(t)+")"}function v(e,t,a,i){var n;return a="enumeration"==a?"One":a.charAt(0).toUpperCase()+a.slice(1),n=i+a+"Of(",t.forEach(function(t){n+=e.nodeToOwlString(t)+" "}),n=n.slice(0,n.length-1),n+=")"}},GrapholScape.prototype.createUi=function(){var e,t,a,i,n,r,s,o,l,d=this,c=document.createElement("div"),p=document.createElement("div"),u=document.createElement("i"),h=document.createElement("i");for(h.setAttribute("class","material-icons md-24"),h.innerHTML="arrow_drop_down",c.setAttribute("id","diagram_name"),c.setAttribute("class","module"),p.setAttribute("id","title"),p.setAttribute("class","module_head"),p.innerHTML="Select a diagram",c.appendChild(p),(p=document.createElement("div")).setAttribute("id","diagram-list-button"),p.setAttribute("class","module_button"),p.setAttribute("onclick","toggle(this)"),p.appendChild(h),c.appendChild(p),(p=document.createElement("div")).setAttribute("id","diagram_list"),p.setAttribute("class","gcollapsible module_body"),e=0;e<this.diagrams.length;e++)(t=document.createElement("div")).setAttribute("class","diagram_item"),t.innerHTML=this.diagrams[e].getAttribute("name"),t.addEventListener("click",function(){d.drawDiagram(this.innerHTML),toggle(document.getElementById("diagram-list-button"))}),p.appendChild(t);c.appendChild(p),makeDraggable(c),this.container.appendChild(c),(c=c.cloneNode(!0)).setAttribute("id","explorer"),(f=document.createElement("input")).setAttribute("autocomplete","off"),f.setAttribute("type","text"),f.setAttribute("id","search"),f.setAttribute("placeholder","Search Predicates..."),f.setAttribute("onkeyup","search(this.value)"),c.firstElementChild.innerHTML="",c.firstElementChild.appendChild(f),c.getElementsByClassName("module_button")[0].setAttribute("id","predicates-list-button"),c.removeChild(c.lastElementChild),(p=document.createElement("div")).setAttribute("id","predicates_list"),p.setAttribute("class","gcollapsible module_body"),c.appendChild(p),makeDraggable(c),this.container.appendChild(c),this.predicates.forEach(function(e){if(y=e.data("label").replace(/\r?\n|\r/g,""),l=y.concat(e.data("type")),null!=document.getElementById(l))s=document.getElementById(l).getElementsByClassName("sub_row_wrapper")[0],(o=document.createElement("div")).setAttribute("class","sub_row"),o.setAttribute("diagram",this.getDiagramName(e.data("diagram_id"))),o.setAttribute("node_id",e.id()),o.innerHTML="- "+o.getAttribute("diagram")+" - "+e.data("id_xml"),o.addEventListener("click",function(){goTo(d,this)}),s.appendChild(o);else{switch((i=document.createElement("div")).setAttribute("id",l),i.setAttribute("class","predicate"),(n=document.createElement("div")).setAttribute("class","graphol_row"),r=document.createElement("span"),(u=document.createElement("i")).setAttribute("class","no_highlight material-icons md-18"),u.innerHTML="keyboard_arrow_right",r.appendChild(u),n.appendChild(r),r=document.createElement("span"),(u=document.createElement("div")).innerHTML=e.data("type").charAt(0).toUpperCase(),u.style.display="block",u.style.width="1.2vw",u.style.height="1.2vw",u.style.textAlign="center",u.style.verticalAlign="middle",u.style.lineHeight="1.2vw",u.innerHTML){case"C":lightColor="#F9F3A6",darkColor="#B08D00";break;case"R":lightColor="#AACDE1",darkColor="#065A85";break;case"A":lightColor="#C7DAAD",darkColor="#4B7900"}u.style.color=darkColor,u.style.backgroundColor=lightColor,u.style.border="1px solid "+darkColor,r.appendChild(u),n.appendChild(r),(r=document.createElement("div")).setAttribute("class","info"),r.innerHTML=y,n.appendChild(r),i.appendChild(n),n.firstChild.addEventListener("click",function(){toggleSubRows(this)}),n.getElementsByClassName("info")[0].addEventListener("click",function(){d.showDetails(e),d.cy.nodes().unselect()}),(s=document.createElement("div")).setAttribute("class","sub_row_wrapper"),(o=document.createElement("div")).setAttribute("class","sub_row"),o.setAttribute("diagram",this.getDiagramName(e.data("diagram_id"))),o.setAttribute("node_id",e.id()),o.innerHTML="- "+o.getAttribute("diagram")+" - "+e.data("id_xml"),o.addEventListener("click",function(){goTo(d,this)}),s.appendChild(o),i.appendChild(s)}p.appendChild(i)},this),(c=document.createElement("div")).setAttribute("id","zoom_tools"),c.setAttribute("class","grapholscape-tooltip module"),(p=document.createElement("div")).setAttribute("class","bottom_button"),p.setAttribute("id","zoom_in"),(u=document.createElement("i")).setAttribute("class","material-icons md-24"),u.innerHTML="add",p.appendChild(u),p.addEventListener("click",function(){d.cy.zoom({level:d.cy.zoom()+.08,renderedPosition:{x:d.cy.width()/2,y:d.cy.height()/2}});var e=Math.round(d.cy.zoom()/d.cy.maxZoom()*100);document.getElementById("zoom_slider").setAttribute("value",e)}),c.appendChild(p),(p=document.createElement("span")).setAttribute("class","tooltiptext"),p.onclick=function(){toggle(this)},p.innerHTML="Toggle slider",c.appendChild(p),(p=document.createElement("div")).setAttribute("class","gcollapsible"),p.setAttribute("id","slider_body"),(f=document.createElement("input")).setAttribute("id","zoom_slider"),f.setAttribute("autocomplete","off"),f.setAttribute("type","range"),f.setAttribute("min","1"),f.setAttribute("max","100"),f.setAttribute("value","50"),f.oninput=function(){var e=d.cy.maxZoom()/100*this.value;d.cy.zoom({level:e,renderedPosition:{x:d.cy.width()/2,y:d.cy.height()/2}})},p.appendChild(f),c.appendChild(p),c.appendChild(document.createElement("hr")),(p=document.createElement("div")).setAttribute("class","bottom_button"),p.setAttribute("id","zoom_out"),(u=document.createElement("i")).setAttribute("class","material-icons md-24"),u.innerHTML="remove",p.appendChild(u),p.addEventListener("click",function(){d.cy.zoom({level:d.cy.zoom()-.08,renderedPosition:{x:d.cy.width()/2,y:d.cy.height()/2}});var e=Math.round(d.cy.zoom()/d.cy.maxZoom()*100);document.getElementById("zoom_slider").setAttribute("value",e)}),c.appendChild(p),this.container.appendChild(c),(c=document.createElement("div")).setAttribute("id","details"),c.setAttribute("class","module hide"),(p=document.createElement("div")).setAttribute("class","module_head"),p.style.textAlign="center",p.innerHTML="Details",c.appendChild(p),(p=document.createElement("div")).setAttribute("id","details_button"),p.setAttribute("class","module_button"),p.setAttribute("onclick","toggle(this)"),(u=h.cloneNode(!0)).innerHTML="arrow_drop_up",p.appendChild(u),c.appendChild(p),(p=document.createElement("div")).setAttribute("id","details_body"),p.setAttribute("class","gcollapsible module_body"),c.appendChild(p),makeDraggable(c),this.container.appendChild(c),(c=document.createElement("div")).setAttribute("id","filters"),c.setAttribute("class","module"),(p=document.createElement("div")).setAttribute("id","filter_body"),p.setAttribute("class","bottom_window hide"),p.innerHTML+='<div style="text-align:center; margin-bottom:10px;"><strong>Filters</strong></div>';var m=document.createElement("div");m.setAttribute("class","filtr_option");var g=document.createElement("label");g.setAttribute("class","check_slider_wrap"),(f=document.createElement("input")).setAttribute("id","attr_check"),f.setAttribute("type","checkbox"),f.setAttribute("checked","checked");var y,f,b=document.createElement("span");b.setAttribute("class","check_slider"),g.appendChild(f),g.appendChild(b),m.appendChild(g),(y=document.createElement("span")).innerHTML="Attributes",y.setAttribute("class","filtr_text"),m.appendChild(y),p.appendChild(m),(m=m.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","val_check"),m.lastElementChild.innerHTML="Value Domain",p.appendChild(m),(m=m.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","indiv_check"),m.lastElementChild.innerHTML="Individuals",p.appendChild(m),(m=m.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","forall_check"),m.lastElementChild.innerHTML="Universal Quantifier",p.appendChild(m),(m=m.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","not_check"),m.lastElementChild.innerHTML="Not",p.appendChild(m),c.appendChild(p),c.innerHTML+='<div onclick="toggle(this)" class="bottom_button" title="filters"><i alt="filters" class="material-icons md-24"/>filter_list</i></div>',this.container.appendChild(c);var _=c.getElementsByClassName("filtr_option");for(e=0;e<_.length;e++)(f=_[e].firstElementChild.firstElementChild).addEventListener("click",function(){d.filter(this.id)});(c=document.createElement("div")).setAttribute("id","center_button"),c.setAttribute("class","module bottom_button"),c.setAttribute("title","reset"),(u=h.cloneNode(!0)).innerHTML="filter_center_focus",c.appendChild(u),c.addEventListener("click",function(){d.cy.fit()}),this.container.appendChild(c),(c=document.createElement("div")).setAttribute("id","grapholscape-fullscreen-btn"),c.setAttribute("class","module bottom_button"),c.setAttribute("title","fullscreen"),(u=document.createElement("i")).setAttribute("class","material-icons md-24"),u.innerHTML="fullscreen",u.onclick=function(){this.toggleFullscreen()}.bind(this);var v=this,w=function(e){var t=document.getElementById("grapholscape-fullscreen-btn").getElementsByTagName("i")[0],a=v.container;if(v.isFullscreen())a.fullScreenRestore={position:a.style.position,scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:a.style.width,height:a.style.height},a.style.position=void 0,a.style.width="100%",a.style.height="100%",a.className+=" grapholscape-fullscreen",document.documentElement.style.overflow="hidden",t.innerHTML="fullscreen_exit";else{a.className=a.className.replace(/\s*grapholscape-fullscreen\b/,""),document.documentElement.style.overflow="";var i=a.fullScreenRestore;a.style.position=i.position,a.style.width=i.width,a.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),t.innerHTML="fullscreen"}v.cy.resize()};document.addEventListener("fullscreenchange",w,!1),document.addEventListener("mozfullscreenchange",w,!1),document.addEventListener("webkitfullscreenchange",w,!1),c.appendChild(u),this.container.appendChild(c),(c=document.createElement("div")).setAttribute("id","owl_translator"),c.setAttribute("class","hide module"),(p=document.createElement("div")).setAttribute("id","translator_body"),p.setAttribute("class","module_body gcollapsible"),(m=document.createElement("div")).setAttribute("id","owl_axiomes"),p.appendChild(m),c.appendChild(p),(p=document.createElement("div")).setAttribute("class","module_head"),p.innerHTML="OWL 2",c.appendChild(p),(p=document.createElement("div")).setAttribute("id","translator-button"),p.setAttribute("class","module_button"),p.setAttribute("onclick","toggle(this)"),(u=h.cloneNode(!0)).innerHTML="arrow_drop_down",p.appendChild(u),c.appendChild(p),this.container.appendChild(c),(c=document.createElement("div")).setAttribute("id","onto_info"),c.setAttribute("class","module"),(p=document.createElement("div")).setAttribute("id","onto_info_body"),p.setAttribute("class","bottom_window hide"),p.innerHTML='<div style="text-align:center; margin-bottom:10px;"><strong>Ontology Info</strong></div>  <table class="details_table">  <tr><th>Name</th><td>'+this.ontology_name+"</td></tr>  <tr><th>Version</th><td>"+this.ontology_version+"</td></tr></table>",p.innerHTML+='<div class="table_header"><strong>IRI Prefixes Dictionary</strong></div>',(m=document.createElement("div")).setAttribute("id","prefixes_dict_list");var E,x,C=document.createElement("table");C.setAttribute("id","prefix_dict_table");var A=document.createElement("tr"),T=document.createElement("th"),N=document.createElement("td");if(this.default_iri){if(T.innerHTML="<em>Default</em>",N.innerHTML=this.default_iri.getAttribute("iri_value")||this.default_iri.textContent,E=this.default_iri.getElementsByTagName("properties")[0])for(e=0;e<E.getElementsByTagName("property").length;e++)"Project_IRI"==(x=E.getElementsByTagName("property")[e].getAttribute("property_value"))&&N.classList.add("project_iri");A.appendChild(T),A.appendChild(N),C.appendChild(A)}if(this.iri_prefixes)for(e=0;e<this.iri_prefixes.length;e++){A=document.createElement("tr"),T=document.createElement("th"),N=document.createElement("td");var k=!1;if((E=this.iri_prefixes[e].parentNode.parentNode.getElementsByTagName("properties")[0]).childNodes.length>0)for(a=0;a<E.getElementsByTagName("property").length;a++)if(x=E.getElementsByTagName("property")[a].getAttribute("property_value"))switch(x){case"Standard_IRI":k=!0;break;case"Project_IRI":N.classList.add("project_iri")}k||(T.innerHTML=this.iri_prefixes[e].getAttribute("prefix_value"),N.innerHTML=this.iri_prefixes[e].parentNode.parentNode.getAttribute("iri_value"),A.appendChild(T),A.appendChild(N),C.appendChild(A))}p.appendChild(C),c.appendChild(p),c.innerHTML+='<div onclick="toggle(this)" class="bottom_button" title="Info"><i alt="info" class="material-icons md-24"/>info_outline</i></div>',this.container.appendChild(c);var S=document.getElementsByClassName("material-icons");for(e=0;e<S.length;e++)S[e].onselectstart=function(){return!1}};