/**
 * MIT License
 *
 * Copyright (c) 2018-2020 OBDA Systems
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GrapholScape=e()}(this,(function(){"use strict";var t=function(t){try{return!!t()}catch(t){return!0}},e=!t((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var i=function(t){return t&&t.Math==Math&&t},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n&&n)||Function("return this")(),a=function(t){return"object"==typeof t?null!==t:"function"==typeof t},s=o.document,l=a(s)&&a(s.createElement),u=function(t){return l?s.createElement(t):{}},c=!e&&!t((function(){return 7!=Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a})),h=function(t){if(!a(t))throw TypeError(String(t)+" is not an object");return t},d=function(t,e){if(!a(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!a(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!a(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!a(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},f=Object.defineProperty,p={f:e?f:function(t,e,n){if(h(t),e=d(e,!0),h(n),c)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},g=p.f,v=Function.prototype,y=v.toString,m=/^\s*function ([^ (]*)/;e&&!("name"in v)&&g(v,"name",{configurable:!0,get:function(){try{return y.call(this).match(m)[1]}catch(t){return""}}});var b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w=e?function(t,e,n){return p.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},x=function(t,e){try{w(o,t,e)}catch(n){o[t]=e}return e},_=o["__core-js_shared__"]||x("__core-js_shared__",{}),E=r((function(t){(t.exports=function(t,e){return _[t]||(_[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),k={}.hasOwnProperty,S=function(t,e){return k.call(t,e)},C=0,T=Math.random(),N=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++C+T).toString(36)},O=!!Object.getOwnPropertySymbols&&!t((function(){return!String(Symbol())})),P=O&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,M=E("wks"),D=o.Symbol,A=P?D:D&&D.withoutSetter||N,L=function(t){return S(M,t)||(O&&S(D,t)?M[t]=D[t]:M[t]=A("Symbol."+t)),M[t]},I={};I[L("toStringTag")]="z";var R="[object z]"===String(I),B=Function.toString;"function"!=typeof _.inspectSource&&(_.inspectSource=function(t){return B.call(t)});var j,F,z,V=_.inspectSource,q=o.WeakMap,U="function"==typeof q&&/native code/.test(V(q)),H=E("keys"),W=function(t){return H[t]||(H[t]=N(t))},Y={},G=o.WeakMap;if(U){var X=new G,K=X.get,$=X.has,Z=X.set;j=function(t,e){return Z.call(X,t,e),e},F=function(t){return K.call(X,t)||{}},z=function(t){return $.call(X,t)}}else{var J=W("state");Y[J]=!0,j=function(t,e){return w(t,J,e),e},F=function(t){return S(t,J)?t[J]:{}},z=function(t){return S(t,J)}}var Q={set:j,get:F,has:z,enforce:function(t){return z(t)?F(t):j(t,{})},getterFor:function(t){return function(e){var n;if(!a(e)||(n=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},tt=r((function(t){var e=Q.get,n=Q.enforce,r=String(String).split("String");(t.exports=function(t,e,i,a){var s=!!a&&!!a.unsafe,l=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||S(i,"name")||w(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==o?(s?!u&&t[e]&&(l=!0):delete t[e],l?t[e]=i:w(t,e,i)):l?t[e]=i:x(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||V(this)}))})),et={}.toString,nt=function(t){return et.call(t).slice(8,-1)},rt=L("toStringTag"),it="Arguments"==nt(function(){return arguments}()),ot=R?nt:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),rt))?n:it?nt(e):"Object"==(r=nt(e))&&"function"==typeof e.callee?"Arguments":r},at=R?{}.toString:function(){return"[object "+ot(this)+"]"};R||tt(Object.prototype,"toString",at,{unsafe:!0});var st={}.propertyIsEnumerable,lt=Object.getOwnPropertyDescriptor,ut={f:lt&&!st.call({1:2},1)?function(t){var e=lt(this,t);return!!e&&e.enumerable}:st},ct="".split,ht=t((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==nt(t)?ct.call(t,""):Object(t)}:Object,dt=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},ft=function(t){return ht(dt(t))},pt=Object.getOwnPropertyDescriptor,gt={f:e?pt:function(t,e){if(t=ft(t),e=d(e,!0),c)try{return pt(t,e)}catch(t){}if(S(t,e))return b(!ut.f.call(t,e),t[e])}},vt=o,yt=function(t){return"function"==typeof t?t:void 0},mt=function(t,e){return arguments.length<2?yt(vt[t])||yt(o[t]):vt[t]&&vt[t][e]||o[t]&&o[t][e]},bt=Math.ceil,wt=Math.floor,xt=function(t){return isNaN(t=+t)?0:(t>0?wt:bt)(t)},_t=Math.min,Et=function(t){return t>0?_t(xt(t),9007199254740991):0},kt=Math.max,St=Math.min,Ct=function(t,e){var n=xt(t);return n<0?kt(n+e,0):St(n,e)},Tt=function(t){return function(e,n,r){var i,o=ft(e),a=Et(o.length),s=Ct(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Nt={includes:Tt(!0),indexOf:Tt(!1)},Ot=Nt.indexOf,Pt=function(t,e){var n,r=ft(t),i=0,o=[];for(n in r)!S(Y,n)&&S(r,n)&&o.push(n);for(;e.length>i;)S(r,n=e[i++])&&(~Ot(o,n)||o.push(n));return o},Mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Dt=Mt.concat("length","prototype"),At={f:Object.getOwnPropertyNames||function(t){return Pt(t,Dt)}},Lt={f:Object.getOwnPropertySymbols},It=mt("Reflect","ownKeys")||function(t){var e=At.f(h(t)),n=Lt.f;return n?e.concat(n(t)):e},Rt=function(t,e){for(var n=It(e),r=p.f,i=gt.f,o=0;o<n.length;o++){var a=n[o];S(t,a)||r(t,a,i(e,a))}},Bt=/#|\.prototype\./,jt=function(e,n){var r=zt[Ft(e)];return r==qt||r!=Vt&&("function"==typeof n?t(n):!!n)},Ft=jt.normalize=function(t){return String(t).replace(Bt,".").toLowerCase()},zt=jt.data={},Vt=jt.NATIVE="N",qt=jt.POLYFILL="P",Ut=jt,Ht=gt.f,Wt=function(t,e){var n,r,i,a,s,l=t.target,u=t.global,c=t.stat;if(n=u?o:c?o[l]||x(l,{}):(o[l]||{}).prototype)for(r in e){if(a=e[r],i=t.noTargetGet?(s=Ht(n,r))&&s.value:n[r],!Ut(u?r:l+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;Rt(a,i)}(t.sham||i&&i.sham)&&w(a,"sham",!0),tt(n,r,a,t)}},Yt=o.Promise,Gt=function(t,e,n){for(var r in e)tt(t,r,e[r],n);return t},Xt=p.f,Kt=L("toStringTag"),$t=function(t,e,n){t&&!S(t=n?t:t.prototype,Kt)&&Xt(t,Kt,{configurable:!0,value:e})},Zt=L("species"),Jt=function(t){var n=mt(t),r=p.f;e&&n&&!n[Zt]&&r(n,Zt,{configurable:!0,get:function(){return this}})},Qt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},te=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ee={},ne=L("iterator"),re=Array.prototype,ie=function(t){return void 0!==t&&(ee.Array===t||re[ne]===t)},oe=function(t,e,n){if(Qt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},ae=L("iterator"),se=function(t){if(null!=t)return t[ae]||t["@@iterator"]||ee[ot(t)]},le=function(t,e,n,r){try{return r?e(h(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&h(i.call(t)),e}},ue=r((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,s,l,u,c,d,f,p=oe(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(s=se(t)))throw TypeError("Target is not iterable");if(ie(s)){for(l=0,u=Et(t.length);u>l;l++)if((c=i?p(h(f=t[l])[0],f[1]):p(t[l]))&&c instanceof e)return c;return new e(!1)}a=s.call(t)}for(d=a.next;!(f=d.call(a)).done;)if("object"==typeof(c=le(a,p,f.value,i))&&c&&c instanceof e)return c;return new e(!1)}).stop=function(t){return new e(!0,t)}})),ce=L("iterator"),he=!1;try{var de=0,fe={next:function(){return{done:!!de++}},return:function(){he=!0}};fe[ce]=function(){return this},Array.from(fe,(function(){throw 2}))}catch(My){}var pe,ge,ve,ye=function(t,e){if(!e&&!he)return!1;var n=!1;try{var r={};r[ce]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},me=L("species"),be=function(t,e){var n,r=h(t).constructor;return void 0===r||null==(n=h(r)[me])?e:Qt(n)},we=mt("document","documentElement"),xe=mt("navigator","userAgent")||"",_e=/(iphone|ipod|ipad).*applewebkit/i.test(xe),Ee=o.location,ke=o.setImmediate,Se=o.clearImmediate,Ce=o.process,Te=o.MessageChannel,Ne=o.Dispatch,Oe=0,Pe={},Me=function(t){if(Pe.hasOwnProperty(t)){var e=Pe[t];delete Pe[t],e()}},De=function(t){return function(){Me(t)}},Ae=function(t){Me(t.data)},Le=function(t){o.postMessage(t+"",Ee.protocol+"//"+Ee.host)};ke&&Se||(ke=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Pe[++Oe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},pe(Oe),Oe},Se=function(t){delete Pe[t]},"process"==nt(Ce)?pe=function(t){Ce.nextTick(De(t))}:Ne&&Ne.now?pe=function(t){Ne.now(De(t))}:Te&&!_e?(ve=(ge=new Te).port2,ge.port1.onmessage=Ae,pe=oe(ve.postMessage,ve,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||t(Le)||"file:"===Ee.protocol?pe="onreadystatechange"in u("script")?function(t){we.appendChild(u("script")).onreadystatechange=function(){we.removeChild(this),Me(t)}}:function(t){setTimeout(De(t),0)}:(pe=Le,o.addEventListener("message",Ae,!1)));var Ie,Re,Be,je,Fe,ze,Ve,qe,Ue={set:ke,clear:Se},He=gt.f,We=Ue.set,Ye=o.MutationObserver||o.WebKitMutationObserver,Ge=o.process,Xe=o.Promise,Ke="process"==nt(Ge),$e=He(o,"queueMicrotask"),Ze=$e&&$e.value;Ze||(Ie=function(){var t,e;for(Ke&&(t=Ge.domain)&&t.exit();Re;){e=Re.fn,Re=Re.next;try{e()}catch(t){throw Re?je():Be=void 0,t}}Be=void 0,t&&t.enter()},Ke?je=function(){Ge.nextTick(Ie)}:Ye&&!_e?(Fe=!0,ze=document.createTextNode(""),new Ye(Ie).observe(ze,{characterData:!0}),je=function(){ze.data=Fe=!Fe}):Xe&&Xe.resolve?(Ve=Xe.resolve(void 0),qe=Ve.then,je=function(){qe.call(Ve,Ie)}):je=function(){We.call(o,Ie)});var Je,Qe,tn=Ze||function(t){var e={fn:t,next:void 0};Be&&(Be.next=e),Re||(Re=e,je()),Be=e},en=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Qt(e),this.reject=Qt(n)},nn={f:function(t){return new en(t)}},rn=function(t,e){if(h(t),a(e)&&e.constructor===t)return e;var n=nn.f(t);return(0,n.resolve)(e),n.promise},on=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},an=o.process,sn=an&&an.versions,ln=sn&&sn.v8;ln?Qe=(Je=ln.split("."))[0]+Je[1]:xe&&(!(Je=xe.match(/Edge\/(\d+)/))||Je[1]>=74)&&(Je=xe.match(/Chrome\/(\d+)/))&&(Qe=Je[1]);var un,cn,hn,dn,fn=Qe&&+Qe,pn=Ue.set,gn=L("species"),vn="Promise",yn=Q.get,mn=Q.set,bn=Q.getterFor(vn),wn=Yt,xn=o.TypeError,_n=o.document,En=o.process,kn=mt("fetch"),Sn=nn.f,Cn=Sn,Tn="process"==nt(En),Nn=!!(_n&&_n.createEvent&&o.dispatchEvent),On=Ut(vn,(function(){if(!(V(wn)!==String(wn))){if(66===fn)return!0;if(!Tn&&"function"!=typeof PromiseRejectionEvent)return!0}if(fn>=51&&/native code/.test(wn))return!1;var t=wn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[gn]=e,!(t.then((function(){}))instanceof e)})),Pn=On||!ye((function(t){wn.all(t).catch((function(){}))})),Mn=function(t){var e;return!(!a(t)||"function"!=typeof(e=t.then))&&e},Dn=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;tn((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var s,l,u,c=r[a++],h=o?c.ok:c.fail,d=c.resolve,f=c.reject,p=c.domain;try{h?(o||(2===e.rejection&&Rn(t,e),e.rejection=1),!0===h?s=i:(p&&p.enter(),s=h(i),p&&(p.exit(),u=!0)),s===c.promise?f(xn("Promise-chain cycle")):(l=Mn(s))?l.call(s,d,f):d(s)):f(i)}catch(t){p&&!u&&p.exit(),f(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Ln(t,e)}))}},An=function(t,e,n){var r,i;Nn?((r=_n.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),o.dispatchEvent(r)):r={promise:e,reason:n},(i=o["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=o.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Ln=function(t,e){pn.call(o,(function(){var n,r=e.value;if(In(e)&&(n=on((function(){Tn?En.emit("unhandledRejection",r,t):An("unhandledrejection",t,r)})),e.rejection=Tn||In(e)?2:1,n.error))throw n.value}))},In=function(t){return 1!==t.rejection&&!t.parent},Rn=function(t,e){pn.call(o,(function(){Tn?En.emit("rejectionHandled",t):An("rejectionhandled",t,e.value)}))},Bn=function(t,e,n,r){return function(i){t(e,n,i,r)}},jn=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Dn(t,e,!0))},Fn=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw xn("Promise can't be resolved itself");var i=Mn(n);i?tn((function(){var r={done:!1};try{i.call(n,Bn(Fn,t,r,e),Bn(jn,t,r,e))}catch(n){jn(t,r,n,e)}})):(e.value=n,e.state=1,Dn(t,e,!1))}catch(n){jn(t,{done:!1},n,e)}}};On&&(wn=function(t){te(this,wn,vn),Qt(t),un.call(this);var e=yn(this);try{t(Bn(Fn,this,e),Bn(jn,this,e))}catch(t){jn(this,e,t)}},(un=function(t){mn(this,{type:vn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Gt(wn.prototype,{then:function(t,e){var n=bn(this),r=Sn(be(this,wn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Tn?En.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Dn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),cn=function(){var t=new un,e=yn(t);this.promise=t,this.resolve=Bn(Fn,t,e),this.reject=Bn(jn,t,e)},nn.f=Sn=function(t){return t===wn||t===hn?new cn(t):Cn(t)},"function"==typeof Yt&&(dn=Yt.prototype.then,tt(Yt.prototype,"then",(function(t,e){var n=this;return new wn((function(t,e){dn.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof kn&&Wt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return rn(wn,kn.apply(o,arguments))}}))),Wt({global:!0,wrap:!0,forced:On},{Promise:wn}),$t(wn,vn,!1),Jt(vn),hn=mt(vn),Wt({target:vn,stat:!0,forced:On},{reject:function(t){var e=Sn(this);return e.reject.call(void 0,t),e.promise}}),Wt({target:vn,stat:!0,forced:On},{resolve:function(t){return rn(this,t)}}),Wt({target:vn,stat:!0,forced:Pn},{all:function(t){var e=this,n=Sn(e),r=n.resolve,i=n.reject,o=on((function(){var n=Qt(e.resolve),o=[],a=0,s=1;ue(t,(function(t){var l=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Sn(e),r=n.reject,i=on((function(){var i=Qt(e.resolve);ue(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var zn=!!Yt&&t((function(){Yt.prototype.finally.call({then:function(){}},(function(){}))}));Wt({target:"Promise",proto:!0,real:!0,forced:zn},{finally:function(t){var e=be(this,mt("Promise")),n="function"==typeof t;return this.then(n?function(n){return rn(e,t()).then((function(){return n}))}:t,n?function(n){return rn(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof Yt||Yt.prototype.finally||tt(Yt.prototype,"finally",mt("Promise").prototype.finally);var Vn=[].slice,qn=/MSIE .\./.test(xe),Un=function(t){return function(e,n){var r=arguments.length>2,i=r?Vn.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t,e,n){return e&&Gn(t.prototype,e),n&&Gn(t,n),t}function Kn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zn(t,e)}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Qn(t,e,n){return(Qn=Jn()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Zn(i,n.prototype),i}).apply(null,arguments)}function tr(t){var e="function"==typeof Map?new Map:void 0;return(tr=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Qn(t,arguments,$n(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Zn(n,t)})(t)}function er(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?er(t):e}function rr(t){var e=Jn();return function(){var n,r=$n(t);if(e){var i=$n(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nr(this,n)}}function ir(t,e,n){return(ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function or(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function ar(t){return function(t){if(Array.isArray(t))return lr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||sr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(t,e){if(t){if("string"==typeof t)return lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lr(t,e):void 0}}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ur(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=sr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}Wt({global:!0,bind:!0,forced:qn},{setTimeout:Un(o.setTimeout),setInterval:Un(o.setInterval)});var cr,hr=Array.isArray||function(t){return"Array"==nt(t)},dr=function(t){return Object(dt(t))},fr=Object.keys||function(t){return Pt(t,Mt)},pr=e?Object.defineProperties:function(t,e){h(t);for(var n,r=fr(e),i=r.length,o=0;i>o;)p.f(t,n=r[o++],e[n]);return t},gr=W("IE_PROTO"),vr=function(){},yr=function(t){return"<script>"+t+"<\/script>"},mr=function(){try{cr=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;mr=cr?function(t){t.write(yr("")),t.close();var e=t.parentWindow.Object;return t=null,e}(cr):((e=u("iframe")).style.display="none",we.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(yr("document.F=Object")),t.close(),t.F);for(var n=Mt.length;n--;)delete mr.prototype[Mt[n]];return mr()};Y[gr]=!0;var br=Object.create||function(t,e){var n;return null!==t?(vr.prototype=h(t),n=new vr,vr.prototype=null,n[gr]=t):n=mr(),void 0===e?n:pr(n,e)},wr=At.f,xr={}.toString,_r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Er={f:function(t){return _r&&"[object Window]"==xr.call(t)?function(t){try{return wr(t)}catch(t){return _r.slice()}}(t):wr(ft(t))}},kr={f:L},Sr=p.f,Cr=function(t){var e=vt.Symbol||(vt.Symbol={});S(e,t)||Sr(e,t,{value:kr.f(t)})},Tr=L("species"),Nr=function(t,e){var n;return hr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!hr(n.prototype)?a(n)&&null===(n=n[Tr])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Or=[].push,Pr=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,l,u,c){for(var h,d,f=dr(s),p=ht(f),g=oe(l,u,3),v=Et(p.length),y=0,m=c||Nr,b=e?m(s,v):n?m(s,0):void 0;v>y;y++)if((a||y in p)&&(d=g(h=p[y],y,f),t))if(e)b[y]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:Or.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}},Mr={forEach:Pr(0),map:Pr(1),filter:Pr(2),some:Pr(3),every:Pr(4),find:Pr(5),findIndex:Pr(6)},Dr=Mr.forEach,Ar=W("hidden"),Lr=L("toPrimitive"),Ir=Q.set,Rr=Q.getterFor("Symbol"),Br=Object.prototype,jr=o.Symbol,Fr=mt("JSON","stringify"),zr=gt.f,Vr=p.f,qr=Er.f,Ur=ut.f,Hr=E("symbols"),Wr=E("op-symbols"),Yr=E("string-to-symbol-registry"),Gr=E("symbol-to-string-registry"),Xr=E("wks"),Kr=o.QObject,$r=!Kr||!Kr.prototype||!Kr.prototype.findChild,Zr=e&&t((function(){return 7!=br(Vr({},"a",{get:function(){return Vr(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=zr(Br,e);r&&delete Br[e],Vr(t,e,n),r&&t!==Br&&Vr(Br,e,r)}:Vr,Jr=function(t,n){var r=Hr[t]=br(jr.prototype);return Ir(r,{type:"Symbol",tag:t,description:n}),e||(r.description=n),r},Qr=P?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof jr},ti=function(t,e,n){t===Br&&ti(Wr,e,n),h(t);var r=d(e,!0);return h(n),S(Hr,r)?(n.enumerable?(S(t,Ar)&&t[Ar][r]&&(t[Ar][r]=!1),n=br(n,{enumerable:b(0,!1)})):(S(t,Ar)||Vr(t,Ar,b(1,{})),t[Ar][r]=!0),Zr(t,r,n)):Vr(t,r,n)},ei=function(t,n){h(t);var r=ft(n),i=fr(r).concat(oi(r));return Dr(i,(function(n){e&&!ni.call(r,n)||ti(t,n,r[n])})),t},ni=function(t){var e=d(t,!0),n=Ur.call(this,e);return!(this===Br&&S(Hr,e)&&!S(Wr,e))&&(!(n||!S(this,e)||!S(Hr,e)||S(this,Ar)&&this[Ar][e])||n)},ri=function(t,e){var n=ft(t),r=d(e,!0);if(n!==Br||!S(Hr,r)||S(Wr,r)){var i=zr(n,r);return!i||!S(Hr,r)||S(n,Ar)&&n[Ar][r]||(i.enumerable=!0),i}},ii=function(t){var e=qr(ft(t)),n=[];return Dr(e,(function(t){S(Hr,t)||S(Y,t)||n.push(t)})),n},oi=function(t){var e=t===Br,n=qr(e?Wr:ft(t)),r=[];return Dr(n,(function(t){!S(Hr,t)||e&&!S(Br,t)||r.push(Hr[t])})),r};if(O||(tt((jr=function(){if(this instanceof jr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,n=N(t),r=function(t){this===Br&&r.call(Wr,t),S(this,Ar)&&S(this[Ar],n)&&(this[Ar][n]=!1),Zr(this,n,b(1,t))};return e&&$r&&Zr(Br,n,{configurable:!0,set:r}),Jr(n,t)}).prototype,"toString",(function(){return Rr(this).tag})),tt(jr,"withoutSetter",(function(t){return Jr(N(t),t)})),ut.f=ni,p.f=ti,gt.f=ri,At.f=Er.f=ii,Lt.f=oi,kr.f=function(t){return Jr(L(t),t)},e&&(Vr(jr.prototype,"description",{configurable:!0,get:function(){return Rr(this).description}}),tt(Br,"propertyIsEnumerable",ni,{unsafe:!0}))),Wt({global:!0,wrap:!0,forced:!O,sham:!O},{Symbol:jr}),Dr(fr(Xr),(function(t){Cr(t)})),Wt({target:"Symbol",stat:!0,forced:!O},{for:function(t){var e=String(t);if(S(Yr,e))return Yr[e];var n=jr(e);return Yr[e]=n,Gr[n]=e,n},keyFor:function(t){if(!Qr(t))throw TypeError(t+" is not a symbol");if(S(Gr,t))return Gr[t]},useSetter:function(){$r=!0},useSimple:function(){$r=!1}}),Wt({target:"Object",stat:!0,forced:!O,sham:!e},{create:function(t,e){return void 0===e?br(t):ei(br(t),e)},defineProperty:ti,defineProperties:ei,getOwnPropertyDescriptor:ri}),Wt({target:"Object",stat:!0,forced:!O},{getOwnPropertyNames:ii,getOwnPropertySymbols:oi}),Wt({target:"Object",stat:!0,forced:t((function(){Lt.f(1)}))},{getOwnPropertySymbols:function(t){return Lt.f(dr(t))}}),Fr){var ai=!O||t((function(){var t=jr();return"[null]"!=Fr([t])||"{}"!=Fr({a:t})||"{}"!=Fr(Object(t))}));Wt({target:"JSON",stat:!0,forced:ai},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(a(e)||void 0!==t)&&!Qr(t))return hr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Qr(e))return e}),i[1]=e,Fr.apply(null,i)}})}jr.prototype[Lr]||w(jr.prototype,Lr,jr.prototype.valueOf),$t(jr,"Symbol"),Y[Ar]=!0,Cr("asyncIterator");var si=p.f,li=o.Symbol;if(e&&"function"==typeof li&&(!("description"in li.prototype)||void 0!==li().description)){var ui={},ci=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof ci?new li(t):void 0===t?li():li(t);return""===t&&(ui[e]=!0),e};Rt(ci,li);var hi=ci.prototype=li.prototype;hi.constructor=ci;var di=hi.toString,fi="Symbol(test)"==String(li("test")),pi=/^Symbol\((.*)\)[^)]+$/;si(hi,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=di.call(t);if(S(ui,t))return"";var n=fi?e.slice(7,-1):e.replace(pi,"$1");return""===n?void 0:n}}),Wt({global:!0,forced:!0},{Symbol:ci})}Cr("hasInstance"),Cr("isConcatSpreadable"),Cr("iterator"),Cr("match"),Cr("matchAll"),Cr("replace"),Cr("search"),Cr("species"),Cr("split"),Cr("toPrimitive"),Cr("toStringTag"),Cr("unscopables");var gi=Object.assign,vi=Object.defineProperty,yi=!gi||t((function(){if(e&&1!==gi({b:1},gi(vi({},"a",{enumerable:!0,get:function(){vi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},n={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),7!=gi({},t)[r]||"abcdefghijklmnopqrst"!=fr(gi({},n)).join("")}))?function(t,n){for(var r=dr(t),i=arguments.length,o=1,a=Lt.f,s=ut.f;i>o;)for(var l,u=ht(arguments[o++]),c=a?fr(u).concat(a(u)):fr(u),h=c.length,d=0;h>d;)l=c[d++],e&&!s.call(u,l)||(r[l]=u[l]);return r}:gi;Wt({target:"Object",stat:!0,forced:Object.assign!==yi},{assign:yi}),Wt({target:"Object",stat:!0,sham:!e},{create:br}),Wt({target:"Object",stat:!0,forced:!e,sham:!e},{defineProperty:p.f}),Wt({target:"Object",stat:!0,forced:!e,sham:!e},{defineProperties:pr});var mi=ut.f,bi=function(t){return function(n){for(var r,i=ft(n),o=fr(i),a=o.length,s=0,l=[];a>s;)r=o[s++],e&&!mi.call(i,r)||l.push(t?[r,i[r]]:i[r]);return l}},wi={entries:bi(!0),values:bi(!1)},xi=wi.entries;Wt({target:"Object",stat:!0},{entries:function(t){return xi(t)}});var _i=!t((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ei=r((function(t){var e=p.f,n=N("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!S(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!S(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return _i&&s.REQUIRED&&i(t)&&!S(t,n)&&o(t),t}};Y[n]=!0})),ki=Ei.onFreeze,Si=Object.freeze,Ci=t((function(){Si(1)}));Wt({target:"Object",stat:!0,forced:Ci,sham:!_i},{freeze:function(t){return Si&&a(t)?Si(ki(t)):t}});var Ti=function(t,e,n){var r=d(e);r in t?p.f(t,r,b(0,n)):t[r]=n};Wt({target:"Object",stat:!0},{fromEntries:function(t){var e={};return ue(t,(function(t,n){Ti(e,t,n)}),void 0,!0),e}});var Ni=gt.f,Oi=t((function(){Ni(1)}));Wt({target:"Object",stat:!0,forced:!e||Oi,sham:!e},{getOwnPropertyDescriptor:function(t,e){return Ni(ft(t),e)}}),Wt({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(t){for(var e,n,r=ft(t),i=gt.f,o=It(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&Ti(a,e,n);return a}});var Pi=Er.f,Mi=t((function(){return!Object.getOwnPropertyNames(1)}));Wt({target:"Object",stat:!0,forced:Mi},{getOwnPropertyNames:Pi});var Di=!t((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ai=W("IE_PROTO"),Li=Object.prototype,Ii=Di?Object.getPrototypeOf:function(t){return t=dr(t),S(t,Ai)?t[Ai]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Li:null},Ri=t((function(){Ii(1)}));Wt({target:"Object",stat:!0,forced:Ri,sham:!Di},{getPrototypeOf:function(t){return Ii(dr(t))}});var Bi=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};Wt({target:"Object",stat:!0},{is:Bi});var ji=Object.isExtensible,Fi=t((function(){ji(1)}));Wt({target:"Object",stat:!0,forced:Fi},{isExtensible:function(t){return!!a(t)&&(!ji||ji(t))}});var zi=Object.isFrozen,Vi=t((function(){zi(1)}));Wt({target:"Object",stat:!0,forced:Vi},{isFrozen:function(t){return!a(t)||!!zi&&zi(t)}});var qi=Object.isSealed,Ui=t((function(){qi(1)}));Wt({target:"Object",stat:!0,forced:Ui},{isSealed:function(t){return!a(t)||!!qi&&qi(t)}});var Hi=t((function(){fr(1)}));Wt({target:"Object",stat:!0,forced:Hi},{keys:function(t){return fr(dr(t))}});var Wi=Ei.onFreeze,Yi=Object.preventExtensions,Gi=t((function(){Yi(1)}));Wt({target:"Object",stat:!0,forced:Gi,sham:!_i},{preventExtensions:function(t){return Yi&&a(t)?Yi(Wi(t)):t}});var Xi=Ei.onFreeze,Ki=Object.seal,$i=t((function(){Ki(1)}));Wt({target:"Object",stat:!0,forced:$i,sham:!_i},{seal:function(t){return Ki&&a(t)?Ki(Xi(t)):t}});var Zi=function(t){if(!a(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},Ji=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return h(n),Zi(r),e?t.call(n,r):n.__proto__=r,n}}():void 0);Wt({target:"Object",stat:!0},{setPrototypeOf:Ji});var Qi=wi.values;Wt({target:"Object",stat:!0},{values:function(t){return Qi(t)}});var to=!t((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete o[t]}));e&&Wt({target:"Object",proto:!0,forced:to},{__defineGetter__:function(t,e){p.f(dr(this),t,{get:Qt(e),enumerable:!0,configurable:!0})}}),e&&Wt({target:"Object",proto:!0,forced:to},{__defineSetter__:function(t,e){p.f(dr(this),t,{set:Qt(e),enumerable:!0,configurable:!0})}});var eo=gt.f;e&&Wt({target:"Object",proto:!0,forced:to},{__lookupGetter__:function(t){var e,n=dr(this),r=d(t,!0);do{if(e=eo(n,r))return e.get}while(n=Ii(n))}});var no=gt.f;e&&Wt({target:"Object",proto:!0,forced:to},{__lookupSetter__:function(t){var e,n=dr(this),r=d(t,!0);do{if(e=no(n,r))return e.set}while(n=Ii(n))}});var ro=[].slice,io={},oo=function(t,e,n){if(!(e in io)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";io[e]=Function("C,a","return new C("+r.join(",")+")")}return io[e](t,n)},ao=Function.bind||function(t){var e=Qt(this),n=ro.call(arguments,1),r=function(){var i=n.concat(ro.call(arguments));return this instanceof r?oo(e,i.length,i):e.apply(t,i)};return a(e.prototype)&&(r.prototype=e.prototype),r};Wt({target:"Function",proto:!0},{bind:ao});var so=L("hasInstance"),lo=Function.prototype;so in lo||p.f(lo,so,{value:function(t){if("function"!=typeof this||!a(t))return!1;if(!a(this.prototype))return t instanceof this;for(;t=Ii(t);)if(this.prototype===t)return!0;return!1}}),Wt({global:!0},{globalThis:o});var uo=function(t){var e,n,r,i,o,a,s=dr(t),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,d=se(s),f=0;if(h&&(c=oe(c,u>2?arguments[2]:void 0,2)),null==d||l==Array&&ie(d))for(n=new l(e=Et(s.length));e>f;f++)a=h?c(s[f],f):s[f],Ti(n,f,a);else for(o=(i=d.call(s)).next,n=new l;!(r=o.call(i)).done;f++)a=h?le(i,c,[r.value,f],!0):r.value,Ti(n,f,a);return n.length=f,n},co=!ye((function(t){Array.from(t)}));Wt({target:"Array",stat:!0,forced:co},{from:uo}),Wt({target:"Array",stat:!0},{isArray:hr});var ho=t((function(){function t(){}return!(Array.of.call(t)instanceof t)}));Wt({target:"Array",stat:!0,forced:ho},{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)Ti(n,t,arguments[t++]);return n.length=e,n}});var fo=L("species"),po=function(e){return fn>=51||!t((function(){var t=[];return(t.constructor={})[fo]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},go=L("isConcatSpreadable"),vo=fn>=51||!t((function(){var t=[];return t[go]=!1,t.concat()[0]!==t})),yo=po("concat"),mo=function(t){if(!a(t))return!1;var e=t[go];return void 0!==e?!!e:hr(t)};Wt({target:"Array",proto:!0,forced:!vo||!yo},{concat:function(t){var e,n,r,i,o,a=dr(this),s=Nr(a,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(mo(o=-1===e?a:arguments[e])){if(l+(i=Et(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,l++)n in o&&Ti(s,l,o[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Ti(s,l++,o)}return s.length=l,s}});var bo=Math.min,wo=[].copyWithin||function(t,e){var n=dr(this),r=Et(n.length),i=Ct(t,r),o=Ct(e,r),a=arguments.length>2?arguments[2]:void 0,s=bo((void 0===a?r:Ct(a,r))-o,r-i),l=1;for(o<i&&i<o+s&&(l=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=l,o+=l;return n},xo=L("unscopables"),_o=Array.prototype;null==_o[xo]&&p.f(_o,xo,{configurable:!0,value:br(null)});var Eo=function(t){_o[xo][t]=!0};Wt({target:"Array",proto:!0},{copyWithin:wo}),Eo("copyWithin");var ko=function(e,n){var r=[][e];return!!r&&t((function(){r.call(null,n||function(){throw 1},1)}))},So=Object.defineProperty,Co={},To=function(t){throw t},No=function(n,r){if(S(Co,n))return Co[n];r||(r={});var i=[][n],o=!!S(r,"ACCESSORS")&&r.ACCESSORS,a=S(r,0)?r[0]:To,s=S(r,1)?r[1]:void 0;return Co[n]=!!i&&!t((function(){if(o&&!e)return!0;var t={length:-1};o?So(t,1,{enumerable:!0,get:To}):t[1]=1,i.call(t,a,s)}))},Oo=Mr.every,Po=ko("every"),Mo=No("every");Wt({target:"Array",proto:!0,forced:!Po||!Mo},{every:function(t){return Oo(this,t,arguments.length>1?arguments[1]:void 0)}});var Do=function(t){for(var e=dr(this),n=Et(e.length),r=arguments.length,i=Ct(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:Ct(o,n);a>i;)e[i++]=t;return e};Wt({target:"Array",proto:!0},{fill:Do}),Eo("fill");var Ao=Mr.filter,Lo=po("filter"),Io=No("filter");Wt({target:"Array",proto:!0,forced:!Lo||!Io},{filter:function(t){return Ao(this,t,arguments.length>1?arguments[1]:void 0)}});var Ro=Mr.find,Bo=!0,jo=No("find");"find"in[]&&Array(1).find((function(){Bo=!1})),Wt({target:"Array",proto:!0,forced:Bo||!jo},{find:function(t){return Ro(this,t,arguments.length>1?arguments[1]:void 0)}}),Eo("find");var Fo=Mr.findIndex,zo=!0,Vo=No("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){zo=!1})),Wt({target:"Array",proto:!0,forced:zo||!Vo},{findIndex:function(t){return Fo(this,t,arguments.length>1?arguments[1]:void 0)}}),Eo("findIndex");var qo=function(t,e,n,r,i,o,a,s){for(var l,u=i,c=0,h=!!a&&oe(a,s,3);c<r;){if(c in n){if(l=h?h(n[c],c,e):n[c],o>0&&hr(l))u=qo(t,e,l,Et(l.length),u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[u]=l}u++}c++}return u},Uo=qo;Wt({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=dr(this),n=Et(e.length),r=Nr(e,0);return r.length=Uo(r,e,e,n,0,void 0===t?1:xt(t)),r}}),Wt({target:"Array",proto:!0},{flatMap:function(t){var e,n=dr(this),r=Et(n.length);return Qt(t),(e=Nr(n,0)).length=Uo(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var Ho=Mr.forEach,Wo=ko("forEach"),Yo=No("forEach"),Go=Wo&&Yo?[].forEach:function(t){return Ho(this,t,arguments.length>1?arguments[1]:void 0)};Wt({target:"Array",proto:!0,forced:[].forEach!=Go},{forEach:Go});var Xo=Nt.includes,Ko=No("indexOf",{ACCESSORS:!0,1:0});Wt({target:"Array",proto:!0,forced:!Ko},{includes:function(t){return Xo(this,t,arguments.length>1?arguments[1]:void 0)}}),Eo("includes");var $o=Nt.indexOf,Zo=[].indexOf,Jo=!!Zo&&1/[1].indexOf(1,-0)<0,Qo=ko("indexOf"),ta=No("indexOf",{ACCESSORS:!0,1:0});Wt({target:"Array",proto:!0,forced:Jo||!Qo||!ta},{indexOf:function(t){return Jo?Zo.apply(this,arguments)||0:$o(this,t,arguments.length>1?arguments[1]:void 0)}});var ea=[].join,na=ht!=Object,ra=ko("join",",");Wt({target:"Array",proto:!0,forced:na||!ra},{join:function(t){return ea.call(ft(this),void 0===t?",":t)}});var ia=Math.min,oa=[].lastIndexOf,aa=!!oa&&1/[1].lastIndexOf(1,-0)<0,sa=ko("lastIndexOf"),la=No("indexOf",{ACCESSORS:!0,1:0}),ua=aa||!sa||!la?function(t){if(aa)return oa.apply(this,arguments)||0;var e=ft(this),n=Et(e.length),r=n-1;for(arguments.length>1&&(r=ia(r,xt(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:oa;Wt({target:"Array",proto:!0,forced:ua!==[].lastIndexOf},{lastIndexOf:ua});var ca=Mr.map,ha=po("map"),da=No("map");Wt({target:"Array",proto:!0,forced:!ha||!da},{map:function(t){return ca(this,t,arguments.length>1?arguments[1]:void 0)}});var fa=function(t){return function(e,n,r,i){Qt(n);var o=dr(e),a=ht(o),s=Et(o.length),l=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(l in a){i=a[l],l+=u;break}if(l+=u,t?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=u)l in a&&(i=n(i,a[l],l,o));return i}},pa={left:fa(!1),right:fa(!0)},ga=pa.left,va=ko("reduce"),ya=No("reduce",{1:0});Wt({target:"Array",proto:!0,forced:!va||!ya},{reduce:function(t){return ga(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ma=pa.right,ba=ko("reduceRight"),wa=No("reduce",{1:0});Wt({target:"Array",proto:!0,forced:!ba||!wa},{reduceRight:function(t){return ma(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var xa=[].reverse,_a=[1,2];Wt({target:"Array",proto:!0,forced:String(_a)===String(_a.reverse())},{reverse:function(){return hr(this)&&(this.length=this.length),xa.call(this)}});var Ea=po("slice"),ka=No("slice",{ACCESSORS:!0,0:0,1:2}),Sa=L("species"),Ca=[].slice,Ta=Math.max;Wt({target:"Array",proto:!0,forced:!Ea||!ka},{slice:function(t,e){var n,r,i,o=ft(this),s=Et(o.length),l=Ct(t,s),u=Ct(void 0===e?s:e,s);if(hr(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!hr(n.prototype)?a(n)&&null===(n=n[Sa])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ca.call(o,l,u);for(r=new(void 0===n?Array:n)(Ta(u-l,0)),i=0;l<u;l++,i++)l in o&&Ti(r,i,o[l]);return r.length=i,r}});var Na=Mr.some,Oa=ko("some"),Pa=No("some");Wt({target:"Array",proto:!0,forced:!Oa||!Pa},{some:function(t){return Na(this,t,arguments.length>1?arguments[1]:void 0)}});var Ma=[],Da=Ma.sort,Aa=t((function(){Ma.sort(void 0)})),La=t((function(){Ma.sort(null)})),Ia=ko("sort");Wt({target:"Array",proto:!0,forced:Aa||!La||!Ia},{sort:function(t){return void 0===t?Da.call(dr(this)):Da.call(dr(this),Qt(t))}});var Ra=po("splice"),Ba=No("splice",{ACCESSORS:!0,0:0,1:2}),ja=Math.max,Fa=Math.min;Wt({target:"Array",proto:!0,forced:!Ra||!Ba},{splice:function(t,e){var n,r,i,o,a,s,l=dr(this),u=Et(l.length),c=Ct(t,u),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=u-c):(n=h-2,r=Fa(ja(xt(e),0),u-c)),u+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=Nr(l,r),o=0;o<r;o++)(a=c+o)in l&&Ti(i,o,l[a]);if(i.length=r,n<r){for(o=c;o<u-r;o++)s=o+n,(a=o+r)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-r+n;o--)delete l[o-1]}else if(n>r)for(o=u-r;o>c;o--)s=o+n-1,(a=o+r-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+c]=arguments[o+2];return l.length=u-r+n,i}}),Jt("Array"),Eo("flat"),Eo("flatMap");var za,Va,qa,Ua=L("iterator"),Ha=!1;[].keys&&("next"in(qa=[].keys())?(Va=Ii(Ii(qa)))!==Object.prototype&&(za=Va):Ha=!0),null==za&&(za={}),S(za,Ua)||w(za,Ua,(function(){return this}));var Wa={IteratorPrototype:za,BUGGY_SAFARI_ITERATORS:Ha},Ya=Wa.IteratorPrototype,Ga=function(){return this},Xa=function(t,e,n){var r=e+" Iterator";return t.prototype=br(Ya,{next:b(1,n)}),$t(t,r,!1),ee[r]=Ga,t},Ka=Wa.IteratorPrototype,$a=Wa.BUGGY_SAFARI_ITERATORS,Za=L("iterator"),Ja=function(){return this},Qa=function(t,e,n,r,i,o,a){Xa(n,e,r);var s,l,u,c=function(t){if(t===i&&g)return g;if(!$a&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[Za]||f["@@iterator"]||i&&f[i],g=!$a&&p||c(i),v="Array"==e&&f.entries||p;if(v&&(s=Ii(v.call(new t)),Ka!==Object.prototype&&s.next&&(Ii(s)!==Ka&&(Ji?Ji(s,Ka):"function"!=typeof s[Za]&&w(s,Za,Ja)),$t(s,h,!0))),"values"==i&&p&&"values"!==p.name&&(d=!0,g=function(){return p.call(this)}),f[Za]!==g&&w(f,Za,g),ee[e]=g,i)if(l={values:c("values"),keys:o?g:c("keys"),entries:c("entries")},a)for(u in l)($a||d||!(u in f))&&tt(f,u,l[u]);else Wt({target:e,proto:!0,forced:$a||d},l);return l},ts=Q.set,es=Q.getterFor("Array Iterator"),ns=Qa(Array,"Array",(function(t,e){ts(this,{type:"Array Iterator",target:ft(t),index:0,kind:e})}),(function(){var t=es(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ee.Arguments=ee.Array,Eo("keys"),Eo("values"),Eo("entries");var rs=String.fromCharCode,is=String.fromCodePoint,os=!!is&&1!=is.length;Wt({target:"String",stat:!0,forced:os},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],Ct(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?rs(e):rs(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),Wt({target:"String",stat:!0},{raw:function(t){for(var e=ft(t.raw),n=Et(e.length),r=arguments.length,i=[],o=0;n>o;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}});var as=function(t){return function(e,n){var r,i,o=String(dt(e)),a=xt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},ss={codeAt:as(!1),charAt:as(!0)},ls=ss.codeAt;Wt({target:"String",proto:!0},{codePointAt:function(t){return ls(this,t)}});var us,cs=L("match"),hs=function(t){var e;return a(t)&&(void 0!==(e=t[cs])?!!e:"RegExp"==nt(t))},ds=function(t){if(hs(t))throw TypeError("The method doesn't accept regular expressions");return t},fs=L("match"),ps=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[fs]=!1,"/./"[t](e)}catch(t){}}return!1},gs=gt.f,vs="".endsWith,ys=Math.min,ms=ps("endsWith"),bs=!(ms||(us=gs(String.prototype,"endsWith"),!us||us.writable));Wt({target:"String",proto:!0,forced:!bs&&!ms},{endsWith:function(t){var e=String(dt(this));ds(t);var n=arguments.length>1?arguments[1]:void 0,r=Et(e.length),i=void 0===n?r:ys(Et(n),r),o=String(t);return vs?vs.call(e,o,i):e.slice(i-o.length,i)===o}}),Wt({target:"String",proto:!0,forced:!ps("includes")},{includes:function(t){return!!~String(dt(this)).indexOf(ds(t),arguments.length>1?arguments[1]:void 0)}});var ws=function(){var t=h(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function xs(t,e){return RegExp(t,e)}var _s={UNSUPPORTED_Y:t((function(){var t=xs("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:t((function(){var t=xs("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Es=RegExp.prototype.exec,ks=String.prototype.replace,Ss=Es,Cs=function(){var t=/a/,e=/b*/g;return Es.call(t,"a"),Es.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Ts=_s.UNSUPPORTED_Y||_s.BROKEN_CARET,Ns=void 0!==/()??/.exec("")[1];(Cs||Ns||Ts)&&(Ss=function(t){var e,n,r,i,o=this,a=Ts&&o.sticky,s=ws.call(o),l=o.source,u=0,c=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(l="(?: "+l+")",c=" "+c,u++),n=new RegExp("^(?:"+l+")",s)),Ns&&(n=new RegExp("^"+l+"$(?!\\s)",s)),Cs&&(e=o.lastIndex),r=Es.call(a?n:o,c),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:Cs&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Ns&&r&&r.length>1&&ks.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Os=Ss;Wt({target:"RegExp",proto:!0,forced:/./.exec!==Os},{exec:Os});var Ps=L("species"),Ms=!t((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Ds="$0"==="a".replace(/./,"$0"),As=L("replace"),Ls=!!/./[As]&&""===/./[As]("a","$0"),Is=!t((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Rs=function(e,n,r,i){var o=L(e),a=!t((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),s=a&&!t((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Ps]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!a||!s||"replace"===e&&(!Ms||!Ds||Ls)||"split"===e&&!Is){var l=/./[o],u=r(o,""[e],(function(t,e,n,r,i){return e.exec===Os?a&&!i?{done:!0,value:l.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Ds,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Ls}),c=u[0],h=u[1];tt(String.prototype,e,c),tt(RegExp.prototype,o,2==n?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)})}i&&w(RegExp.prototype[o],"sham",!0)},Bs=ss.charAt,js=function(t,e,n){return e+(n?Bs(t,e).length:1)},Fs=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==nt(t))throw TypeError("RegExp#exec called on incompatible receiver");return Os.call(t,e)};Rs("match",1,(function(t,e,n){return[function(e){var n=dt(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=h(t),o=String(this);if(!i.global)return Fs(i,o);var a=i.unicode;i.lastIndex=0;for(var s,l=[],u=0;null!==(s=Fs(i,o));){var c=String(s[0]);l[u]=c,""===c&&(i.lastIndex=js(o,Et(i.lastIndex),a)),u++}return 0===u?null:l}]}));var zs=L("matchAll"),Vs=Q.set,qs=Q.getterFor("RegExp String Iterator"),Us=RegExp.prototype,Hs=Us.exec,Ws="".matchAll,Ys=!!Ws&&!t((function(){"a".matchAll(/./)})),Gs=Xa((function(t,e,n,r){Vs(this,{type:"RegExp String Iterator",regexp:t,string:e,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var t=qs(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=function(t,e){var n,r=t.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(t,e)))throw TypeError("Incorrect exec result");return n}return Hs.call(t,e)}(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=js(n,Et(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),Xs=function(t){var e,n,r,i,o,a,s=h(this),l=String(t);return e=be(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in Us)&&(n=ws.call(s)),r=void 0===n?"":String(n),i=new e(e===RegExp?s.source:s,r),o=!!~r.indexOf("g"),a=!!~r.indexOf("u"),i.lastIndex=Et(s.lastIndex),new Gs(i,l,o,a)};Wt({target:"String",proto:!0,forced:Ys},{matchAll:function(t){var e,n,r=dt(this);if(null!=t){if(hs(t)&&!~String(dt("flags"in Us?t.flags:ws.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(Ys)return Ws.apply(r,arguments);if(null!=(n=t[zs]))return Qt(n).call(t,r)}else if(Ys)return Ws.apply(r,arguments);return e=String(r),new RegExp(t,"g")[zs](e)}}),zs in Us||w(Us,zs,Xs);var Ks="".repeat||function(t){var e=String(dt(this)),n="",r=xt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},$s=Math.ceil,Zs=function(t){return function(e,n,r){var i,o,a=String(dt(e)),s=a.length,l=void 0===r?" ":String(r),u=Et(n);return u<=s||""==l?a:(i=u-s,(o=Ks.call(l,$s(i/l.length))).length>i&&(o=o.slice(0,i)),t?a+o:o+a)}},Js={start:Zs(!1),end:Zs(!0)},Qs=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(xe),tl=Js.end;Wt({target:"String",proto:!0,forced:Qs},{padEnd:function(t){return tl(this,t,arguments.length>1?arguments[1]:void 0)}});var el=Js.start;Wt({target:"String",proto:!0,forced:Qs},{padStart:function(t){return el(this,t,arguments.length>1?arguments[1]:void 0)}}),Wt({target:"String",proto:!0},{repeat:Ks});var nl=Math.max,rl=Math.min,il=Math.floor,ol=/\$([$&'`]|\d\d?|<[^>]*>)/g,al=/\$([$&'`]|\d\d?)/g;Rs("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=dt(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var l=n(e,t,this,r);if(l.done)return l.value}var u=h(t),c=String(this),d="function"==typeof r;d||(r=String(r));var f=u.global;if(f){var p=u.unicode;u.lastIndex=0}for(var g=[];;){var v=Fs(u,c);if(null===v)break;if(g.push(v),!f)break;""===String(v[0])&&(u.lastIndex=js(c,Et(u.lastIndex),p))}for(var y,m="",b=0,w=0;w<g.length;w++){v=g[w];for(var x=String(v[0]),_=nl(rl(xt(v.index),c.length),0),E=[],k=1;k<v.length;k++)E.push(void 0===(y=v[k])?y:String(y));var S=v.groups;if(d){var C=[x].concat(E,_,c);void 0!==S&&C.push(S);var T=String(r.apply(void 0,C))}else T=s(x,c,_,E,S,r);_>=b&&(m+=c.slice(b,_)+T,b=_+x.length)}return m+c.slice(b)}];function s(t,n,r,i,o,a){var s=r+t.length,l=i.length,u=al;return void 0!==o&&(o=dr(o),u=ol),e.call(a,u,(function(e,a){var u;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":u=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return e;if(c>l){var h=il(c/10);return 0===h?e:h<=l?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):e}u=i[c-1]}return void 0===u?"":u}))}})),Rs("search",1,(function(t,e,n){return[function(e){var n=dt(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=h(t),o=String(this),a=i.lastIndex;Bi(a,0)||(i.lastIndex=0);var s=Fs(i,o);return Bi(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var sl=[].push,ll=Math.min,ul=!t((function(){return!RegExp(4294967295,"y")}));Rs("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(dt(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!hs(t))return e.call(r,t,i);for(var o,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,u+"g");(o=Os.call(h,r))&&!((a=h.lastIndex)>c&&(l.push(r.slice(c,o.index)),o.length>1&&o.index<r.length&&sl.apply(l,o.slice(1)),s=o[0].length,c=a,l.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?!s&&h.test("")||l.push(""):l.push(r.slice(c)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=dt(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=h(t),s=String(this),l=be(a,RegExp),u=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ul?"y":"g"),d=new l(ul?a:"^(?:"+a.source+")",c),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===s.length)return null===Fs(d,s)?[s]:[];for(var p=0,g=0,v=[];g<s.length;){d.lastIndex=ul?g:0;var y,m=Fs(d,ul?s:s.slice(g));if(null===m||(y=ll(Et(d.lastIndex+(ul?0:g)),s.length))===p)g=js(s,g,u);else{if(v.push(s.slice(p,g)),v.length===f)return v;for(var b=1;b<=m.length-1;b++)if(v.push(m[b]),v.length===f)return v;g=p=y}}return v.push(s.slice(p)),v}]}),!ul);var cl=gt.f,hl="".startsWith,dl=Math.min,fl=ps("startsWith"),pl=!fl&&!!function(){var t=cl(String.prototype,"startsWith");return t&&!t.writable}();Wt({target:"String",proto:!0,forced:!pl&&!fl},{startsWith:function(t){var e=String(dt(this));ds(t);var n=Et(dl(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return hl?hl.call(e,r,n):e.slice(n,n+r.length)===r}});var gl="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",vl="["+gl+"]",yl=RegExp("^"+vl+vl+"*"),ml=RegExp(vl+vl+"*$"),bl=function(t){return function(e){var n=String(dt(e));return 1&t&&(n=n.replace(yl,"")),2&t&&(n=n.replace(ml,"")),n}},wl={start:bl(1),end:bl(2),trim:bl(3)},xl=function(e){return t((function(){return!!gl[e]()||"âÂá "!="âÂá "[e]()||gl[e].name!==e}))},_l=wl.trim;Wt({target:"String",proto:!0,forced:xl("trim")},{trim:function(){return _l(this)}});var El=wl.start,kl=xl("trimStart"),Sl=kl?function(){return El(this)}:"".trimStart;Wt({target:"String",proto:!0,forced:kl},{trimStart:Sl,trimLeft:Sl});var Cl=wl.end,Tl=xl("trimEnd"),Nl=Tl?function(){return Cl(this)}:"".trimEnd;Wt({target:"String",proto:!0,forced:Tl},{trimEnd:Nl,trimRight:Nl});var Ol=ss.charAt,Pl=Q.set,Ml=Q.getterFor("String Iterator");Qa(String,"String",(function(t){Pl(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Ml(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ol(n,r),e.index+=t.length,{value:t,done:!1})}));var Dl=/"/g,Al=function(t,e,n,r){var i=String(dt(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(Dl,"&quot;")+'"'),o+">"+i+"</"+e+">"},Ll=function(e){return t((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};Wt({target:"String",proto:!0,forced:Ll("anchor")},{anchor:function(t){return Al(this,"a","name",t)}}),Wt({target:"String",proto:!0,forced:Ll("big")},{big:function(){return Al(this,"big","","")}}),Wt({target:"String",proto:!0,forced:Ll("blink")},{blink:function(){return Al(this,"blink","","")}}),Wt({target:"String",proto:!0,forced:Ll("bold")},{bold:function(){return Al(this,"b","","")}}),Wt({target:"String",proto:!0,forced:Ll("fixed")},{fixed:function(){return Al(this,"tt","","")}}),Wt({target:"String",proto:!0,forced:Ll("fontcolor")},{fontcolor:function(t){return Al(this,"font","color",t)}}),Wt({target:"String",proto:!0,forced:Ll("fontsize")},{fontsize:function(t){return Al(this,"font","size",t)}}),Wt({target:"String",proto:!0,forced:Ll("italics")},{italics:function(){return Al(this,"i","","")}}),Wt({target:"String",proto:!0,forced:Ll("link")},{link:function(t){return Al(this,"a","href",t)}}),Wt({target:"String",proto:!0,forced:Ll("small")},{small:function(){return Al(this,"small","","")}}),Wt({target:"String",proto:!0,forced:Ll("strike")},{strike:function(){return Al(this,"strike","","")}}),Wt({target:"String",proto:!0,forced:Ll("sub")},{sub:function(){return Al(this,"sub","","")}}),Wt({target:"String",proto:!0,forced:Ll("sup")},{sup:function(){return Al(this,"sup","","")}});var Il=function(t,e,n){var r,i;return Ji&&"function"==typeof(r=e.constructor)&&r!==n&&a(i=r.prototype)&&i!==n.prototype&&Ji(t,i),t},Rl=p.f,Bl=At.f,jl=Q.set,Fl=L("match"),zl=o.RegExp,Vl=zl.prototype,ql=/a/g,Ul=/a/g,Hl=new zl(ql)!==ql,Wl=_s.UNSUPPORTED_Y;if(e&&Ut("RegExp",!Hl||Wl||t((function(){return Ul[Fl]=!1,zl(ql)!=ql||zl(Ul)==Ul||"/a/i"!=zl(ql,"i")})))){for(var Yl=function(t,e){var n,r=this instanceof Yl,i=hs(t),o=void 0===e;if(!r&&i&&t.constructor===Yl&&o)return t;Hl?i&&!o&&(t=t.source):t instanceof Yl&&(o&&(e=ws.call(t)),t=t.source),Wl&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=Il(Hl?new zl(t,e):zl(t,e),r?this:Vl,Yl);return Wl&&n&&jl(a,{sticky:n}),a},Gl=function(t){t in Yl||Rl(Yl,t,{configurable:!0,get:function(){return zl[t]},set:function(e){zl[t]=e}})},Xl=Bl(zl),Kl=0;Xl.length>Kl;)Gl(Xl[Kl++]);Vl.constructor=Yl,Yl.prototype=Vl,tt(o,"RegExp",Yl)}Jt("RegExp"),e&&("g"!=/./g.flags||_s.UNSUPPORTED_Y)&&p.f(RegExp.prototype,"flags",{configurable:!0,get:ws});var $l=_s.UNSUPPORTED_Y,Zl=p.f,Jl=Q.get,Ql=RegExp.prototype;e&&$l&&Zl(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==Ql){if(this instanceof RegExp)return!!Jl(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var tu=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),eu=/./.test;Wt({target:"RegExp",proto:!0,forced:!tu},{test:function(t){if("function"!=typeof this.exec)return eu.call(this,t);var e=this.exec(t);if(null!==e&&!a(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}});var nu=RegExp.prototype,ru=nu.toString,iu=t((function(){return"/a/b"!=ru.call({source:"a",flags:"b"})})),ou="toString"!=ru.name;(iu||ou)&&tt(RegExp.prototype,"toString",(function(){var t=h(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in nu)?ws.call(t):n)}),{unsafe:!0});var au=wl.trim,su=o.parseInt,lu=/^[+-]?0[Xx]/,uu=8!==su(gl+"08")||22!==su(gl+"0x16")?function(t,e){var n=au(String(t));return su(n,e>>>0||(lu.test(n)?16:10))}:su;Wt({global:!0,forced:parseInt!=uu},{parseInt:uu});var cu=wl.trim,hu=o.parseFloat,du=1/hu(gl+"-0")!=-1/0?function(t){var e=cu(String(t)),n=hu(e);return 0===n&&"-"==e.charAt(0)?-0:n}:hu;Wt({global:!0,forced:parseFloat!=du},{parseFloat:du});var fu=At.f,pu=gt.f,gu=p.f,vu=wl.trim,yu=o.Number,mu=yu.prototype,bu="Number"==nt(br(mu)),wu=function(t){var e,n,r,i,o,a,s,l,u=d(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=vu(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>i)return NaN;return parseInt(o,r)}return+u};if(Ut("Number",!yu(" 0o1")||!yu("0b1")||yu("+0x1"))){for(var xu,_u=function(e){var n=arguments.length<1?0:e,r=this;return r instanceof _u&&(bu?t((function(){mu.valueOf.call(r)})):"Number"!=nt(r))?Il(new yu(wu(n)),r,_u):wu(n)},Eu=e?fu(yu):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ku=0;Eu.length>ku;ku++)S(yu,xu=Eu[ku])&&!S(_u,xu)&&gu(_u,xu,pu(yu,xu));_u.prototype=mu,mu.constructor=_u,tt(o,"Number",_u)}Wt({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var Su=o.isFinite,Cu=Number.isFinite||function(t){return"number"==typeof t&&Su(t)};Wt({target:"Number",stat:!0},{isFinite:Cu});var Tu=Math.floor,Nu=function(t){return!a(t)&&isFinite(t)&&Tu(t)===t};Wt({target:"Number",stat:!0},{isInteger:Nu}),Wt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var Ou=Math.abs;Wt({target:"Number",stat:!0},{isSafeInteger:function(t){return Nu(t)&&Ou(t)<=9007199254740991}}),Wt({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),Wt({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991}),Wt({target:"Number",stat:!0,forced:Number.parseFloat!=du},{parseFloat:du}),Wt({target:"Number",stat:!0,forced:Number.parseInt!=uu},{parseInt:uu});var Pu=function(t){if("number"!=typeof t&&"Number"!=nt(t))throw TypeError("Incorrect invocation");return+t},Mu=1..toFixed,Du=Math.floor,Au=function(t,e,n){return 0===e?n:e%2==1?Au(t,e-1,n*t):Au(t*t,e/2,n)},Lu=Mu&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t((function(){Mu.call({})}));Wt({target:"Number",proto:!0,forced:Lu},{toFixed:function(t){var e,n,r,i,o=Pu(this),a=xt(t),s=[0,0,0,0,0,0],l="",u="0",c=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*s[n],s[n]=r%1e7,r=Du(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=s[e],s[e]=Du(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==s[t]){var n=String(s[t]);e=""===e?n:e+Ks.call("0",7-n.length)+n}return e};if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*Au(2,69,1))-69)<0?o*Au(2,-e,1):o/Au(2,e,1),n*=4503599627370496,(e=52-e)>0){for(c(0,n),r=a;r>=7;)c(1e7,0),r-=7;for(c(Au(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),c(1,1),h(2),u=d()}else c(0,n),c(1<<-e,0),u=d()+Ks.call("0",a);return u=a>0?l+((i=u.length)<=a?"0."+Ks.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):l+u}});var Iu=1..toPrecision,Ru=t((function(){return"1"!==Iu.call(1,void 0)}))||!t((function(){Iu.call({})}));Wt({target:"Number",proto:!0,forced:Ru},{toPrecision:function(t){return void 0===t?Iu.call(Pu(this)):Iu.call(Pu(this),t)}});var Bu=Math.log,ju=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Bu(1+t)},Fu=Math.acosh,zu=Math.log,Vu=Math.sqrt,qu=Math.LN2,Uu=!Fu||710!=Math.floor(Fu(Number.MAX_VALUE))||Fu(1/0)!=1/0;Wt({target:"Math",stat:!0,forced:Uu},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?zu(t)+qu:ju(t-1+Vu(t-1)*Vu(t+1))}});var Hu=Math.asinh,Wu=Math.log,Yu=Math.sqrt;Wt({target:"Math",stat:!0,forced:!(Hu&&1/Hu(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Wu(e+Yu(e*e+1)):e}});var Gu=Math.atanh,Xu=Math.log;Wt({target:"Math",stat:!0,forced:!(Gu&&1/Gu(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:Xu((1+t)/(1-t))/2}});var Ku=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1},$u=Math.abs,Zu=Math.pow;Wt({target:"Math",stat:!0},{cbrt:function(t){return Ku(t=+t)*Zu($u(t),1/3)}});var Ju=Math.floor,Qu=Math.log,tc=Math.LOG2E;Wt({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-Ju(Qu(t+.5)*tc):32}});var ec=Math.expm1,nc=Math.exp,rc=!ec||ec(10)>22025.465794806718||ec(10)<22025.465794806718||-2e-17!=ec(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:nc(t)-1}:ec,ic=Math.cosh,oc=Math.abs,ac=Math.E;Wt({target:"Math",stat:!0,forced:!ic||ic(710)===1/0},{cosh:function(t){var e=rc(oc(t)-1)+1;return(e+1/(e*ac*ac))*(ac/2)}}),Wt({target:"Math",stat:!0,forced:rc!=Math.expm1},{expm1:rc});var sc=Math.abs,lc=Math.pow,uc=lc(2,-52),cc=lc(2,-23),hc=lc(2,127)*(2-cc),dc=lc(2,-126),fc=Math.fround||function(t){var e,n,r=sc(t),i=Ku(t);return r<dc?i*(r/dc/cc+1/uc-1/uc)*dc*cc:(n=(e=(1+cc/uc)*r)-(e-r))>hc||n!=n?i*(1/0):i*n};Wt({target:"Math",stat:!0},{fround:fc});var pc=Math.hypot,gc=Math.abs,vc=Math.sqrt,yc=!!pc&&pc(1/0,NaN)!==1/0;Wt({target:"Math",stat:!0,forced:yc},{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=gc(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*vc(i)}});var mc=Math.imul,bc=t((function(){return-5!=mc(4294967295,5)||2!=mc.length}));Wt({target:"Math",stat:!0,forced:bc},{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}});var wc=Math.log,xc=Math.LOG10E;Wt({target:"Math",stat:!0},{log10:function(t){return wc(t)*xc}}),Wt({target:"Math",stat:!0},{log1p:ju});var _c=Math.log,Ec=Math.LN2;Wt({target:"Math",stat:!0},{log2:function(t){return _c(t)/Ec}}),Wt({target:"Math",stat:!0},{sign:Ku});var kc=Math.abs,Sc=Math.exp,Cc=Math.E,Tc=t((function(){return-2e-17!=Math.sinh(-2e-17)}));Wt({target:"Math",stat:!0,forced:Tc},{sinh:function(t){return kc(t=+t)<1?(rc(t)-rc(-t))/2:(Sc(t-1)-Sc(-t-1))*(Cc/2)}});var Nc=Math.exp;Wt({target:"Math",stat:!0},{tanh:function(t){var e=rc(t=+t),n=rc(-t);return e==1/0?1:n==1/0?-1:(e-n)/(Nc(t)+Nc(-t))}}),$t(Math,"Math",!0);var Oc=Math.ceil,Pc=Math.floor;Wt({target:"Math",stat:!0},{trunc:function(t){return(t>0?Pc:Oc)(t)}}),Wt({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Mc=t((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));Wt({target:"Date",proto:!0,forced:Mc},{toJSON:function(t){var e=dr(this),n=d(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var Dc=Js.start,Ac=Math.abs,Lc=Date.prototype,Ic=Lc.getTime,Rc=Lc.toISOString,Bc=t((function(){return"0385-07-25T07:06:39.999Z"!=Rc.call(new Date(-50000000000001))}))||!t((function(){Rc.call(new Date(NaN))}))?function(){if(!isFinite(Ic.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+Dc(Ac(t),n?6:4,0)+"-"+Dc(this.getUTCMonth()+1,2,0)+"-"+Dc(this.getUTCDate(),2,0)+"T"+Dc(this.getUTCHours(),2,0)+":"+Dc(this.getUTCMinutes(),2,0)+":"+Dc(this.getUTCSeconds(),2,0)+"."+Dc(e,3,0)+"Z"}:Rc;Wt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Bc},{toISOString:Bc});var jc=Date.prototype,Fc=jc.toString,zc=jc.getTime;new Date(NaN)+""!="Invalid Date"&&tt(jc,"toString",(function(){var t=zc.call(this);return t==t?Fc.call(this):"Invalid Date"}));var Vc=L("toPrimitive"),qc=Date.prototype;Vc in qc||w(qc,Vc,(function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return d(h(this),"number"!==t)}));var Uc=mt("JSON","stringify"),Hc=/[\uD800-\uDFFF]/g,Wc=/^[\uD800-\uDBFF]$/,Yc=/^[\uDC00-\uDFFF]$/,Gc=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return Wc.test(t)&&!Yc.test(i)||Yc.test(t)&&!Wc.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},Xc=t((function(){return'"\\udf06\\ud834"'!==Uc("\udf06\ud834")||'"\\udead"'!==Uc("\udead")}));Uc&&Wt({target:"JSON",stat:!0,forced:Xc},{stringify:function(t,e,n){var r=Uc.apply(null,arguments);return"string"==typeof r?r.replace(Hc,Gc):r}}),$t(o.JSON,"JSON",!0),Wt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=nn.f(e),r=n.resolve,i=n.reject,o=on((function(){var n=Qt(e.resolve),i=[],o=0,a=1;ue(t,(function(t){var s=o++,l=!1;i.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){l||(l=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var Kc=function(e,n,r){var i=-1!==e.indexOf("Map"),s=-1!==e.indexOf("Weak"),l=i?"set":"add",u=o[e],c=u&&u.prototype,h=u,d={},f=function(t){var e=c[t];tt(c,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(s&&!a(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return s&&!a(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(s&&!a(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Ut(e,"function"!=typeof u||!(s||c.forEach&&!t((function(){(new u).entries().next()})))))h=r.getConstructor(n,e,i,l),Ei.REQUIRED=!0;else if(Ut(e,!0)){var p=new h,g=p[l](s?{}:-0,1)!=p,v=t((function(){p.has(1)})),y=ye((function(t){new u(t)})),m=!s&&t((function(){for(var t=new u,e=5;e--;)t[l](e,e);return!t.has(-0)}));y||((h=n((function(t,n){te(t,h,e);var r=Il(new u,t,h);return null!=n&&ue(n,r[l],r,i),r}))).prototype=c,c.constructor=h),(v||m)&&(f("delete"),f("has"),i&&f("get")),(m||g)&&f(l),s&&c.clear&&delete c.clear}return d[e]=h,Wt({global:!0,forced:h!=u},d),$t(h,e),s||r.setStrong(h,e,i),h},$c=p.f,Zc=Ei.fastKey,Jc=Q.set,Qc=Q.getterFor,th={getConstructor:function(t,n,r,i){var o=t((function(t,a){te(t,o,n),Jc(t,{type:n,index:br(null),first:void 0,last:void 0,size:0}),e||(t.size=0),null!=a&&ue(a,t[i],t,r)})),a=Qc(n),s=function(t,n,r){var i,o,s=a(t),u=l(t,n);return u?u.value=r:(s.last=u={index:o=Zc(n,!0),key:n,value:r,previous:i=s.last,next:void 0,removed:!1},s.first||(s.first=u),i&&(i.next=u),e?s.size++:t.size++,"F"!==o&&(s.index[o]=u)),t},l=function(t,e){var n,r=a(t),i=Zc(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Gt(o.prototype,{clear:function(){for(var t=a(this),n=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;t.first=t.last=void 0,e?t.size=0:this.size=0},delete:function(t){var n=a(this),r=l(this,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),e?n.size--:this.size--}return!!r},forEach:function(t){for(var e,n=a(this),r=oe(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Gt(o.prototype,r?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),e&&$c(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=Qc(e),o=Qc(r);Qa(t,e,(function(t,e){Jc(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Jt(e)}},eh=(Kc("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),th),Kc("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),th),Ei.getWeakData),nh=Q.set,rh=Q.getterFor,ih=Mr.find,oh=Mr.findIndex,ah=0,sh=function(t){return t.frozen||(t.frozen=new lh)},lh=function(){this.entries=[]},uh=function(t,e){return ih(t.entries,(function(t){return t[0]===e}))};lh.prototype={get:function(t){var e=uh(this,t);if(e)return e[1]},has:function(t){return!!uh(this,t)},set:function(t,e){var n=uh(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=oh(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}};var ch={getConstructor:function(t,e,n,r){var i=t((function(t,o){te(t,i,e),nh(t,{type:e,id:ah++,frozen:void 0}),null!=o&&ue(o,t[r],t,n)})),o=rh(e),s=function(t,e,n){var r=o(t),i=eh(h(e),!0);return!0===i?sh(r).set(e,n):i[r.id]=n,t};return Gt(i.prototype,{delete:function(t){var e=o(this);if(!a(t))return!1;var n=eh(t);return!0===n?sh(e).delete(t):n&&S(n,e.id)&&delete n[e.id]},has:function(t){var e=o(this);if(!a(t))return!1;var n=eh(t);return!0===n?sh(e).has(t):n&&S(n,e.id)}}),Gt(i.prototype,n?{get:function(t){var e=o(this);if(a(t)){var n=eh(t);return!0===n?sh(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),i}};r((function(t){var e,n=Q.enforce,r=!o.ActiveXObject&&"ActiveXObject"in o,i=Object.isExtensible,s=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},l=t.exports=Kc("WeakMap",s,ch);if(U&&r){e=ch.getConstructor(s,"WeakMap",!0),Ei.REQUIRED=!0;var u=l.prototype,c=u.delete,h=u.has,d=u.get,f=u.set;Gt(u,{delete:function(t){if(a(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),c.call(this,t)||r.frozen.delete(t)}return c.call(this,t)},has:function(t){if(a(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),h.call(this,t)||r.frozen.has(t)}return h.call(this,t)},get:function(t){if(a(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),h.call(this,t)?d.call(this,t):r.frozen.get(t)}return d.call(this,t)},set:function(t,r){if(a(t)&&!i(t)){var o=n(this);o.frozen||(o.frozen=new e),h.call(this,t)?f.call(this,t,r):o.frozen.set(t,r)}else f.call(this,t,r);return this}})}}));Kc("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ch);var hh="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,dh=function(t){if(void 0===t)return 0;var e=xt(t),n=Et(e);if(e!==n)throw RangeError("Wrong length or index");return n},fh=Math.abs,ph=Math.pow,gh=Math.floor,vh=Math.log,yh=Math.LN2,mh=function(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,l=(1<<s)-1,u=l>>1,c=23===e?ph(2,-24)-ph(2,-77):0,h=t<0||0===t&&1/t<0?1:0,d=0;for((t=fh(t))!=t||t===1/0?(i=t!=t?1:0,r=l):(r=gh(vh(t)/yh),t*(o=ph(2,-r))<1&&(r--,o*=2),(t+=r+u>=1?c/o:c*ph(2,1-u))*o>=2&&(r++,o/=2),r+u>=l?(i=0,r=l):r+u>=1?(i=(t*o-1)*ph(2,e),r+=u):(i=t*ph(2,u-1)*ph(2,e),r=0));e>=8;a[d++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*h,a},bh=function(t,e){var n,r=t.length,i=8*r-e-1,o=(1<<i)-1,a=o>>1,s=i-7,l=r-1,u=t[l--],c=127&u;for(u>>=7;s>0;c=256*c+t[l],l--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=e;s>0;n=256*n+t[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return n?NaN:u?-1/0:1/0;n+=ph(2,e),c-=a}return(u?-1:1)*n*ph(2,c-e)},wh=At.f,xh=p.f,_h=Q.get,Eh=Q.set,kh=o.ArrayBuffer,Sh=kh,Ch=o.DataView,Th=Ch&&Ch.prototype,Nh=Object.prototype,Oh=o.RangeError,Ph=mh,Mh=bh,Dh=function(t){return[255&t]},Ah=function(t){return[255&t,t>>8&255]},Lh=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Ih=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Rh=function(t){return Ph(t,23,4)},Bh=function(t){return Ph(t,52,8)},jh=function(t,e){xh(t.prototype,e,{get:function(){return _h(this)[e]}})},Fh=function(t,e,n,r){var i=dh(n),o=_h(t);if(i+e>o.byteLength)throw Oh("Wrong index");var a=_h(o.buffer).bytes,s=i+o.byteOffset,l=a.slice(s,s+e);return r?l:l.reverse()},zh=function(t,e,n,r,i,o){var a=dh(n),s=_h(t);if(a+e>s.byteLength)throw Oh("Wrong index");for(var l=_h(s.buffer).bytes,u=a+s.byteOffset,c=r(+i),h=0;h<e;h++)l[u+h]=c[o?h:e-h-1]};if(hh){if(!t((function(){kh(1)}))||!t((function(){new kh(-1)}))||t((function(){return new kh,new kh(1.5),new kh(NaN),"ArrayBuffer"!=kh.name}))){for(var Vh,qh=(Sh=function(t){return te(this,Sh),new kh(dh(t))}).prototype=kh.prototype,Uh=wh(kh),Hh=0;Uh.length>Hh;)(Vh=Uh[Hh++])in Sh||w(Sh,Vh,kh[Vh]);qh.constructor=Sh}Ji&&Ii(Th)!==Nh&&Ji(Th,Nh);var Wh=new Ch(new Sh(2)),Yh=Th.setInt8;Wh.setInt8(0,2147483648),Wh.setInt8(1,2147483649),!Wh.getInt8(0)&&Wh.getInt8(1)||Gt(Th,{setInt8:function(t,e){Yh.call(this,t,e<<24>>24)},setUint8:function(t,e){Yh.call(this,t,e<<24>>24)}},{unsafe:!0})}else Sh=function(t){te(this,Sh,"ArrayBuffer");var n=dh(t);Eh(this,{bytes:Do.call(new Array(n),0),byteLength:n}),e||(this.byteLength=n)},Ch=function(t,n,r){te(this,Ch,"DataView"),te(t,Sh,"DataView");var i=_h(t).byteLength,o=xt(n);if(o<0||o>i)throw Oh("Wrong offset");if(o+(r=void 0===r?i-o:Et(r))>i)throw Oh("Wrong length");Eh(this,{buffer:t,byteLength:r,byteOffset:o}),e||(this.buffer=t,this.byteLength=r,this.byteOffset=o)},e&&(jh(Sh,"byteLength"),jh(Ch,"buffer"),jh(Ch,"byteLength"),jh(Ch,"byteOffset")),Gt(Ch.prototype,{getInt8:function(t){return Fh(this,1,t)[0]<<24>>24},getUint8:function(t){return Fh(this,1,t)[0]},getInt16:function(t){var e=Fh(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Fh(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Ih(Fh(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Ih(Fh(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Mh(Fh(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Mh(Fh(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){zh(this,1,t,Dh,e)},setUint8:function(t,e){zh(this,1,t,Dh,e)},setInt16:function(t,e){zh(this,2,t,Ah,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){zh(this,2,t,Ah,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){zh(this,4,t,Lh,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){zh(this,4,t,Lh,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){zh(this,4,t,Rh,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){zh(this,8,t,Bh,e,arguments.length>2?arguments[2]:void 0)}});$t(Sh,"ArrayBuffer"),$t(Ch,"DataView");var Gh={ArrayBuffer:Sh,DataView:Ch},Xh=Gh.ArrayBuffer,Kh=o.ArrayBuffer;Wt({global:!0,forced:Kh!==Xh},{ArrayBuffer:Xh}),Jt("ArrayBuffer");var $h,Zh=p.f,Jh=o.Int8Array,Qh=Jh&&Jh.prototype,td=o.Uint8ClampedArray,ed=td&&td.prototype,nd=Jh&&Ii(Jh),rd=Qh&&Ii(Qh),id=Object.prototype,od=id.isPrototypeOf,ad=L("toStringTag"),sd=N("TYPED_ARRAY_TAG"),ld=hh&&!!Ji&&"Opera"!==ot(o.opera),ud=!1,cd={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},hd=function(t){return a(t)&&S(cd,ot(t))};for($h in cd)o[$h]||(ld=!1);if((!ld||"function"!=typeof nd||nd===Function.prototype)&&(nd=function(){throw TypeError("Incorrect invocation")},ld))for($h in cd)o[$h]&&Ji(o[$h],nd);if((!ld||!rd||rd===id)&&(rd=nd.prototype,ld))for($h in cd)o[$h]&&Ji(o[$h].prototype,rd);if(ld&&Ii(ed)!==rd&&Ji(ed,rd),e&&!S(rd,ad))for($h in ud=!0,Zh(rd,ad,{get:function(){return a(this)?this[sd]:void 0}}),cd)o[$h]&&w(o[$h],sd,$h);var dd={NATIVE_ARRAY_BUFFER_VIEWS:ld,TYPED_ARRAY_TAG:ud&&sd,aTypedArray:function(t){if(hd(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(Ji){if(od.call(nd,t))return t}else for(var e in cd)if(S(cd,$h)){var n=o[e];if(n&&(t===n||od.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,n,r){if(e){if(r)for(var i in cd){var a=o[i];a&&S(a.prototype,t)&&delete a.prototype[t]}rd[t]&&!r||tt(rd,t,r?n:ld&&Qh[t]||n)}},exportTypedArrayStaticMethod:function(t,n,r){var i,a;if(e){if(Ji){if(r)for(i in cd)(a=o[i])&&S(a,t)&&delete a[t];if(nd[t]&&!r)return;try{return tt(nd,t,r?n:ld&&Jh[t]||n)}catch(t){}}for(i in cd)!(a=o[i])||a[t]&&!r||tt(a,t,n)}},isView:function(t){var e=ot(t);return"DataView"===e||S(cd,e)},isTypedArray:hd,TypedArray:nd,TypedArrayPrototype:rd};Wt({target:"ArrayBuffer",stat:!0,forced:!dd.NATIVE_ARRAY_BUFFER_VIEWS},{isView:dd.isView});var fd=Gh.ArrayBuffer,pd=Gh.DataView,gd=fd.prototype.slice,vd=t((function(){return!new fd(2).slice(1,void 0).byteLength}));Wt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:vd},{slice:function(t,e){if(void 0!==gd&&void 0===e)return gd.call(h(this),t);for(var n=h(this).byteLength,r=Ct(t,n),i=Ct(void 0===e?n:e,n),o=new(be(this,fd))(Et(i-r)),a=new pd(this),s=new pd(o),l=0;r<i;)s.setUint8(l++,a.getUint8(r++));return o}}),Wt({global:!0,forced:!hh},{DataView:Gh.DataView});var yd=dd.NATIVE_ARRAY_BUFFER_VIEWS,md=o.ArrayBuffer,bd=o.Int8Array,wd=!yd||!t((function(){bd(1)}))||!t((function(){new bd(-1)}))||!ye((function(t){new bd,new bd(null),new bd(1.5),new bd(t)}),!0)||t((function(){return 1!==new bd(new md(2),1,void 0).length})),xd=function(t,e){var n=function(t){var e=xt(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}(t);if(n%e)throw RangeError("Wrong offset");return n},_d=dd.aTypedArrayConstructor,Ed=function(t){var e,n,r,i,o,a,s=dr(t),l=arguments.length,u=l>1?arguments[1]:void 0,c=void 0!==u,h=se(s);if(null!=h&&!ie(h))for(a=(o=h.call(s)).next,s=[];!(i=a.call(o)).done;)s.push(i.value);for(c&&l>2&&(u=oe(u,arguments[2],2)),n=Et(s.length),r=new(_d(this))(n),e=0;n>e;e++)r[e]=c?u(s[e],e):s[e];return r},kd=r((function(t){var n=At.f,r=Mr.forEach,i=Q.get,s=Q.set,l=p.f,u=gt.f,c=Math.round,h=o.RangeError,f=Gh.ArrayBuffer,g=Gh.DataView,v=dd.NATIVE_ARRAY_BUFFER_VIEWS,y=dd.TYPED_ARRAY_TAG,m=dd.TypedArray,x=dd.TypedArrayPrototype,_=dd.aTypedArrayConstructor,E=dd.isTypedArray,k=function(t,e){for(var n=0,r=e.length,i=new(_(t))(r);r>n;)i[n]=e[n++];return i},C=function(t,e){l(t,e,{get:function(){return i(this)[e]}})},T=function(t){var e;return t instanceof f||"ArrayBuffer"==(e=ot(t))||"SharedArrayBuffer"==e},N=function(t,e){return E(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},O=function(t,e){return N(t,e=d(e,!0))?b(2,t[e]):u(t,e)},P=function(t,e,n){return!(N(t,e=d(e,!0))&&a(n)&&S(n,"value"))||S(n,"get")||S(n,"set")||n.configurable||S(n,"writable")&&!n.writable||S(n,"enumerable")&&!n.enumerable?l(t,e,n):(t[e]=n.value,t)};e?(v||(gt.f=O,p.f=P,C(x,"buffer"),C(x,"byteOffset"),C(x,"byteLength"),C(x,"length")),Wt({target:"Object",stat:!0,forced:!v},{getOwnPropertyDescriptor:O,defineProperty:P}),t.exports=function(t,e,u){var d=t.match(/\d+$/)[0]/8,p=t+(u?"Clamped":"")+"Array",b="get"+t,_="set"+t,S=o[p],C=S,N=C&&C.prototype,O={},P=function(t,e){l(t,e,{get:function(){return function(t,e){var n=i(t);return n.view[b](e*d+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var r=i(t);u&&(n=(n=c(n))<0?0:n>255?255:255&n),r.view[_](e*d+r.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};v?wd&&(C=e((function(t,e,n,r){return te(t,C,p),Il(a(e)?T(e)?void 0!==r?new S(e,xd(n,d),r):void 0!==n?new S(e,xd(n,d)):new S(e):E(e)?k(C,e):Ed.call(C,e):new S(dh(e)),t,C)})),Ji&&Ji(C,m),r(n(S),(function(t){t in C||w(C,t,S[t])})),C.prototype=N):(C=e((function(t,e,n,r){te(t,C,p);var i,o,l,u=0,c=0;if(a(e)){if(!T(e))return E(e)?k(C,e):Ed.call(C,e);i=e,c=xd(n,d);var v=e.byteLength;if(void 0===r){if(v%d)throw h("Wrong length");if((o=v-c)<0)throw h("Wrong length")}else if((o=Et(r)*d)+c>v)throw h("Wrong length");l=o/d}else l=dh(e),i=new f(o=l*d);for(s(t,{buffer:i,byteOffset:c,byteLength:o,length:l,view:new g(i)});u<l;)P(t,u++)})),Ji&&Ji(C,m),N=C.prototype=br(x)),N.constructor!==C&&w(N,"constructor",C),y&&w(N,y,p),O[p]=C,Wt({global:!0,forced:C!=S,sham:!v},O),"BYTES_PER_ELEMENT"in C||w(C,"BYTES_PER_ELEMENT",d),"BYTES_PER_ELEMENT"in N||w(N,"BYTES_PER_ELEMENT",d),Jt(p)}):t.exports=function(){}}));kd("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0),kd("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),kd("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}})),(0,dd.exportTypedArrayStaticMethod)("from",Ed,wd);var Sd=dd.aTypedArrayConstructor;(0,dd.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,n=new(Sd(this))(e);e>t;)n[t]=arguments[t++];return n}),wd);var Cd=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("copyWithin",(function(t,e){return wo.call(Cd(this),t,e,arguments.length>2?arguments[2]:void 0)}));var Td=Mr.every,Nd=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("every",(function(t){return Td(Nd(this),t,arguments.length>1?arguments[1]:void 0)}));var Od=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("fill",(function(t){return Do.apply(Od(this),arguments)}));var Pd=Mr.filter,Md=dd.aTypedArray,Dd=dd.aTypedArrayConstructor;(0,dd.exportTypedArrayMethod)("filter",(function(t){for(var e=Pd(Md(this),t,arguments.length>1?arguments[1]:void 0),n=be(this,this.constructor),r=0,i=e.length,o=new(Dd(n))(i);i>r;)o[r]=e[r++];return o}));var Ad=Mr.find,Ld=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("find",(function(t){return Ad(Ld(this),t,arguments.length>1?arguments[1]:void 0)}));var Id=Mr.findIndex,Rd=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("findIndex",(function(t){return Id(Rd(this),t,arguments.length>1?arguments[1]:void 0)}));var Bd=Mr.forEach,jd=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("forEach",(function(t){Bd(jd(this),t,arguments.length>1?arguments[1]:void 0)}));var Fd=Nt.includes,zd=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("includes",(function(t){return Fd(zd(this),t,arguments.length>1?arguments[1]:void 0)}));var Vd=Nt.indexOf,qd=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("indexOf",(function(t){return Vd(qd(this),t,arguments.length>1?arguments[1]:void 0)}));var Ud=L("iterator"),Hd=o.Uint8Array,Wd=ns.values,Yd=ns.keys,Gd=ns.entries,Xd=dd.aTypedArray,Kd=dd.exportTypedArrayMethod,$d=Hd&&Hd.prototype[Ud],Zd=!!$d&&("values"==$d.name||null==$d.name),Jd=function(){return Wd.call(Xd(this))};Kd("entries",(function(){return Gd.call(Xd(this))})),Kd("keys",(function(){return Yd.call(Xd(this))})),Kd("values",Jd,!Zd),Kd(Ud,Jd,!Zd);var Qd=dd.aTypedArray,tf=[].join;(0,dd.exportTypedArrayMethod)("join",(function(t){return tf.apply(Qd(this),arguments)}));var ef=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("lastIndexOf",(function(t){return ua.apply(ef(this),arguments)}));var nf=Mr.map,rf=dd.aTypedArray,of=dd.aTypedArrayConstructor;(0,dd.exportTypedArrayMethod)("map",(function(t){return nf(rf(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(of(be(t,t.constructor)))(e)}))}));var af=pa.left,sf=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("reduce",(function(t){return af(sf(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var lf=pa.right,uf=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("reduceRight",(function(t){return lf(uf(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var cf=dd.aTypedArray,hf=dd.exportTypedArrayMethod,df=Math.floor;hf("reverse",(function(){for(var t,e=cf(this).length,n=df(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}));var ff=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("set",(function(t){ff(this);var e=xd(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=dr(t),i=Et(r.length),o=0;if(i+e>n)throw RangeError("Wrong length");for(;o<i;)this[e+o]=r[o++]}),t((function(){new Int8Array(1).set({})})));var pf=dd.aTypedArray,gf=dd.aTypedArrayConstructor,vf=[].slice;(0,dd.exportTypedArrayMethod)("slice",(function(t,e){for(var n=vf.call(pf(this),t,e),r=be(this,this.constructor),i=0,o=n.length,a=new(gf(r))(o);o>i;)a[i]=n[i++];return a}),t((function(){new Int8Array(1).slice()})));var yf=Mr.some,mf=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("some",(function(t){return yf(mf(this),t,arguments.length>1?arguments[1]:void 0)}));var bf=dd.aTypedArray,wf=[].sort;(0,dd.exportTypedArrayMethod)("sort",(function(t){return wf.call(bf(this),t)}));var xf=dd.aTypedArray;(0,dd.exportTypedArrayMethod)("subarray",(function(t,e){var n=xf(this),r=n.length,i=Ct(t,r);return new(be(n,n.constructor))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,Et((void 0===e?r:Ct(e,r))-i))}));var _f=o.Int8Array,Ef=dd.aTypedArray,kf=dd.exportTypedArrayMethod,Sf=[].toLocaleString,Cf=[].slice,Tf=!!_f&&t((function(){Sf.call(new _f(1))}));kf("toLocaleString",(function(){return Sf.apply(Tf?Cf.call(Ef(this)):Ef(this),arguments)}),t((function(){return[1,2].toLocaleString()!=new _f([1,2]).toLocaleString()}))||!t((function(){_f.prototype.toLocaleString.call([1,2])})));var Nf=dd.exportTypedArrayMethod,Of=o.Uint8Array,Pf=Of&&Of.prototype||{},Mf=[].toString,Df=[].join;t((function(){Mf.call({})}))&&(Mf=function(){return Df.call(this)});var Af=Pf.toString!=Mf;Nf("toString",Mf,Af);var Lf=mt("Reflect","apply"),If=Function.apply,Rf=!t((function(){Lf((function(){}))}));Wt({target:"Reflect",stat:!0,forced:Rf},{apply:function(t,e,n){return Qt(t),h(n),Lf?Lf(t,e,n):If.call(t,e,n)}});var Bf=mt("Reflect","construct"),jf=t((function(){function t(){}return!(Bf((function(){}),[],t)instanceof t)})),Ff=!t((function(){Bf((function(){}))})),zf=jf||Ff;Wt({target:"Reflect",stat:!0,forced:zf,sham:zf},{construct:function(t,e){Qt(t),h(e);var n=arguments.length<3?t:Qt(arguments[2]);if(Ff&&!jf)return Bf(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(ao.apply(t,r))}var i=n.prototype,o=br(a(i)?i:Object.prototype),s=Function.apply.call(t,o,e);return a(s)?s:o}});var Vf=t((function(){Reflect.defineProperty(p.f({},1,{value:1}),1,{value:2})}));Wt({target:"Reflect",stat:!0,forced:Vf,sham:!e},{defineProperty:function(t,e,n){h(t);var r=d(e,!0);h(n);try{return p.f(t,r,n),!0}catch(t){return!1}}});var qf=gt.f;Wt({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=qf(h(t),e);return!(n&&!n.configurable)&&delete t[e]}}),Wt({target:"Reflect",stat:!0},{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return h(e)===o?e[n]:(r=gt.f(e,n))?S(r,"value")?r.value:void 0===r.get?void 0:r.get.call(o):a(i=Ii(e))?t(i,n,o):void 0}}),Wt({target:"Reflect",stat:!0,sham:!e},{getOwnPropertyDescriptor:function(t,e){return gt.f(h(t),e)}}),Wt({target:"Reflect",stat:!0,sham:!Di},{getPrototypeOf:function(t){return Ii(h(t))}}),Wt({target:"Reflect",stat:!0},{has:function(t,e){return e in t}});var Uf=Object.isExtensible;Wt({target:"Reflect",stat:!0},{isExtensible:function(t){return h(t),!Uf||Uf(t)}}),Wt({target:"Reflect",stat:!0},{ownKeys:It}),Wt({target:"Reflect",stat:!0,sham:!_i},{preventExtensions:function(t){h(t);try{var e=mt("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}});var Hf=t((function(){var t=p.f({},"a",{configurable:!0});return!1!==Reflect.set(Ii(t),"a",1,t)}));Wt({target:"Reflect",stat:!0,forced:Hf},{set:function t(e,n,r){var i,o,s=arguments.length<4?e:arguments[3],l=gt.f(h(e),n);if(!l){if(a(o=Ii(e)))return t(o,n,r,s);l=b(0)}if(S(l,"value")){if(!1===l.writable||!a(s))return!1;if(i=gt.f(s,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,p.f(s,n,i)}else p.f(s,n,b(0,r));return!0}return void 0!==l.set&&(l.set.call(s,r),!0)}}),Ji&&Wt({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){h(t),Zi(e);try{return Ji(t,e),!0}catch(t){return!1}}});var Wf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Yf in Wf){var Gf=o[Yf],Xf=Gf&&Gf.prototype;if(Xf&&Xf.forEach!==Go)try{w(Xf,"forEach",Go)}catch(My){Xf.forEach=Go}}var Kf=L("iterator"),$f=L("toStringTag"),Zf=ns.values;for(var Jf in Wf){var Qf=o[Jf],tp=Qf&&Qf.prototype;if(tp){if(tp[Kf]!==Zf)try{w(tp,Kf,Zf)}catch(My){tp[Kf]=Zf}if(tp[$f]||w(tp,$f,Jf),Wf[Jf])for(var ep in ns)if(tp[ep]!==ns[ep])try{w(tp,ep,ns[ep])}catch(My){tp[ep]=ns[ep]}}}var np=!o.setImmediate||!o.clearImmediate;Wt({global:!0,bind:!0,enumerable:!0,forced:np},{setImmediate:Ue.set,clearImmediate:Ue.clear});var rp=o.process,ip="process"==nt(rp);Wt({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=ip&&rp.domain;tn(e?e.bind(t):t)}});var op=L("iterator"),ap=!t((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[op]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),sp=/[^\0-\u007E]/,lp=/[.\u3002\uFF0E\uFF61]/g,up="Overflow: input needs wider integers to process",cp=Math.floor,hp=String.fromCharCode,dp=function(t){return t+22+75*(t<26)},fp=function(t,e,n){var r=0;for(t=n?cp(t/700):t>>1,t+=cp(t/e);t>455;r+=36)t=cp(t/35);return cp(r+36*t/(t+38))},pp=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,o=128,a=0,s=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(hp(n));var l=r.length,u=l;for(l&&r.push("-");u<i;){var c=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<c&&(c=n);var h=u+1;if(c-o>cp((2147483647-a)/h))throw RangeError(up);for(a+=(c-o)*h,o=c,e=0;e<t.length;e++){if((n=t[e])<o&&++a>2147483647)throw RangeError(up);if(n==o){for(var d=a,f=36;;f+=36){var p=f<=s?1:f>=s+26?26:f-s;if(d<p)break;var g=d-p,v=36-p;r.push(hp(dp(p+g%v))),d=cp(g/v)}r.push(hp(dp(d))),s=fp(a,h,u==l),a=0,++u}}++a,++o}return r.join("")},gp=function(t){var e=se(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return h(e.call(t))},vp=mt("fetch"),yp=mt("Headers"),mp=L("iterator"),bp=Q.set,wp=Q.getterFor("URLSearchParams"),xp=Q.getterFor("URLSearchParamsIterator"),_p=/\+/g,Ep=Array(4),kp=function(t){return Ep[t-1]||(Ep[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},Sp=function(t){try{return decodeURIComponent(t)}catch(e){return t}},Cp=function(t){var e=t.replace(_p," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(kp(n--),Sp);return e}},Tp=/[!'()~]|%20/g,Np={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Op=function(t){return Np[t]},Pp=function(t){return encodeURIComponent(t).replace(Tp,Op)},Mp=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:Cp(r.shift()),value:Cp(r.join("="))}))},Dp=function(t){this.entries.length=0,Mp(this.entries,t)},Ap=function(t,e){if(t<e)throw TypeError("Not enough arguments")},Lp=Xa((function(t,e){bp(this,{type:"URLSearchParamsIterator",iterator:gp(wp(t).entries),kind:e})}),"Iterator",(function(){var t=xp(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),Ip=function(){te(this,Ip,"URLSearchParams");var t,e,n,r,i,o,s,l,u,c=arguments.length>0?arguments[0]:void 0,d=this,f=[];if(bp(d,{type:"URLSearchParams",entries:f,updateURL:function(){},updateSearchParams:Dp}),void 0!==c)if(a(c))if("function"==typeof(t=se(c)))for(n=(e=t.call(c)).next;!(r=n.call(e)).done;){if((s=(o=(i=gp(h(r.value))).next).call(i)).done||(l=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:s.value+"",value:l.value+""})}else for(u in c)S(c,u)&&f.push({key:u,value:c[u]+""});else Mp(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Rp=Ip.prototype;Gt(Rp,{append:function(t,e){Ap(arguments.length,2);var n=wp(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){Ap(arguments.length,1);for(var e=wp(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){Ap(arguments.length,1);for(var e=wp(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){Ap(arguments.length,1);for(var e=wp(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){Ap(arguments.length,1);for(var e=wp(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){Ap(arguments.length,1);for(var n,r=wp(this),i=r.entries,o=!1,a=t+"",s=e+"",l=0;l<i.length;l++)(n=i[l]).key===a&&(o?i.splice(l--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=wp(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=wp(this).entries,r=oe(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new Lp(this,"keys")},values:function(){return new Lp(this,"values")},entries:function(){return new Lp(this,"entries")}},{enumerable:!0}),tt(Rp,mp,Rp.entries),tt(Rp,"toString",(function(){for(var t,e=wp(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(Pp(t.key)+"="+Pp(t.value));return n.join("&")}),{enumerable:!0}),$t(Ip,"URLSearchParams"),Wt({global:!0,forced:!ap},{URLSearchParams:Ip}),ap||"function"!=typeof vp||"function"!=typeof yp||Wt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(a(e=arguments[1])&&(n=e.body,"URLSearchParams"===ot(n)&&((r=e.headers?new yp(e.headers):new yp).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=br(e,{body:b(0,String(n)),headers:b(0,r)}))),i.push(e)),vp.apply(this,i)}});var Bp,jp={URLSearchParams:Ip,getState:wp},Fp=ss.codeAt,zp=o.URL,Vp=jp.URLSearchParams,qp=jp.getState,Up=Q.set,Hp=Q.getterFor("URL"),Wp=Math.floor,Yp=Math.pow,Gp=/[A-Za-z]/,Xp=/[\d+-.A-Za-z]/,Kp=/\d/,$p=/^(0x|0X)/,Zp=/^[0-7]+$/,Jp=/^\d+$/,Qp=/^[\dA-Fa-f]+$/,tg=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,eg=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ng=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,rg=/[\u0009\u000A\u000D]/g,ig=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=ag(e.slice(1,-1))))return"Invalid host";t.host=n}else if(pg(t)){if(e=function(t){var e,n,r=[],i=t.toLowerCase().replace(lp,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(sp.test(n)?"xn--"+pp(n):n);return r.join(".")}(e),tg.test(e))return"Invalid host";if(null===(n=og(e)))return"Invalid host";t.host=n}else{if(eg.test(e))return"Invalid host";for(n="",r=uo(e),i=0;i<r.length;i++)n+=dg(r[i],lg);t.host=n}},og=function(t){var e,n,r,i,o,a,s,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(e=l.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=l[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=$p.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?Jp:8==o?Zp:Qp).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=Yp(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Yp(256,3-r);return s},ag=function(t){var e,n,r,i,o,a,s,l=[0,0,0,0,0,0,0,0],u=0,c=null,h=0,d=function(){return t.charAt(h)};if(":"==d()){if(":"!=t.charAt(1))return;h+=2,c=++u}for(;d();){if(8==u)return;if(":"!=d()){for(e=n=0;n<4&&Qp.test(d());)e=16*e+parseInt(d(),16),h++,n++;if("."==d()){if(0==n)return;if(h-=n,u>6)return;for(r=0;d();){if(i=null,r>0){if(!("."==d()&&r<4))return;h++}if(!Kp.test(d()))return;for(;Kp.test(d());){if(o=parseInt(d(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}l[u]=256*l[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;l[u++]=e}else{if(null!==c)return;h++,c=++u}}if(null!==c)for(a=u-c,u=7;0!=u&&a>0;)s=l[u],l[u--]=l[c+a-1],l[c+--a]=s;else if(8!=u)return;return l},sg=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=Wp(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},lg={},ug=yi({},lg,{" ":1,'"':1,"<":1,">":1,"`":1}),cg=yi({},ug,{"#":1,"?":1,"{":1,"}":1}),hg=yi({},cg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),dg=function(t,e){var n=Fp(t,0);return n>32&&n<127&&!S(e,t)?t:encodeURIComponent(t)},fg={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pg=function(t){return S(fg,t.scheme)},gg=function(t){return""!=t.username||""!=t.password},vg=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},yg=function(t,e){var n;return 2==t.length&&Gp.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},mg=function(t){var e;return t.length>1&&yg(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},bg=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&yg(e[0],!0)||e.pop()},wg=function(t){return"."===t||"%2e"===t.toLowerCase()},xg={},_g={},Eg={},kg={},Sg={},Cg={},Tg={},Ng={},Og={},Pg={},Mg={},Dg={},Ag={},Lg={},Ig={},Rg={},Bg={},jg={},Fg={},zg={},Vg={},qg=function(t,e,n,r){var i,o,a,s,l,u=n||xg,c=0,h="",d=!1,f=!1,p=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(ng,"")),e=e.replace(rg,""),i=uo(e);c<=i.length;){switch(o=i[c],u){case xg:if(!o||!Gp.test(o)){if(n)return"Invalid scheme";u=Eg;continue}h+=o.toLowerCase(),u=_g;break;case _g:if(o&&(Xp.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";h="",u=Eg,c=0;continue}if(n&&(pg(t)!=S(fg,h)||"file"==h&&(gg(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void(pg(t)&&fg[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?u=Lg:pg(t)&&r&&r.scheme==t.scheme?u=kg:pg(t)?u=Ng:"/"==i[c+1]?(u=Sg,c++):(t.cannotBeABaseURL=!0,t.path.push(""),u=Fg)}break;case Eg:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,u=Vg;break}u="file"==r.scheme?Lg:Cg;continue;case kg:if("/"!=o||"/"!=i[c+1]){u=Cg;continue}u=Og,c++;break;case Sg:if("/"==o){u=Pg;break}u=jg;continue;case Cg:if(t.scheme=r.scheme,o==Bp)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==o||"\\"==o&&pg(t))u=Tg;else if("?"==o)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",u=zg;else{if("#"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),u=jg;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Vg}break;case Tg:if(!pg(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,u=jg;continue}u=Pg}else u=Og;break;case Ng:if(u=Og,"/"!=o||"/"!=h.charAt(c+1))continue;c++;break;case Og:if("/"!=o&&"\\"!=o){u=Pg;continue}break;case Pg:if("@"==o){d&&(h="%40"+h),d=!0,a=uo(h);for(var g=0;g<a.length;g++){var v=a[g];if(":"!=v||p){var y=dg(v,hg);p?t.password+=y:t.username+=y}else p=!0}h=""}else if(o==Bp||"/"==o||"?"==o||"#"==o||"\\"==o&&pg(t)){if(d&&""==h)return"Invalid authority";c-=uo(h).length+1,h="",u=Mg}else h+=o;break;case Mg:case Dg:if(n&&"file"==t.scheme){u=Rg;continue}if(":"!=o||f){if(o==Bp||"/"==o||"?"==o||"#"==o||"\\"==o&&pg(t)){if(pg(t)&&""==h)return"Invalid host";if(n&&""==h&&(gg(t)||null!==t.port))return;if(s=ig(t,h))return s;if(h="",u=Bg,n)return;continue}"["==o?f=!0:"]"==o&&(f=!1),h+=o}else{if(""==h)return"Invalid host";if(s=ig(t,h))return s;if(h="",u=Ag,n==Dg)return}break;case Ag:if(!Kp.test(o)){if(o==Bp||"/"==o||"?"==o||"#"==o||"\\"==o&&pg(t)||n){if(""!=h){var m=parseInt(h,10);if(m>65535)return"Invalid port";t.port=pg(t)&&m===fg[t.scheme]?null:m,h=""}if(n)return;u=Bg;continue}return"Invalid port"}h+=o;break;case Lg:if(t.scheme="file","/"==o||"\\"==o)u=Ig;else{if(!r||"file"!=r.scheme){u=jg;continue}if(o==Bp)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==o)t.host=r.host,t.path=r.path.slice(),t.query="",u=zg;else{if("#"!=o){mg(i.slice(c).join(""))||(t.host=r.host,t.path=r.path.slice(),bg(t)),u=jg;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Vg}}break;case Ig:if("/"==o||"\\"==o){u=Rg;break}r&&"file"==r.scheme&&!mg(i.slice(c).join(""))&&(yg(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),u=jg;continue;case Rg:if(o==Bp||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&yg(h))u=jg;else if(""==h){if(t.host="",n)return;u=Bg}else{if(s=ig(t,h))return s;if("localhost"==t.host&&(t.host=""),n)return;h="",u=Bg}continue}h+=o;break;case Bg:if(pg(t)){if(u=jg,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Bp&&(u=jg,"/"!=o))continue}else t.fragment="",u=Vg;else t.query="",u=zg;break;case jg:if(o==Bp||"/"==o||"\\"==o&&pg(t)||!n&&("?"==o||"#"==o)){if(".."===(l=(l=h).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(bg(t),"/"==o||"\\"==o&&pg(t)||t.path.push("")):wg(h)?"/"==o||"\\"==o&&pg(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&yg(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(o==Bp||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",u=zg):"#"==o&&(t.fragment="",u=Vg)}else h+=dg(o,cg);break;case Fg:"?"==o?(t.query="",u=zg):"#"==o?(t.fragment="",u=Vg):o!=Bp&&(t.path[0]+=dg(o,lg));break;case zg:n||"#"!=o?o!=Bp&&("'"==o&&pg(t)?t.query+="%27":t.query+="#"==o?"%23":dg(o,lg)):(t.fragment="",u=Vg);break;case Vg:o!=Bp&&(t.fragment+=dg(o,ug))}c++}},Ug=function(t){var n,r,i=te(this,Ug,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(t),s=Up(i,{type:"URL"});if(void 0!==o)if(o instanceof Ug)n=Hp(o);else if(r=qg(n={},String(o)))throw TypeError(r);if(r=qg(s,a,null,n))throw TypeError(r);var l=s.searchParams=new Vp,u=qp(l);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(l)||null},e||(i.href=Wg.call(i),i.origin=Yg.call(i),i.protocol=Gg.call(i),i.username=Xg.call(i),i.password=Kg.call(i),i.host=$g.call(i),i.hostname=Zg.call(i),i.port=Jg.call(i),i.pathname=Qg.call(i),i.search=tv.call(i),i.searchParams=ev.call(i),i.hash=nv.call(i))},Hg=Ug.prototype,Wg=function(){var t=Hp(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,l=t.fragment,u=e+":";return null!==i?(u+="//",gg(t)&&(u+=n+(r?":"+r:"")+"@"),u+=sg(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},Yg=function(){var t=Hp(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&pg(t)?e+"://"+sg(t.host)+(null!==n?":"+n:""):"null"},Gg=function(){return Hp(this).scheme+":"},Xg=function(){return Hp(this).username},Kg=function(){return Hp(this).password},$g=function(){var t=Hp(this),e=t.host,n=t.port;return null===e?"":null===n?sg(e):sg(e)+":"+n},Zg=function(){var t=Hp(this).host;return null===t?"":sg(t)},Jg=function(){var t=Hp(this).port;return null===t?"":String(t)},Qg=function(){var t=Hp(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},tv=function(){var t=Hp(this).query;return t?"?"+t:""},ev=function(){return Hp(this).searchParams},nv=function(){var t=Hp(this).fragment;return t?"#"+t:""},rv=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(e&&pr(Hg,{href:rv(Wg,(function(t){var e=Hp(this),n=String(t),r=qg(e,n);if(r)throw TypeError(r);qp(e.searchParams).updateSearchParams(e.query)})),origin:rv(Yg),protocol:rv(Gg,(function(t){var e=Hp(this);qg(e,String(t)+":",xg)})),username:rv(Xg,(function(t){var e=Hp(this),n=uo(String(t));if(!vg(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=dg(n[r],hg)}})),password:rv(Kg,(function(t){var e=Hp(this),n=uo(String(t));if(!vg(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=dg(n[r],hg)}})),host:rv($g,(function(t){var e=Hp(this);e.cannotBeABaseURL||qg(e,String(t),Mg)})),hostname:rv(Zg,(function(t){var e=Hp(this);e.cannotBeABaseURL||qg(e,String(t),Dg)})),port:rv(Jg,(function(t){var e=Hp(this);vg(e)||(""==(t=String(t))?e.port=null:qg(e,t,Ag))})),pathname:rv(Qg,(function(t){var e=Hp(this);e.cannotBeABaseURL||(e.path=[],qg(e,t+"",Bg))})),search:rv(tv,(function(t){var e=Hp(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",qg(e,t,zg)),qp(e.searchParams).updateSearchParams(e.query)})),searchParams:rv(ev),hash:rv(nv,(function(t){var e=Hp(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",qg(e,t,Vg)):e.fragment=null}))}),tt(Hg,"toJSON",(function(){return Wg.call(this)}),{enumerable:!0}),tt(Hg,"toString",(function(){return Wg.call(this)}),{enumerable:!0}),zp){var iv=zp.createObjectURL,ov=zp.revokeObjectURL;iv&&tt(Ug,"createObjectURL",(function(t){return iv.apply(zp,arguments)})),ov&&tt(Ug,"revokeObjectURL",(function(t){return ov.apply(zp,arguments)}))}$t(Ug,"URL"),Wt({global:!0,forced:!ap,sham:!e},{URL:Ug}),Wt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});r((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof c?e:c,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var u={};function c(){}function h(){}function d(){}var f={};f[i]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(E([])));g&&g!==e&&n.call(g,i)&&(f=g);var v=d.prototype=c.prototype=Object.create(f);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=v.constructor=d,d.constructor=h,d[a]=h.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(m.prototype),m.prototype[o]=function(){return this},t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new m(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));
/**
  @license @nocompile
  Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */(function(){var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function r(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function i(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var o="undefined"!=typeof window&&window===this?this:void 0!==n&&null!=n?n:this,a="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function s(){s=function(){},o.Symbol||(o.Symbol=h)}function l(t,e){this.a=t,a(this,"description",{configurable:!0,writable:!0,value:e})}l.prototype.toString=function(){return this.a};var u,c,h=(u=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new l("jscomp_symbol_"+(e||"")+"_"+u++,e)});function d(){s();var t=o.Symbol.iterator;t||(t=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&a(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return d(),(t={next:t})[o.Symbol.iterator]=function(){return this},t}(e(this))}}),d=function(){}}if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var f;t:{var p={};try{p.__proto__={Pa:!0},f=p.Pa;break t}catch(Yt){}f=!1}c=f?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var g=c;function v(){this.l=!1,this.b=null,this.Ea=void 0,this.a=1,this.Y=0,this.c=null}function y(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function m(t,e){t.c={Sa:e,Wa:!0},t.a=t.Y}function b(t,e){return t.a=3,{value:e}}function w(t){this.a=new v,this.b=t}function x(t,e,n,r){try{var i=e.call(t.a.b,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.a.l=!1,i;var o=i.value}catch(e){return t.a.b=null,m(t.a,e),_(t)}return t.a.b=null,r.call(t.a,o),_(t)}function _(t){for(;t.a.a;)try{var e=t.b(t.a);if(e)return t.a.l=!1,{value:e.value,done:!1}}catch(e){t.a.Ea=void 0,m(t.a,e)}if(t.a.l=!1,t.a.c){if(e=t.a.c,t.a.c=null,e.Wa)throw e.Sa;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function E(t){this.next=function(e){return y(t.a),t.a.b?e=x(t,t.a.b.next,e,t.a.J):(t.a.J(e),e=_(t)),e},this.throw=function(e){return y(t.a),t.a.b?e=x(t,t.a.b.throw,e,t.a.J):(m(t.a,e),e=_(t)),e},this.return=function(e){return function(t,e){y(t.a);var n=t.a.b;return n?x(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),_(t))}(t,e)},d(),this[Symbol.iterator]=function(){return this}}function k(t,e){return e=new E(new w(e)),g&&g(e,t.prototype),e}v.prototype.J=function(t){this.Ea=t},v.prototype.return=function(t){this.c={return:t},this.a=this.Y},Array.from||(Array.from=function(t){return[].slice.call(t)}),Object.assign||(Object.assign=function(t){for(var e,n=[].slice.call(arguments,1),r=0;r<n.length;r++)if(e=n[r])for(var i=t,o=e,a=Object.getOwnPropertyNames(o),s=0;s<a.length;s++)i[e=a[s]]=o[e];return t}),function(){if(!function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}()){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var e=/Trident/.test(navigator.userAgent);if(!window.Event||e&&"function"!=typeof window.Event){var n=window.Event;if(window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,!!e.bubbles,!!e.cancelable),n},n){for(var r in n)window.Event[r]=n[r];window.Event.prototype=n.prototype}}if((!window.CustomEvent||e&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.MouseEvent||e&&"function"!=typeof window.MouseEvent){if(e=window.MouseEvent,window.MouseEvent=function(t,e){e=e||{};var n=document.createEvent("MouseEvent");return n.initMouseEvent(t,!!e.bubbles,!!e.cancelable,e.view||window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n},e)for(var i in e)window.MouseEvent[i]=e[i];window.MouseEvent.prototype=e.prototype}}(),function(){function t(){}function e(t,e){if(!t.childNodes.length)return[];switch(t.nodeType){case Node.DOCUMENT_NODE:return g.call(t,e);case Node.DOCUMENT_FRAGMENT_NODE:return v.call(t,e);default:return p.call(t,e)}}var n="undefined"==typeof HTMLTemplateElement,r=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),i=!1;/Trident/.test(navigator.userAgent)&&function(){function t(t,e){if(t instanceof DocumentFragment)for(var r;r=t.firstChild;)n.call(this,r,e);else n.call(this,t,e);return t}i=!0;var e=Node.prototype.cloneNode;Node.prototype.cloneNode=function(t){return t=e.call(this,t),this instanceof DocumentFragment&&(t.__proto__=DocumentFragment.prototype),t},DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll,DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector,Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var n=Node.prototype.insertBefore;Node.prototype.insertBefore=t;var r=Node.prototype.appendChild;Node.prototype.appendChild=function(e){return e instanceof DocumentFragment?t.call(this,e,null):r.call(this,e),e};var o=Node.prototype.removeChild,a=Node.prototype.replaceChild;Node.prototype.replaceChild=function(e,n){return e instanceof DocumentFragment?(t.call(this,e,n),o.call(this,n)):a.call(this,e,n),n},Document.prototype.createDocumentFragment=function(){var t=this.createElement("df");return t.__proto__=DocumentFragment.prototype,t};var s=Document.prototype.importNode;Document.prototype.importNode=function(t,e){return e=s.call(this,t,e||!1),t instanceof DocumentFragment&&(e.__proto__=DocumentFragment.prototype),e}}();var o=Node.prototype.cloneNode,a=Document.prototype.createElement,s=Document.prototype.importNode,l=Node.prototype.removeChild,u=Node.prototype.appendChild,c=Node.prototype.replaceChild,h=DOMParser.prototype.parseFromString,d=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML")||{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}},f=Object.getOwnPropertyDescriptor(window.Node.prototype,"childNodes")||{get:function(){return this.childNodes}},p=Element.prototype.querySelectorAll,g=Document.prototype.querySelectorAll,v=DocumentFragment.prototype.querySelectorAll,y=function(){if(!n){var t=document.createElement("template"),e=document.createElement("template");return e.content.appendChild(document.createElement("div")),t.content.appendChild(e),0===(t=t.cloneNode(!0)).content.childNodes.length||0===t.content.firstChild.content.childNodes.length||r}}();if(n){var m=document.implementation.createHTMLDocument("template"),b=!0,w=document.createElement("style");w.textContent="template{display:none;}";var x=document.head;x.insertBefore(w,x.firstElementChild),t.prototype=Object.create(HTMLElement.prototype);var _=!document.createElement("div").hasOwnProperty("innerHTML");t.U=function(e){if(!e.content&&e.namespaceURI===document.documentElement.namespaceURI){e.content=m.createDocumentFragment();for(var n;n=e.firstChild;)u.call(e.content,n);if(_)e.__proto__=t.prototype;else if(e.cloneNode=function(e){return t.b(this,e)},b)try{k(e),S(e)}catch(t){b=!1}t.a(e.content)}};var E={option:["select"],thead:["table"],col:["colgroup","table"],tr:["tbody","table"],th:["tr","tbody","table"],td:["tr","tbody","table"]},k=function(e){Object.defineProperty(e,"innerHTML",{get:function(){return M(this)},set:function(e){var n=E[(/<([a-z][^/\0>\x20\t\r\n\f]+)/i.exec(e)||["",""])[1].toLowerCase()];if(n)for(var r=0;r<n.length;r++)e="<"+n[r]+">"+e+"</"+n[r]+">";for(m.body.innerHTML=e,t.a(m);this.content.firstChild;)l.call(this.content,this.content.firstChild);if(e=m.body,n)for(r=0;r<n.length;r++)e=e.lastChild;for(;e.firstChild;)u.call(this.content,e.firstChild)},configurable:!0})},S=function(t){Object.defineProperty(t,"outerHTML",{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(t){if(!this.parentNode)throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");for(m.body.innerHTML=t,t=this.ownerDocument.createDocumentFragment();m.body.firstChild;)u.call(t,m.body.firstChild);c.call(this.parentNode,t,this)},configurable:!0})};k(t.prototype),S(t.prototype),t.a=function(n){for(var r,i=0,o=(n=e(n,"template")).length;i<o&&(r=n[i]);i++)t.U(r)},document.addEventListener("DOMContentLoaded",(function(){t.a(document)})),Document.prototype.createElement=function(){var e=a.apply(this,arguments);return"template"===e.localName&&t.U(e),e},DOMParser.prototype.parseFromString=function(){var e=h.apply(this,arguments);return t.a(e),e},Object.defineProperty(HTMLElement.prototype,"innerHTML",{get:function(){return M(this)},set:function(e){d.set.call(this,e),t.a(this)},configurable:!0,enumerable:!0});var C=/[&\u00A0"]/g,T=/[&\u00A0<>]/g,N=function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â ":return"&nbsp;"}},O=(w=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e})("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),P=w("style script xmp iframe noembed noframes plaintext noscript".split(" ")),M=function(t,e){"template"===t.localName&&(t=t.content);for(var n,r="",i=e?e(t):f.get.call(t),o=0,a=i.length;o<a&&(n=i[o]);o++){t:{var s=n,l=t,u=e;switch(s.nodeType){case Node.ELEMENT_NODE:for(var c=s.localName,h="<"+c,d=s.attributes,p=0;l=d[p];p++)h+=" "+l.name+'="'+l.value.replace(C,N)+'"';h+=">",s=O[c]?h:h+M(s,u)+"</"+c+">";break t;case Node.TEXT_NODE:s=s.data,s=l&&P[l.localName]?s:s.replace(T,N);break t;case Node.COMMENT_NODE:s="\x3c!--"+s.data+"--\x3e";break t;default:throw window.console.error(s),Error("not implemented")}}r+=s}return r}}if(n||y){t.b=function(t,e){var n=o.call(t,!1);return this.U&&this.U(n),e&&(u.call(n.content,o.call(t.content,!0)),D(n.content,t.content)),n};var D=function(n,r){if(r.querySelectorAll&&0!==(r=e(r,"template")).length)for(var i,o,a=0,s=(n=e(n,"template")).length;a<s;a++)o=r[a],i=n[a],t&&t.U&&t.U(o),c.call(i.parentNode,A.call(o,!0),i)},A=Node.prototype.cloneNode=function(e){if(!i&&r&&this instanceof DocumentFragment){if(!e)return this.ownerDocument.createDocumentFragment();var n=L.call(this.ownerDocument,this,!0)}else n=this.nodeType===Node.ELEMENT_NODE&&"template"===this.localName&&this.namespaceURI==document.documentElement.namespaceURI?t.b(this,e):o.call(this,e);return e&&D(n,this),n},L=Document.prototype.importNode=function(n,r){if(r=r||!1,"template"===n.localName)return t.b(n,r);var i=s.call(this,n,r);if(r){D(i,n),n=e(i,'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(var o,l=0;l<n.length;l++){o=n[l],(r=a.call(document,"script")).textContent=o.textContent;for(var u,h=o.attributes,d=0;d<h.length;d++)u=h[d],r.setAttribute(u.name,u.value);c.call(o.parentNode,r,o)}}return i}}n&&(window.HTMLTemplateElement=t)}();var S=setTimeout;function C(){}function T(t){if(!(this instanceof T))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this.I=0,this.za=!1,this.C=void 0,this.W=[],A(t,this)}function N(t,e){for(;3===t.I;)t=t.C;0===t.I?t.W.push(e):(t.za=!0,L((function(){var n=1===t.I?e.Ya:e.Za;if(null===n)(1===t.I?O:P)(e.va,t.C);else{try{var r=n(t.C)}catch(t){return void P(e.va,t)}O(e.va,r)}})))}function O(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof T)return t.I=3,t.C=e,void M(t);if("function"==typeof n)return void A(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t.I=1,t.C=e,M(t)}catch(e){P(t,e)}}function P(t,e){t.I=2,t.C=e,M(t)}function M(t){2===t.I&&0===t.W.length&&L((function(){t.za||"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t.C)}));for(var e=0,n=t.W.length;e<n;e++)N(t,t.W[e]);t.W=null}function D(t,e,n){this.Ya="function"==typeof t?t:null,this.Za="function"==typeof e?e:null,this.va=n}function A(t,e){var n=!1;try{t((function(t){n||(n=!0,O(e,t))}),(function(t){n||(n=!0,P(e,t))}))}catch(t){n||(n=!0,P(e,t))}}T.prototype.catch=function(t){return this.then(null,t)},T.prototype.then=function(t,e){var n=new this.constructor(C);return N(this,new D(t,e,n)),n},T.prototype.finally=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};var L="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){S(t,0)};if(!window.Promise){window.Promise=T,T.prototype.then=T.prototype.then,T.all=function(t){return new T((function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){r(t,e)}),n)}i[t]=a,0==--o&&e(i)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])}))},T.race=function(t){return new T((function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)}))},T.resolve=function(t){return t&&"object"==typeof t&&t.constructor===T?t:new T((function(e){e(t)}))},T.reject=function(t){return new T((function(e,n){n(t)}))};var I=document.createTextNode(""),R=[];new MutationObserver((function(){for(var t=R.length,e=0;e<t;e++)R[e]();R.splice(0,t)})).observe(I,{characterData:!0}),L=function(t){R.push(t),I.textContent=0<I.textContent.length?"":"a"}}!function(t,e){if(!(e in t)){var r=typeof n==typeof r?window:n,i=0,o=""+Math.random(),a="__symbol@@"+o,s=t.getOwnPropertyNames,l=t.getOwnPropertyDescriptor,u=t.create,c=t.keys,h=t.freeze||t,d=t.defineProperty,f=t.defineProperties,p=l(t,"getOwnPropertyNames"),g=t.prototype,v=g.hasOwnProperty,y=g.propertyIsEnumerable,m=g.toString,b=function(t,e,n){v.call(t,a)||d(t,a,{enumerable:!1,configurable:!1,writable:!1,value:{}}),t[a]["@@"+e]=n},w=function(t,e){var n=u(t);return s(e).forEach((function(t){k.call(e,t)&&P(n,t,e[t])})),n},x=function(){},_=function(t){return t!=a&&!v.call(T,t)},E=function(t){return t!=a&&v.call(T,t)},k=function(t){var e=""+t;return E(e)?v.call(this,e)&&this[a]["@@"+e]:y.call(this,t)},S=function(e){return d(g,e,{enumerable:!1,configurable:!0,get:x,set:function(t){D(this,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),b(this,e,!0)}}),h(T[e]=d(t(e),"constructor",N))},C=function(t){if(this&&this!==r)throw new TypeError("Symbol is not a constructor");return S("__symbol:".concat(t||"",o,++i))},T=u(null),N={value:C},O=function(t){return T[t]},P=function(t,e,n){var r=""+e;if(E(r)){if(e=D,n.enumerable){var i=u(n);i.enumerable=!1}else i=n;e(t,r,i),b(t,r,!!n.enumerable)}else d(t,e,n);return t},M=function(t){return s(t).filter(E).map(O)};p.value=P,d(t,"defineProperty",p),p.value=M,d(t,e,p),p.value=function(t){return s(t).filter(_)},d(t,"getOwnPropertyNames",p),p.value=function(t,e){var n=M(e);return n.length?c(e).concat(n).forEach((function(n){k.call(e,n)&&P(t,n,e[n])})):f(t,e),t},d(t,"defineProperties",p),p.value=k,d(g,"propertyIsEnumerable",p),p.value=C,d(r,"Symbol",p),p.value=function(t){return(t="__symbol:".concat("__symbol:",t,o))in g?T[t]:S(t)},d(C,"for",p),p.value=function(t){if(_(t))throw new TypeError(t+" is not a symbol");return v.call(T,t)?t.slice(20,-o.length):void 0},d(C,"keyFor",p),p.value=function(t,e){var n=l(t,e);return n&&E(e)&&(n.enumerable=k.call(t,e)),n},d(t,"getOwnPropertyDescriptor",p),p.value=function(t,e){return 1===arguments.length?u(t):w(t,e)},d(t,"create",p),p.value=function(){var t=m.call(this);return"[object String]"===t&&E(this)?"[object Symbol]":t},d(g,"toString",p);try{var D=u(d({},"__symbol:",{get:function(){return d(this,"__symbol:",{value:!1})["__symbol:"]}}))["__symbol:"]||d}catch(t){D=function(t,e,n){var r=l(g,e);delete g[e],d(t,e,n),d(g,e,r)}}}}(Object,"getOwnPropertySymbols"),function(t){var e,n=t.defineProperty,r=t.prototype,i=r.toString;"iterator match replace search split hasInstance isConcatSpreadable unscopables species toPrimitive toStringTag".split(" ").forEach((function(o){if(!(o in Symbol))switch(n(Symbol,o,{value:Symbol(o)}),o){case"toStringTag":(e=t.getOwnPropertyDescriptor(r,"toString")).value=function(){var t=i.call(this),e=this[Symbol.toStringTag];return void 0===e?t:"[object "+e+"]"},n(r,"toString",e)}}))}(Object),function(t,e,n){function r(){return this}e[t]||(e[t]=function(){var e=0,n=this,i={next:function(){var t=n.length<=e;return t?{done:t}:{done:t,value:n[e++]}}};return i[t]=r,i}),n[t]||(n[t]=function(){var e=String.fromCodePoint,n=this,i=0,o=n.length,a={next:function(){var t=o<=i,r=t?"":e(n.codePointAt(i));return i+=r.length,t?{done:t}:{done:t,value:r}}};return a[t]=r,a})}(Symbol.iterator,Array.prototype,String.prototype);var B=Object.prototype.toString;Object.prototype.toString=function(){return void 0===this?"[object Undefined]":null===this?"[object Null]":B.call(this)},Object.keys=function(t){return Object.getOwnPropertyNames(t).filter((function(e){return(e=Object.getOwnPropertyDescriptor(t,e))&&e.enumerable}))};var j=window.Symbol.iterator;String.prototype[j]&&String.prototype.codePointAt||(String.prototype[j]=function t(){var e,n=this;return k(t,(function(t){if(1==t.a&&(e=0),3!=t.a)return e<n.length?t=b(t,n[e]):(t.a=0,t=void 0),t;e++,t.a=2}))}),Set.prototype[j]||(Set.prototype[j]=function t(){var e,n,r=this;return k(t,(function(t){if(1==t.a&&(e=[],r.forEach((function(t){e.push(t)})),n=0),3!=t.a)return n<e.length?t=b(t,e[n]):(t.a=0,t=void 0),t;n++,t.a=2}))}),Map.prototype[j]||(Map.prototype[j]=function t(){var e,n,r=this;return k(t,(function(t){if(1==t.a&&(e=[],r.forEach((function(t,n){e.push([n,t])})),n=0),3!=t.a)return n<e.length?t=b(t,e[n]):(t.a=0,t=void 0),t;n++,t.a=2}))}),window.WebComponents=window.WebComponents||{flags:{}};var F=document.querySelector('script[src*="webcomponents-bundle"]'),z=/wc-(.+)/,V={};if(!V.noOpts){if(location.search.slice(1).split("&").forEach((function(t){var e;(t=t.split("="))[0]&&(e=t[0].match(z))&&(V[e[1]]=t[1]||!0)})),F)for(var q=0,U=void 0;U=F.attributes[q];q++)"src"!==U.name&&(V[U.name]=U.value||!0);if(V.log&&V.log.split){var H=V.log.split(",");V.log={},H.forEach((function(t){V.log[t]=!0}))}else V.log={}}window.WebComponents.flags=V;var W=V.shadydom;if(W){window.ShadyDOM=window.ShadyDOM||{},window.ShadyDOM.force=W;var Y=V.noPatch;window.ShadyDOM.noPatch="true"===Y||Y}var G=V.register||V.ce;function X(){}function K(t){return t.__shady||(t.__shady=new X),t.__shady}function $(t){return t&&t.__shady}G&&window.customElements&&(window.customElements.forcePolyfill=G),X.prototype.toJSON=function(){return{}};var Z=window.ShadyDOM||{};Z.Ua=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var J=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");function Q(t){return(t=$(t))&&void 0!==t.firstChild}function tt(t){return t instanceof ShadowRoot}function et(t){return(t=(t=$(t))&&t.root)&&Dn(t)}Z.B=!!(J&&J.configurable&&J.get),Z.sa=Z.force||!Z.Ua,Z.D=Z.noPatch||!1,Z.la=Z.preferPerformance,Z.ua="on-demand"===Z.D,Z.Ia=navigator.userAgent.match("Trident");var nt=Element.prototype,rt=nt.matches||nt.matchesSelector||nt.mozMatchesSelector||nt.msMatchesSelector||nt.oMatchesSelector||nt.webkitMatchesSelector,it=document.createTextNode(""),ot=0,at=[];function st(t){at.push(t),it.textContent=ot++}new MutationObserver((function(){for(;at.length;)try{at.shift()()}catch(t){throw it.textContent=ot++,t}})).observe(it,{characterData:!0});var lt=!!document.contains;function ut(t,e){for(;e;){if(e==t)return!0;e=e.__shady_parentNode}return!1}function ct(t){for(var e=t.length-1;0<=e;e--){var n=t[e],i=n.getAttribute("id")||n.getAttribute("name");i&&"length"!==i&&isNaN(i)&&(t[i]=n)}return t.item=function(e){return t[e]},t.namedItem=function(e){if("length"!==e&&isNaN(e)&&t[e])return t[e];for(var n=r(t),i=n.next();!i.done;i=n.next())if(((i=i.value).getAttribute("id")||i.getAttribute("name"))==e)return i;return null},t}function ht(t){var e=[];for(t=t.__shady_native_firstChild;t;t=t.__shady_native_nextSibling)e.push(t);return e}function dt(t){var e=[];for(t=t.__shady_firstChild;t;t=t.__shady_nextSibling)e.push(t);return e}function ft(t,e,n){if(n.configurable=!0,n.value)t[e]=n.value;else try{Object.defineProperty(t,e,n)}catch(t){}}function pt(t,e,n,r){for(var i in n=void 0===n?"":n,e)r&&0<=r.indexOf(i)||ft(t,n+i,e[i])}function gt(t,e){for(var n in e)n in t&&ft(t,n,e[n])}function vt(t){var e={};return Object.getOwnPropertyNames(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e}function yt(t,e){for(var n,r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++)t[n=r[i]]=e[n]}var mt,bt=[];function wt(t){mt||(mt=!0,st(xt)),bt.push(t)}function xt(){mt=!1;for(var t=!!bt.length;bt.length;)bt.shift()();return t}function _t(){this.a=!1,this.addedNodes=[],this.removedNodes=[],this.ia=new Set}xt.list=bt,_t.prototype.flush=function(){if(this.a){this.a=!1;var t=this.takeRecords();t.length&&this.ia.forEach((function(e){e(t)}))}},_t.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var t=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],t}return[]};var Et=/[&\u00A0"]/g,kt=/[&\u00A0<>]/g;function St(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â ":return"&nbsp;"}}function Ct(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}var Tt=Ct("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),Nt=Ct("style script xmp iframe noembed noframes plaintext noscript".split(" "));function Ot(t,e){"template"===t.localName&&(t=t.content);for(var n="",r=e?e(t):t.childNodes,i=0,o=r.length,a=void 0;i<o&&(a=r[i]);i++){t:{var s=a,l=t,u=e;switch(s.nodeType){case Node.ELEMENT_NODE:for(var c,h="<"+(l=s.localName),d=s.attributes,f=0;c=d[f];f++)h+=" "+c.name+'="'+c.value.replace(Et,St)+'"';h+=">",s=Tt[l]?h:h+Ot(s,u)+"</"+l+">";break t;case Node.TEXT_NODE:s=s.data,s=l&&Nt[l.localName]?s:s.replace(kt,St);break t;case Node.COMMENT_NODE:s="\x3c!--"+s.data+"--\x3e";break t;default:throw window.console.error(s),Error("not implemented")}}n+=s}return n}var Pt=Z.B,Mt={querySelector:function(t){return this.__shady_native_querySelector(t)},querySelectorAll:function(t){return this.__shady_native_querySelectorAll(t)}},Dt={};function At(t){Dt[t]=function(e){return e["__shady_native_"+t]}}function Lt(t,e){for(var n in pt(t,e,"__shady_native_"),e)At(n)}function It(t,e){e=void 0===e?[]:e;for(var n=0;n<e.length;n++){var r=e[n],i=Object.getOwnPropertyDescriptor(t,r);i&&(Object.defineProperty(t,"__shady_native_"+r,i),i.value?Mt[r]||(Mt[r]=i.value):At(r))}}var Rt=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),Bt=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1),jt=document.implementation.createHTMLDocument("inert");function Ft(t){for(var e;e=t.__shady_native_firstChild;)t.__shady_native_removeChild(e)}var zt=["firstElementChild","lastElementChild","children","childElementCount"],Vt=["querySelector","querySelectorAll"];var qt=vt({get childNodes(){return this.__shady_childNodes},get firstChild(){return this.__shady_firstChild},get lastChild(){return this.__shady_lastChild},get childElementCount(){return this.__shady_childElementCount},get children(){return this.__shady_children},get firstElementChild(){return this.__shady_firstElementChild},get lastElementChild(){return this.__shady_lastElementChild},get shadowRoot(){return this.__shady_shadowRoot}}),Ut=vt({get textContent(){return this.__shady_textContent},set textContent(t){this.__shady_textContent=t},get innerHTML(){return this.__shady_innerHTML},set innerHTML(t){return this.__shady_innerHTML=t}}),Ht=vt({get parentElement(){return this.__shady_parentElement},get parentNode(){return this.__shady_parentNode},get nextSibling(){return this.__shady_nextSibling},get previousSibling(){return this.__shady_previousSibling},get nextElementSibling(){return this.__shady_nextElementSibling},get previousElementSibling(){return this.__shady_previousElementSibling},get className(){return this.__shady_className},set className(t){return this.__shady_className=t}});function Wt(t){for(var e in t){var n=t[e];n&&(n.enumerable=!1)}}Wt(qt),Wt(Ut),Wt(Ht);var Yt,Gt=Z.B||!0===Z.D,Xt=Gt?function(){}:function(t){var e=K(t);e.Ka||(e.Ka=!0,gt(t,Ht))},Kt=Gt?function(){}:function(t){var e=K(t);e.Ja||(e.Ja=!0,gt(t,qt),window.customElements&&window.customElements.polyfillWrapFlushCallback&&!Z.D||gt(t,Ut))},$t="__eventWrappers"+Date.now(),Zt=(Yt=Object.getOwnPropertyDescriptor(Event.prototype,"composed"))?function(t){return Yt.get.call(t)}:null,Jt=function(){function t(){}var e=!1,n={get capture(){return e=!0,!1}};return window.addEventListener("test",t,n),window.removeEventListener("test",t,n),e}();function Qt(t){if(t&&"object"==typeof t)var e=!!t.capture,n=!!t.once,r=!!t.passive,i=t.O;else e=!!t,r=n=!1;return{Ga:i,capture:e,once:n,passive:r,Fa:Jt?t:e}}var te={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},ee={DOMAttrModified:!0,DOMAttributeNameChanged:!0,DOMCharacterDataModified:!0,DOMElementNameChanged:!0,DOMNodeInserted:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemoved:!0,DOMNodeRemovedFromDocument:!0,DOMSubtreeModified:!0};function ne(t){return t instanceof Node?t.__shady_getRootNode():t}function re(t,e){var n=[],r=t;for(t=ne(t);r;)n.push(r),r=r.__shady_assignedSlot?r.__shady_assignedSlot:r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&r.host&&(e||r!==t)?r.host:r.__shady_parentNode;return n[n.length-1]===document&&n.push(window),n}function ie(t,e){if(!tt)return t;t=re(t,!0);for(var n,r,i=0,o=void 0,a=void 0;i<e.length;i++)if((r=ne(n=e[i]))!==o&&(a=t.indexOf(r),o=r),!tt(r)||-1<a)return n}function oe(t){function e(e,n){return(e=new t(e,n)).__composed=n&&!!n.composed,e}return e.__proto__=t,e.prototype=t.prototype,e}var ae={focus:!0,blur:!0};function se(t){return t.__target!==t.target||t.__relatedTarget!==t.relatedTarget}function le(t,e,n){if(n=e.__handlers&&e.__handlers[t.type]&&e.__handlers[t.type][n])for(var r,i=0;(r=n[i])&&(!se(t)||t.target!==t.relatedTarget)&&(r.call(e,t),!t.__immediatePropagationStopped);i++);}function ue(t){var e,n=t.composedPath();Object.defineProperty(t,"currentTarget",{get:function(){return i},configurable:!0});for(var r=n.length-1;0<=r;r--){var i=n[r];if(le(t,i,"capture"),t.ma)return}for(Object.defineProperty(t,"eventPhase",{get:function(){return Event.AT_TARGET}}),r=0;r<n.length;r++){var o=$(i=n[r]);if(o=o&&o.root,(0===r||o&&o===e)&&(le(t,i,"bubble"),i!==window&&(e=i.__shady_getRootNode()),t.ma))break}}function ce(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],l=s.type,u=s.capture,c=s.once,h=s.passive;if(e===s.node&&n===l&&r===u&&i===c&&o===h)return a}return-1}function he(t){return xt(),this.__shady_native_dispatchEvent(t)}function de(t,e,n){var r=Qt(n),i=r.capture,o=r.once,a=r.passive,s=r.Ga;if(r=r.Fa,e){var l=typeof e;if(("function"===l||"object"===l)&&("object"!==l||e.handleEvent&&"function"==typeof e.handleEvent)){if(ee[t])return this.__shady_native_addEventListener(t,e,r);var u=s||this;if(s=e[$t]){if(-1<ce(s,u,t,i,o,a))return}else e[$t]=[];s=function(r){if(o&&this.__shady_removeEventListener(t,e,n),r.__target||ge(r),u!==this){var i=Object.getOwnPropertyDescriptor(r,"currentTarget");Object.defineProperty(r,"currentTarget",{get:function(){return u},configurable:!0})}if(r.__previousCurrentTarget=r.currentTarget,(!tt(u)&&"slot"!==u.localName||-1!=r.composedPath().indexOf(u))&&(r.composed||-1<r.composedPath().indexOf(u)))if(se(r)&&r.target===r.relatedTarget)r.eventPhase===Event.BUBBLING_PHASE&&r.stopImmediatePropagation();else if(r.eventPhase===Event.CAPTURING_PHASE||r.bubbles||r.target===u||u instanceof Window){var a="function"===l?e.call(u,r):e.handleEvent&&e.handleEvent(r);return u!==this&&(i?(Object.defineProperty(r,"currentTarget",i),i=null):delete r.currentTarget),a}},e[$t].push({node:u,type:t,capture:i,once:o,passive:a,lb:s}),ae[t]?(this.__handlers=this.__handlers||{},this.__handlers[t]=this.__handlers[t]||{capture:[],bubble:[]},this.__handlers[t][i?"capture":"bubble"].push(s)):this.__shady_native_addEventListener(t,s,r)}}}function fe(t,e,n){if(e){var r=Qt(n);n=r.capture;var i=r.once,o=r.passive,a=r.Ga;if(r=r.Fa,ee[t])return this.__shady_native_removeEventListener(t,e,r);var s=a||this;a=void 0;var l=null;try{l=e[$t]}catch(t){}l&&(-1<(i=ce(l,s,t,n,i,o))&&(a=l.splice(i,1)[0].lb,l.length||(e[$t]=void 0))),this.__shady_native_removeEventListener(t,a||e,r),a&&ae[t]&&this.__handlers&&this.__handlers[t]&&(-1<(e=(t=this.__handlers[t][n?"capture":"bubble"]).indexOf(a))&&t.splice(e,1))}}var pe=vt({get composed(){return void 0===this.__composed&&(Zt?this.__composed="focusin"===this.type||"focusout"===this.type||Zt(this):!1!==this.isTrusted&&(this.__composed=te[this.type])),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=re(this.__target,this.composed)),this.__composedPath},get target(){return ie(this.currentTarget||this.__previousCurrentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=re(this.__relatedTarget,!0)),ie(this.currentTarget||this.__previousCurrentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.ma=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.ma=this.__immediatePropagationStopped=!0}});function ge(t){if(t.__target=t.target,t.__relatedTarget=t.relatedTarget,Z.B){var e=Object.getPrototypeOf(t);if(!e.hasOwnProperty("__shady_patchedProto")){var n=Object.create(e);n.__shady_sourceProto=e,pt(n,pe),e.__shady_patchedProto=n}t.__proto__=e.__shady_patchedProto}else pt(t,pe)}var ve=oe(Event),ye=oe(CustomEvent),me=oe(MouseEvent);var be=Object.getOwnPropertyNames(Element.prototype).filter((function(t){return"on"===t.substring(0,2)})),we=Object.getOwnPropertyNames(HTMLElement.prototype).filter((function(t){return"on"===t.substring(0,2)}));function xe(t){return{set:function(e){var n=K(this),r=t.substring(2);n.N||(n.N={}),n.N[t]&&this.removeEventListener(r,n.N[t]),this.__shady_addEventListener(r,e),n.N[t]=e},get:function(){var e=$(this);return e&&e.N&&e.N[t]},configurable:!0}}function _e(t,e){return{index:t,aa:[],ha:e}}function Ee(t,e,n,r){var i=0,o=0,a=0,s=0,l=Math.min(e-i,r-o);if(0==i&&0==o)t:{for(a=0;a<l;a++)if(t[a]!==n[a])break t;a=l}if(e==t.length&&r==n.length){s=t.length;for(var u=n.length,c=0;c<l-a&&ke(t[--s],n[--u]);)c++;s=c}if(o+=a,r-=s,0==(e-=s)-(i+=a)&&0==r-o)return[];if(i==e){for(e=_e(i,0);o<r;)e.aa.push(n[o++]);return[e]}if(o==r)return[_e(i,e-i)];for(r=r-(a=o)+1,s=e-(l=i)+1,e=Array(r),u=0;u<r;u++)e[u]=Array(s),e[u][0]=u;for(u=0;u<s;u++)e[0][u]=u;for(u=1;u<r;u++)for(c=1;c<s;c++)if(t[l+c-1]===n[a+u-1])e[u][c]=e[u-1][c-1];else{var h=e[u-1][c]+1,d=e[u][c-1]+1;e[u][c]=h<d?h:d}for(l=e.length-1,a=e[0].length-1,r=e[l][a],t=[];0<l||0<a;)0==l?(t.push(2),a--):0==a?(t.push(3),l--):(s=e[l-1][a-1],(h=(u=e[l-1][a])<(c=e[l][a-1])?u<s?u:s:c<s?c:s)==s?(s==r?t.push(0):(t.push(1),r=s),l--,a--):h==u?(t.push(3),l--,r=u):(t.push(2),a--,r=c));for(t.reverse(),e=void 0,l=[],a=0;a<t.length;a++)switch(t[a]){case 0:e&&(l.push(e),e=void 0),i++,o++;break;case 1:e||(e=_e(i,0)),e.ha++,i++,e.aa.push(n[o]),o++;break;case 2:e||(e=_e(i,0)),e.ha++,i++;break;case 3:e||(e=_e(i,0)),e.aa.push(n[o]),o++}return e&&l.push(e),l}function ke(t,e){return t===e}var Se=vt({dispatchEvent:he,addEventListener:de,removeEventListener:fe}),Ce=null;function Te(){return Ce||(Ce=window.ShadyCSS&&window.ShadyCSS.ScopingShim),Ce||null}function Ne(t,e,n){var r=Te();return!(!r||"class"!==e)&&(r.setElementClass(t,n),!0)}function Oe(t,e){var n=Te();n&&n.unscopeNode(t,e)}function Pe(t){if(t.nodeType!==Node.ELEMENT_NODE)return"";var e=Te();return e?e.currentScopeForNode(t):""}function Me(t,e){if(t)for(t.nodeType===Node.ELEMENT_NODE&&e(t),t=t.__shady_firstChild;t;t=t.__shady_nextSibling)t.nodeType===Node.ELEMENT_NODE&&Me(t,e)}var De=window.document,Ae=Z.la,Le=Object.getOwnPropertyDescriptor(Node.prototype,"isConnected"),Ie=Le&&Le.get;function Re(t){for(var e;e=t.__shady_firstChild;)t.__shady_removeChild(e)}function Be(t,e,n){if(t=(t=$(t))&&t.Z){if(e)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var r=0,i=e.childNodes.length;r<i;r++)t.addedNodes.push(e.childNodes[r]);else t.addedNodes.push(e);n&&t.removedNodes.push(n),function(t){t.a||(t.a=!0,st((function(){t.flush()})))}(t)}}var je=vt({get parentNode(){var t=$(this);return void 0!==(t=t&&t.parentNode)?t:this.__shady_native_parentNode},get firstChild(){var t=$(this);return void 0!==(t=t&&t.firstChild)?t:this.__shady_native_firstChild},get lastChild(){var t=$(this);return void 0!==(t=t&&t.lastChild)?t:this.__shady_native_lastChild},get nextSibling(){var t=$(this);return void 0!==(t=t&&t.nextSibling)?t:this.__shady_native_nextSibling},get previousSibling(){var t=$(this);return void 0!==(t=t&&t.previousSibling)?t:this.__shady_native_previousSibling},get childNodes(){if(Q(this)){var t=$(this);if(!t.childNodes){t.childNodes=[];for(var e=this.__shady_firstChild;e;e=e.__shady_nextSibling)t.childNodes.push(e)}var n=t.childNodes}else n=this.__shady_native_childNodes;return n.item=function(t){return n[t]},n},get parentElement(){var t=$(this);return(t=t&&t.parentNode)&&t.nodeType!==Node.ELEMENT_NODE&&(t=null),void 0!==t?t:this.__shady_native_parentElement},get isConnected(){if(Ie&&Ie.call(this))return!0;if(this.nodeType==Node.DOCUMENT_FRAGMENT_NODE)return!1;var t=this.ownerDocument;if(lt){if(t.__shady_native_contains(this))return!0}else if(t.documentElement&&t.documentElement.__shady_native_contains(this))return!0;for(t=this;t&&!(t instanceof Document);)t=t.__shady_parentNode||(tt(t)?t.host:void 0);return!!(t&&t instanceof Document)},get textContent(){if(Q(this)){for(var t=[],e=this.__shady_firstChild;e;e=e.__shady_nextSibling)e.nodeType!==Node.COMMENT_NODE&&t.push(e.__shady_textContent);return t.join("")}return this.__shady_native_textContent},set textContent(t){switch(null==t&&(t=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(!Q(this)&&Z.B){var e=this.__shady_firstChild;(e!=this.__shady_lastChild||e&&e.nodeType!=Node.TEXT_NODE)&&Re(this),this.__shady_native_textContent=t}else Re(this),(0<t.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_insertBefore(document.createTextNode(t));break;default:this.nodeValue=t}},insertBefore:function(t,e){if(this.ownerDocument!==De&&t.ownerDocument!==De)return this.__shady_native_insertBefore(t,e),t;if(t===this)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(e){var n=$(e);if(void 0!==(n=n&&n.parentNode)&&n!==this||void 0===n&&e.__shady_native_parentNode!==this)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.")}if(e===t)return t;Be(this,t);var o=[],a=(n=Rn(this))?n.host.localName:Pe(this),s=t.__shady_parentNode;if(s){var l=Pe(t),u=!!n||!Rn(t)||Ae&&void 0!==this.__noInsertionPoint;s.__shady_removeChild(t,u)}s=!0;var c=(!Ae||void 0===t.__noInsertionPoint&&void 0===this.__noInsertionPoint)&&!function t(e,n){var r=Te();if(!r)return!0;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(r=!0,e=e.__shady_firstChild;e;e=e.__shady_nextSibling)r=r&&t(e,n);return r}return e.nodeType!==Node.ELEMENT_NODE||r.currentScopeForNode(e)===n}(t,a),h=n&&!t.__noInsertionPoint&&(!Ae||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE);return(h||c)&&(c&&(l=l||Pe(t)),Me(t,(function(t){if(h&&"slot"===t.localName&&o.push(t),c){var e=l;Te()&&(e&&Oe(t,e),(e=Te())&&e.scopeNode(t,a))}}))),o.length&&(Nn(n),n.c.push.apply(n.c,o instanceof Array?o:i(r(o))),En(n)),Q(this)&&(function(t,e,n){dn(e,2);var r=K(e);if(void 0!==r.firstChild&&(r.childNodes=null),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(t=t.__shady_native_firstChild;t;t=t.__shady_native_nextSibling)fn(t,e,r,n);else fn(t,e,r,n)}(t,this,e),(u=$(this)).root?(s=!1,et(this)&&En(u.root)):n&&"slot"===this.localName&&(s=!1,En(n))),s?(n=tt(this)?this.host:this,e?(e=function t(e){var n=e;if(e&&"slot"===e.localName){var r=$(e);(r=r&&r.V)&&(n=r.length?r[0]:t(e.__shady_nextSibling))}return n}(e),n.__shady_native_insertBefore(t,e)):n.__shady_native_appendChild(t)):t.ownerDocument!==this.ownerDocument&&this.ownerDocument.adoptNode(t),t},appendChild:function(t){if(this!=t||!tt(t))return this.__shady_insertBefore(t)},removeChild:function(t,e){if(e=void 0!==e&&e,this.ownerDocument!==De)return this.__shady_native_removeChild(t);if(t.__shady_parentNode!==this)throw Error("The node to be removed is not a child of this node: "+t);Be(this,null,t);var n=Rn(t),r=n&&function(t,e){if(t.a){On(t);var n,r=t.b;for(n in r)for(var i=r[n],o=0;o<i.length;o++){var a=i[o];if(ut(e,a)){i.splice(o,1);var s=t.a.indexOf(a);if(0<=s&&(t.a.splice(s,1),(s=$(a.__shady_parentNode))&&s.ca&&s.ca--),o--,a=$(a),s=a.V)for(var l=0;l<s.length;l++){var u=s[l],c=u.__shady_native_parentNode;c&&c.__shady_native_removeChild(u)}a.V=[],a.assignedNodes=[],s=!0}}return s}}(n,t),i=$(this);if(Q(this)&&(function(t,e){var n=K(t);e=K(e),t===e.firstChild&&(e.firstChild=n.nextSibling),t===e.lastChild&&(e.lastChild=n.previousSibling),t=n.previousSibling;var r=n.nextSibling;t&&(K(t).nextSibling=r),r&&(K(r).previousSibling=t),n.parentNode=n.previousSibling=n.nextSibling=void 0,void 0!==e.childNodes&&(e.childNodes=null)}(t,this),et(this))){En(i.root);var o=!0}if(Te()&&!e&&n&&t.nodeType!==Node.TEXT_NODE){var a=Pe(t);Me(t,(function(t){Oe(t,a)}))}return function t(e){var n=$(e);if(n&&void 0!==n.ka)for(n=e.__shady_firstChild;n;n=n.__shady_nextSibling)t(n);(e=$(e))&&(e.ka=void 0)}(t),n&&((e="slot"===this.localName)&&(o=!0),(r||e)&&En(n)),o||(o=tt(this)?this.host:this,(!i.root&&"slot"!==t.localName||o===t.__shady_native_parentNode)&&o.__shady_native_removeChild(t)),t},replaceChild:function(t,e){return this.__shady_insertBefore(t,e),this.__shady_removeChild(e),t},cloneNode:function(t){if("template"==this.localName)return this.__shady_native_cloneNode(t);var e=this.__shady_native_cloneNode(!1);if(t&&e.nodeType!==Node.ATTRIBUTE_NODE){t=this.__shady_firstChild;for(var n;t;t=t.__shady_nextSibling)n=t.__shady_cloneNode(!0),e.__shady_appendChild(n)}return e},getRootNode:function(t){if(this&&this.nodeType){var e=K(this),n=e.ka;return void 0===n&&(tt(this)?(n=this,e.ka=n):(n=(n=this.__shady_parentNode)?n.__shady_getRootNode(t):this,document.documentElement.__shady_native_contains(this)&&(e.ka=n))),n}},contains:function(t){return ut(this,t)}}),Fe=vt({get assignedSlot(){var t=this.__shady_parentNode;return(t=t&&t.__shady_shadowRoot)&&kn(t),(t=$(this))&&t.assignedSlot||null}});function ze(t,e,n){var r=[];return function t(e,n,r,i){for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling){var o;if(o=e.nodeType===Node.ELEMENT_NODE){var a=n,s=r,l=i,u=a(o=e);u&&l.push(o),s&&s(u)?o=u:(t(o,a,s,l),o=void 0)}if(o)break}}(t,e,n,r),r}var Ve=vt({get firstElementChild(){var t=$(this);if(t&&void 0!==t.firstChild){for(t=this.__shady_firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_nextSibling;return t}return this.__shady_native_firstElementChild},get lastElementChild(){var t=$(this);if(t&&void 0!==t.lastChild){for(t=this.__shady_lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_previousSibling;return t}return this.__shady_native_lastElementChild},get children(){return Q(this)?ct(Array.prototype.filter.call(dt(this),(function(t){return t.nodeType===Node.ELEMENT_NODE}))):this.__shady_native_children},get childElementCount(){var t=this.__shady_children;return t?t.length:0}}),qe=vt({querySelector:function(t){return ze(this,(function(e){return rt.call(e,t)}),(function(t){return!!t}))[0]||null},querySelectorAll:function(t,e){if(e){e=Array.prototype.slice.call(this.__shady_native_querySelectorAll(t));var n=this.__shady_getRootNode();return ct(e.filter((function(t){return t.__shady_getRootNode()==n})))}return ct(ze(this,(function(e){return rt.call(e,t)})))}}),Ue=Z.la&&!Z.D?yt({},Ve):Ve;yt(Ve,qe);var He=window.document;function We(t,e){if("slot"===e)et(t=t.__shady_parentNode)&&En($(t).root);else if("slot"===t.localName&&"name"===e&&(e=Rn(t))){if(e.a){On(e);var n=t.La,r=Pn(t);if(r!==n){var i=(n=e.b[n]).indexOf(t);0<=i&&n.splice(i,1),(n=e.b[r]||(e.b[r]=[])).push(t),1<n.length&&(e.b[r]=Mn(n))}}En(e)}}var Ye=vt({get previousElementSibling(){var t=$(this);if(t&&void 0!==t.previousSibling){for(t=this.__shady_previousSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_previousSibling;return t}return this.__shady_native_previousElementSibling},get nextElementSibling(){var t=$(this);if(t&&void 0!==t.nextSibling){for(t=this.__shady_nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_nextSibling;return t}return this.__shady_native_nextElementSibling},get slot(){return this.getAttribute("slot")},set slot(t){this.__shady_setAttribute("slot",t)},get className(){return this.getAttribute("class")||""},set className(t){this.__shady_setAttribute("class",t)},setAttribute:function(t,e){this.ownerDocument!==He?this.__shady_native_setAttribute(t,e):Ne(this,t,e)||(this.__shady_native_setAttribute(t,e),We(this,t))},removeAttribute:function(t){this.ownerDocument!==He?this.__shady_native_removeAttribute(t):Ne(this,t,"")?""===this.getAttribute(t)&&this.__shady_native_removeAttribute(t):(this.__shady_native_removeAttribute(t),We(this,t))}});Z.la||be.forEach((function(t){Ye[t]=xe(t)}));var Ge=vt({attachShadow:function(t){if(!this)throw Error("Must provide a host.");if(!t)throw Error("Not enough arguments.");if(t.shadyUpgradeFragment&&!Z.Ia){var e=t.shadyUpgradeFragment;if(e.__proto__=ShadowRoot.prototype,_n(e,this,t),pn(e,e),t=e.__noInsertionPoint?null:e.querySelectorAll("slot"),e.__noInsertionPoint=void 0,t&&t.length){var n=e;Nn(n),n.c.push.apply(n.c,t instanceof Array?t:i(r(t))),En(e)}e.host.__shady_native_appendChild(e)}else e=new xn(mn,this,t);return this.__CE_shadowRoot=e},get shadowRoot(){var t=$(this);return t&&t.bb||null}});yt(Ye,Ge);var Xe=document.implementation.createHTMLDocument("inert"),Ke=vt({get innerHTML(){return Q(this)?Ot("template"===this.localName?this.content:this,dt):this.__shady_native_innerHTML},set innerHTML(t){if("template"===this.localName)this.__shady_native_innerHTML=t;else{Re(this);var e=this.localName||"div";for(e=this.namespaceURI&&this.namespaceURI!==Xe.namespaceURI?Xe.createElementNS(this.namespaceURI,e):Xe.createElement(e),Z.B?e.__shady_native_innerHTML=t:e.innerHTML=t;t=e.__shady_firstChild;)this.__shady_insertBefore(t)}}}),$e=vt({blur:function(){var t=$(this);(t=(t=t&&t.root)&&t.activeElement)?t.__shady_blur():this.__shady_native_blur()}});Z.la||we.forEach((function(t){$e[t]=xe(t)}));var Ze=vt({assignedNodes:function(t){if("slot"===this.localName){var e=this.__shady_getRootNode();return e&&tt(e)&&kn(e),(e=$(this))&&(t&&t.flatten?e.V:e.assignedNodes)||[]}},addEventListener:function(t,e,n){if("slot"!==this.localName||"slotchange"===t)de.call(this,t,e,n);else{"object"!=typeof n&&(n={capture:!!n});var r=this.__shady_parentNode;if(!r)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.O=this,r.__shady_addEventListener(t,e,n)}},removeEventListener:function(t,e,n){if("slot"!==this.localName||"slotchange"===t)fe.call(this,t,e,n);else{"object"!=typeof n&&(n={capture:!!n});var r=this.__shady_parentNode;if(!r)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.O=this,r.__shady_removeEventListener(t,e,n)}}}),Je=vt({getElementById:function(t){return""===t?null:ze(this,(function(e){return e.id==t}),(function(t){return!!t}))[0]||null}}),Qe=vt({get activeElement(){var t=Z.B?document.__shady_native_activeElement:document.activeElement;if(!t||!t.nodeType)return null;var e=!!tt(this);if(!(this===document||e&&this.host!==t&&this.host.__shady_native_contains(t)))return null;for(e=Rn(t);e&&e!==this;)e=Rn(t=e.host);return this===document?e?null:t:e===this?t:null}}),tn=window.document,en=vt({importNode:function(t,e){if(t.ownerDocument!==tn||"template"===t.localName)return this.__shady_native_importNode(t,e);var n=this.__shady_native_importNode(t,!1);if(e)for(t=t.__shady_firstChild;t;t=t.__shady_nextSibling)e=this.__shady_importNode(t,!0),n.__shady_appendChild(e);return n}}),nn=vt({dispatchEvent:he,addEventListener:de.bind(window),removeEventListener:fe.bind(window)}),rn={};Object.getOwnPropertyDescriptor(HTMLElement.prototype,"parentElement")&&(rn.parentElement=je.parentElement),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains")&&(rn.contains=je.contains),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"children")&&(rn.children=Ve.children),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML")&&(rn.innerHTML=Ke.innerHTML),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"className")&&(rn.className=Ye.className);var on={EventTarget:[Se],Node:[je,window.EventTarget?null:Se],Text:[Fe],Comment:[Fe],CDATASection:[Fe],ProcessingInstruction:[Fe],Element:[Ye,Ve,Fe,!Z.B||"innerHTML"in Element.prototype?Ke:null,window.HTMLSlotElement?null:Ze],HTMLElement:[$e,rn],HTMLSlotElement:[Ze],DocumentFragment:[Ue,Je],Document:[en,Ue,Je,Qe],Window:[nn]},an=Z.B?null:["innerHTML","textContent"];function sn(t,e,n,r){e.forEach((function(e){return t&&e&&pt(t,e,n,r)}))}function ln(t){var e,n=t?null:an;for(e in on)sn(window[e]&&window[e].prototype,on[e],t,n)}function un(t){return t.__shady_protoIsPatched=!0,sn(t,on.EventTarget),sn(t,on.Node),sn(t,on.Element),sn(t,on.HTMLElement),sn(t,on.HTMLSlotElement),t}["Text","Comment","CDATASection","ProcessingInstruction"].forEach((function(t){var e=window[t],n=Object.create(e.prototype);n.__shady_protoIsPatched=!0,sn(n,on.EventTarget),sn(n,on.Node),on[t]&&sn(n,on[t]),e.prototype.__shady_patchedProto=n}));var cn=Z.ua,hn=Z.B;function dn(t,e){if(cn&&!t.__shady_protoIsPatched&&!tt(t)){var n=Object.getPrototypeOf(t),r=n.hasOwnProperty("__shady_patchedProto")&&n.__shady_patchedProto;r||(un(r=Object.create(n)),n.__shady_patchedProto=r),Object.setPrototypeOf(t,r)}hn||(1===e?Xt(t):2===e&&Kt(t))}function fn(t,e,n,r){dn(t,1),r=r||null;var i=K(t),o=r?K(r):null;i.previousSibling=r?o.previousSibling:e.__shady_lastChild,(o=$(i.previousSibling))&&(o.nextSibling=t),(o=$(i.nextSibling=r))&&(o.previousSibling=t),i.parentNode=e,r?r===n.firstChild&&(n.firstChild=t):(n.lastChild=t,n.firstChild||(n.firstChild=t)),n.childNodes=null}function pn(t,e){var n=K(t);if(e||void 0===n.firstChild){n.childNodes=null;var r=n.firstChild=t.__shady_native_firstChild;for(n.lastChild=t.__shady_native_lastChild,dn(t,2),n=r,r=void 0;n;n=n.__shady_native_nextSibling){var i=K(n);i.parentNode=e||t,i.nextSibling=n.__shady_native_nextSibling,i.previousSibling=r||null,r=n,dn(n,1)}}}var gn=vt({addEventListener:function(t,e,n){"object"!=typeof n&&(n={capture:!!n}),n.O=n.O||this,this.host.__shady_addEventListener(t,e,n)},removeEventListener:function(t,e,n){"object"!=typeof n&&(n={capture:!!n}),n.O=n.O||this,this.host.__shady_removeEventListener(t,e,n)}});function vn(t,e){pt(t,gn,e),pt(t,Qe,e),pt(t,Ke,e),pt(t,Ve,e),Z.D&&!e?(pt(t,je,e),pt(t,Je,e)):Z.B||(pt(t,Ht),pt(t,qt),pt(t,Ut))}var yn,mn={},bn=Z.deferConnectionCallbacks&&"loading"===document.readyState;function wn(t){var e=[];do{e.unshift(t)}while(t=t.__shady_parentNode);return e}function xn(t,e,n){if(t!==mn)throw new TypeError("Illegal constructor");this.a=null,_n(this,e,n)}function _n(t,e,n){if(t.host=e,t.mode=n&&n.mode,pn(t.host),(e=K(t.host)).root=t,e.bb="closed"!==t.mode?t:null,(e=K(t)).firstChild=e.lastChild=e.parentNode=e.nextSibling=e.previousSibling=null,Z.preferPerformance)for(;e=t.host.__shady_native_firstChild;)t.host.__shady_native_removeChild(e);else En(t)}function En(t){t.T||(t.T=!0,wt((function(){return kn(t)})))}function kn(t){var e;if(e=t.T){for(var n;t;)t.T&&(n=t),tt(t=(e=t).host.__shady_getRootNode())&&(e=$(e.host))&&0<e.ca||(t=void 0);e=n}(n=e)&&n._renderSelf()}function Sn(t,e,n){var r=K(e),i=r.oa;r.oa=null,n||(n=(t=t.b[e.__shady_slot||"__catchall"])&&t[0]),n?(K(n).assignedNodes.push(e),r.assignedSlot=n):r.assignedSlot=void 0,i!==r.assignedSlot&&r.assignedSlot&&(K(r.assignedSlot).ra=!0)}function Cn(t,e,n){for(var r=0,i=void 0;r<n.length&&(i=n[r]);r++)if("slot"==i.localName){var o=$(i).assignedNodes;o&&o.length&&Cn(t,e,o)}else e.push(n[r])}function Tn(t,e){e.__shady_native_dispatchEvent(new Event("slotchange")),(e=$(e)).assignedSlot&&Tn(t,e.assignedSlot)}function Nn(t){t.c=t.c||[],t.a=t.a||[],t.b=t.b||{}}function On(t){if(t.c&&t.c.length){for(var e,n=t.c,r=0;r<n.length;r++){var i=n[r];pn(i);var o=i.__shady_parentNode;pn(o),(o=$(o)).ca=(o.ca||0)+1,o=Pn(i),t.b[o]?((e=e||{})[o]=!0,t.b[o].push(i)):t.b[o]=[i],t.a.push(i)}if(e)for(var a in e)t.b[a]=Mn(t.b[a]);t.c=[]}}function Pn(t){var e=t.name||t.getAttribute("name")||"__catchall";return t.La=e}function Mn(t){return t.sort((function(t,e){t=wn(t);for(var n=wn(e),r=0;r<t.length;r++){e=t[r];var i=n[r];if(e!==i)return(t=dt(e.__shady_parentNode)).indexOf(e)-t.indexOf(i)}}))}function Dn(t){return On(t),!(!t.a||!t.a.length)}if(xn.prototype._renderSelf=function(){var t=bn;if(bn=!0,this.T=!1,this.a){On(this);for(var e,n=0;n<this.a.length;n++){var r=$(e=this.a[n]),i=r.assignedNodes;if(r.assignedNodes=[],r.V=[],r.Ba=i)for(r=0;r<i.length;r++){var o=$(i[r]);o.oa=o.assignedSlot,o.assignedSlot===e&&(o.assignedSlot=null)}}for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)Sn(this,n);for(n=0;n<this.a.length;n++){if(!(i=$(e=this.a[n])).assignedNodes.length)for(r=e.__shady_firstChild;r;r=r.__shady_nextSibling)Sn(this,r,e);if((r=(r=$(e.__shady_parentNode))&&r.root)&&(Dn(r)||r.T)&&r._renderSelf(),Cn(this,i.V,i.assignedNodes),r=i.Ba){for(o=0;o<r.length;o++)$(r[o]).oa=null;i.Ba=null,r.length>i.assignedNodes.length&&(i.ra=!0)}i.ra&&(i.ra=!1,Tn(this,e))}for(e=this.a,n=[],i=0;i<e.length;i++)(o=$(r=e[i].__shady_parentNode))&&o.root||!(0>n.indexOf(r))||n.push(r);for(e=0;e<n.length;e++){for(i=(o=n[e])===this?this.host:o,r=[],o=o.__shady_firstChild;o;o=o.__shady_nextSibling)if("slot"==o.localName)for(var a=$(o).V,s=0;s<a.length;s++)r.push(a[s]);else r.push(o);o=ht(i),a=Ee(r,r.length,o,o.length);for(var l=s=0,u=void 0;s<a.length&&(u=a[s]);s++){for(var c=0,h=void 0;c<u.aa.length&&(h=u.aa[c]);c++)h.__shady_native_parentNode===i&&i.__shady_native_removeChild(h),o.splice(u.index+l,1);l-=u.ha}for(l=0,u=void 0;l<a.length&&(u=a[l]);l++)for(s=o[u.index],c=u.index;c<u.index+u.ha;c++)h=r[c],i.__shady_native_insertBefore(h,s),o.splice(c,0,h)}}if(!Z.preferPerformance&&!this.Aa)for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)e=$(n),n.__shady_native_parentNode!==this.host||"slot"!==n.localName&&e.assignedSlot||this.host.__shady_native_removeChild(n);this.Aa=!0,bn=t,yn&&yn()},function(t){t.__proto__=DocumentFragment.prototype,vn(t,"__shady_"),vn(t),Object.defineProperties(t,{nodeType:{value:Node.DOCUMENT_FRAGMENT_NODE,configurable:!0},nodeName:{value:"#document-fragment",configurable:!0},nodeValue:{value:null,configurable:!0}}),["localName","namespaceURI","prefix"].forEach((function(e){Object.defineProperty(t,e,{value:void 0,configurable:!0})})),["ownerDocument","baseURI","isConnected"].forEach((function(e){Object.defineProperty(t,e,{get:function(){return this.host[e]},configurable:!0})}))}(xn.prototype),window.customElements&&window.customElements.define&&Z.sa&&!Z.preferPerformance){var An=new Map;yn=function(){var t=[];An.forEach((function(e,n){t.push([n,e])})),An.clear();for(var e=0;e<t.length;e++){var n=t[e][0];t[e][1]?n.__shadydom_connectedCallback():n.__shadydom_disconnectedCallback()}},bn&&document.addEventListener("readystatechange",(function(){bn=!1,yn()}),{once:!0});var Ln=window.customElements.define,In=function(t,e){var n=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;Ln.call(window.customElements,t,function(t,e,n){var r=0,i="__isConnected"+r++;return(e||n)&&(t.prototype.connectedCallback=t.prototype.__shadydom_connectedCallback=function(){bn?An.set(this,!0):this[i]||(this[i]=!0,e&&e.call(this))},t.prototype.disconnectedCallback=t.prototype.__shadydom_disconnectedCallback=function(){bn?this.isConnected||An.set(this,!1):this[i]&&(this[i]=!1,n&&n.call(this))}),t}(e,n,r)),e.prototype.connectedCallback=n,e.prototype.disconnectedCallback=r};window.customElements.define=In,Object.defineProperty(window.CustomElementRegistry.prototype,"define",{value:In,configurable:!0})}function Rn(t){if(tt(t=t.__shady_getRootNode()))return t}function Bn(t){this.node=t}function jn(t){Object.defineProperty(Bn.prototype,t,{get:function(){return this.node["__shady_"+t]},set:function(e){this.node["__shady_"+t]=e},configurable:!0})}(t=Bn.prototype).addEventListener=function(t,e,n){return this.node.__shady_addEventListener(t,e,n)},t.removeEventListener=function(t,e,n){return this.node.__shady_removeEventListener(t,e,n)},t.appendChild=function(t){return this.node.__shady_appendChild(t)},t.insertBefore=function(t,e){return this.node.__shady_insertBefore(t,e)},t.removeChild=function(t){return this.node.__shady_removeChild(t)},t.replaceChild=function(t,e){return this.node.__shady_replaceChild(t,e)},t.cloneNode=function(t){return this.node.__shady_cloneNode(t)},t.getRootNode=function(t){return this.node.__shady_getRootNode(t)},t.contains=function(t){return this.node.__shady_contains(t)},t.dispatchEvent=function(t){return this.node.__shady_dispatchEvent(t)},t.setAttribute=function(t,e){this.node.__shady_setAttribute(t,e)},t.getAttribute=function(t){return this.node.__shady_native_getAttribute(t)},t.hasAttribute=function(t){return this.node.__shady_native_hasAttribute(t)},t.removeAttribute=function(t){this.node.__shady_removeAttribute(t)},t.attachShadow=function(t){return this.node.__shady_attachShadow(t)},t.focus=function(){this.node.__shady_native_focus()},t.blur=function(){this.node.__shady_blur()},t.importNode=function(t,e){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_importNode(t,e)},t.getElementById=function(t){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_getElementById(t)},t.querySelector=function(t){return this.node.__shady_querySelector(t)},t.querySelectorAll=function(t,e){return this.node.__shady_querySelectorAll(t,e)},t.assignedNodes=function(t){if("slot"===this.node.localName)return this.node.__shady_assignedNodes(t)},o.Object.defineProperties(Bn.prototype,{activeElement:{configurable:!0,enumerable:!0,get:function(){if(tt(this.node)||this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_activeElement}},_activeElement:{configurable:!0,enumerable:!0,get:function(){return this.activeElement}},host:{configurable:!0,enumerable:!0,get:function(){if(tt(this.node))return this.node.host}},parentNode:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentNode}},firstChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstChild}},lastChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastChild}},nextSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextSibling}},previousSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousSibling}},childNodes:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childNodes}},parentElement:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentElement}},firstElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstElementChild}},lastElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastElementChild}},nextElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextElementSibling}},previousElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousElementSibling}},children:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_children}},childElementCount:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childElementCount}},shadowRoot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_shadowRoot}},assignedSlot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_assignedSlot}},isConnected:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_isConnected}},innerHTML:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_innerHTML},set:function(t){this.node.__shady_innerHTML=t}},textContent:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_textContent},set:function(t){this.node.__shady_textContent=t}},slot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_slot},set:function(t){this.node.__shady_slot=t}},className:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_className},set:function(t){return this.node.__shady_className=t}}}),be.forEach((function(t){return jn(t)})),we.forEach((function(t){return jn(t)}));var Fn=new WeakMap;function zn(t){if(tt(t)||t instanceof Bn)return t;var e=Fn.get(t);return e||(e=new Bn(t),Fn.set(t,e)),e}if(Z.sa){var Vn=Z.B?function(t){return t}:function(t){return Kt(t),Xt(t),t},qn={inUse:Z.sa,patch:Vn,isShadyRoot:tt,enqueue:wt,flush:xt,flushInitial:function(t){!t.Aa&&t.T&&kn(t)},settings:Z,filterMutations:function(t,e){var n=e.getRootNode();return t.map((function(t){var e=n===t.target.getRootNode();if(e&&t.addedNodes){if((e=[].slice.call(t.addedNodes).filter((function(t){return n===t.getRootNode()}))).length)return t=Object.create(t),Object.defineProperty(t,"addedNodes",{value:e,configurable:!0}),t}else if(e)return t})).filter((function(t){return t}))},observeChildren:function(t,e){var n=K(t);n.Z||(n.Z=new _t),n.Z.ia.add(e);var r=n.Z;return{Ma:e,S:r,Na:t,takeRecords:function(){return r.takeRecords()}}},unobserveChildren:function(t){var e=t&&t.S;e&&(e.ia.delete(t.Ma),e.ia.size||(K(t.Na).Z=null))},deferConnectionCallbacks:Z.deferConnectionCallbacks,preferPerformance:Z.preferPerformance,handlesDynamicScoping:!0,wrap:Z.D?zn:Vn,wrapIfNeeded:!0===Z.D?zn:function(t){return t},Wrapper:Bn,composedPath:function(t){return t.__composedPath||(t.__composedPath=re(t.target,!0)),t.__composedPath},noPatch:Z.D,patchOnDemand:Z.ua,nativeMethods:Mt,nativeTree:Dt,patchElementProto:un};window.ShadyDOM=qn,function(){var t=["dispatchEvent","addEventListener","removeEventListener"];window.EventTarget?It(window.EventTarget.prototype,t):(It(Node.prototype,t),It(Window.prototype,t)),Pt?It(Node.prototype,"parentNode firstChild lastChild previousSibling nextSibling childNodes parentElement textContent".split(" ")):Lt(Node.prototype,{parentNode:{get:function(){return Rt.currentNode=this,Rt.parentNode()}},firstChild:{get:function(){return Rt.currentNode=this,Rt.firstChild()}},lastChild:{get:function(){return Rt.currentNode=this,Rt.lastChild()}},previousSibling:{get:function(){return Rt.currentNode=this,Rt.previousSibling()}},nextSibling:{get:function(){return Rt.currentNode=this,Rt.nextSibling()}},childNodes:{get:function(){var t=[];Rt.currentNode=this;for(var e=Rt.firstChild();e;)t.push(e),e=Rt.nextSibling();return t}},parentElement:{get:function(){return Bt.currentNode=this,Bt.parentNode()}},textContent:{get:function(){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(var t,e=document.createTreeWalker(this,NodeFilter.SHOW_TEXT,null,!1),n="";t=e.nextNode();)n+=t.nodeValue;return n;default:return this.nodeValue}},set:function(t){switch(null==t&&(t=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:Ft(this),(0<t.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_native_insertBefore(document.createTextNode(t),void 0);break;default:this.nodeValue=t}}}}),It(Node.prototype,"appendChild insertBefore removeChild replaceChild cloneNode contains".split(" ")),It(HTMLElement.prototype,["parentElement","contains"]),t={firstElementChild:{get:function(){return Bt.currentNode=this,Bt.firstChild()}},lastElementChild:{get:function(){return Bt.currentNode=this,Bt.lastChild()}},children:{get:function(){var t=[];Bt.currentNode=this;for(var e=Bt.firstChild();e;)t.push(e),e=Bt.nextSibling();return ct(t)}},childElementCount:{get:function(){return this.children?this.children.length:0}}},Pt?(It(Element.prototype,zt),It(Element.prototype,["previousElementSibling","nextElementSibling","innerHTML","className"]),It(HTMLElement.prototype,["children","innerHTML","className"])):(Lt(Element.prototype,t),Lt(Element.prototype,{previousElementSibling:{get:function(){return Bt.currentNode=this,Bt.previousSibling()}},nextElementSibling:{get:function(){return Bt.currentNode=this,Bt.nextSibling()}},innerHTML:{get:function(){return Ot(this,ht)},set:function(t){var e="template"===this.localName?this.content:this;Ft(e);var n=this.localName||"div";for((n=this.namespaceURI&&this.namespaceURI!==jt.namespaceURI?jt.createElementNS(this.namespaceURI,n):jt.createElement(n)).innerHTML=t,t="template"===this.localName?n.content:n;n=t.__shady_native_firstChild;)e.__shady_native_insertBefore(n,void 0)}},className:{get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}}})),It(Element.prototype,"setAttribute getAttribute hasAttribute removeAttribute focus blur".split(" ")),It(Element.prototype,Vt),It(HTMLElement.prototype,["focus","blur"]),window.HTMLTemplateElement&&It(window.HTMLTemplateElement.prototype,["innerHTML"]),Pt?It(DocumentFragment.prototype,zt):Lt(DocumentFragment.prototype,t),It(DocumentFragment.prototype,Vt),Pt?(It(Document.prototype,zt),It(Document.prototype,["activeElement"])):Lt(Document.prototype,t),It(Document.prototype,["importNode","getElementById"]),It(Document.prototype,Vt)}(),ln("__shady_"),Object.defineProperty(document,"_activeElement",Qe.activeElement),pt(Window.prototype,nn,"__shady_"),Z.D?Z.ua&&pt(Element.prototype,Ge):(ln(),function(){if(!Zt&&Object.getOwnPropertyDescriptor(Event.prototype,"isTrusted")){var t=function(){var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0});this.__shady_dispatchEvent(t)};Element.prototype.click?Element.prototype.click=t:HTMLElement.prototype.click&&(HTMLElement.prototype.click=t)}}()),function(){for(var t in ae)window.__shady_native_addEventListener(t,(function(t){t.__target||(ge(t),ue(t))}),!0)}(),window.Event=ve,window.CustomEvent=ye,window.MouseEvent=me,window.ShadowRoot=xn}var Un=window.Document.prototype.createElement,Hn=window.Document.prototype.createElementNS,Wn=window.Document.prototype.importNode,Yn=window.Document.prototype.prepend,Gn=window.Document.prototype.append,Xn=window.DocumentFragment.prototype.prepend,Kn=window.DocumentFragment.prototype.append,$n=window.Node.prototype.cloneNode,Zn=window.Node.prototype.appendChild,Jn=window.Node.prototype.insertBefore,Qn=window.Node.prototype.removeChild,tr=window.Node.prototype.replaceChild,er=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),nr=window.Element.prototype.attachShadow,rr=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),ir=window.Element.prototype.getAttribute,or=window.Element.prototype.setAttribute,ar=window.Element.prototype.removeAttribute,sr=window.Element.prototype.getAttributeNS,lr=window.Element.prototype.setAttributeNS,ur=window.Element.prototype.removeAttributeNS,cr=window.Element.prototype.insertAdjacentElement,hr=window.Element.prototype.insertAdjacentHTML,dr=window.Element.prototype.prepend,fr=window.Element.prototype.append,pr=window.Element.prototype.before,gr=window.Element.prototype.after,vr=window.Element.prototype.replaceWith,yr=window.Element.prototype.remove,mr=window.HTMLElement,br=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),wr=window.HTMLElement.prototype.insertAdjacentElement,xr=window.HTMLElement.prototype.insertAdjacentHTML,_r=new Set;function Er(t){var e=_r.has(t);return t=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(t),!e&&t}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(t){return _r.add(t)}));var kr=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function Sr(t){var e=t.isConnected;if(void 0!==e)return e;if(kr(t))return!0;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function Cr(t){var e=t.children;if(e)return Array.prototype.slice.call(e);for(e=[],t=t.firstChild;t;t=t.nextSibling)t.nodeType===Node.ELEMENT_NODE&&e.push(t);return e}function Tr(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function Nr(){var t=!(null==Kr||!Kr.noDocumentConstructionObserver),e=!(null==Kr||!Kr.shadyDomFastWalk);this.X=[],this.a=[],this.R=!1,this.shadyDomFastWalk=e,this.jb=!t}function Or(t,e,n,r){var i=window.ShadyDom;if(t.shadyDomFastWalk&&i&&i.inUse){if(e.nodeType===Node.ELEMENT_NODE&&n(e),e.querySelectorAll)for(t=i.nativeMethods.querySelectorAll.call(e,"*"),e=0;e<t.length;e++)n(t[e])}else!function t(e,n,r){for(var i=e;i;){if(i.nodeType===Node.ELEMENT_NODE){var o=i;n(o);var a=o.localName;if("link"===a&&"import"===o.getAttribute("rel")){if(i=o.import,void 0===r&&(r=new Set),i instanceof Node&&!r.has(i))for(r.add(i),i=i.firstChild;i;i=i.nextSibling)t(i,n,r);i=Tr(e,o);continue}if("template"===a){i=Tr(e,o);continue}if(o=o.__CE_shadowRoot)for(o=o.firstChild;o;o=o.nextSibling)t(o,n,r)}i=i.firstChild?i.firstChild:Tr(e,i)}}(e,n,r)}function Pr(t,e){t.R&&Or(t,e,(function(e){return Mr(t,e)}))}function Mr(t,e){if(t.R&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.X.length;n++)t.X[n](e);for(n=0;n<t.a.length;n++)t.a[n](e)}}function Dr(t,e){var n=[];for(Or(t,e,(function(t){return n.push(t)})),e=0;e<n.length;e++){var r=n[e];1===r.__CE_state?t.connectedCallback(r):Ir(t,r)}}function Ar(t,e){var n=[];for(Or(t,e,(function(t){return n.push(t)})),e=0;e<n.length;e++){var r=n[e];1===r.__CE_state&&t.disconnectedCallback(r)}}function Lr(t,e,n){var r=(n=void 0===n?{}:n).kb,i=n.upgrade||function(e){return Ir(t,e)},o=[];for(Or(t,e,(function(e){if(t.R&&Mr(t,e),"link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:e.addEventListener("load",(function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var o=new Set;r&&(r.forEach((function(t){return o.add(t)})),o.delete(n)),Lr(t,n,{kb:o,upgrade:i})}}))}else o.push(e)}),r),e=0;e<o.length;e++)i(o[e])}function Ir(t,e){try{var n=e.ownerDocument,r=n.__CE_registry,i=r&&(n.defaultView||n.__CE_isImportDocument)?Wr(r,e.localName):void 0;if(i&&void 0===e.__CE_state){i.constructionStack.push(e);try{try{if(new i.constructorFunction!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{i.constructionStack.pop()}}catch(t){throw e.__CE_state=2,t}if(e.__CE_state=1,e.__CE_definition=i,i.attributeChangedCallback&&e.hasAttributes()){var o=i.observedAttributes;for(i=0;i<o.length;i++){var a=o[i],s=e.getAttribute(a);null!==s&&t.attributeChangedCallback(e,a,null,s,null)}}Sr(e)&&t.connectedCallback(e)}}catch(t){Br(t)}}function Rr(t,e,n,r){var i=e.__CE_registry;if(i&&(null===r||"http://www.w3.org/1999/xhtml"===r)&&(i=Wr(i,n)))try{var o=new i.constructorFunction;if(void 0===o.__CE_state||void 0===o.__CE_definition)throw Error("Failed to construct '"+n+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==o.namespaceURI)throw Error("Failed to construct '"+n+"': The constructed element's namespace must be the HTML namespace.");if(o.hasAttributes())throw Error("Failed to construct '"+n+"': The constructed element must not have any attributes.");if(null!==o.firstChild)throw Error("Failed to construct '"+n+"': The constructed element must not have any children.");if(null!==o.parentNode)throw Error("Failed to construct '"+n+"': The constructed element must not have a parent node.");if(o.ownerDocument!==e)throw Error("Failed to construct '"+n+"': The constructed element's owner document is incorrect.");if(o.localName!==n)throw Error("Failed to construct '"+n+"': The constructed element's local name is incorrect.");return o}catch(i){return Br(i),e=null===r?Un.call(e,n):Hn.call(e,r,n),Object.setPrototypeOf(e,HTMLUnknownElement.prototype),e.__CE_state=2,e.__CE_definition=void 0,Mr(t,e),e}return Mr(t,e=null===r?Un.call(e,n):Hn.call(e,r,n)),e}function Br(t){var e=t.message,n=t.sourceURL||t.fileName||"",r=t.line||t.lineNumber||0,i=t.column||t.columnNumber||0,o=void 0;void 0===ErrorEvent.prototype.initErrorEvent?o=new ErrorEvent("error",{cancelable:!0,message:e,filename:n,lineno:r,colno:i,error:t}):((o=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,e,n,r),o.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===o.error&&Object.defineProperty(o,"error",{configurable:!0,enumerable:!0,get:function(){return t}}),window.dispatchEvent(o),o.defaultPrevented||console.error(t)}function jr(){var t=this;this.C=void 0,this.Ca=new Promise((function(e){t.a=e}))}function Fr(t){var e=document;this.S=void 0,this.M=t,this.a=e,Lr(this.M,this.a),"loading"===this.a.readyState&&(this.S=new MutationObserver(this.b.bind(this)),this.S.observe(this.a,{childList:!0,subtree:!0}))}function zr(t){t.S&&t.S.disconnect()}function Vr(t){this.ea=new Map,this.fa=new Map,this.xa=new Map,this.na=!1,this.qa=new Map,this.da=function(t){return t()},this.P=!1,this.ga=[],this.M=t,this.ya=t.jb?new Fr(t):void 0}function qr(t,e){if(!Er(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(Wr(t,e))throw Error("A custom element with name '"+e+"' has already been defined.");if(t.na)throw Error("A custom element is already being defined.")}function Ur(t,e,n){var r;t.na=!0;try{var i=n.prototype;if(!(i instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var o=function(t){var e=i[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},a=o("connectedCallback"),s=o("disconnectedCallback"),l=o("adoptedCallback"),u=(r=o("attributeChangedCallback"))&&n.observedAttributes||[]}catch(t){throw t}finally{t.na=!1}return n={localName:e,constructorFunction:n,connectedCallback:a,disconnectedCallback:s,adoptedCallback:l,attributeChangedCallback:r,observedAttributes:u,constructionStack:[]},t.fa.set(e,n),t.xa.set(n.constructorFunction,n),n}function Hr(t){if(!1!==t.P){t.P=!1;for(var e=[],n=t.ga,r=new Map,i=0;i<n.length;i++)r.set(n[i],[]);for(Lr(t.M,document,{upgrade:function(n){if(void 0===n.__CE_state){var i=n.localName,o=r.get(i);o?o.push(n):t.fa.has(i)&&e.push(n)}}}),i=0;i<e.length;i++)Ir(t.M,e[i]);for(i=0;i<n.length;i++){for(var o=n[i],a=r.get(o),s=0;s<a.length;s++)Ir(t.M,a[s]);(o=t.qa.get(o))&&o.resolve(void 0)}n.length=0}}function Wr(t,e){var n=t.fa.get(e);if(n)return n;if(n=t.ea.get(e)){t.ea.delete(e);try{return Ur(t,e,n())}catch(t){Br(t)}}}function Yr(t,e,n){function r(e){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];i=[];for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&Sr(s)&&o.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(e.apply(this,r),r=0;r<o.length;r++)Ar(t,o[r]);if(Sr(this))for(r=0;r<i.length;r++)(o=i[r])instanceof Element&&Dr(t,o)}}void 0!==n.prepend&&(e.prepend=r(n.prepend)),void 0!==n.append&&(e.append=r(n.append))}function Gr(t){function e(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var r=this,i=void 0;if(Sr(this)&&(i=[],Or(t,this,(function(t){t!==r&&i.push(t)}))),n.set.call(this,e),i)for(var o=0;o<i.length;o++){var a=i[o];1===a.__CE_state&&t.disconnectedCallback(a)}return this.ownerDocument.__CE_registry?Lr(t,this):Pr(t,this),e}})}function n(e,n){e.insertAdjacentElement=function(e,r){var i=Sr(r);return e=n.call(this,e,r),i&&Ar(t,r),Sr(e)&&Dr(t,r),e}}function r(e,n){function r(e,n){for(var r=[];e!==n;e=e.nextSibling)r.push(e);for(n=0;n<r.length;n++)Lr(t,r[n])}e.insertAdjacentHTML=function(t,e){if("beforebegin"===(t=t.toLowerCase())){var i=this.previousSibling;n.call(this,t,e),r(i||this.parentNode.firstChild,this)}else if("afterbegin"===t)i=this.firstChild,n.call(this,t,e),r(this.firstChild,i);else if("beforeend"===t)i=this.lastChild,n.call(this,t,e),r(i||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");i=this.nextSibling,n.call(this,t,e),r(this.nextSibling,i)}}}nr&&(Element.prototype.attachShadow=function(e){if(e=nr.call(this,e),t.R&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.X.length;n++)t.X[n](e)}return this.__CE_shadowRoot=e}),rr&&rr.get?e(Element.prototype,rr):br&&br.get?e(HTMLElement.prototype,br):function(t,e){t.R=!0,t.a.push(e)}(t,(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){return $n.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName,n=e?this.content:this,r=Hn.call(document,this.namespaceURI,this.localName);for(r.innerHTML=t;0<n.childNodes.length;)Qn.call(n,n.childNodes[0]);for(t=e?r.content:r;0<t.childNodes.length;)Zn.call(n,t.childNodes[0])}})})),Element.prototype.setAttribute=function(e,n){if(1!==this.__CE_state)return or.call(this,e,n);var r=ir.call(this,e);or.call(this,e,n),n=ir.call(this,e),t.attributeChangedCallback(this,e,r,n,null)},Element.prototype.setAttributeNS=function(e,n,r){if(1!==this.__CE_state)return lr.call(this,e,n,r);var i=sr.call(this,e,n);lr.call(this,e,n,r),r=sr.call(this,e,n),t.attributeChangedCallback(this,n,i,r,e)},Element.prototype.removeAttribute=function(e){if(1!==this.__CE_state)return ar.call(this,e);var n=ir.call(this,e);ar.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)},Element.prototype.removeAttributeNS=function(e,n){if(1!==this.__CE_state)return ur.call(this,e,n);var r=sr.call(this,e,n);ur.call(this,e,n);var i=sr.call(this,e,n);r!==i&&t.attributeChangedCallback(this,n,r,i,e)},wr?n(HTMLElement.prototype,wr):cr&&n(Element.prototype,cr),xr?r(HTMLElement.prototype,xr):hr&&r(Element.prototype,hr),Yr(t,Element.prototype,{prepend:dr,append:fr}),function(t){function e(e){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];i=[];for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&Sr(s)&&o.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(e.apply(this,r),r=0;r<o.length;r++)Ar(t,o[r]);if(Sr(this))for(r=0;r<i.length;r++)(o=i[r])instanceof Element&&Dr(t,o)}}var n=Element.prototype;void 0!==pr&&(n.before=e(pr)),void 0!==gr&&(n.after=e(gr)),void 0!==vr&&(n.replaceWith=function(e){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];r=[];for(var i=[],o=0;o<n.length;o++){var a=n[o];if(a instanceof Element&&Sr(a)&&i.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(o=Sr(this),vr.apply(this,n),n=0;n<i.length;n++)Ar(t,i[n]);if(o)for(Ar(t,this),n=0;n<r.length;n++)(i=r[n])instanceof Element&&Dr(t,i)}),void 0!==yr&&(n.remove=function(){var e=Sr(this);yr.call(this),e&&Ar(t,this)})}(t)}Nr.prototype.connectedCallback=function(t){var e=t.__CE_definition;if(e.connectedCallback)try{e.connectedCallback.call(t)}catch(t){Br(t)}},Nr.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;if(e.disconnectedCallback)try{e.disconnectedCallback.call(t)}catch(t){Br(t)}},Nr.prototype.attributeChangedCallback=function(t,e,n,r,i){var o=t.__CE_definition;if(o.attributeChangedCallback&&-1<o.observedAttributes.indexOf(e))try{o.attributeChangedCallback.call(t,e,n,r,i)}catch(t){Br(t)}},jr.prototype.resolve=function(t){if(this.C)throw Error("Already resolved.");this.C=t,this.a(t)},Fr.prototype.b=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||zr(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,r=0;r<n.length;r++)Lr(this.M,n[r])},(t=Vr.prototype).$a=function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");qr(this,t),this.ea.set(t,e),this.ga.push(t),this.P||(this.P=!0,this.da((function(){return Hr(n)})))},t.define=function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");qr(this,t),Ur(this,t,e),this.ga.push(t),this.P||(this.P=!0,this.da((function(){return Hr(n)})))},t.upgrade=function(t){Lr(this.M,t)},t.get=function(t){if(t=Wr(this,t))return t.constructorFunction},t.whenDefined=function(t){if(!Er(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.qa.get(t);if(e)return e.Ca;e=new jr,this.qa.set(t,e);var n=this.fa.has(t)||this.ea.has(t);return t=-1===this.ga.indexOf(t),n&&t&&e.resolve(void 0),e.Ca},t.polyfillWrapFlushCallback=function(t){this.ya&&zr(this.ya);var e=this.da;this.da=function(n){return t((function(){return e(n)}))}},window.CustomElementRegistry=Vr,Vr.prototype.define=Vr.prototype.define,Vr.prototype.upgrade=Vr.prototype.upgrade,Vr.prototype.get=Vr.prototype.get,Vr.prototype.whenDefined=Vr.prototype.whenDefined,Vr.prototype.polyfillDefineLazy=Vr.prototype.$a,Vr.prototype.polyfillWrapFlushCallback=Vr.prototype.polyfillWrapFlushCallback;var Xr={};var Kr=window.customElements;function $r(){var t=new Nr;!function(t){function e(){var e=this.constructor,n=document.__CE_registry.xa.get(e);if(!n)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var r=n.constructionStack;if(0===r.length)return r=Un.call(document,n.localName),Object.setPrototypeOf(r,e.prototype),r.__CE_state=1,r.__CE_definition=n,Mr(t,r),r;var i=r.length-1,o=r[i];if(o===Xr)throw Error("Failed to construct '"+n.localName+"': This element was already constructed.");return r[i]=Xr,Object.setPrototypeOf(o,e.prototype),Mr(t,o),o}e.prototype=mr.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:e}),window.HTMLElement=e}(t),function(t){Document.prototype.createElement=function(e){return Rr(t,this,e,null)},Document.prototype.importNode=function(e,n){return e=Wn.call(this,e,!!n),this.__CE_registry?Lr(t,e):Pr(t,e),e},Document.prototype.createElementNS=function(e,n){return Rr(t,this,n,e)},Yr(t,Document.prototype,{prepend:Yn,append:Gn})}(t),Yr(t,DocumentFragment.prototype,{prepend:Xn,append:Kn}),function(t){function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,e);else{var r=void 0;if(this.firstChild){var i=this.childNodes,o=i.length;if(0<o&&Sr(this)){r=Array(o);for(var a=0;a<o;a++)r[a]=i[a]}}if(n.set.call(this,e),r)for(e=0;e<r.length;e++)Ar(t,r[e])}}})}Node.prototype.insertBefore=function(e,n){if(e instanceof DocumentFragment){var r=Cr(e);if(e=Jn.call(this,e,n),Sr(this))for(n=0;n<r.length;n++)Dr(t,r[n]);return e}return r=e instanceof Element&&Sr(e),n=Jn.call(this,e,n),r&&Ar(t,e),Sr(this)&&Dr(t,e),n},Node.prototype.appendChild=function(e){if(e instanceof DocumentFragment){var n=Cr(e);if(e=Zn.call(this,e),Sr(this))for(var r=0;r<n.length;r++)Dr(t,n[r]);return e}return n=e instanceof Element&&Sr(e),r=Zn.call(this,e),n&&Ar(t,e),Sr(this)&&Dr(t,e),r},Node.prototype.cloneNode=function(e){return e=$n.call(this,!!e),this.ownerDocument.__CE_registry?Lr(t,e):Pr(t,e),e},Node.prototype.removeChild=function(e){var n=e instanceof Element&&Sr(e),r=Qn.call(this,e);return n&&Ar(t,e),r},Node.prototype.replaceChild=function(e,n){if(e instanceof DocumentFragment){var r=Cr(e);if(e=tr.call(this,e,n),Sr(this))for(Ar(t,n),n=0;n<r.length;n++)Dr(t,r[n]);return e}r=e instanceof Element&&Sr(e);var i=tr.call(this,e,n),o=Sr(this);return o&&Ar(t,n),r&&Ar(t,e),o&&Dr(t,e),i},er&&er.get?e(Node.prototype,er):function(t,e){t.R=!0,t.X.push(e)}(t,(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=this.firstChild;e;e=e.nextSibling)e.nodeType!==Node.COMMENT_NODE&&t.push(e.textContent);return t.join("")},set:function(t){for(;this.firstChild;)Qn.call(this,this.firstChild);null!=t&&""!==t&&Zn.call(this,document.createTextNode(t))}})}))}(t),Gr(t),t=new Vr(t),document.__CE_registry=t,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:t})}function Zr(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function Jr(t){var e=t=t.replace(oi,"").replace(ai,""),n=new Zr;n.start=0,n.end=e.length;for(var r=n,i=0,o=e.length;i<o;i++)if("{"===e[i]){r.rules||(r.rules=[]);var a=r,s=a.rules[a.rules.length-1]||null;(r=new Zr).start=i+1,r.parent=a,r.previous=s,a.rules.push(r)}else"}"===e[i]&&(r.end=i+1,r=r.parent||n);return function t(e,n){var r=n.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=r.trim(),e.parent&&(r=(r=(r=function(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,(function(t,e){for(e=6-(t=e).length;e--;)t="0"+t;return"\\"+t}))}(r=n.substring(e.previous?e.previous.end:e.parent.start,e.start-1))).replace(di," ")).substring(r.lastIndexOf(";")+1),r=e.parsedSelector=e.selector=r.trim(),e.atRule=0===r.indexOf("@"),e.atRule?0===r.indexOf("@media")?e.type=ri:r.match(hi)&&(e.type=ni,e.keyframesName=e.selector.split(di).pop()):e.type=0===r.indexOf("--")?ii:ei),r=e.rules)for(var i=0,o=r.length,a=void 0;i<o&&(a=r[i]);i++)t(a,n);return e}(n,t)}Kr&&!Kr.forcePolyfill&&"function"==typeof Kr.define&&"function"==typeof Kr.get||$r(),window.__CE_installPolyfill=$r;var Qr,ti,ei=1,ni=7,ri=4,ii=1e3,oi=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,ai=/@import[^;]*;/gim,si=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,li=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,ui=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,ci=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,hi=/^@[^\s]*keyframes/,di=/\s+/g,fi=!(window.ShadyDOM&&window.ShadyDOM.inUse);function pi(t){Qr=(!t||!t.shimcssproperties)&&(fi||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(ti=window.ShadyCSS.cssBuild);var gi=!(!window.ShadyCSS||!window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?Qr=window.ShadyCSS.nativeCss:window.ShadyCSS?(pi(window.ShadyCSS),window.ShadyCSS=void 0):pi(window.WebComponents&&window.WebComponents.flags);var vi=Qr,yi=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,mi=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,bi=/(--[\w-]+)\s*([:,;)]|$)/gi,wi=/(animation\s*:)|(animation-name\s*:)/,xi=/@media\s(.*)/,_i=/\{[^}]*\}/g,Ei=new Set;function ki(t,e){return t?("string"==typeof t&&(t=Jr(t)),e&&Ti(t,e),function t(e,n,r){r=void 0===r?"":r;var i="";if(e.cssText||e.rules){var o,a=e.rules;if((o=a)&&(o=!((o=a[0])&&o.selector&&0===o.selector.indexOf("--"))),o){o=0;for(var s=a.length,l=void 0;o<s&&(l=a[o]);o++)i=t(l,n,i)}else n?n=e.cssText:n=(n=(n=e.cssText).replace(si,"").replace(li,"")).replace(ui,"").replace(ci,""),(i=n.trim())&&(i="  "+i+"\n")}return i&&(e.selector&&(r+=e.selector+" {\n"),r+=i,e.selector&&(r+="}\n\n")),r}(t,vi)):""}function Si(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=Jr(t.textContent)),t.__cssRules||null}function Ci(t){return!!t.parent&&t.parent.type===ni}function Ti(t,e,n,r){if(t){var i=!1,o=t.type;if(r&&o===ri){var a=t.selector.match(xi);a&&(window.matchMedia(a[1]).matches||(i=!0))}if(o===ei?e(t):n&&o===ni?n(t):o===ii&&(i=!0),(t=t.rules)&&!i)for(i=0,o=t.length,a=void 0;i<o&&(a=t[i]);i++)Ti(a,e,n,r)}}function Ni(t,e,n,r){var i=document.createElement("style");return e&&i.setAttribute("scope",e),i.textContent=t,Mi(i,n,r),i}var Oi=null;function Pi(t){t=document.createComment(" Shady DOM styles for "+t+" ");var e=document.head;return e.insertBefore(t,(Oi?Oi.nextSibling:null)||e.firstChild),Oi=t}function Mi(t,e,n){(e=e||document.head).insertBefore(t,n&&n.nextSibling||e.firstChild),Oi?t.compareDocumentPosition(Oi)===Node.DOCUMENT_POSITION_PRECEDING&&(Oi=t):Oi=t}function Di(t,e){for(var n=0,r=t.length;e<r;e++)if("("===t[e])n++;else if(")"===t[e]&&0==--n)return e;return-1}function Ai(t,e){fi?t.setAttribute("class",e):window.ShadyDOM.nativeMethods.setAttribute.call(t,"class",e)}var Li=window.ShadyDOM&&window.ShadyDOM.wrap||function(t){return t};function Ii(t){var e=t.localName,n="";return e?-1<e.indexOf("-")||(n=e,e=t.getAttribute&&t.getAttribute("is")||""):(e=t.is,n=t.extends),{is:e,ba:n}}function Ri(t){for(var e=[],n="",r=0;0<=r&&r<t.length;r++)if("("===t[r]){var i=Di(t,r);n+=t.slice(r,i+1),r=i}else","===t[r]?(e.push(n),n=""):n+=t[r];return n&&e.push(n),e}function Bi(t){if(void 0!==ti)return ti;if(void 0===t.__cssBuild){var e=t.getAttribute("css-build");if(e)t.__cssBuild=e;else{if(""!==(e=(e="template"===t.localName?t.content.firstChild:t.firstChild)instanceof Comment&&"css-build"===(e=e.textContent.trim().split(":"))[0]?e[1]:"")){var n="template"===t.localName?t.content.firstChild:t.firstChild;n.parentNode.removeChild(n)}t.__cssBuild=e}}return t.__cssBuild||""}function ji(t){return!(""===(t=void 0===t?"":t)||!vi)&&(fi?"shadow"===t:"shady"===t)}function Fi(){}function zi(t,e,n){var r;if(e.nodeType===Node.ELEMENT_NODE&&n(e),r="template"===e.localName?(e.content||e._content||e).childNodes:e.children||e.childNodes)for(e=0;e<r.length;e++)zi(t,r[e],n)}function Vi(t,e,n){if(e)if(t.classList)n?(t.classList.remove("style-scope"),t.classList.remove(e)):(t.classList.add("style-scope"),t.classList.add(e));else if(t.getAttribute){var r=t.getAttribute("class");n?r&&Ai(t,e=r.replace("style-scope","").replace(e,"")):Ai(t,(r?r+" ":"")+"style-scope "+e)}}function qi(t,e,n){zi(io,t,(function(t){Vi(t,e,!0),Vi(t,n)}))}function Ui(t,e){zi(io,t,(function(t){Vi(t,e||"",!0)}))}function Hi(t,e,n,r,i){var o=io;return""===(i=void 0===i?"":i)&&(fi||"shady"===(void 0===r?"":r)?i=ki(e,n):i=function(t,e,n,r,i){var o=Wi(n,r);return n=n?"."+n:"",ki(e,(function(e){e.c||(e.selector=e.w=Yi(t,e,t.b,n,o),e.c=!0),i&&i(e,n,o)}))}(o,e,(t=Ii(t)).is,t.ba,n)+"\n\n"),i.trim()}function Wi(t,e){return e?"[is="+t+"]":t}function Yi(t,e,n,r,i){var o=Ri(e.selector);if(!Ci(e)){e=0;for(var a=o.length,s=void 0;e<a&&(s=o[e]);e++)o[e]=n.call(t,s,r,i)}return o.filter((function(t){return!!t})).join(",")}function Gi(t){return t.replace($i,(function(t,e,n){return-1<n.indexOf("+")?n=n.replace(/\+/g,"___"):-1<n.indexOf("___")&&(n=n.replace(/___/g,"+")),":"+e+"("+n+")"}))}function Xi(t,e){t=t.split(/(\[.+?\])/);for(var n=[],r=0;r<t.length;r++)if(1==r%2)n.push(t[r]);else{var i=t[r];""===i&&r===t.length-1||((i=i.split(":"))[0]+=e,n.push(i.join(":")))}return n.join("")}function Ki(t){":root"===t.selector&&(t.selector="html")}Fi.prototype.b=function(t,e,n){var r=!1;t=t.trim();var i=$i.test(t);i&&(t=Gi(t=t.replace($i,(function(t,e,n){return":"+e+"("+n.replace(/\s/g,"")+")"}))));var o=ro.test(t);if(o){var a=function(t){for(var e,n=[];e=t.match(ro);){var r=e.index,i=Di(t,r);if(-1===i)throw Error(e.input+" selector missing ')'");e=t.slice(r,i+1),t=t.replace(e,"î"),n.push(e)}return{wa:t,matches:n}}(t);t=a.wa,a=a.matches}return t=(t=t.replace(Qi,":host $1")).replace(Zi,(function(t,i,o){return r||(t=function(t,e,n,r){var i=t.indexOf("::slotted");if(0<=t.indexOf(":host")?t=function(t,e){var n=t.match(to);return(n=n&&n[2].trim()||"")?n[0].match(Ji)?t.replace(to,(function(t,n,r){return e+r})):n.split(Ji)[0]===e?n:"should_not_match":t.replace(":host",e)}(t,r):0!==i&&(t=n?Xi(t,n):t),n=!1,0<=i&&(e="",n=!0),n){var o=!0;n&&(t=t.replace(eo,(function(t,e){return" > "+e})))}return{value:t,Qa:e,stop:o}}(o,i,e,n),r=r||t.stop,i=t.Qa,o=t.value),i+o})),o&&(t=function(t,e){var n=t.split("î");return e.reduce((function(t,e,r){return t+e+n[r+1]}),n[0])}(t,a)),i&&(t=Gi(t)),t.replace(no,(function(t,e,n,r){return'[dir="'+n+'"] '+e+r+", "+e+'[dir="'+n+'"]'+r}))},Fi.prototype.c=function(t){return t.match(":host")?"":t.match("::slotted")?this.b(t,":not(.style-scope)"):Xi(t.trim(),":not(.style-scope)")},o.Object.defineProperties(Fi.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var $i=/:(nth[-\w]+)\(([^)]+)\)/,Zi=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,Ji=/[[.:#*]/,Qi=/^(::slotted)/,to=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,eo=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,no=/(.*):dir\((?:(ltr|rtl))\)(.*)/,ro=/:(?:matches|any|-(?:webkit|moz)-any)/,io=new Fi;function oo(t,e,n,r,i){this.H=t||null,this.b=e||null,this.ta=n||[],this.F=null,this.cssBuild=i||"",this.ba=r||"",this.a=this.G=this.L=null}function ao(t){return t?t.__styleInfo:null}function so(t,e){return t.__styleInfo=e}function lo(t){var e=this.matches||this.matchesSelector||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector;return e&&e.call(this,t)}oo.prototype.c=function(){return this.H},oo.prototype._getStyleRules=oo.prototype.c;var uo=/:host\s*>\s*/,co=navigator.userAgent.match("Trident");function ho(){}function fo(t){if(!t.v){var e={},n={};po(t,n)&&(e.K=n,t.rules=null),e.cssText=t.parsedCssText.replace(_i,"").replace(yi,""),t.v=e}}function po(t,e){var n=t.v;if(!n){n=t.parsedCssText;for(var r;t=yi.exec(n);)"inherit"===(r=(t[2]||t[3]).trim())&&"unset"===r||(e[t[1].trim()]=r),r=!0;return r}if(n.K)return Object.assign(e,n.K),!0}function go(t,e,n){return e&&(e=0<=e.indexOf(";")?vo(t,e,n):function t(e,n){var r=e.indexOf("var(");if(-1===r)return n(e,"","","");var i=Di(e,r+3),o=e.substring(r+4,i);return r=e.substring(0,r),e=t(e.substring(i+1),n),-1===(i=o.indexOf(","))?n(r,o.trim(),"",e):n(r,o.substring(0,i).trim(),o.substring(i+1).trim(),e)}(e,(function(e,r,i,o){return r?((r=go(t,n[r],n))&&"initial"!==r?"apply-shim-inherit"===r&&(r="inherit"):r=go(t,n[i]||i,n)||i,e+(r||"")+o):e+o}))),e&&e.trim()||""}function vo(t,e,n){e=e.split(";");for(var r,i,o=0;o<e.length;o++)if(r=e[o]){if(mi.lastIndex=0,i=mi.exec(r))r=go(t,n[i[1]],n);else if(-1!==(i=r.indexOf(":"))){var a=r.substring(i);a=go(t,a=a.trim(),n)||a,r=r.substring(0,i)+a}e[o]=r&&r.lastIndexOf(";")===r.length-1?r.slice(0,-1):r||""}return e.join(";")}function yo(t,e,n){var r={},i={};return Ti(e,(function(e){!function(t,e,n,r){if(e.v||fo(e),e.v.K){var i=Ii(t);t=i.is,i=i.ba,i=t?Wi(t,i):"html";var o=e.parsedSelector,a=!!o.match(uo)||"html"===i&&-1<o.indexOf("html"),s=0===o.indexOf(":host")&&!a;"shady"===n&&(s=!(a=o===i+" > *."+i||-1!==o.indexOf("html"))&&0===o.indexOf(i)),(a||s)&&(n=i,s&&(e.w||(e.w=Yi(io,e,io.b,t?"."+t:"",i)),n=e.w||i),a&&"html"===i&&(n=e.w||e.J),r({wa:n,Xa:s,mb:a}))}}(t,e,n,(function(n){lo.call(t._element||t,n.wa)&&(n.Xa?po(e,r):po(e,i))}))}),null,!0),{cb:i,Va:r}}function mo(t,e,n,r){var i=Ii(e),o=Wi(i.is,i.ba),a=new RegExp("(?:^|[^.#[:])"+(e.extends?"\\"+o.slice(0,-1)+"\\]":o)+"($|[.:[\\s>+~])"),s=ao(e);i=s.H,s=s.cssBuild;var l=function(t,e){t=t.b;var n={};if(!fi&&t)for(var r=0,i=t[r];r<t.length;i=t[++r]){var o=i,a=e;o.l=new RegExp("\\b"+o.keyframesName+"(?!\\B|-)","g"),o.a=o.keyframesName+"-"+a,o.w=o.w||o.selector,o.selector=o.w.replace(o.keyframesName,o.a),n[i.keyframesName]=bo(i)}return n}(i,r);return Hi(e,i,(function(e){var i="";if(e.v||fo(e),e.v.cssText&&(i=vo(t,e.v.cssText,n)),e.cssText=i,!fi&&!Ci(e)&&e.cssText){var s=i=e.cssText;if(null==e.Da&&(e.Da=wi.test(i)),e.Da)if(null==e.ja)for(var u in e.ja=[],l)i!==(s=(s=l[u])(i))&&(i=s,e.ja.push(u));else{for(u=0;u<e.ja.length;++u)i=(s=l[e.ja[u]])(i);s=i}e.cssText=s,e.w=e.w||e.selector,i="."+r,s=0;for(var c=(u=Ri(e.w)).length,h=void 0;s<c&&(h=u[s]);s++)u[s]=h.match(a)?h.replace(o,i):i+" "+h;e.selector=u.join(",")}}),s)}function bo(t){return function(e){return e.replace(t.l,t.a)}}function wo(t,e){var n=xo,r=Si(t);t.textContent=ki(r,(function(t){var r=t.cssText=t.parsedCssText;t.v&&t.v.cssText&&(r=r.replace(si,"").replace(li,""),t.cssText=vo(n,r,e))}))}o.Object.defineProperties(ho.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var xo=new ho,_o={},Eo=window.customElements;if(Eo&&!fi&&!gi){var ko=Eo.define;Eo.define=function(t,e,n){_o[t]||(_o[t]=Pi(t)),ko.call(Eo,t,e,n)}}function So(){this.cache={}}function Co(){}So.prototype.store=function(t,e,n,r){var i=this.cache[t]||[];i.push({K:e,styleElement:n,G:r}),100<i.length&&i.shift(),this.cache[t]=i};var To=new RegExp(io.a+"\\s*([^\\s]*)");function No(t){return(t=(t.classList&&t.classList.value?t.classList.value:t.getAttribute("class")||"").match(To))?t[1]:""}function Oo(t){var e=Li(t).getRootNode();return e===t||e===t.ownerDocument?"":(t=e.host)?Ii(t).is:""}function Po(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.target!==document.documentElement&&n.target!==document.head)for(var r=0;r<n.addedNodes.length;r++){var i=n.addedNodes[r];if(i.nodeType===Node.ELEMENT_NODE){var o=i.getRootNode(),a=No(i);if(a&&o===i.ownerDocument&&("style"!==i.localName&&"template"!==i.localName||""===Bi(i)))Ui(i,a);else if(o instanceof ShadowRoot)for((o=Oo(i))!==a&&qi(i,a,o),i=window.ShadyDOM.nativeMethods.querySelectorAll.call(i,":not(."+io.a+")"),a=0;a<i.length;a++){var s=Oo(o=i[a]);s&&Vi(o,s)}}}}}if(!(fi||window.ShadyDOM&&window.ShadyDOM.handlesDynamicScoping)){var Mo=new MutationObserver(Po),Do=function(t){Mo.observe(t,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)Do(document);else{var Ao=function(){Do(document.body)};window.HTMLImports?window.HTMLImports.whenReady(Ao):requestAnimationFrame((function(){if("loading"===document.readyState){var t=function(){Ao(),document.removeEventListener("readystatechange",t)};document.addEventListener("readystatechange",t)}else Ao()}))}Co=function(){Po(Mo.takeRecords())}}var Lo={},Io=Promise.resolve();function Ro(t){(t=Lo[t])&&(t._applyShimCurrentVersion=t._applyShimCurrentVersion||0,t._applyShimValidatingVersion=t._applyShimValidatingVersion||0,t._applyShimNextVersion=(t._applyShimNextVersion||0)+1)}function Bo(t){return t._applyShimCurrentVersion===t._applyShimNextVersion}var jo={},Fo=new So;function zo(){this.Y={},this.c=document.documentElement;var t=new Zr;t.rules=[],this.l=so(this.c,new oo(t)),this.J=!1,this.a=this.b=null}function Vo(t){var e=Ii(t),n=e.is;e=e.ba;var r=_o[n]||null,i=Lo[n];if(i)return so(t,e=new oo(n=i._styleAst,r,i.a,e,i=Bi(i))),e}function qo(t){if(!t.b&&window.ShadyCSS&&window.ShadyCSS.ApplyShim){t.b=window.ShadyCSS.ApplyShim,t.b.invalidCallback=Ro;var e=!0}else e=!1;return function(t){!t.a&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(t.a=window.ShadyCSS.CustomStyleInterface,t.a.transformCallback=function(e){t.Ha(e)},t.a.validateCallback=function(){requestAnimationFrame((function(){(t.a.enqueued||t.J)&&t.flushCustomStyles()}))})}(t),e}function Uo(t,e,n){var r=Ii(e).is;if(n.F){var i,o=n.F;for(i in o)null===i?e.style.removeProperty(i):e.style.setProperty(i,o[i])}!(o=Lo[r])&&e!==t.c||o&&""!==Bi(o)||!o||!o._style||Bo(o)||((Bo(o)||o._applyShimValidatingVersion!==o._applyShimNextVersion)&&(qo(t),t.b&&t.b.transformRules(o._styleAst,r),o._style.textContent=Hi(e,n.H),function(t){t._applyShimValidatingVersion=t._applyShimNextVersion,t._validating||(t._validating=!0,Io.then((function(){t._applyShimCurrentVersion=t._applyShimNextVersion,t._validating=!1})))}(o)),fi&&(t=e.shadowRoot)&&(t=t.querySelector("style"))&&(t.textContent=Hi(e,n.H)),n.H=o._styleAst)}function Ho(t,e){return(e=Li(e).getRootNode().host)?ao(e)||Vo(e)?e:Ho(t,e):t.c}function Wo(t,e,n){var r=Ho(t,e),i=ao(r),o=i.L;for(var a in r===t.c||o||(Wo(t,r,i),o=i.L),t=Object.create(o||null),r=yo(e,n.H,n.cssBuild),e=function(t,e){var n={},r=[];return Ti(t,(function(t){t.v||fo(t);var i=t.w||t.parsedSelector;e&&t.v.K&&i&&lo.call(e,i)&&(po(t,n),t=t.index,i=parseInt(t/32,10),r[i]=(r[i]||0)|1<<t%32)}),null,!0),{K:n,key:r}}(i.H,e).K,Object.assign(t,r.Va,e,r.cb),e=n.F)((i=e[a])||0===i)&&(t[a]=i);for(a=xo,e=Object.getOwnPropertyNames(t),i=0;i<e.length;i++)t[r=e[i]]=go(a,t[r],t);n.L=t}(t=zo.prototype).flush=function(){Co()},t.Ta=function(t){return Si(t)},t.hb=function(t){return ki(t)},t.prepareTemplate=function(t,e,n){this.prepareTemplateDom(t,e),this.prepareTemplateStyles(t,e,n)},t.prepareTemplateStyles=function(t,e,n){if(!t._prepared&&!gi){fi||_o[e]||(_o[e]=Pi(e)),t._prepared=!0,t.name=e,t.extends=n,Lo[e]=t;var r=Bi(t),i=ji(r);n={is:e,extends:n};for(var o=[],a=t.content.querySelectorAll("style"),s=0;s<a.length;s++){var l=a[s];if(l.hasAttribute("shady-unscoped")){if(!fi){var u=l.textContent;if(!Ei.has(u)){Ei.add(u);var c=document.createElement("style");c.setAttribute("shady-unscoped",""),c.textContent=u,document.head.appendChild(c)}l.parentNode.removeChild(l)}}else o.push(l.textContent),l.parentNode.removeChild(l)}o=o.join("").trim()+(jo[e]||""),qo(this),i||((a=!r)&&(a=mi.test(o)||yi.test(o),mi.lastIndex=0,yi.lastIndex=0),s=Jr(o),a&&vi&&this.b&&this.b.transformRules(s,e),t._styleAst=s),a=[],vi||(a=function(t){var e={},n=[],r=0;for(var i in Ti(t,(function(t){fo(t),t.index=r++,t=t.v.cssText;for(var n;n=bi.exec(t);){var i=n[1];":"!==n[2]&&(e[i]=!0)}}),(function(t){n.push(t)})),t.b=n,t=[],e)t.push(i);return t}(t._styleAst)),a.length&&!vi||(s=fi?t.content:null,e=_o[e]||null,r=(r=Hi(n,t._styleAst,null,r,i?o:"")).length?Ni(r,n.is,s,e):null,t._style=r),t.a=a}},t.ab=function(t,e){jo[e]=t.join(" ")},t.prepareTemplateDom=function(t,e){if(!gi){var n=Bi(t);fi||"shady"===n||t._domPrepared||(t._domPrepared=!0,function(t,e){zi(io,t,(function(t){Vi(t,e||"")}))}(t.content,e))}},t.flushCustomStyles=function(){if(!gi){var t=qo(this);if(this.a){var e=this.a.processStyles();if((t||this.a.enqueued)&&!ji(this.l.cssBuild)){if(vi){if(!this.l.cssBuild)for(t=0;t<e.length;t++){var n=this.a.getStyleForCustomStyle(e[t]);if(n&&vi&&this.b){var r=Si(n);qo(this),this.b.transformRules(r),n.textContent=ki(r)}}}else{for(function(t,e){(e=e.map((function(e){return t.a.getStyleForCustomStyle(e)})).filter((function(t){return!!t}))).sort((function(t,e){return(t=e.compareDocumentPosition(t))&Node.DOCUMENT_POSITION_FOLLOWING?1:t&Node.DOCUMENT_POSITION_PRECEDING?-1:0})),t.l.H.rules=e.map((function(t){return Si(t)}))}(this,e),Wo(this,this.c,this.l),t=0;t<e.length;t++)(n=this.a.getStyleForCustomStyle(e[t]))&&wo(n,this.l.L);this.J&&this.styleDocument()}this.a.enqueued=!1}}}},t.styleElement=function(t,e){if(gi){if(e){ao(t)||so(t,new oo(null));var n=ao(t);n.F=n.F||{},Object.assign(n.F,e),Uo(this,t,n)}}else if(n=ao(t)||Vo(t))if(t!==this.c&&(this.J=!0),e&&(n.F=n.F||{},Object.assign(n.F,e)),vi)Uo(this,t,n);else if(this.flush(),Wo(this,t,n),n.ta&&n.ta.length){var r;e=Ii(t).is;t:{if(r=Fo.cache[e])for(var i=r.length-1;0<=i;i--){var o=r[i];e:{for(var a=n.ta,s=0;s<a.length;s++){var l=a[s];if(o.K[l]!==n.L[l]){a=!1;break e}}a=!0}if(a){r=o;break t}}r=void 0}a=r?r.styleElement:null,i=n.G,(o=r&&r.G)||(o=e+"-"+(o=this.Y[e]=(this.Y[e]||0)+1)),n.G=o,o=n.G,s=xo,s=a?a.textContent||"":mo(s,t,n.L,o);var u=(l=ao(t)).a;u&&!fi&&u!==a&&(u._useCount--,0>=u._useCount&&u.parentNode&&u.parentNode.removeChild(u)),fi?l.a?(l.a.textContent=s,a=l.a):s&&(a=Ni(s,o,t.shadowRoot,l.b)):a?a.parentNode||(co&&-1<s.indexOf("@media")&&(a.textContent=s),Mi(a,null,l.b)):s&&(a=Ni(s,o,null,l.b)),a&&(a._useCount=a._useCount||0,l.a!=a&&a._useCount++,l.a=a),o=a,fi||(a=n.G,l=s=t.getAttribute("class")||"",i&&(l=s.replace(new RegExp("\\s*x-scope\\s*"+i+"\\s*","g")," ")),s!==(l+=(l?" ":"")+"x-scope "+a)&&Ai(t,l)),r||Fo.store(e,n.L,o,n.G)}},t.styleDocument=function(t){this.styleSubtree(this.c,t)},t.styleSubtree=function(t,e){var n=Li(t),r=n.shadowRoot,i=t===this.c;if((r||i)&&this.styleElement(t,e),t=i?n:r)for(t=Array.from(t.querySelectorAll("*")).filter((function(t){return Li(t).shadowRoot})),e=0;e<t.length;e++)this.styleSubtree(t[e])},t.Ha=function(t){var e=this,n=Bi(t);if(n!==this.l.cssBuild&&(this.l.cssBuild=n),!ji(n)){var r=Si(t);Ti(r,(function(t){if(fi)Ki(t);else{var r=io;t.selector=t.parsedSelector,Ki(t),t.selector=t.w=Yi(r,t,r.c,void 0,void 0)}vi&&""===n&&(qo(e),e.b&&e.b.transformRule(t))})),vi?t.textContent=ki(r):this.l.H.rules.push(r)}},t.getComputedStyleValue=function(t,e){var n;return vi||(n=(ao(t)||ao(Ho(this,t))).L[e]),(n=n||window.getComputedStyle(t).getPropertyValue(e))?n.trim():""},t.gb=function(t,e){var n,r=Li(t).getRootNode();if(n=e?("string"==typeof e?e:String(e)).split(/\s/):[],!(e=r.host&&r.host.localName)&&(r=t.getAttribute("class"))){r=r.split(/\s/);for(var i=0;i<r.length;i++)if(r[i]===io.a){e=r[i+1];break}}e&&n.push(io.a,e),vi||(e=ao(t))&&e.G&&n.push(xo.a,e.G),Ai(t,n.join(" "))},t.Oa=function(t){return ao(t)},t.fb=function(t,e){Vi(t,e)},t.ib=function(t,e){Vi(t,e,!0)},t.eb=function(t){return Oo(t)},t.Ra=function(t){return No(t)},zo.prototype.flush=zo.prototype.flush,zo.prototype.prepareTemplate=zo.prototype.prepareTemplate,zo.prototype.styleElement=zo.prototype.styleElement,zo.prototype.styleDocument=zo.prototype.styleDocument,zo.prototype.styleSubtree=zo.prototype.styleSubtree,zo.prototype.getComputedStyleValue=zo.prototype.getComputedStyleValue,zo.prototype.setElementClass=zo.prototype.gb,zo.prototype._styleInfoForNode=zo.prototype.Oa,zo.prototype.transformCustomStyleForDocument=zo.prototype.Ha,zo.prototype.getStyleAst=zo.prototype.Ta,zo.prototype.styleAstToString=zo.prototype.hb,zo.prototype.flushCustomStyles=zo.prototype.flushCustomStyles,zo.prototype.scopeNode=zo.prototype.fb,zo.prototype.unscopeNode=zo.prototype.ib,zo.prototype.scopeForNode=zo.prototype.eb,zo.prototype.currentScopeForNode=zo.prototype.Ra,zo.prototype.prepareAdoptedCssText=zo.prototype.ab,Object.defineProperties(zo.prototype,{nativeShadow:{get:function(){return fi}},nativeCss:{get:function(){return vi}}});var Yo,Go,Xo=new zo;window.ShadyCSS&&(Yo=window.ShadyCSS.ApplyShim,Go=window.ShadyCSS.CustomStyleInterface),window.ShadyCSS={ScopingShim:Xo,prepareTemplate:function(t,e,n){Xo.flushCustomStyles(),Xo.prepareTemplate(t,e,n)},prepareTemplateDom:function(t,e){Xo.prepareTemplateDom(t,e)},prepareTemplateStyles:function(t,e,n){Xo.flushCustomStyles(),Xo.prepareTemplateStyles(t,e,n)},styleSubtree:function(t,e){Xo.flushCustomStyles(),Xo.styleSubtree(t,e)},styleElement:function(t){Xo.flushCustomStyles(),Xo.styleElement(t)},styleDocument:function(t){Xo.flushCustomStyles(),Xo.styleDocument(t)},flushCustomStyles:function(){Xo.flushCustomStyles()},getComputedStyleValue:function(t,e){return Xo.getComputedStyleValue(t,e)},nativeCss:vi,nativeShadow:fi,cssBuild:ti,disableRuntime:gi},Yo&&(window.ShadyCSS.ApplyShim=Yo),Go&&(window.ShadyCSS.CustomStyleInterface=Go),function(t){function e(t){return""==t&&(o.call(this),this.h=!0),t.toLowerCase()}function n(t){var e=t.charCodeAt(0);return 32<e&&127>e&&-1==[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function r(t){var e=t.charCodeAt(0);return 32<e&&127>e&&-1==[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function i(t,i,a){var s=i||"scheme start",l=0,f="",p=!1,g=!1;t:for(;(null!=t[l-1]||0==l)&&!this.h;){var v=t[l];switch(s){case"scheme start":if(!v||!h.test(v)){if(i)break t;f="",s="no scheme";continue}f+=v.toLowerCase(),s="scheme";break;case"scheme":if(v&&d.test(v))f+=v.toLowerCase();else{if(":"!=v){if(i)break t;f="",l=0,s="no scheme";continue}if(this.g=f,f="",i)break t;void 0!==u[this.g]&&(this.A=!0),s="file"==this.g?"relative":this.A&&a&&a.g==this.g?"relative or authority":this.A?"authority first slash":"scheme data"}break;case"scheme data":"?"==v?(this.o="?",s="query"):"#"==v?(this.u="#",s="fragment"):null!=v&&"\t"!=v&&"\n"!=v&&"\r"!=v&&(this.pa+=n(v));break;case"no scheme":if(a&&void 0!==u[a.g]){s="relative";continue}o.call(this),this.h=!0;break;case"relative or authority":if("/"!=v||"/"!=t[l+1]){s="relative";continue}s="authority ignore slashes";break;case"relative":if(this.A=!0,"file"!=this.g&&(this.g=a.g),null==v){this.i=a.i,this.m=a.m,this.j=a.j.slice(),this.o=a.o,this.s=a.s,this.f=a.f;break t}if("/"==v||"\\"==v)s="relative slash";else if("?"==v)this.i=a.i,this.m=a.m,this.j=a.j.slice(),this.o="?",this.s=a.s,this.f=a.f,s="query";else{if("#"!=v){s=t[l+1];var y=t[l+2];("file"!=this.g||!h.test(v)||":"!=s&&"|"!=s||null!=y&&"/"!=y&&"\\"!=y&&"?"!=y&&"#"!=y)&&(this.i=a.i,this.m=a.m,this.s=a.s,this.f=a.f,this.j=a.j.slice(),this.j.pop()),s="relative path";continue}this.i=a.i,this.m=a.m,this.j=a.j.slice(),this.o=a.o,this.u="#",this.s=a.s,this.f=a.f,s="fragment"}break;case"relative slash":if("/"!=v&&"\\"!=v){"file"!=this.g&&(this.i=a.i,this.m=a.m,this.s=a.s,this.f=a.f),s="relative path";continue}s="file"==this.g?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=v){s="authority ignore slashes";continue}s="authority second slash";break;case"authority second slash":if(s="authority ignore slashes","/"!=v)continue;break;case"authority ignore slashes":if("/"!=v&&"\\"!=v){s="authority";continue}break;case"authority":if("@"==v){for(p&&(f+="%40"),p=!0,v=0;v<f.length;v++)"\t"==(y=f[v])||"\n"==y||"\r"==y||(":"==y&&null===this.f?this.f="":(y=n(y),null!==this.f?this.f+=y:this.s+=y));f=""}else{if(null==v||"/"==v||"\\"==v||"?"==v||"#"==v){l-=f.length,f="",s="host";continue}f+=v}break;case"file host":if(null==v||"/"==v||"\\"==v||"?"==v||"#"==v){2!=f.length||!h.test(f[0])||":"!=f[1]&&"|"!=f[1]?(0!=f.length&&(this.i=e.call(this,f),f=""),s="relative path start"):s="relative path";continue}"\t"==v||"\n"==v||"\r"==v||(f+=v);break;case"host":case"hostname":if(":"!=v||g){if(null==v||"/"==v||"\\"==v||"?"==v||"#"==v){if(this.i=e.call(this,f),f="",s="relative path start",i)break t;continue}"\t"!=v&&"\n"!=v&&"\r"!=v&&("["==v?g=!0:"]"==v&&(g=!1),f+=v)}else if(this.i=e.call(this,f),f="",s="port","hostname"==i)break t;break;case"port":if(/[0-9]/.test(v))f+=v;else{if(null==v||"/"==v||"\\"==v||"?"==v||"#"==v||i){if(""!=f&&((f=parseInt(f,10))!=u[this.g]&&(this.m=f+""),f=""),i)break t;s="relative path start";continue}"\t"==v||"\n"==v||"\r"==v||(o.call(this),this.h=!0)}break;case"relative path start":if(s="relative path","/"!=v&&"\\"!=v)continue;break;case"relative path":null!=v&&"/"!=v&&"\\"!=v&&(i||"?"!=v&&"#"!=v)?"\t"!=v&&"\n"!=v&&"\r"!=v&&(f+=n(v)):((y=c[f.toLowerCase()])&&(f=y),".."==f?(this.j.pop(),"/"!=v&&"\\"!=v&&this.j.push("")):"."==f&&"/"!=v&&"\\"!=v?this.j.push(""):"."!=f&&("file"==this.g&&0==this.j.length&&2==f.length&&h.test(f[0])&&"|"==f[1]&&(f=f[0]+":"),this.j.push(f)),f="","?"==v?(this.o="?",s="query"):"#"==v&&(this.u="#",s="fragment"));break;case"query":i||"#"!=v?null!=v&&"\t"!=v&&"\n"!=v&&"\r"!=v&&(this.o+=r(v)):(this.u="#",s="fragment");break;case"fragment":null!=v&&"\t"!=v&&"\n"!=v&&"\r"!=v&&(this.u+=v)}l++}}function o(){this.s=this.pa=this.g="",this.f=null,this.m=this.i="",this.j=[],this.u=this.o="",this.A=this.h=!1}function a(t,e){void 0===e||e instanceof a||(e=new a(String(e))),this.a=t,o.call(this),i.call(this,this.a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,""),null,e)}var s=!1;try{var l=new URL("b","http://a");l.pathname="c%20d",s="http://a/c%20d"===l.href}catch(t){}if(!s){var u=Object.create(null);u.ftp=21,u.file=0,u.gopher=70,u.http=80,u.https=443,u.ws=80,u.wss=443;var c=Object.create(null);c["%2e"]=".",c[".%2e"]="..",c["%2e."]="..",c["%2e%2e"]="..";var h=/[a-zA-Z]/,d=/[a-zA-Z0-9\+\-\.]/;a.prototype={toString:function(){return this.href},get href(){if(this.h)return this.a;var t="";return""==this.s&&null==this.f||(t=this.s+(null!=this.f?":"+this.f:"")+"@"),this.protocol+(this.A?"//"+t+this.host:"")+this.pathname+this.o+this.u},set href(t){o.call(this),i.call(this,t)},get protocol(){return this.g+":"},set protocol(t){this.h||i.call(this,t+":","scheme start")},get host(){return this.h?"":this.m?this.i+":"+this.m:this.i},set host(t){!this.h&&this.A&&i.call(this,t,"host")},get hostname(){return this.i},set hostname(t){!this.h&&this.A&&i.call(this,t,"hostname")},get port(){return this.m},set port(t){!this.h&&this.A&&i.call(this,t,"port")},get pathname(){return this.h?"":this.A?"/"+this.j.join("/"):this.pa},set pathname(t){!this.h&&this.A&&(this.j=[],i.call(this,t,"relative path start"))},get search(){return this.h||!this.o||"?"==this.o?"":this.o},set search(t){!this.h&&this.A&&(this.o="?","?"==t[0]&&(t=t.slice(1)),i.call(this,t,"query"))},get hash(){return this.h||!this.u||"#"==this.u?"":this.u},set hash(t){this.h||(t?(this.u="#","#"==t[0]&&(t=t.slice(1)),i.call(this,t,"fragment")):this.u="")},get origin(){var t;if(this.h||!this.g)return"";switch(this.g){case"data":case"file":case"javascript":case"mailto":return"null"}return(t=this.host)?this.g+"://"+t:""}};var f=t.URL;f&&(a.createObjectURL=function(t){return f.createObjectURL.apply(f,arguments)},a.revokeObjectURL=function(t){f.revokeObjectURL(t)}),t.URL=a}}(window),Object.getOwnPropertyDescriptor(Node.prototype,"baseURI")||Object.defineProperty(Node.prototype,"baseURI",{get:function(){var t=(this.ownerDocument||this).querySelector("base[href]");return t&&t.href||window.location.href},configurable:!0,enumerable:!0});var Ko=document.createElement("style");Ko.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var $o=document.querySelector("head");$o.insertBefore(Ko,$o.firstChild);var Zo=window.customElements,Jo=!1,Qo=null;function ta(){window.HTMLTemplateElement.bootstrap&&window.HTMLTemplateElement.bootstrap(window.document),Qo&&Qo(),Jo=!0,window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}Zo.polyfillWrapFlushCallback&&Zo.polyfillWrapFlushCallback((function(t){Qo=t,Jo&&t()})),"complete"!==document.readyState?(window.addEventListener("load",ta),window.addEventListener("DOMContentLoaded",(function(){window.removeEventListener("load",ta),ta()}))):ta()}).call(n);var av=/^\s+|\s+$/g,sv=/^[-+]0x[0-9a-f]+$/i,lv=/^0b[01]+$/i,uv=/^0o[0-7]+$/i,cv=parseInt,hv="object"==typeof n&&n&&n.Object===Object&&n,dv="object"==typeof self&&self&&self.Object===Object&&self,fv=hv||dv||Function("return this")(),pv=Object.prototype.toString,gv=Math.max,vv=Math.min,yv=function(){return fv.Date.now()};function mv(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function bv(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==pv.call(t)}(t))return NaN;if(mv(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=mv(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(av,"");var n=lv.test(t);return n||uv.test(t)?cv(t.slice(2),n?2:8):sv.test(t)?NaN:+t}var wv=function(t,e,n){var r,i,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){return u=t,s=setTimeout(v,e),c?f(t):a}function g(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function v(){var t=yv();if(g(t))return y(t);s=setTimeout(v,function(t){var n=e-(t-l);return h?vv(n,o-(t-u)):n}(t))}function y(t){return s=void 0,d&&r?f(t):(r=i=void 0,a)}function m(){var t=yv(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return p(l);if(h)return s=setTimeout(v,e),f(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=bv(e)||0,mv(n)&&(c=!!n.leading,o=(h="maxWait"in n)?gv(bv(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},m.flush=function(){return void 0===s?a:y(yv())},m},xv=r((function(t,e){(function(){var e,n,r,i,o,a,s,l,u,c,h,d,f,p,g;r=Math.floor,c=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},u=function(t,e,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)a(e,t[s=r((i+o)/2)])<0?o=s:i=s+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),p(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,g(t,0,e)):i=r,i},l=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,g(t,0,r),i},s=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(e=(i=[t[0],e])[0],t[0]=i[1],g(t,0,r)),e},i=function(t,e){var i,o,a,s,l,u;for(null==e&&(e=n),l=[],o=0,a=(s=function(){u=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}.apply(this).reverse()).length;o<a;o++)i=s[o],l.push(g(t,i,e));return l},f=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return p(t,0,i,r),g(t,i,r)},h=function(t,e,r){var o,a,l,u,c;if(null==r&&(r=n),!(a=t.slice(0,e)).length)return a;for(i(a,r),l=0,u=(c=t.slice(e)).length;l<u;l++)o=c[l],s(a,o,r);return a.sort(r).reverse()},d=function(t,e,r){var a,s,l,h,d,f,p,g,v;if(null==r&&(r=n),10*e<=t.length){if(!(l=t.slice(0,e).sort(r)).length)return l;for(s=l[l.length-1],h=0,f=(p=t.slice(e)).length;h<f;h++)r(a=p[h],s)<0&&(u(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(t,r),v=[],d=0,g=c(e,t.length);0<=g?d<g:d>g;0<=g?++d:--d)v.push(o(t,r));return v},p=function(t,e,r,i){var o,a,s;for(null==i&&(i=n),o=t[r];r>e&&i(o,a=t[s=r-1>>1])<0;)t[r]=a,r=s;return t[r]=o},g=function(t,e,r){var i,o,a,s,l;for(null==r&&(r=n),o=t.length,l=e,a=t[e],i=2*e+1;i<o;)(s=i+1)<o&&!(r(t[i],t[s])<0)&&(i=s),t[e]=t[i],i=2*(e=i)+1;return t[e]=a,p(t,l,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=i,t.updateItem=f,t.nlargest=h,t.nsmallest=d,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return f(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),t.exports=e}).call(n)}));function _v(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var Ev=_v(wv),kv=_v(xv);function Sv(t){return(Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nv(t,e,n){return e&&Tv(t.prototype,e),n&&Tv(t,n),t}function Ov(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Mv="undefined"==typeof window?null:window,Dv=Mv?Mv.navigator:null,Av=(Mv&&Mv.document,Sv("")),Lv=Sv({}),Iv=Sv((function(){})),Rv="undefined"==typeof HTMLElement?"undefined":Sv(HTMLElement),Bv=function(t){return t&&t.instanceString&&Fv(t.instanceString)?t.instanceString():null},jv=function(t){return null!=t&&Sv(t)==Av},Fv=function(t){return null!=t&&Sv(t)===Iv},zv=function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},Vv=function(t){return null!=t&&Sv(t)===Lv&&!zv(t)&&t.constructor===Object},qv=function(t){return null!=t&&Sv(t)===Sv(1)&&!isNaN(t)},Uv=function(t){return"undefined"===Rv?void 0:null!=t&&t instanceof HTMLElement},Hv=function(t){return Wv(t)||Yv(t)},Wv=function(t){return"collection"===Bv(t)&&t._private.single},Yv=function(t){return"collection"===Bv(t)&&!t._private.single},Gv=function(t){return"core"===Bv(t)},Xv=function(t){return"stylesheet"===Bv(t)},Kv=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},$v=function(t){return function(t){return null!=t&&Sv(t)===Lv}(t)&&Fv(t.then)},Zv=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=this,o=arguments,a=e.apply(i,o),s=n.cache;return(r=s[a])||(r=s[a]=t.apply(i,o)),r};return n.cache={},n},Jv=Zv((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),Qv=Zv((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),ty=Zv((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),ey=function(t){return Kv(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},ny="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ry=function(t,e){return t<e?-1:t>e?1:0},iy=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},oy=function(t){return(zv(t)?t:null)||function(t){return ay[t.toLowerCase()]}(t)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r;return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}}(t)||function(t){var e,n=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;e.push(l)}}return e}(t)||function(t){var e,n,r,i,o,a,s,l;function u(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var c=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=l=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,d=2*i-h;a=Math.round(255*u(d,h,n+1/3)),s=Math.round(255*u(d,h,n)),l=Math.round(255*u(d,h,n-1/3))}e=[a,s,l,o]}return e}(t)},ay={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sy=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(Vv(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},ly=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(Vv(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e},uy=Mv?Mv.performance:null,cy=uy&&uy.now?function(){return uy.now()}:function(){return Date.now()},hy=function(){if(Mv){if(Mv.requestAnimationFrame)return function(t){Mv.requestAnimationFrame(t)};if(Mv.mozRequestAnimationFrame)return function(t){Mv.mozRequestAnimationFrame(t)};if(Mv.webkitRequestAnimationFrame)return function(t){Mv.webkitRequestAnimationFrame(t)};if(Mv.msRequestAnimationFrame)return function(t){Mv.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(cy())}),1e3/60)}}(),dy=function(t){return hy(t)},fy=cy,py=65599,gy=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,r=n;!(e=t.next()).done;)r=r*py+e.value|0;return r},vy=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return e*py+t|0},yy=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(e<<5)+e+t|0},my=function(t){return 2097152*t[0]+t[1]},by=function(t,e){return[vy(t[0],e[0]),yy(t[1],e[1])]},wy=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return gy({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},xy=function(){return _y(arguments)},_y=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?wy(r):wy(r,e)}return e},Ey=!0,ky=null!=console.warn,Sy=null!=console.trace,Cy=Number.MAX_SAFE_INTEGER||9007199254740991,Ty=function(){return!0},Ny=function(){return!1},Oy=function(){return 0},Py=function(){},My=function(t){throw new Error(t)},Dy=function(t){if(void 0===t)return Ey;Ey=!!t},Ay=function(t){Dy()&&(ky?console.warn(t):(console.log(t),Sy&&console.trace()))},Ly=function(t){return null==t?t:zv(t)?t.slice():Vv(t)?function(t){return iy({},t)}(t):t},Iy=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},Ry={},By=function(){return Ry},jy=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=null==n?void 0:n[o];r[o]=void 0===a?t[o]:a}return r}},Fy=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},zy=function(t){t.splice(0,t.length)},Vy=function(t,e,n){return n&&(e=ty(n,e)),t[e]},qy=function(t,e,n,r){n&&(e=ty(n,e)),t[e]=r},Uy="undefined"!=typeof Map?Map:function(){function t(){Cv(this,t),this._obj={}}return Nv(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Hy=function(){function t(e){if(Cv(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return Nv(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(e){return t.has(e)}))}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Wy="undefined"!==("undefined"==typeof Set?"undefined":Sv(Set))?Set:Hy,Yy=function(t,e,n){if(n=!(void 0!==n&&!n),void 0!==t&&void 0!==e&&Gv(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new Wy,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,a=t.pan(),s=t.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var l=[];zv(e.classes)?l=e.classes:jv(e.classes)&&(l=e.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];h&&""!==h&&i.classes.add(h)}this.createEmitter();var d=e.style||e.css;d&&(Ay("Setting a `style` bypass at element creation is deprecated"),this.style(d)),(void 0===n||n)&&this.restore()}else My("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else My("An element must have a core reference and parameters set")},Gy=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;Vv(e)&&!Hv(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||Fv(n)?r:n,n=Fv(n)?n:function(){};for(var o,a=this._private.cy,s=e=jv(e)?this.filter(e):e,l=[],u=[],c={},h={},d={},f=0,p=this.byGroup(),g=p.nodes,v=p.edges,y=0;y<s.length;y++){var m=s[y],b=m.id();m.isNode()&&(l.unshift(m),t.bfs&&(d[b]=!0,u.push(m)),h[b]=0)}var w=function(){var e=t.bfs?l.shift():l.pop(),i=e.id();if(t.dfs){if(d[i])return"continue";d[i]=!0,u.push(e)}var a,s=h[i],p=c[i],y=null!=p?p.source():null,m=null!=p?p.target():null,b=null==p?void 0:e.same(y)?m[0]:y[0];if(!0===(a=n(e,p,b,f++,s)))return o=e,"break";if(!1===a)return"break";for(var w=e.connectedEdges().filter((function(t){return(!r||t.source().same(e))&&v.has(t)})),x=0;x<w.length;x++){var _=w[x],E=_.connectedNodes().filter((function(t){return!t.same(e)&&g.has(t)})),k=E.id();0===E.length||d[k]||(E=E[0],l.push(E),t.bfs&&(d[k]=!0,u.push(E)),c[k]=_,h[k]=h[i]+1)}};t:for(;0!==l.length;){var x=w();switch(x){case"continue":continue;case"break":break t}}for(var _=a.collection(),E=0;E<u.length;E++){var k=u[E],S=c[k.id()];null!=S&&_.merge(S),_.merge(k)}return{path:a.collection(_),found:a.collection(o)}}},Xy={breadthFirstSearch:Gy({bfs:!0}),depthFirstSearch:Gy({dfs:!0})};Xy.bfs=Xy.breadthFirstSearch,Xy.dfs=Xy.depthFirstSearch;var Ky=jy({root:null,weight:function(t){return 1},directed:!1}),$y={dijkstra:function(t){if(!Vv(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Ky(t),r=n.root,i=n.weight,o=n.directed,a=this,s=i,l=jv(r)?this.filter(r)[0]:r[0],u={},c={},h={},d=this.byGroup(),f=d.nodes,p=d.edges;p.unmergeBy((function(t){return t.isLoop()}));for(var g=function(t){return u[t.id()]},v=function(t,e){u[t.id()]=e,y.updateItem(t)},y=new kv((function(t,e){return g(t)-g(e)})),m=0;m<f.length;m++){var b=f[m];u[b.id()]=b.same(l)?0:1/0,y.push(b)}for(var w=function(t,e){for(var n,r=(o?t.edgesTo(e):t.edgesWith(e)).intersect(p),i=1/0,a=0;a<r.length;a++){var l=r[a],u=s(l);(u<i||!n)&&(i=u,n=l)}return{edge:n,dist:i}};y.size()>0;){var x=y.pop(),_=g(x),E=x.id();if(h[E]=_,_!==1/0)for(var k=x.neighborhood().intersect(f),S=0;S<k.length;S++){var C=k[S],T=C.id(),N=w(x,C),O=_+N.dist;O<g(C)&&(v(C,O),c[T]={node:x,edge:N.edge})}}return{distanceTo:function(t){var e=jv(t)?f.filter(t)[0]:t[0];return h[e.id()]},pathTo:function(t){var e=jv(t)?f.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);c[i];){var o=c[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return a.spawn(n)}}}},Zy={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),a=n,s=function(t){for(var e=0;e<o.length;e++){if(o[e].has(t))return e}},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var u=r.sort((function(e,n){return t(e)-t(n)})),c=0;c<u.length;c++){var h=u[c],d=h.source()[0],f=h.target()[0],p=s(d),g=s(f),v=o[p],y=o[g];p!==g&&(a.merge(h),v.merge(y),o.splice(g,1))}return a}},Jy=jy({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Qy={aStar:function(t){var e=this.cy(),n=Jy(t),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var l,u,c=r.id(),h=i.id(),d={},f={},p={},g=new kv((function(t,e){return f[t.id()]-f[e.id()]})),v=new Wy,y={},m={},b=function(t,e){g.push(t),v.add(e)},w=function(t){return v.has(t)};b(r,c),d[c]=0,f[c]=o(r);for(var x=0;g.size()>0;){if(l=g.pop(),u=l.id(),v.delete(u),x++,u===h){for(var _=[],E=i,k=h,S=m[k];_.unshift(E),null!=S&&_.unshift(S),null!=(E=y[k]);)S=m[k=E.id()];return{found:!0,distance:d[u],path:this.spawn(_),steps:x}}p[u]=!0;for(var C=l._private.edges,T=0;T<C.length;T++){var N=C[T];if(this.hasElementWithId(N.id())&&(!a||N.data("source")===u)){var O=N.source(),P=N.target(),M=O.id()!==u?O:P,D=M.id();if(this.hasElementWithId(D)&&!p[D]){var A=d[u]+s(N);w(D)?A<d[D]&&(d[D]=A,f[D]=A+o(M),y[D]=l):(d[D]=A,f[D]=A+o(M),b(M,D),y[D]=l,m[D]=N)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},tm=jy({weight:function(t){return 1},directed:!1}),em={floydWarshall:function(t){for(var e=this.cy(),n=tm(t),r=n.weight,i=n.directed,o=r,a=this.byGroup(),s=a.nodes,l=a.edges,u=s.length,c=u*u,h=function(t){return s.indexOf(t)},d=function(t){return s[t]},f=new Array(c),p=0;p<c;p++){var g=p%u,v=(p-g)/u;f[p]=v===g?0:1/0}for(var y=new Array(c),m=new Array(c),b=0;b<l.length;b++){var w=l[b],x=w.source()[0],_=w.target()[0];if(x!==_){var E=h(x),k=h(_),S=E*u+k,C=o(w);if(f[S]>C&&(f[S]=C,y[S]=k,m[S]=w),!i){var T=k*u+E;!i&&f[T]>C&&(f[T]=C,y[T]=E,m[T]=w)}}}for(var N=0;N<u;N++)for(var O=0;O<u;O++)for(var P=O*u+N,M=0;M<u;M++){var D=O*u+M,A=N*u+M;f[P]+f[A]<f[D]&&(f[D]=f[P]+f[A],y[D]=y[P])}var L=function(t){return h(function(t){return(jv(t)?e.filter(t):t)[0]}(t))};return{distance:function(t,e){var n=L(t),r=L(e);return f[n*u+r]},path:function(t,n){var r=L(t),i=L(n),o=d(r);if(r===i)return o.collection();if(null==y[r*u+i])return e.collection();var a,s=e.collection(),l=r;for(s.merge(o);r!==i;)l=r,r=y[r*u+i],a=m[l*u+r],s.merge(a),s.merge(d(r));return s}}}},nm=jy({weight:function(t){return 1},directed:!1,root:null}),rm={bellmanFord:function(t){var e=this,n=nm(t),r=n.weight,i=n.directed,o=n.root,a=r,s=this,l=this.cy(),u=this.byGroup(),c=u.edges,h=u.nodes,d=h.length,f=new Uy,p=!1;o=l.collection(o)[0],c.unmergeBy((function(t){return t.isLoop()}));for(var g=c.length,v=function(t){var e=f.get(t.id());return e||(e={},f.set(t.id(),e)),e},y=function(t){return(jv(t)?l.$(t):t)[0]},m=0;m<d;m++){var b=h[m],w=v(b);b.same(o)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var x=!1,_=function(t,e,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=t,i.edge=n,x=!0)},E=1;E<d;E++){x=!1;for(var k=0;k<g;k++){var S=c[k],C=S.source(),T=S.target(),N=a(S),O=v(C),P=v(T);_(C,0,S,O,P,N),i||_(T,0,S,P,O,N)}if(!x)break}if(x)for(var M=0;M<g;M++){var D=c[M],A=D.source(),L=D.target(),I=a(D),R=v(A).dist,B=v(L).dist;if(R+I<B||!i&&B+I<R){Ay("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(t){return v(y(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=y(t),i=[],a=r;;){if(null==a)return e.spawn();var l=v(a),u=l.edge,c=l.pred;if(i.unshift(a[0]),a.same(n)&&i.length>0)break;null!=u&&i.unshift(u),a=c}return s.spawn(i)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},im=Math.sqrt(2),om=function(t,e,n){0===n.length&&My("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],l=n,u=l.length-1;u>=0;u--){var c=l[u],h=c[1],d=c[2];(e[h]===a&&e[d]===s||e[h]===s&&e[d]===a)&&l.splice(u,1)}for(var f=0;f<l.length;f++){var p=l[f];p[1]===s?(l[f]=p.slice(),l[f][1]=a):p[2]===s&&(l[f]=p.slice(),l[f][2]=a)}for(var g=0;g<e.length;g++)e[g]===s&&(e[g]=a);return l},am=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=om(i,t,e),n--}return e},sm={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy((function(t){return t.isLoop()}));var i=n.length,o=r.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/im);if(!(i<2)){for(var l=[],u=0;u<o;u++){var c=r[u];l.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],f=new Array(i),p=new Array(i),g=new Array(i),v=function(t,e){for(var n=0;n<i;n++)e[n]=t[n]},y=0;y<=a;y++){for(var m=0;m<i;m++)p[m]=m;var b=am(p,l.slice(),i,s),w=b.slice();v(p,g);var x=am(p,b,s,2),_=am(g,w,s,2);x.length<=_.length&&x.length<h?(h=x.length,d=x,v(p,f)):_.length<=x.length&&_.length<h&&(h=_.length,d=_,v(g,f))}for(var E=this.spawn(d.map((function(t){return r[t[0]]}))),k=this.spawn(),S=this.spawn(),C=f[0],T=0;T<f.length;T++){var N=f[T],O=n[T];N===C?k.merge(O):S.merge(O)}var P=function(e){var n=t.spawn();return e.forEach((function(e){n.merge(e),e.connectedEdges().forEach((function(e){t.contains(e)&&!E.contains(e)&&n.merge(e)}))})),n},M=[P(k),P(S)];return{cut:E,components:M,partition1:k,partition2:S}}My("At least 2 nodes are required for Karger-Stein algorithm")}},lm=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},um=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},cm=function(t){return{x:t[0],y:t[1]}},hm=function(t,e){return Math.atan2(e,t)-Math.PI/2},dm=Math.log2||function(t){return Math.log(t)/Math.log(2)},fm=function(t){return t>0?1:t<0?-1:0},pm=function(t,e){return Math.sqrt(gm(t,e))},gm=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},vm=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},ym=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},mm=function(t,e,n,r){return{x:ym(t.x,e.x,n.x,r),y:ym(t.y,e.y,n.y,r)}},bm=function(t,e,n){return Math.max(t,Math.min(n,e))},wm=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},xm=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},_m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Em=function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)e=n=r=i=o[0];else if(2===o.length)e=r=o[0],i=n=o[1];else if(4===o.length){var a=Pv(o,4);e=a[0],n=a[1],r=a[2],i=a[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},km=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},Sm=function(t,e){t.x1+=e.x,t.x2+=e.x,t.y1+=e.y,t.y2+=e.y},Cm=function(t,e){return!(t.x1>e.x2)&&(!(e.x1>t.x2)&&(!(t.x2<e.x1)&&(!(e.x2<t.x1)&&(!(t.y2<e.y1)&&(!(e.y2<t.y1)&&(!(t.y1>e.y2)&&!(e.y1>t.y2)))))))},Tm=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},Nm=function(t,e){return Tm(t,e.x1,e.y1)&&Tm(t,e.x2,e.y2)},Om=function(t,e,n,r,i,o,a){var s,l=Gm(i,o),u=i/2,c=o/2,h=r-c-a;if((s=Vm(t,e,n,r,n-u+l-a,h,n+u-l+a,h,!1)).length>0)return s;var d=n+u+a;if((s=Vm(t,e,n,r,d,r-c+l-a,d,r+c-l+a,!1)).length>0)return s;var f=r+c+a;if((s=Vm(t,e,n,r,n-u+l-a,f,n+u-l+a,f,!1)).length>0)return s;var p,g=n-u-a;if((s=Vm(t,e,n,r,g,r-c+l-a,g,r+c-l+a,!1)).length>0)return s;var v=n-u+l,y=r-c+l;if((p=Fm(t,e,n,r,v,y,l+a)).length>0&&p[0]<=v&&p[1]<=y)return[p[0],p[1]];var m=n+u-l,b=r-c+l;if((p=Fm(t,e,n,r,m,b,l+a)).length>0&&p[0]>=m&&p[1]<=b)return[p[0],p[1]];var w=n+u-l,x=r+c-l;if((p=Fm(t,e,n,r,w,x,l+a)).length>0&&p[0]>=w&&p[1]>=x)return[p[0],p[1]];var _=n-u+l,E=r+c-l;return(p=Fm(t,e,n,r,_,E,l+a)).length>0&&p[0]<=_&&p[1]>=E?[p[0],p[1]]:[]},Pm=function(t,e,n,r,i,o,a){var s=a,l=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return l-s<=t&&t<=u+s&&c-s<=e&&e<=h+s},Mm=function(t,e,n,r,i,o,a,s,l){var u=Math.min(n,a,i)-l,c=Math.max(n,a,i)+l,h=Math.min(r,s,o)-l,d=Math.max(r,s,o)+l;return!(t<u||t>c||e<h||e>d)},Dm=function(t,e,n,r,i,o,a,s){var l=[];!function(t,e,n,r,i){var o,a,s,l,u,c,h,d;0===t&&(t=1e-5),s=-27*(r/=t)+(e/=t)*(9*(n/=t)-e*e*2),o=(a=(3*n-e*e)/9)*a*a+(s/=54)*s,i[1]=0,h=e/3,o>0?(u=(u=s+Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,i[5]=-h):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,i[4]=i[2]=-(d+h)):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),i[4]=-h+d*Math.cos((l+4*Math.PI)/3)))}(1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var h,d,f,p=-1,g=0;g<u.length;g++)h=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*i+u[g]*u[g]*a,d=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*o+u[g]*u[g]*s,f=Math.pow(h-t,2)+Math.pow(d-e,2),p>=0?f<p&&(p=f):p=f;return p},Am=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/l;return c<0?u:h>l?(t-i)*(t-i)+(e-o)*(e-o):u-h},Lm=function(t,e,n){for(var r,i,o,a,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},Im=function(t,e,n,r,i,o,a,s,l){var u,c=new Array(n.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var h,d=Math.cos(-u),f=Math.sin(-u),p=0;p<c.length/2;p++)c[2*p]=o/2*(n[2*p]*d-n[2*p+1]*f),c[2*p+1]=a/2*(n[2*p+1]*d+n[2*p]*f),c[2*p]+=r,c[2*p+1]+=i;if(l>0){var g=Bm(c,-l);h=Rm(g)}else h=c;return Lm(t,e,h)},Rm=function(t){for(var e,n,r,i,o,a,s,l,u=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],n=t[4*c+1],r=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(o=t[4*(c+1)],a=t[4*(c+1)+1],s=t[4*(c+1)+2],l=t[4*(c+1)+3]):(o=t[0],a=t[1],s=t[2],l=t[3]);var h=Vm(e,n,r,i,o,a,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u},Bm=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var l=o-r,u=-(i-n),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;a[4*s]=n+h*e,a[4*s+1]=r+d*e,a[4*s+2]=i+h*e,a[4*s+3]=o+d*e}return a},jm=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},Fm=function(t,e,n,r,i,o,a){var s=[n-t,r-e],l=[t-i,e-o],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),p=Math.min(d,f),g=Math.max(d,f),v=[];if(p>=0&&p<=1&&v.push(p),g>=0&&g<=1&&v.push(g),0===v.length)return[];var y=v[0]*s[0]+t,m=v[0]*s[1]+e;return v.length>1?v[0]==v[1]?[y,m]:[y,m,v[1]*s[0]+t,v[1]*s[1]+e]:[y,m]},zm=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Vm=function(t,e,n,r,i,o,a,s,l){var u=t-i,c=n-t,h=a-i,d=e-o,f=r-e,p=s-o,g=h*d-p*u,v=c*d-f*u,y=p*c-h*f;if(0!==y){var m=g/y,b=v/y;return-.001<=m&&m<=1.001&&-.001<=b&&b<=1.001||l?[t+m*c,e+m*f]:[]}return 0===g||0===v?zm(t,n,a)===a?[a,s]:zm(t,n,i)===i?[i,o]:zm(i,a,n)===n?[n,r]:[]:[]},qm=function(t,e,n,r,i,o,a,s){var l,u,c,h,d,f,p=[],g=new Array(n.length),v=!0;if(null==o&&(v=!1),v){for(var y=0;y<g.length/2;y++)g[2*y]=n[2*y]*o+r,g[2*y+1]=n[2*y+1]*a+i;if(s>0){var m=Bm(g,-s);u=Rm(m)}else u=g}else u=n;for(var b=0;b<u.length/2;b++)c=u[2*b],h=u[2*b+1],b<u.length/2-1?(d=u[2*(b+1)],f=u[2*(b+1)+1]):(d=u[0],f=u[1]),0!==(l=Vm(t,e,r,i,c,h,d,f)).length&&p.push(l[0],l[1]);return p},Um=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},Hm=function(t,e){var n=Ym(t,e);return n=Wm(n)},Wm=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var u=2/(a-i),c=2/(s-o),h=0;h<r;h++)e=t[2*h]=t[2*h]*u,n=t[2*h+1]=t[2*h+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var d=0;d<r;d++)n=t[2*d+1]=t[2*d+1]+(-1-o);return t},Ym=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},Gm=function(t,e){return Math.min(t/4,e/4,8)},Xm=function(t,e){return Math.min(t/10,e/10,8)},Km=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},$m=jy({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),Zm={pageRank:function(t){for(var e=$m(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,h=c*c,d=u.length,f=new Array(h),p=new Array(c),g=(1-n)/c,v=0;v<c;v++){for(var y=0;y<c;y++){f[v*c+y]=0}p[v]=0}for(var m=0;m<d;m++){var b=u[m],w=b.data("source"),x=b.data("target");if(w!==x){var _=l.indexOfId(w),E=l.indexOfId(x),k=o(b);f[E*c+_]+=k,p[_]+=k}}for(var S=1/c+g,C=0;C<c;C++)if(0===p[C])for(var T=0;T<c;T++){f[T*c+C]=S}else for(var N=0;N<c;N++){var O=N*c+C;f[O]=f[O]/p[C]+g}for(var P,M=new Array(c),D=new Array(c),A=0;A<c;A++)M[A]=1;for(var L=0;L<i;L++){for(var I=0;I<c;I++)D[I]=0;for(var R=0;R<c;R++)for(var B=0;B<c;B++){var j=R*c+B;D[R]+=f[j]*M[B]}vm(D),P=M,M=D,D=P;for(var F=0,z=0;z<c;z++){var V=P[z]-M[z];F+=V*V}if(F<r)break}return{rank:function(t){return t=a.collection(t)[0],M[l.indexOf(t)]}}}},Jm=jy({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Qm={degreeCentralityNormalized:function(t){t=Jm(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},a=0,s=0,l=0;l<r;l++){var u=n[l],c=u.id();t.root=u;var h=this.degreeCentrality(t);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(t){return 0==a?0:(jv(t)&&(t=e.filter(t)),i[t.id()]/a)},outdegree:function(t){return 0===s?0:(jv(t)&&(t=e.filter(t)),o[t.id()]/s)}}}for(var d={},f=0,p=0;p<r;p++){var g=n[p];t.root=g;var v=this.degreeCentrality(t);f<v.degree&&(f=v.degree),d[g.id()]=v.degree}return{degree:function(t){return 0===f?0:(jv(t)&&(t=e.filter(t)),d[t.id()]/f)}}},degreeCentrality:function(t){t=Jm(t);var e=this.cy(),n=this,r=t,i=r.root,o=r.weight,a=r.directed,s=r.alpha;if(i=e.collection(i)[0],a){for(var l=i.connectedEdges(),u=l.filter((function(t){return t.target().same(i)&&n.has(t)})),c=l.filter((function(t){return t.source().same(i)&&n.has(t)})),h=u.length,d=c.length,f=0,p=0,g=0;g<u.length;g++)f+=o(u[g]);for(var v=0;v<c.length;v++)p+=o(c[v]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(n),m=y.length,b=0,w=0;w<y.length;w++)b+=o(y[w]);return{degree:Math.pow(m,1-s)*Math.pow(b,s)}}};Qm.dc=Qm.degreeCentrality,Qm.dcn=Qm.degreeCentralityNormalised=Qm.degreeCentralityNormalized;var tb=jy({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),eb={closenessCentralityNormalized:function(t){for(var e=tb(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),a={},s=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],f=0;f<l.length;f++)if(c!==f){var p=u.distance(d,l[f]);h+=n?1/p:p}n||(h=1/h),s<h&&(s=h),a[d.id()]=h}return{closeness:function(t){return 0==s?0:(t=jv(t)?o.filter(t)[0].id():t.id(),a[t]/s)}}},closenessCentrality:function(t){var e=tb(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var h=a.distanceTo(c);s+=o?1/h:h}}return o?s:1/s}};eb.cc=eb.closenessCentrality,eb.ccn=eb.closenessCentralityNormalised=eb.closenessCentralityNormalized;var nb=jy({weight:null,directed:!1}),rb={betweennessCentrality:function(t){for(var e=nb(t),n=e.directed,r=e.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},l={},u=0,c=function(t,e){l[t]=e,e>u&&(u=e)},h=function(t){return l[t]},d=0;d<a.length;d++){var f=a[d],p=f.id();s[p]=n?f.outgoers().nodes():f.openNeighborhood().nodes(),c(p,0)}for(var g=function(t){for(var e=a[t].id(),n=[],l={},u={},d={},f=new kv((function(t,e){return d[t]-d[e]})),p=0;p<a.length;p++){var g=a[p].id();l[g]=[],u[g]=0,d[g]=1/0}for(u[e]=1,d[e]=0,f.push(e);!f.empty();){var v=f.pop();if(n.push(v),i)for(var y=0;y<s[v].length;y++){var m=s[v][y],b=o.getElementById(v),w=void 0;w=b.edgesTo(m).length>0?b.edgesTo(m)[0]:m.edgesTo(b)[0];var x=r(w);m=m.id(),d[m]>d[v]+x&&(d[m]=d[v]+x,f.nodes.indexOf(m)<0?f.push(m):f.updateItem(m),u[m]=0,l[m]=[]),d[m]==d[v]+x&&(u[m]=u[m]+u[v],l[m].push(v))}else for(var _=0;_<s[v].length;_++){var E=s[v][_].id();d[E]==1/0&&(f.push(E),d[E]=d[v]+1),d[E]==d[v]+1&&(u[E]=u[E]+u[v],l[E].push(v))}}for(var k={},S=0;S<a.length;S++)k[a[S].id()]=0;for(;n.length>0;){for(var C=n.pop(),T=0;T<l[C].length;T++){var N=l[C][T];k[N]=k[N]+u[N]/u[C]*(1+k[C])}C!=a[t].id()&&c(C,h(C)+k[C])}},v=0;v<a.length;v++)g(v);var y={betweenness:function(t){var e=o.collection(t).id();return h(e)},betweennessNormalized:function(t){if(0==u)return 0;var e=o.collection(t).id();return h(e)/u}};return y.betweennessNormalised=y.betweennessNormalized,y}};rb.bc=rb.betweennessCentrality;var ib=jy({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),ob=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},ab=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},sb=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+a]*e[a*n+s]}return r},lb=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=sb(t,r,e);return t},ub=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return ab(r,e),r},cb=function(t,e,n,r){for(var i=0;i<n;i++){if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!==Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1}return!0},hb=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},db=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return ib(t)}(t),o={},a=0;a<e.length;a++)o[e[a].id()]=a;for(var s,l=e.length,u=l*l,c=new Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<n.length;d++){var f=n[d],p=o[f.source().id()],g=o[f.target().id()],v=ob(f,i.attributes);c[p*l+g]+=v,c[g*l+p]+=v}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(c,l,i.multFactor),ab(c,l);for(var y=!0,m=0;y&&m<i.maxIterations;)y=!1,s=lb(c,l,i.expandFactor),c=ub(s,l,i.inflateFactor),cb(c,s,u,4)||(y=!0),m++;var b=function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var a=[],s=0;s<e;s++)Math.round(1e3*t[o*e+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i}(c,l,e,r);return b=function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&hb(t[e],t[n])&&t.splice(n,1);return t}(b)},fb={markovClustering:db,mcl:db},pb=function(t){return t},gb=function(t,e){return Math.abs(e-t)},vb=function(t,e,n){return t+gb(e,n)},yb=function(t,e,n){return t+Math.pow(n-e,2)},mb=function(t){return Math.sqrt(t)},bb=function(t,e,n){return Math.max(t,gb(e,n))},wb=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pb,a=r,s=0;s<t;s++)a=i(a,e(s),n(s));return o(a)},xb={euclidean:function(t,e,n){return t>=2?wb(t,e,n,0,yb,mb):wb(t,e,n,0,vb)},squaredEuclidean:function(t,e,n){return wb(t,e,n,0,yb)},manhattan:function(t,e,n){return wb(t,e,n,0,vb)},max:function(t,e,n){return wb(t,e,n,-1/0,bb)}};function _b(t,e,n,r,i,o){var a;return a=Fv(t)?t:xb[t]||xb.euclidean,0===e&&Fv(t)?a(i,o):a(e,n,r,i,o)}xb["squared-euclidean"]=xb.squaredEuclidean,xb.squaredeuclidean=xb.squaredEuclidean;var Eb=jy({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),kb=function(t){return Eb(t)},Sb=function(t,e,n,r,i){var o="kMedoids"!==i?function(t){return n[t]}:function(t){return r[t](n)},a=n,s=e;return _b(t,r.length,o,(function(t){return r[t](e)}),a,s)},Cb=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(e),s=null,l=0;l<r;l++)i[l]=t.min(n[l]).value,o[l]=t.max(n[l]).value;for(var u=0;u<e;u++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[u]=s}return a},Tb=function(t,e,n,r,i){for(var o=1/0,a=0,s=0;s<e.length;s++){var l=Sb(n,t,e[s],r,i);l<o&&(o=l,a=s)}return a},Nb=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},Ob=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++){if(Math.abs(t[r][i]-e[r][i])>n)return!1}return!0},Pb=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},Mb=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];Pb(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},Db=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=Sb("manhattan",e[i],t,n,"kMedoids");return r},Ab=function(t,e,n,r,i){for(var o,a,s=0;s<e.length;s++)for(var l=0;l<t.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var u=0;u<t.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<e.length;h++)o+=r[h][u]*i.attributes[c](e[h]),a+=r[h][u];t[u][c]=o/a}},Lb=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var a,s,l,u=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){a=0;for(var d=0;d<n.length;d++)s=Sb(i.distance,r[h],n[c],i.attributes,"cmeans"),l=Sb(i.distance,r[h],n[d],i.attributes,"cmeans"),a+=Math.pow(s/l,u);t[h][c]=1/a}},Ib=function(t){var e,n,r,i,o=this.cy(),a=this.nodes(),s=kb(t);r=new Array(a.length);for(var l=0;l<a.length;l++)r[l]=new Array(s.k);n=new Array(a.length);for(var u=0;u<a.length;u++)n[u]=new Array(s.k);for(var c=0;c<a.length;c++){for(var h=0,d=0;d<s.k;d++)n[c][d]=Math.random(),h+=n[c][d];for(var f=0;f<s.k;f++)n[c][f]=n[c][f]/h}e=new Array(s.k);for(var p=0;p<s.k;p++)e[p]=new Array(s.attributes.length);i=new Array(a.length);for(var g=0;g<a.length;g++)i[g]=new Array(s.k);for(var v=!0,y=0;v&&y<s.maxIterations;)v=!1,Ab(e,a,n,i,s),Lb(n,r,e,a,s),Ob(n,r,s.sensitivityThreshold)||(v=!0),y++;return{clusters:function(t,e,n,r){for(var i,o,a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var l=0;l<e.length;l++){i=-1/0,o=-1;for(var u=0;u<e[0].length;u++)e[l][u]>i&&(i=e[l][u],o=u);a[o].push(t[l])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a}(a,n,s,o),degreeOfMembership:n}},Rb={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,o=kb(t),a=new Array(o.k),s={};e=o.testMode?"number"==typeof o.testCentroids?Cb(r,o.k,o.attributes):"object"===Sv(o.testCentroids)?o.testCentroids:Cb(r,o.k,o.attributes):Cb(r,o.k,o.attributes);for(var l,u,c,h=!0,d=0;h&&d<o.maxIterations;){for(var f=0;f<r.length;f++)s[(i=r[f]).id()]=Tb(i,e,o.distance,o.attributes,"kMeans");h=!1;for(var p=0;p<o.k;p++){var g=Nb(p,r,s);if(0!==g.length){for(var v=o.attributes.length,y=e[p],m=new Array(v),b=new Array(v),w=0;w<v;w++){b[w]=0;for(var x=0;x<g.length;x++)i=g[x],b[w]+=o.attributes[w](i);m[w]=b[w]/g.length,l=m[w],u=y[w],c=o.sensitivityThreshold,Math.abs(u-l)<=c||(h=!0)}e[p]=m,a[p]=n.collection(g)}}d++}return a},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),o=null,a=kb(t),s=new Array(a.k),l={},u=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(e="object"===Sv(a.testCentroids)?a.testCentroids:Mb(i,a.k)):e=Mb(i,a.k);for(var c=!0,h=0;c&&h<a.maxIterations;){for(var d=0;d<i.length;d++)l[(o=i[d]).id()]=Tb(o,e,a.distance,a.attributes,"kMedoids");c=!1;for(var f=0;f<e.length;f++){var p=Nb(f,i,l);if(0!==p.length){u[f]=Db(e[f],p,a.attributes);for(var g=0;g<p.length;g++)(n=Db(p[g],p,a.attributes))<u[f]&&(u[f]=n,e[f]=p[g],c=!0);s[f]=r.collection(p)}}h++}return s},fuzzyCMeans:Ib,fcm:Ib},Bb=jy({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),jb={single:"min",complete:"max"},Fb=function(t,e,n,r,i){for(var o,a=0,s=1/0,l=i.attributes,u=function(t,e){return _b(i.distance,l.length,(function(e){return l[e](t)}),(function(t){return l[t](e)}),t,e)},c=0;c<t.length;c++){var h=t[c].key,d=n[h][r[h]];d<s&&(a=h,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var f,p=e[a],g=e[r[a]];f="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},t[p.index]=f,t.splice(g.index,1),e[p.key]=f;for(var v=0;v<t.length;v++){var y=t[v];p.key===y.key?o=1/0:"min"===i.linkage?(o=n[p.key][y.key],n[p.key][y.key]>n[g.key][y.key]&&(o=n[g.key][y.key])):"max"===i.linkage?(o=n[p.key][y.key],n[p.key][y.key]<n[g.key][y.key]&&(o=n[g.key][y.key])):o="mean"===i.linkage?(n[p.key][y.key]*p.size+n[g.key][y.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?u(y.value,p.value):u(y.value[0],p.value[0]),n[p.key][y.key]=n[y.key][p.key]=o}for(var m=0;m<t.length;m++){var b=t[m].key;if(r[b]===p.key||r[b]===g.key){for(var w=b,x=0;x<t.length;x++){var _=t[x].key;n[b][_]<n[b][w]&&(w=_)}r[b]=w}t[m].index=m}return p.key=g.key=p.index=g.index=null,!0},zb=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},Vb=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=Bb(t),n=jb[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,o=function(t,e){return _b(r.distance,i.length,(function(e){return i[e](t)}),(function(t){return i[t](e)}),t,e)},a=[],s=[],l=[],u=[],c=0;c<n.length;c++){var h={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=h,u[c]=h,s[c]=[],l[c]=0}for(var d=0;d<a.length;d++)for(var f=0;f<=d;f++){var p=void 0;p="dendrogram"===r.mode?d===f?1/0:o(a[d].value,a[f].value):d===f?1/0:o(a[d].value[0],a[f].value[0]),s[d][f]=p,s[f][d]=p,p<s[d][l[d]]&&(l[d]=f)}for(var g,v=Fb(a,u,s,l,r);v;)v=Fb(a,u,s,l,r);return"dendrogram"===r.mode?(g=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return 0===n?(e.left&&zb(e.left,i),e.right&&zb(e.right,o),a=i.concat(o),[r.collection(a)]):1===n?e.value?[r.collection(e.value)]:(e.left&&zb(e.left,i),e.right&&zb(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))}(a[0],r.dendrogramDepth,e),r.addDendrogram&&function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0}(a[0],e)):(g=new Array(a.length),a.forEach((function(t,n){t.key=t.index=null,g[n]=e.collection(t.value)}))),g},qb={hierarchicalClustering:Vb,hca:Vb},Ub=jy({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Hb=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-_b(t,r.length,(function(t){return i(e,t)}),(function(t){return i(n,t)}),e,n)},Wb=function(t,e){return"median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];r?t=t.slice(e,n):(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e));for(var a=0,s=t.length-1;s>=0;s--){var l=t[s];o?isFinite(l)||(t[s]=-1/0,a++):t.splice(s,1)}i&&t.sort((function(t,e){return t-e}));var u=t.length,c=Math.floor(u/2);return u%2!=0?t[c+1+a]:(t[c-1+a]+t[c+a])/2}(t):"mean"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=0,i=0,o=e;o<n;o++){var a=t[o];isFinite(a)&&(r+=a,i++)}return r/i}(t):"min"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.min(o,r))}return r}(t):"max"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=-1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.max(o,r))}return r}(t):e},Yb=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var l=n[s];e[i*t+l]>a&&(o=l,a=e[i*t+l])}o>0&&r.push(o)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},Gb=function(t){for(var e,n,r,i,o,a,s=this.cy(),l=this.nodes(),u=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||My("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some((function(t){return t===n}))||qv(n)||My("Preference must be one of [".concat(r.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(n)),Ub(t)}(t),c={},h=0;h<l.length;h++)c[l[h].id()]=h;n=(e=l.length)*e,r=new Array(n);for(var d=0;d<n;d++)r[d]=-1/0;for(var f=0;f<e;f++)for(var p=0;p<e;p++)f!==p&&(r[f*e+p]=Hb(u.distance,l[f],l[p],u.attributes));i=Wb(r,u.preference);for(var g=0;g<e;g++)r[g*e+g]=i;o=new Array(n);for(var v=0;v<n;v++)o[v]=0;a=new Array(n);for(var y=0;y<n;y++)a[y]=0;for(var m=new Array(e),b=new Array(e),w=new Array(e),x=0;x<e;x++)m[x]=0,b[x]=0,w[x]=0;for(var _,E=new Array(e*u.minIterations),k=0;k<E.length;k++)E[k]=0;for(_=0;_<u.maxIterations;_++){for(var S=0;S<e;S++){for(var C=-1/0,T=-1/0,N=-1,O=0,P=0;P<e;P++)m[P]=o[S*e+P],(O=a[S*e+P]+r[S*e+P])>=C?(T=C,C=O,N=P):O>T&&(T=O);for(var M=0;M<e;M++)o[S*e+M]=(1-u.damping)*(r[S*e+M]-C)+u.damping*m[M];o[S*e+N]=(1-u.damping)*(r[S*e+N]-T)+u.damping*m[N]}for(var D=0;D<e;D++){for(var A=0,L=0;L<e;L++)m[L]=a[L*e+D],b[L]=Math.max(0,o[L*e+D]),A+=b[L];A-=b[D],b[D]=o[D*e+D],A+=b[D];for(var I=0;I<e;I++)a[I*e+D]=(1-u.damping)*Math.min(0,A-b[I])+u.damping*m[I];a[D*e+D]=(1-u.damping)*(A-b[D])+u.damping*m[D]}for(var R=0,B=0;B<e;B++){var j=a[B*e+B]+o[B*e+B]>0?1:0;E[_%u.minIterations*e+B]=j,R+=j}if(R>0&&(_>=u.minIterations-1||_==u.maxIterations-1)){for(var F=0,z=0;z<e;z++){w[z]=0;for(var V=0;V<u.minIterations;V++)w[z]+=E[V*e+z];0!==w[z]&&w[z]!==u.minIterations||F++}if(F===e)break}}for(var q=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,o,a),U=function(t,e,n){for(var r=Yb(t,e,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,l=-1/0,u=0;u<o.length;u++){for(var c=0,h=0;h<o.length;h++)c+=e[o[h]*t+o[u]];c>l&&(s=u,l=c)}n[i]=o[s]}return r=Yb(t,e,n)}(e,r,q),H={},W=0;W<q.length;W++)H[q[W]]=[];for(var Y=0;Y<l.length;Y++){var G=U[c[l[Y].id()]];null!=G&&H[G].push(l[Y])}for(var X=new Array(q.length),K=0;K<q.length;K++)X[K]=s.collection(H[q[K]]);return X},Xb={affinityPropagation:Gb,ap:Gb},Kb=jy({root:void 0,directed:!1}),$b=function(){var t=this,e={},n=0,r=0,i=[],o=[],a={},s=function s(l,u,c){l===c&&(r+=1),e[u]={id:n,low:n++,cutVertex:!1};var h,d,f,p,g=t.getElementById(u).connectedEdges().intersection(t);0===g.size()?i.push(t.spawn(t.getElementById(u))):g.forEach((function(n){h=n.source().id(),d=n.target().id(),(f=h===u?d:h)!==c&&(p=n.id(),a[p]||(a[p]=!0,o.push({x:u,y:f,edge:n})),f in e?e[u].low=Math.min(e[u].low,e[f].id):(s(l,f,u),e[u].low=Math.min(e[u].low,e[f].low),e[u].id<=e[f].low&&(e[u].cutVertex=!0,function(n,r){for(var a=o.length-1,s=[],l=t.spawn();o[a].x!=n||o[a].y!=r;)s.push(o.pop().edge),a--;s.push(o.pop().edge),s.forEach((function(n){var r=n.connectedNodes().intersection(t);l.merge(n),r.forEach((function(n){var r=n.id(),i=n.connectedEdges().intersection(t);l.merge(n),e[r].cutVertex?l.merge(i.filter((function(t){return t.isLoop()}))):l.merge(i)}))})),i.push(l)}(u,f))))}))};t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||(r=0,s(n,n),e[n].cutVertex=r>1)}}));var l=Object.keys(e).filter((function(t){return e[t].cutVertex})).map((function(e){return t.getElementById(e)}));return{cut:t.spawn(l),components:i}},Zb=function(){var t=this,e={},n=0,r=[],i=[],o=t.spawn(t);return t.forEach((function(a){if(a.isNode()){var s=a.id();s in e||function a(s){if(i.push(s),e[s]={index:n,low:n++,explored:!1},t.getElementById(s).connectedEdges().intersection(t).forEach((function(t){var n=t.target().id();n!==s&&(n in e||a(n),e[n].explored||(e[s].low=Math.min(e[s].low,e[n].low)))})),e[s].index===e[s].low){for(var l=t.spawn();;){var u=i.pop();if(l.merge(t.getElementById(u)),e[u].low=e[s].index,e[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);r.push(h),o=o.difference(h)}}(s)}})),{cut:o,components:r}},Jb={};[Xy,$y,Zy,Qy,em,rm,sm,Zm,Qm,eb,rb,fb,Rb,qb,Xb,{hierholzer:function(t){if(!Vv(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,o=Kb(t),a=o.root,s=o.directed,l=this,u=!1;a&&(i=jv(a)?this.filter(a)[0].id():a[0].id());var c={},h={};s?l.forEach((function(t){var e=t.id();if(t.isNode()){var i=t.indegree(!0),o=t.outdegree(!0),a=i-o,s=o-i;1==a?n?u=!0:n=e:1==s?r?u=!0:r=e:(s>1||a>1)&&(u=!0),c[e]=[],t.outgoers().forEach((function(t){t.isEdge()&&c[e].push(t.id())}))}else h[e]=[void 0,t.target().id()]})):l.forEach((function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(n?r?u=!0:r=e:n=e),c[e]=[],t.connectedEdges().forEach((function(t){return c[e].push(t.id())}))):h[e]=[t.source().id(),t.target().id()]}));var d={found:!1,trail:void 0};if(u)return d;if(r&&n)if(s){if(i&&r!=i)return d;i=r}else{if(i&&r!=i&&n!=i)return d;i||(i=r)}else i||(i=l[0].id());var f=function(t){for(var e,n,r,i=t,o=[t];c[i].length;)e=c[i].shift(),n=h[e][0],i!=(r=h[e][1])?(c[r]=c[r].filter((function(t){return t!=e})),i=r):s||i==n||(c[n]=c[n].filter((function(t){return t!=e})),i=n),o.unshift(e),o.unshift(i);return o},p=[],g=[];for(g=f(i);1!=g.length;)0==c[g[0]].length?(p.unshift(l.getElementById(g.shift())),p.unshift(l.getElementById(g.shift()))):g=f(g.shift()).concat(g);for(var v in p.unshift(l.getElementById(g.shift())),c)if(c[v].length)return d;return d.found=!0,d.trail=this.spawn(p),d}},{hopcroftTarjanBiconnected:$b,htbc:$b,htb:$b,hopcroftTarjanBiconnectedComponents:$b},{tarjanStronglyConnected:Zb,tsc:Zb,tscc:Zb,tarjanStronglyConnectedComponents:Zb}].forEach((function(t){iy(Jb,t)}));
/*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  */
var Qb=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Qb.prototype={fulfill:function(t){return tw(this,1,"fulfillValue",t)},reject:function(t){return tw(this,2,"rejectReason",t)},then:function(t,e){var n=new Qb;return this.onFulfilled.push(rw(t,n,"fulfill")),this.onRejected.push(rw(e,n,"reject")),ew(this),n.proxy}};var tw=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,ew(t)),t},ew=function(t){1===t.state?nw(t,"onFulfilled",t.fulfillValue):2===t.state&&nw(t,"onRejected",t.rejectReason)},nw=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},rw=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}iw(e,i)}}},iw=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===Sv(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(t){return void e.reject(t)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,(function(r){i||(i=!0,r===n?e.reject(new TypeError("circular thenable chain")):t(e,r))}),(function(t){i||(i=!0,e.reject(t))}))}catch(t){i||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};Qb.all=function(t){return new Qb((function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then((function(t){o(e,t)}),(function(t){n(t)})):o(e,r)}(a)}))},Qb.resolve=function(t){return new Qb((function(e,n){e(t)}))},Qb.reject=function(t){return new Qb((function(e,n){n(t)}))};var ow="undefined"!=typeof Promise?Promise:Qb,aw=function(t,e,n){var r=Gv(t),i=!r,o=this._private=iy({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Fv(o.complete)&&o.completes.push(o.complete),i){var a=t.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var s=t.pan();o.startPan={x:s.x,y:s.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},sw=aw.prototype;iy(sw,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),Hv(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new ow((function(t,n){e.push((function(){t()}))}))}}),sw.complete=sw.completed,sw.run=sw.play,sw.running=sw.playing;var lw={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++){t[e]._private.animation.queue=[]}return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,o=!n,a=!o;if(!i.styleEnabled())return this;var s=i.style();if(t=iy({},t,e),0===Object.keys(t).length)return new aw(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(a&&(t.style=s.getPropsList(t.style||t.css),t.css=void 0),a&&null!=t.renderedPosition){var l=t.renderedPosition,u=i.pan(),c=i.zoom();t.position=um(l,c,u)}if(o&&null!=t.panBy){var h=t.panBy,d=i.pan();t.pan={x:d.x+h.x,y:d.y+h.y}}var f=t.center||t.centre;if(o&&null!=f){var p=i.getCenterPan(f.eles,t.zoom);null!=p&&(t.pan=p)}if(o&&null!=t.fit){var g=t.fit,v=i.getFitViewport(g.eles||g.boundingBox,g.padding);null!=v&&(t.pan=v.pan,t.zoom=v.zoom)}if(o&&Vv(t.zoom)){var y=i.getZoomedViewport(t.zoom);null!=y?(y.zoomed&&(t.zoom=y.zoom),y.panned&&(t.pan=y.pan)):t.zoom=null}return new aw(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=iy({},t,e));for(var r=0;r<n.length;r++){var i=n[r],o=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,a=o.animation.current,s=0;s<a.length;s++){var l=a[s]._private;e&&(l.duration=0)}t&&(o.animation.queue=[]),e||(o.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=iy({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,o=i?this:[this],a=i?this[0]:this;if(jv(e)){var s;if(r.allowGetting&&void 0===n)return a&&(r.beforeGet(a),s=a._private[r.field][e]),s;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var l=Ov({},e,n);r.beforeSet(this,l);for(var u=0,c=o.length;u<c;u++){var h=o[u];r.canSet(h)&&(h._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&Vv(e)){var d,f,p=e,g=Object.keys(p);r.beforeSet(this,p);for(var v=0;v<g.length;v++){if(f=p[d=g[v]],!r.immutableKeys[d])for(var y=0;y<o.length;y++){var m=o[y];r.canSet(m)&&(m._private[r.field][d]=f)}}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&Fv(e)){var b=e;this.on(r.bindingEvent,b)}else if(r.allowGetting&&void 0===e){var w;return a&&(r.beforeGet(a),w=a._private[r.field]),w}return this}},removeData:function(t){return t=iy({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(jv(e)){for(var i=e.split(/\s+/),o=i.length,a=0;a<o;a++){var s=i[a];if(!Kv(s))if(!n.immutableKeys[s])for(var l=0,u=r.length;l<u;l++)r[l]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var c=0,h=r.length;c<h;c++)for(var d=r[c]._private[n.field],f=Object.keys(d),p=0;p<f.length;p++){var g=f[p];!n.immutableKeys[g]&&(d[g]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new ow((function(t,e){var i=r.concat([function(e){n.off.apply(n,o),t(e)}]),o=i.concat([]);n.on.apply(n,i)}))}}}].forEach((function(t){iy(lw,t)}));var uw={animate:lw.animate(),animation:lw.animation(),animated:lw.animated(),clearQueue:lw.clearQueue(),delay:lw.delay(),delayAnimation:lw.delayAnimation(),stop:lw.stop()},cw={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach((function(t){return e.push(t)})),e}zv(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new Wy(t),i=0;i<this.length;i++){for(var o=this[i],a=o._private,s=a.classes,l=!1,u=0;u<t.length;u++){var c=t[u];if(!s.has(c)){l=!0;break}}l||(l=s.size!==t.length),l&&(a.classes=r,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){zv(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=a._private.classes,l=!1,u=0;u<t.length;u++){var c=t[u],h=s.has(c),d=!1;e||n&&!h?(s.add(c),d=!0):(!e||n&&h)&&(s.delete(c),d=!0),!l&&d&&(r.push(a),l=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout((function(){n.removeClass(t)}),e),n}};cw.className=cw.classNames=cw.classes;var hw={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:ny,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};hw.variable="(?:[\\w-]|(?:\\\\"+hw.metaChar+"))+",hw.value=hw.string+"|"+hw.number,hw.className=hw.variable,hw.id=hw.variable,function(){var t,e,n;for(t=hw.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],hw.comparatorOp+="|@"+e;for(t=hw.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(hw.comparatorOp+="|\\!"+e)}();var dw=0,fw=1,pw=2,gw=3,vw=4,yw=5,mw=6,bw=7,ww=8,xw=9,_w=10,Ew=11,kw=12,Sw=13,Cw=14,Tw=15,Nw=16,Ow=17,Pw=18,Mw=19,Dw=20,Aw=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,e){return function(t,e){return-1*ry(t,e)}(t.selector,e.selector)})),Lw=function(){for(var t,e={},n=0;n<Aw.length;n++)e[(t=Aw[n]).selector]=t.matches;return e}(),Iw="("+Aw.map((function(t){return t.selector})).join("|")+")",Rw=function(t){return t.replace(new RegExp("\\\\("+hw.metaChar+")","g"),(function(t,e){return e}))},Bw=function(t,e,n){t[t.length-1]=n},jw=[{name:"group",query:!0,regex:"("+hw.group+")",populate:function(t,e,n){var r=Pv(n,1)[0];e.checks.push({type:dw,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:Iw,populate:function(t,e,n){var r=Pv(n,1)[0];e.checks.push({type:bw,value:r})}},{name:"id",query:!0,regex:"\\#("+hw.id+")",populate:function(t,e,n){var r=Pv(n,1)[0];e.checks.push({type:ww,value:Rw(r)})}},{name:"className",query:!0,regex:"\\.("+hw.className+")",populate:function(t,e,n){var r=Pv(n,1)[0];e.checks.push({type:xw,value:Rw(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+hw.variable+")\\s*\\]",populate:function(t,e,n){var r=Pv(n,1)[0];e.checks.push({type:vw,field:Rw(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+hw.variable+")\\s*("+hw.comparatorOp+")\\s*("+hw.value+")\\s*\\]",populate:function(t,e,n){var r=Pv(n,3),i=r[0],o=r[1],a=r[2];a=null!=new RegExp("^"+hw.string+"$").exec(a)?a.substring(1,a.length-1):parseFloat(a),e.checks.push({type:gw,field:Rw(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+hw.boolOp+")\\s*("+hw.variable+")\\s*\\]",populate:function(t,e,n){var r=Pv(n,2),i=r[0],o=r[1];e.checks.push({type:yw,field:Rw(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+hw.meta+")\\s*("+hw.comparatorOp+")\\s*("+hw.number+")\\s*\\]\\]",populate:function(t,e,n){var r=Pv(n,3),i=r[0],o=r[1],a=r[2];e.checks.push({type:mw,field:Rw(i),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:hw.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:hw.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r=e,i={checks:[]};return n.checks.push({type:Ew,source:r,target:i}),Bw(t,0,n),t.edgeCount++,i}var o={checks:[]},a=e,s={checks:[]};return o.checks.push({type:kw,source:a,target:s}),Bw(t,0,o),t.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:hw.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r=e,i={checks:[]};return n.checks.push({type:_w,nodes:[r,i]}),Bw(t,0,n),t.edgeCount++,i}var o={checks:[]},a=e,s={checks:[]};return o.checks.push({type:Cw,node:a,neighbor:s}),Bw(t,0,o),s}},{name:"child",separator:!0,regex:hw.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]},i=t[t.length-1];return n.checks.push({type:Tw,parent:i,child:r}),Bw(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var o={checks:[]},a=t[t.length-1],s={checks:[]},l={checks:[]},u={checks:[]},c={checks:[]};return o.checks.push({type:Mw,left:a,right:s,subject:l}),l.checks=e.checks,e.checks=[{type:Dw}],c.checks.push({type:Dw}),s.checks.push({type:Ow,parent:c,child:u}),Bw(t,0,o),t.currentSubject=l,t.compoundCount++,u}var h={checks:[]},d={checks:[]},f=[{type:Ow,parent:h,child:d}];return h.checks=e.checks,e.checks=f,t.compoundCount++,d}},{name:"descendant",separator:!0,regex:hw.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]},i=t[t.length-1];return n.checks.push({type:Nw,ancestor:i,descendant:r}),Bw(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var o={checks:[]},a=t[t.length-1],s={checks:[]},l={checks:[]},u={checks:[]},c={checks:[]};return o.checks.push({type:Mw,left:a,right:s,subject:l}),l.checks=e.checks,e.checks=[{type:Dw}],c.checks.push({type:Dw}),s.checks.push({type:Pw,ancestor:c,descendant:u}),Bw(t,0,o),t.currentSubject=l,t.compoundCount++,u}var h={checks:[]},d={checks:[]},f=[{type:Pw,ancestor:h,descendant:d}];return h.checks=e.checks,e.checks=f,t.compoundCount++,d}},{name:"subject",modifier:!0,regex:hw.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return Ay("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;r===Ew?n.type=Sw:r===_w&&(n.type=Cw,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];jw.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var Fw=function(t){for(var e,n,r,i=0;i<jw.length;i++){var o=jw[i],a=o.name,s=t.match(o.regexObj);if(null!=s){n=s,e=o,r=a;var l=s[0];t=t.substring(l.length);break}}return{expr:e,match:n,name:r,remaining:t}},zw={parse:function(t){var e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,e=function(t){var e=t.match(/^\s+/);if(e){var n=e[0];t=t.substring(n.length)}return t}(e);;){var r=Fw(e);if(null==r.expr)return Ay("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),o=r.expr.populate(this,n,i);if(!1===o)return!1;if(null!=o&&(n=o),(e=r.remaining).match(/^\s*$/))break}var a=this[this.length-1];null!=this.currentSubject&&(a.subject=this.currentSubject),a.edgeCount=this.edgeCount,a.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return Ay("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return Ay("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&Ay("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return jv(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(r,o){var a=r.type,s=r.value;switch(a){case dw:var l=t(s);return l.substring(0,l.length-1);case gw:var u=r.field,c=r.operator;return"["+u+n(t(c))+e(s)+"]";case yw:var h=r.operator,d=r.field;return"["+t(h)+d+"]";case vw:return"["+r.field+"]";case mw:var f=r.operator;return"[["+r.field+n(t(f))+e(s)+"]]";case bw:return s;case ww:return"#"+s;case xw:return"."+s;case Ow:case Tw:return i(r.parent,o)+n(">")+i(r.child,o);case Pw:case Nw:return i(r.ancestor,o)+" "+i(r.descendant,o);case Mw:var p=i(r.left,o),g=i(r.subject,o),v=i(r.right,o);return p+(p.length>0?" ":"")+g+v;case Dw:return""}},i=function(t,e){return t.checks.reduce((function(n,i,o){return n+(e===t&&0===o?"$":"")+r(i,e)}),"")},o="",a=0;a<this.length;a++){var s=this[a];o+=i(s,s.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o}},Vw=function(t,e,n){var r,i,o,a=jv(t),s=qv(t),l=jv(n),u=!1,c=!1,h=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),c=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),u=!0),(a||l||u)&&(i=a||s?""+t:"",o=""+n),u&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":h=!0,r=t>n;break;case">=":h=!0,r=t>=n;break;case"<":h=!0,r=t<n;break;case"<=":h=!0,r=t<=n;break;default:r=!1}return!c||null==t&&h||(r=!r),r},qw=function(t,e){return t.data(e)},Uw=[],Hw=function(t,e){return t.checks.every((function(t){return Uw[t.type](t,e)}))};Uw[dw]=function(t,e){var n=t.value;return"*"===n||n===e.group()},Uw[bw]=function(t,e){return function(t,e){return Lw[t](e)}(t.value,e)},Uw[ww]=function(t,e){var n=t.value;return e.id()===n},Uw[xw]=function(t,e){var n=t.value;return e.hasClass(n)},Uw[mw]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Vw(function(t,e){return t[e]()}(e,n),r,i)},Uw[gw]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Vw(qw(e,n),r,i)},Uw[yw]=function(t,e){var n=t.field,r=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(qw(e,n),r)},Uw[vw]=function(t,e){var n=t.field;t.operator;return void 0!==qw(e,n)},Uw[_w]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return Hw(n,i)&&Hw(r,o)||Hw(r,i)&&Hw(n,o)},Uw[Cw]=function(t,e){return Hw(t.node,e)&&e.neighborhood().some((function(e){return e.isNode()&&Hw(t.neighbor,e)}))},Uw[Ew]=function(t,e){return Hw(t.source,e.source())&&Hw(t.target,e.target())},Uw[kw]=function(t,e){return Hw(t.source,e)&&e.outgoers().some((function(e){return e.isNode()&&Hw(t.target,e)}))},Uw[Sw]=function(t,e){return Hw(t.target,e)&&e.incomers().some((function(e){return e.isNode()&&Hw(t.source,e)}))},Uw[Tw]=function(t,e){return Hw(t.child,e)&&Hw(t.parent,e.parent())},Uw[Ow]=function(t,e){return Hw(t.parent,e)&&e.children().some((function(e){return Hw(t.child,e)}))},Uw[Nw]=function(t,e){return Hw(t.descendant,e)&&e.ancestors().some((function(e){return Hw(t.ancestor,e)}))},Uw[Pw]=function(t,e){return Hw(t.ancestor,e)&&e.descendants().some((function(e){return Hw(t.descendant,e)}))},Uw[Mw]=function(t,e){return Hw(t.subject,e)&&Hw(t.left,e)&&Hw(t.right,e)},Uw[Dw]=function(){return!0},Uw[fw]=function(t,e){return t.value.has(e)},Uw[pw]=function(t,e){return(0,t.value)(e)};var Ww=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||jv(t)&&t.match(/^\s*$/)||(Hv(t)?this.addQuery({checks:[{type:fw,value:t.collection()}]}):Fv(t)?this.addQuery({checks:[{type:pw,value:t}]}):jv(t)?this.parse(t)||(this.invalid=!0):My("A selector must be created from a string; found "))},Yw=Ww.prototype;[zw,{matches:function(t){for(var e=0;e<this.length;e++){var n=this[e];if(Hw(n,t))return!0}return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&e[0].checks[0].type===ww)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++){var r=e[n];if(Hw(r,t))return!0}return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach((function(t){return iy(Yw,t)})),Yw.text=function(){return this.inputText},Yw.size=function(){return this.length},Yw.eq=function(t){return this[t]},Yw.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},Yw.addQuery=function(t){this[this.length++]=t},Yw.selector=Yw.toString;var Gw={allAre:function(t){var e=new Ww(t);return this.every((function(t){return e.matches(t)}))},is:function(t){var e=new Ww(t);return this.some((function(t){return e.matches(t)}))},some:function(t,e){for(var n=0;n<this.length;n++){if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1}return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every((function(e){return t.hasElementWithId(e.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(t){return e.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var e=this;return t.every((function(t){return e.hasElementWithId(t.id())}))}};Gw.allAreNeighbours=Gw.allAreNeighbors,Gw.has=Gw.contains,Gw.equal=Gw.equals=Gw.same;var Xw,Kw,$w=function(t,e){return function(n,r,i,o){var a,s=n;if(null==s?a="":Hv(s)&&1===s.length&&(a=s.id()),1===this.length&&a){var l=this[0]._private,u=l.traversalCache=l.traversalCache||{},c=u[e]=u[e]||[],h=wy(a),d=c[h];return d||(c[h]=t.call(this,n,r,i,o))}return t.call(this,n,r,i,o)}},Zw={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:$w((function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,{unique:!0}).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,{unique:!0}).filter(t)}};function Jw(t,e,n,r){for(var i=[],o=new Wy,a=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var l=t[s];n?i.push(l):a&&r(i,o,l)}for(;i.length>0;){var u=i.shift();e(u),o.add(u.id()),a&&r(i,o,u)}return t}function Qw(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function tx(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function ex(t,e,n){tx(t,e,n),Qw(t,e,n)}Zw.forEachDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Jw(this,t,e,Qw)},Zw.forEachUp=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Jw(this,t,e,tx)},Zw.forEachUpAndDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Jw(this,t,e,ex)},Zw.ancestors=Zw.parents,(Xw=Kw={data:lw.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:lw.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:lw.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:lw.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:lw.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:lw.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=Xw.data,Xw.removeAttr=Xw.removeData;var nx,rx,ix=Kw,ox={};function ax(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var a=i[o];!e&&a.isLoop()||(n+=t(r,a))}return n}}}function sx(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0===a||void 0!==r&&!e(a,r)||(r=a)}return r}}iy(ox,{degree:ax((function(t,e){return e.source().same(e.target())?2:1})),indegree:ax((function(t,e){return e.target().same(t)?1:0})),outdegree:ax((function(t,e){return e.source().same(t)?1:0}))}),iy(ox,{minDegree:sx("degree",(function(t,e){return t<e})),maxDegree:sx("degree",(function(t,e){return t>e})),minIndegree:sx("indegree",(function(t,e){return t<e})),maxIndegree:sx("indegree",(function(t,e){return t>e})),minOutdegree:sx("outdegree",(function(t,e){return t<e})),maxOutdegree:sx("outdegree",(function(t,e){return t>e}))}),iy(ox,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var lx=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,a={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.shiftCachedBoundingBox(a)}}},ux={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){lx(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(nx=rx={position:lw.data(ux),silentPosition:lw.data(iy({},ux,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){lx(t,e,!0)}})),positions:function(t,e){if(Vv(t))e?this.silentPosition(t):this.position(t);else if(Fv(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=n(a,i))&&(e?a.silentPosition(o):a.position(o))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(Vv(t)?(r={x:qv(t.x)?t.x:0,y:qv(t.y)?t.y:0},n=e):jv(t)&&qv(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=a.position(),l={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(l):a.position(l)}i.endBatch()}return this},silentShift:function(t,e){return Vv(t)?this.shift(t,!0):jv(t)&&qv(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=Vv(t)?t:void 0,s=void 0!==a||void 0!==e&&jv(t);if(n&&n.isNode()){if(!s){var l=n.position();return a=lm(l,i,o),void 0===t?a:a[t]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==e?c.position(t,(e-o[t])/i):void 0!==a&&c.position(um(a,i,o))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=Vv(t)?t:void 0,o=void 0!==i||void 0!==e&&jv(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),l=a?n.parent():null,u=l&&l.length>0,c=u;u&&(l=l[0]);var h=c?l.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===t?i:i[t]}for(var d=0;d<this.length;d++){var f=this[d],p=a?f.parent():null,g=p&&p.length>0,v=g;g&&(p=p[0]);var y=v?p.position():{x:0,y:0};void 0!==e?f.position(t,e+y[t]):void 0!==i&&f.position({x:i.x+y.x,y:i.y+y.y})}}else if(!o)return;return this}}).modelPosition=nx.point=nx.position,nx.modelPositions=nx.points=nx.positions,nx.renderedPoint=nx.renderedPosition,nx.relativePoint=nx.relativePosition;var cx,hx,dx=rx;cx=hx={},hx.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},hx.dirtyCompoundBoundsCache=function(){var t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var e=t._private;e.compoundBoundsClean=!1,e.bbCache=null,t.emitAndNotify("bounds")}})),this):this},hx.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=e.position;0!==o.w&&0!==o.h||((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=y(i.width.val-o.w,s,l),d=h.biasDiff,f=h.biasComplementDiff,p=y(i.height.val-o.h,u,c),g=p.biasDiff,v=p.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),a.x=(-d+o.x1+o.x2+f)/2,e.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+v)/2}function y(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var fx=function(t){return t===1/0||t===-1/0?0:t},px=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},gx=function(t,e){return null==e?t:px(t,e.x1,e.y1,e.x2,e.y2)},vx=function(t,e,n){return Vy(t,e,n)},yx=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-s,u.y1=i-s,u.x2=r+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,_m(u,1),px(t,u.x1,u.y1,u.x2,u.y2)}}},mx=function(t,e,n){if(!e.cy().headless()){var r;r=n?n+"-":"";var i=e._private,o=i.rstyle;if(e.pstyle(r+"label").strValue){var a,s,l,u,c=e.pstyle("text-halign"),h=e.pstyle("text-valign"),d=vx(o,"labelWidth",n),f=vx(o,"labelHeight",n),p=vx(o,"labelX",n),g=vx(o,"labelY",n),v=e.pstyle(r+"text-margin-x").pfValue,y=e.pstyle(r+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle(r+"text-rotation"),w=e.pstyle("text-outline-width").pfValue,x=e.pstyle("text-border-width").pfValue/2,_=e.pstyle("text-background-padding").pfValue,E=f,k=d,S=k/2,C=E/2;if(m)a=p-S,s=p+S,l=g-C,u=g+C;else{switch(c.value){case"left":a=p-k,s=p;break;case"center":a=p-S,s=p+S;break;case"right":a=p,s=p+k}switch(h.value){case"top":l=g-E,u=g;break;case"center":l=g-C,u=g+C;break;case"bottom":l=g,u=g+E}}a+=v-Math.max(w,x)-_,s+=v+Math.max(w,x)+_,l+=y-Math.max(w,x)-_,u+=y+Math.max(w,x)+_;var T=n||"main",N=i.labelBounds,O=N[T]=N[T]||{};O.x1=a,O.y1=l,O.x2=s,O.y2=u,O.w=s-a,O.h=u-l,_m(O,1);var P=m&&"autorotate"===b.strValue,M=null!=b.pfValue&&0!==b.pfValue;if(P||M){var D=P?vx(i.rstyle,"labelAngle",n):b.pfValue,A=Math.cos(D),L=Math.sin(D),I=(a+s)/2,R=(l+u)/2;if(!m){switch(c.value){case"left":I=s;break;case"right":I=a}switch(h.value){case"top":R=u;break;case"bottom":R=l}}var B=function(t,e){return{x:(t-=I)*A-(e-=R)*L+I,y:t*L+e*A+R}},j=B(a,l),F=B(a,u),z=B(s,l),V=B(s,u);a=Math.min(j.x,F.x,z.x,V.x),s=Math.max(j.x,F.x,z.x,V.x),l=Math.min(j.y,F.y,z.y,V.y),u=Math.max(j.y,F.y,z.y,V.y)}var q=T+"Rot",U=N[q]=N[q]||{};U.x1=a,U.y1=l,U.x2=s,U.y2=u,U.w=s-a,U.h=u-l,px(t,a,l,s,u),px(i.labelBounds.all,a,l,s,u)}return t}},bx=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),r+=n(t.includeTargetLabels),r+=n(t.includeOverlays)},wx=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return function(t,e){var n={value:0,done:!1},r=0,i=t.length;return gy({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},e)}([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},xx=function(t,e){var n,r=t._private,i=t.isEdge(),o=(null==e?Ex:bx(e))===Ex,a=wx(t),s=r.bbCachePosKey===a,l=function(t){return null==t._private.bbCache},u=!(e.useCache&&s)||l(t)||i&&l(t.source())||l(t.target());if(u?(s||t.recalculateRenderedStyle(),n=function(t,e){var n,r,i,o,a,s,l,u=t._private.cy,c=u.styleEnabled(),h=u.headless(),d=wm(),f=t._private,p=t.isNode(),g=t.isEdge(),v=f.rstyle,y=p&&c?t.pstyle("bounds-expansion").pfValue:[0],m=function(t){return"none"!==t.pstyle("display").value},b=!c||m(t)&&(!g||m(t.source())&&m(t.target()));if(b){var w=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(w=t.pstyle("overlay-padding").value);var x=0;if(c&&(x=t.pstyle("width").pfValue/2),p&&e.includeNodes){var _=t.position();a=_.x,s=_.y;var E=t.outerWidth()/2,k=t.outerHeight()/2;px(d,n=a-E,i=s-k,r=a+E,o=s+k)}else if(g&&e.includeEdges)if(c&&!h){var S=t.pstyle("curve-style").strValue;if(n=Math.min(v.srcX,v.midX,v.tgtX),r=Math.max(v.srcX,v.midX,v.tgtX),i=Math.min(v.srcY,v.midY,v.tgtY),o=Math.max(v.srcY,v.midY,v.tgtY),px(d,n-=x,i-=x,r+=x,o+=x),"haystack"===S){var C=v.haystackPts;if(C&&2===C.length){if(n=C[0].x,i=C[0].y,n>(r=C[1].x)){var T=n;n=r,r=T}if(i>(o=C[1].y)){var N=i;i=o,o=N}px(d,n-x,i-x,r+x,o+x)}}else if("bezier"===S||"unbundled-bezier"===S||"segments"===S||"taxi"===S){var O;switch(S){case"bezier":case"unbundled-bezier":O=v.bezierPts;break;case"segments":case"taxi":O=v.linePts}if(null!=O)for(var P=0;P<O.length;P++){var M=O[P];n=M.x-x,r=M.x+x,i=M.y-x,o=M.y+x,px(d,n,i,r,o)}}}else{var D=t.source().position(),A=t.target().position();if((n=D.x)>(r=A.x)){var L=n;n=r,r=L}if((i=D.y)>(o=A.y)){var I=i;i=o,o=I}px(d,n-=x,i-=x,r+=x,o+=x)}if(c&&e.includeEdges&&g&&(yx(d,t,"mid-source"),yx(d,t,"mid-target"),yx(d,t,"source"),yx(d,t,"target")),c)if("yes"===t.pstyle("ghost").value){var R=t.pstyle("ghost-offset-x").pfValue,B=t.pstyle("ghost-offset-y").pfValue;px(d,d.x1+R,d.y1+B,d.x2+R,d.y2+B)}var j=f.bodyBounds=f.bodyBounds||{};km(j,d),Em(j,y),_m(j,1),c&&(n=d.x1,r=d.x2,i=d.y1,o=d.y2,px(d,n-w,i-w,r+w,o+w));var F=f.overlayBounds=f.overlayBounds||{};km(F,d),Em(F,y),_m(F,1);var z=f.labelBounds=f.labelBounds||{};null!=z.all?((l=z.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):z.all=wm(),c&&e.includeLabels&&(e.includeMainLabels&&mx(d,t,null),g&&(e.includeSourceLabels&&mx(d,t,"source"),e.includeTargetLabels&&mx(d,t,"target")))}return d.x1=fx(d.x1),d.y1=fx(d.y1),d.x2=fx(d.x2),d.y2=fx(d.y2),d.w=fx(d.x2-d.x1),d.h=fx(d.y2-d.y1),d.w>0&&d.h>0&&b&&(Em(d,y),_m(d,1)),d}(t,_x),r.bbCache=n,r.bbCacheShift.x=r.bbCacheShift.y=0,r.bbCachePosKey=a):n=r.bbCache,!u&&(0!==r.bbCacheShift.x||0!==r.bbCacheShift.y)){var c=Sm,h=r.bbCacheShift,d=function(t,e){null!=t&&c(t,e)};c(n,h);var f=r.bodyBounds,p=r.overlayBounds,g=r.labelBounds,v=r.arrowBounds;d(f,h),d(p,h),null!=v&&(d(v.source,h),d(v.target,h),d(v["mid-source"],h),d(v["mid-target"],h)),null!=g&&(d(g.main,h),d(g.all,h),d(g.source,h),d(g.target,h))}if(r.bbCacheShift.x=r.bbCacheShift.y=0,!o){var y=t.isNode();n=wm(),(e.includeNodes&&y||e.includeEdges&&!y)&&(e.includeOverlays?gx(n,r.overlayBounds):gx(n,r.bodyBounds)),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?gx(n,r.labelBounds.all):(e.includeMainLabels&&gx(n,r.labelBounds.mainRot),e.includeSourceLabels&&gx(n,r.labelBounds.sourceRot),e.includeTargetLabels&&gx(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},_x={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},Ex=bx(_x),kx=jy(_x);hx.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=wm();var n=kx(t=t||_x);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],o=i._private,a=wx(i),s=o.bbCachePosKey===a,l=n.useCache&&s;i.recalculateRenderedStyle(l)}this.updateCompoundBounds();for(var u=0;u<this.length;u++){var c=this[u];gx(e,xx(c,n))}}else t=void 0===t?_x:kx(t),e=xx(this[0],t);return e.x1=fx(e.x1),e.y1=fx(e.y1),e.x2=fx(e.x2),e.y2=fx(e.y2),e.w=fx(e.x2-e.x1),e.h=fx(e.y2-e.y1),e},hx.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCacheShift.x=e.bbCacheShift.y=0,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},hx.shiftCachedBoundingBox=function(t){for(var e=0;e<this.length;e++){var n=this[e]._private;null!=n.bbCache&&(n.bbCacheShift.x+=t.x,n.bbCacheShift.y+=t.y)}return this.emitAndNotify("bounds"),this},hx.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes();if(r&&(e=e.filter((function(t){return!t.isParent()}))),Vv(t)){var i=t;t=function(){return i}}n.startBatch(),e.forEach((function(e,n){return e._private.bbAtOldPos=t(e,n)})).silentPositions(t),r&&this.updateCompoundBounds(!0);var o=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions((function(t){return t._private.bbAtOldPos})),n.endBatch(),o},cx.boundingbox=cx.bb=cx.boundingBox,cx.renderedBoundingbox=cx.renderedBoundingBox;var Sx,Cx,Tx=hx;Sx=Cx={};var Nx=function(t){t.uppercaseName=ey(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=ey(t.outerName),Sx[t.name]=function(){var e=this[0],n=e._private,r=n.cy._private.styleEnabled;if(e){if(!r)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);switch(i.strValue){case"label":return e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return i.pfValue}}},Sx["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private.cy._private.styleEnabled;if(e)return n?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},Sx["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},Sx["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};Nx({name:"width"}),Nx({name:"height"}),Cx.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},Cx.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},Cx.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Ox=Cx,Px={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},Mx=Object.keys(Px).reduce((function(t,e){var n=Px[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},n.mult?t[r]=function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map((function(t){return lm(t,i,r)}))}}(this,n.get)}:t[r]=function(){return function(t,e){if(t.isEdge()){var n=t.cy();return lm(e(t),n.zoom(),n.pan())}}(this,n.get)},t}),{}),Dx=iy({},dx,Tx,Ox,Mx),Ax=function(t,e){this.recycle(t,e)};function Lx(){return!1}function Ix(){return!0}Ax.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Lx,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Ix:Lx):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ix;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ix;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ix,this.stopPropagation()},isDefaultPrevented:Lx,isPropagationStopped:Lx,isImmediatePropagationStopped:Lx};var Rx=/^([^.]+)(\.(?:[^.]+))?$/,Bx={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},jx=Object.keys(Bx),Fx={};function zx(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fx,e=arguments.length>1?arguments[1]:void 0,n=0;n<jx.length;n++){var r=jx[n];this[r]=t[r]||Bx[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Vx=zx.prototype,qx=function(t,e,n,r,i,o,a){Fv(r)&&(i=r,r=null),a&&(o=null==o?a:iy({},o,a));for(var s=zv(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!Kv(u)){var c=u.match(Rx);if(c)if(!1===e(t,u,c[1],c[2]?c[2]:null,r,i,o))break}}},Ux=function(t,e){return t.addEventFields(t.context,e),new Ax(e.type,e)},Hx=function(t,e,n){if("event"!==Bv(n))if(Vv(n))e(t,Ux(t,n));else for(var r=zv(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!Kv(o)){var a=o.match(Rx);if(a){var s=a[1],l=a[2]?a[2]:null;e(t,Ux(t,{type:s,namespace:l,target:t.context}))}}}else e(t,n)};Vx.on=Vx.addListener=function(t,e,n,r,i){return qx(this,(function(t,e,n,r,i,o,a){Fv(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:a})}),t,e,n,r,i),this},Vx.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},Vx.removeListener=Vx.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,a=function(a){var s=o[a];qx(i,(function(e,n,r,i,l,u){if((s.type===r||"*"===t)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||e.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return o.splice(a,1),!1}),t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this},Vx.removeAllListeners=function(){return this.removeListener("*")},Vx.emit=Vx.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,zv(e)||(e=[e]),Hx(this,(function(t,o){null!=n&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],i=r.length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,o)){var a=[o];null!=e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}}(a,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==i})));var s=t.callbackContext(t.context,i,o),l=i.callback.apply(s,a);t.afterEmit(t.context,i,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)}),t),this.emitting--,this};var Wx={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&Wv(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Yx=function(t){return jv(t)?new Ww(t):t},Gx={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new zx(Wx,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=Yx(e),i=0;i<this.length;i++){this[i].emitter().on(t,r,n)}return this},removeListener:function(t,e,n){for(var r=Yx(e),i=0;i<this.length;i++){this[i].emitter().removeListener(t,r,n)}return this},removeAllListeners:function(){for(var t=0;t<this.length;t++){this[t].emitter().removeAllListeners()}return this},one:function(t,e,n){for(var r=Yx(e),i=0;i<this.length;i++){this[i].emitter().one(t,r,n)}return this},once:function(t,e,n){for(var r=Yx(e),i=0;i<this.length;i++){this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})}},emit:function(t,e){for(var n=0;n<this.length;n++){this[n].emitter().emit(t,e)}return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};lw.eventAliasesOn(Gx);var Xx={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.merge(r):e.merge(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(jv(t)||Hv(t))return new Ww(t).filter(this);if(Fv(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.merge(i)}return n}return this.spawn()},not:function(t){if(t){jv(t)&&(t=this.filter(t));for(var e=[],n=t._private.map,r=0;r<this.length;r++){var i=this[r];n.has(i.id())||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(jv(t)){var e=t;return this.filter(e)}for(var n=[],r=t,i=this.length<t.length,o=i?r._private.map:this._private.map,a=i?this:r,s=0;s<a.length;s++){var l=a[s]._private.data.id,u=o.get(l);u&&n.push(u.ele)}return this.spawn(n)},xor:function(t){var e=this._private.cy;jv(t)&&(t=e.$(t));var n=[],r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id;e.hasElementWithId(o)||n.push(i)}};return i(this,r),i(r,this),this.spawn(n)},diff:function(t){var e=this._private.cy;jv(t)&&(t=e.$(t));var n=[],r=[],i=[],o=t,a=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r],a=o._private.data.id;e.hasElementWithId(a)?i.push(o):n.push(o)}};return a(this,o,n),a(o,this,r),{left:this.spawn(n,{unique:!0}),right:this.spawn(r,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(jv(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=[],i=0;i<this.length;i++)r.push(this[i]);for(var o=this._private.map,a=0;a<t.length;a++){var s=!o.has(t[a].id());s&&r.push(t[a])}return this.spawn(r)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&jv(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=a,i.set(s,{ele:a,index:l})}else{var u=i.get(s).index;this[u]=a,i.set(s,{ele:a,index:u})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;this[t]=void 0,n.delete(e);var r=t===this.length-1;if(this.length>1&&!r){var i=this.length-1,o=this[i],a=o._private.data.id;this[i]=void 0,this[t]=o,n.set(a,{ele:o,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&jv(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--){t(this[e])&&this.unmergeAt(e)}return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a>r&&(r=a,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a<r&&(r=a,n=o)}return{value:r,ele:n}}},Kx=Xx;Kx.u=Kx["|"]=Kx["+"]=Kx.union=Kx.or=Kx.add,Kx["\\"]=Kx["!"]=Kx["-"]=Kx.difference=Kx.relativeComplement=Kx.subtract=Kx.not,Kx.n=Kx["&"]=Kx["."]=Kx.and=Kx.intersection=Kx.intersect,Kx["^"]=Kx["(+)"]=Kx["(-)"]=Kx.symmetricDifference=Kx.symdiff=Kx.xor,Kx.fnFilter=Kx.filterFn=Kx.stdFilter=Kx.filter,Kx.complement=Kx.abscomp=Kx.absoluteComplement;var $x=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?Cy:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var a=o(t)-o(e);if(0!==a)return a;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},Zx={forEach:function(t,e){if(Fv(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!Fv(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort($x)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Cy-1}var r=e.source,i=e.target,o=r.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};Zx.each=Zx.forEach;"undefined"!=("undefined"==typeof Symbol?"undefined":Sv(Symbol))&&"undefined"!=Sv(Symbol.iterator)&&(Zx[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return Ov({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,(function(){return this}))});var Jx=jy({nodeDimensionsIncludeLabels:!1}),Qx={layoutDimensions:function(t){var e;if(t=Jx(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes(),i=this.cy(),o=e.eles,a=function(t){return t.id()},s=Zv(n,a);t.emit({type:"layoutstart",layout:t}),t.animations=[];var l=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!l)return null;for(var t=wm(),e=0;e<r.length;e++){var n=r[e],i=s(n,e);xm(t,i.x,i.y)}return t}(),c=Zv((function(t,n){var r=s(t,n);l&&(r=function(t,e,n){var r=e.x1+e.w/2,i=e.y1+e.h/2;return{x:r+(n.x-r)*t,y:i+(n.y-i)*t}}(Math.abs(e.spacingFactor),u,r));return null!=e.transform&&(r=e.transform(t,r)),r}),a);if(e.animate){for(var h=0;h<r.length;h++){var d=r[h],f=c(d,h);if(null==e.animateFilter||e.animateFilter(d,h)){var p=d.animation({position:f,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(p)}else d.position(f)}if(e.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}else if(void 0!==e.zoom&&void 0!==e.pan){var v=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),ow.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else r.positions(c),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(iy({},t,{eles:this}))}};function t_(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])?r:r=o[t]=e(n)}function e_(t,e){return t=wy(t),function(n){return t_(t,e,n)}}function n_(t,e){t=wy(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return t_(t,n,e)}}Qx.createLayout=Qx.makeLayout=Qx.layout;var r_={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach((function(t){n(t),t.connectedEdges().forEach(n)}));return this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=e.hasCompoundNodes(),r=e.style(),i=this;t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=r.apply(i);return t?o.emitAndNotify("style"):o.emit("style"),this},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(Vv(t)){var i=t;r.applyBypass(this,i,!1),this.emitAndNotify("style")}else if(jv(t)){if(void 0===e){var o=this[0];return o?r.getStylePropertyValue(o,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var a=this[0];return a?r.getRawStyle(a):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++){var i=this[r];n.removeAllBypasses(i,!1)}else{t=t.split(/\s+/);for(var o=0;o<this.length;o++){var a=this[o];n.removeBypasses(a,t,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){i*=o[a].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function i_(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++){if(!e(n[r]))return!1}return!0}function o_(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||i_(i,r);var s=a.source,l=a.target;return n(s)&&(!o||i_(s,n))&&(s===l||n(l)&&(!o||i_(l,n)))}}}var a_=e_("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));r_.takesUpSpace=n_("takesUpSpace",o_({ok:a_}));var s_=e_("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&a_(t)})),l_=e_("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&a_(t)}));r_.interactive=n_("interactive",o_({ok:s_,parentOk:l_,edgeOkViaNode:a_})),r_.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var u_=e_("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&a_(t)})),c_=a_;r_.visible=n_("visible",o_({ok:u_,edgeOkViaNode:c_})),r_.hidden=function(){var t=this[0];if(t)return!t.visible()},r_.isBundledBezier=n_("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),r_.bypass=r_.css=r_.style,r_.renderedCss=r_.renderedStyle,r_.removeBypass=r_.removeCss=r_.removeStyle,r_.pstyle=r_.parsedStyle;var h_={};function d_(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&Fv(e[0])){var o=e[0];this.on(t.event,o)}else if(0===e.length||1===e.length&&zv(e[0])){for(var a=1===e.length?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[t.field]=t.value,c&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event),a&&d.emit(a)}return this}}function f_(t){h_[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},h_[t.on]=d_({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),h_[t.off]=d_({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}f_({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),f_({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),f_({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),f_({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),h_.deselect=h_.unselect,h_.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},f_({field:"active",on:"activate",off:"unactivate"}),f_({field:"pannable",on:"panify",off:"unpanify"}),h_.inactive=function(){var t=this[0];if(t)return!t._private.active};var p_={},g_=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(t.noIncomingEdges&&c===i&&u!==i||t.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)}},v_=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target();t.outgoing&&l===i?(n.push(s),n.push(u)):t.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,{unique:!0}).filter(e)}},y_=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();i[u]||(i[u]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(e)}};function m_(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(e)}}function b_(t){return function(e){var n=[],r=this._private.cy,i=t||{};jv(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var a=e[o]._private.edges,s=0;s<a.length;s++){var l=a[s],u=l._private.data,c=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),h=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||h){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}n.push(l)}}return this.spawn(n,{unique:!0})}}function w_(t){return t=iy({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,g=f.source,v=p===u&&g===l,y=l===p&&u===g;(i.codirected&&v||!i.codirected&&(v||y))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(e)}}p_.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},iy(p_,{roots:g_({noIncomingEdges:!0}),leaves:g_({noOutgoingEdges:!0}),outgoers:$w(v_({outgoing:!0}),"outgoers"),successors:y_({outgoing:!0}),incomers:$w(v_({incoming:!0}),"incomers"),predecessors:y_({incoming:!0})}),iy(p_,{neighborhood:$w((function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),p_.neighbourhood=p_.neighborhood,p_.closedNeighbourhood=p_.closedNeighborhood,p_.openNeighbourhood=p_.openNeighborhood,iy(p_,{source:$w((function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e}),"source"),target:$w((function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e}),"target"),sources:m_({attr:"source"}),targets:m_({attr:"target"})}),iy(p_,{edgesWith:$w(b_(),"edgesWith"),edgesTo:$w(b_({thisIsSrc:!0}),"edgesTo")}),iy(p_,{connectedEdges:$w((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++){var a=i[o];e.push(a)}}return this.spawn(e,{unique:!0}).filter(t)}),"connectedEdges"),connectedNodes:$w((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)}),"connectedNodes"),parallelEdges:$w(w_(),"parallelEdges"),codirectedEdges:$w(w_({codirected:!0}),"codirectedEdges")}),iy(p_,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var a=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();o.push(t);var r=i[0];a(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return a(e,t)}}),t.forEach((function(n){n.connectedEdges().forEach((function(n){e.has(n)&&t.has(n.source())&&t.has(n.target())&&t.merge(n)}))}))};do{s()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),p_.componentsOf=p_.components;var x_=function(t,e,n){for(var r=null!=n?n:Iy();t.hasElementWithId(r);)r=Iy();return r},__=function(t,e,n){if(void 0!==t&&Gv(t)){var r=new Uy,i=!1;if(e){if(e.length>0&&Vv(e[0])&&!Wv(e[0])){i=!0;for(var o=[],a=new Wy,s=0,l=e.length;s<l;s++){var u=e[s];null==u.data&&(u.data={});var c=u.data;if(null==c.id)c.id=x_(t,u);else if(t.hasElementWithId(c.id)||a.has(c.id))continue;var h=new Yy(t,u,!1);o.push(h),a.add(c.id)}e=o}}else e=[];this.length=0;for(var d=0,f=e.length;d<f;d++){var p=e[d][0];if(null!=p){var g=p._private.data.id;(null==n||n.unique&&!r.has(g))&&(r.set(g,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:t,map:r},i&&this.restore()}else My("A collection must have a reference to the core")},E_=Yy.prototype=__.prototype;E_.instanceString=function(){return"collection"},E_.spawn=function(t,e,n){return Gv(t)||(n=e,e=t,t=this.cy()),new __(t,e,n)},E_.spawnSelf=function(){return this.spawn(this)},E_.cy=function(){return this._private.cy},E_.renderer=function(){return this._private.cy.renderer()},E_.element=function(){return this[0]},E_.collection=function(){return Yv(this)?this:new __(this._private.cy,[this])},E_.unique=function(){return new __(this._private.cy,this,{unique:!0})},E_.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},E_.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new __(e)},E_.$id=E_.getElementById,E_.poolIndex=function(){var t=this._private.cy._private.elements,e=this[0]._private.data.id;return t._private.map.get(e).index},E_.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},E_.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},E_.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(Vv(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,l=t.data.target;null!=s&&s!=i.source&&(a.source=""+s,o=!0),null!=l&&l!=i.target&&(a.target=""+l,o=!0),o&&(e=e.move(a))}else{var u="parent"in t.data,c=t.data.parent;!u||null==c&&null==i.parent||c==i.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var h=function(n,i,o){var a=t[n];null!=a&&a!==r[n]&&(a?e[i]():e[o]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var d={data:Ly(r.data),position:Ly(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};d.classes="";var f=0;return r.classes.forEach((function(t){return d.classes+=0==f++?t:" "+t})),d}}},E_.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},E_.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Yy(t,r,!1);e.push(i)}return new __(t,e)},E_.copy=E_.clone,E_.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=i.cy(),a=o._private,s=[],l=[],u=0,c=i.length;u<c;u++){var h=i[u];r&&!h.removed()||(h.isNode()?s.push(h):l.push(h))}t=s.concat(l);var d=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var f=t[e],p=f._private,g=p.data;if(f.clearTraversalCache(),r||p.removed)if(void 0===g.id)g.id=x_(o,f);else if(qv(g.id))g.id=""+g.id;else{if(Kv(g.id)||!jv(g.id)){My("Can not create element with invalid string ID `"+g.id+"`"),d();continue}if(o.hasElementWithId(g.id)){My("Can not create second element with ID `"+g.id+"`"),d();continue}}else;var v=g.id;if(f.isNode()){var y=p.position;null==y.x&&(y.x=0),null==y.y&&(y.y=0)}if(f.isEdge()){for(var m=f,b=["source","target"],w=b.length,x=!1,_=0;_<w;_++){var E=b[_],k=g[E];qv(k)&&(k=g[E]=""+g[E]),null==k||""===k?(My("Can not create edge `"+v+"` with unspecified "+E),x=!0):o.hasElementWithId(k)||(My("Can not create edge `"+v+"` with nonexistant "+E+" `"+k+"`"),x=!0)}if(x){d();continue}var S=o.getElementById(g.source),C=o.getElementById(g.target);S.same(C)?S._private.edges.push(m):(S._private.edges.push(m),C._private.edges.push(m)),m._private.source=S,m._private.target=C}p.map=new Uy,p.map.set(v,{ele:f,index:0}),p.removed=!1,r&&o.addToPool(f)}for(var T=0;T<s.length;T++){var N=s[T],O=N._private.data;qv(O.parent)&&(O.parent=""+O.parent);var P=O.parent,M=null!=P;if(M){var D=o.getElementById(P);if(D.empty())O.parent=void 0;else{for(var A=!1,L=D;!L.empty();){if(N.same(L)){A=!0,O.parent=void 0;break}L=L.parent()}A||(D[0]._private.children.push(N),N._private.parent=D[0],a.hasCompoundNodes=!0)}}}if(t.length>0){for(var I=new __(o,t),R=0;R<I.length;R++){var B=I[R];B.isNode()||(B.parallelEdges().clearTraversalCache(),B.source().clearTraversalCache(),B.target().clearTraversalCache())}(a.hasCompoundNodes?o.collection().merge(I).merge(I.connectedNodes()).merge(I.parent()):I).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?I.emitAndNotify("add"):r&&I.emit("add")}return i},E_.removed=function(){var t=this[0];return t&&t._private.removed},E_.inside=function(){var t=this[0];return t&&!t._private.removed},E_.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},o=n._private.cy;function a(t){for(var e=t._private.edges,n=0;n<e.length;n++)l(e[n])}function s(t){for(var e=t._private.children,n=0;n<e.length;n++)l(e[n])}function l(t){var n=i[t.id()];e&&t.removed()||n||(i[t.id()]=!0,t.isNode()?(r.push(t),a(t),s(t)):r.unshift(t))}for(var u=0,c=n.length;u<c;u++){var h=n[u];l(h)}function d(t,e){var n=t._private.edges;Fy(n,e),t.clearTraversalCache()}function f(t){t.clearTraversalCache()}var p=[];function g(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();Fy(n,e),e._private.parent=null,p.ids[r]||(p.ids[r]=!0,p.push(t))}p.ids={},n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var v=0;v<r.length;v++){var y=r[v];if(y.isEdge()){var m=y.source()[0],b=y.target()[0];d(m,y),d(b,y);for(var w=y.parallelEdges(),x=0;x<w.length;x++){var _=w[x];f(_),_.isBundledBezier()&&_.dirtyBoundingBoxCache()}}else{var E=y.parent();0!==E.length&&g(E,y)}e&&(y._private.removed=!0)}var k=o._private.elements;o._private.hasCompoundNodes=!1;for(var S=0;S<k.length;S++){var C=k[S];if(C.isParent()){o._private.hasCompoundNodes=!0;break}}var T=new __(this.cy(),r);T.size()>0&&(t?T.emitAndNotify("remove"):e&&T.emit("remove"));for(var N=0;N<p.length;N++){var O=p[N];e&&O.removed()||O.updateStyle()}return T},E_.move=function(t){var e=this._private.cy,n=this,r=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var i=r(t.source),o=r(t.target),a=null!=i&&e.hasElementWithId(i),s=null!=o&&e.hasElementWithId(o);(a||s)&&(e.batch((function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],r=e._private.data;e.isEdge()&&(a&&(r.source=i),s&&(r.target=o))}n.restore(!1,!1)})),n.emitAndNotify("move"))}else if(void 0!==t.parent){var l=r(t.parent);if(null===l||e.hasElementWithId(l)){var u=null===l?void 0:l;e.batch((function(){var t=n.remove(!1,!1);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var r=n[e],i=r._private.data;r.isNode()&&(i.parent=u)}t.restore(!1,!1)})),n.emitAndNotify("move")}}return this},[Jb,uw,cw,Gw,Zw,ix,ox,Dx,Gx,Xx,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},Zx,Qx,r_,h_,p_].forEach((function(t){iy(E_,t)}));var k_={add:function(t){var e,n=this;if(Hv(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++){var a=r[o];i.push(a.json())}e=new __(n,i)}}else if(zv(t)){e=new __(n,t)}else if(Vv(t)&&(zv(t.nodes)||zv(t.edges))){for(var s=t,l=[],u=["nodes","edges"],c=0,h=u.length;c<h;c++){var d=u[c],f=s[d];if(zv(f))for(var p=0,g=f.length;p<g;p++){var v=iy({group:d},f[p]);l.push(v)}}e=new __(n,l)}else{e=new Yy(n,t).collection()}return e},remove:function(t){if(Hv(t));else if(jv(t)){var e=t;t=this.$(e)}return t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */
var S_=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+u*r,n}return function t(e,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,a=(o=null!==i)?(c=t(e,r))/i*.016:.016;s=n(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(t){return u[t*(u.length-1)|0]}:c}}(),C_=function(t,e,n,r){var i=function(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,u=1/(l-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var d=c?new Float32Array(l):new Array(l);function f(t,e){return 1-3*e+3*t}function p(t,e){return 3*e-6*t}function g(t){return 3*t}function v(t,e,n){return((f(e,n)*t+p(e,n))*t+g(e))*t}function y(t,e,n){return 3*f(e,n)*t*t+2*p(e,n)*t+g(e)}function m(e,r){for(var o=0;o<i;++o){var a=y(r,t,n);if(0===a)return r;r-=(v(r,t,n)-e)/a}return r}function b(){for(var e=0;e<l;++e)d[e]=v(e*u,t,n)}function w(e,r,i){var o,l,u=0;do{(o=v(l=r+(i-r)/2,t,n)-e)>0?i=l:r=l}while(Math.abs(o)>a&&++u<s);return l}function x(e){for(var r=0,i=1,a=l-1;i!==a&&d[i]<=e;++i)r+=u;--i;var s=r+(e-d[i])/(d[i+1]-d[i])*u,c=y(s,t,n);return c>=o?m(e,s):0===c?s:w(e,r,r+u)}var _=!1;function E(){_=!0,t===e&&n===r||b()}var k=function(i){return _||E(),t===e&&n===r?i:0===i?0:1===i?1:v(x(i),e,r)};k.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var S="generateBezier("+[t,e,n,r]+")";return k.toString=function(){return S},k}(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},T_={linear:function(t,e,n){return t+(e-t)*n},ease:C_(.25,.1,.25,1),"ease-in":C_(.42,0,1,1),"ease-out":C_(0,0,.58,1),"ease-in-out":C_(.42,0,.58,1),"ease-in-sine":C_(.47,0,.745,.715),"ease-out-sine":C_(.39,.575,.565,1),"ease-in-out-sine":C_(.445,.05,.55,.95),"ease-in-quad":C_(.55,.085,.68,.53),"ease-out-quad":C_(.25,.46,.45,.94),"ease-in-out-quad":C_(.455,.03,.515,.955),"ease-in-cubic":C_(.55,.055,.675,.19),"ease-out-cubic":C_(.215,.61,.355,1),"ease-in-out-cubic":C_(.645,.045,.355,1),"ease-in-quart":C_(.895,.03,.685,.22),"ease-out-quart":C_(.165,.84,.44,1),"ease-in-out-quart":C_(.77,0,.175,1),"ease-in-quint":C_(.755,.05,.855,.06),"ease-out-quint":C_(.23,1,.32,1),"ease-in-out-quint":C_(.86,0,.07,1),"ease-in-expo":C_(.95,.05,.795,.035),"ease-out-expo":C_(.19,1,.22,1),"ease-in-out-expo":C_(1,0,0,1),"ease-in-circ":C_(.6,.04,.98,.335),"ease-out-circ":C_(.075,.82,.165,1),"ease-in-out-circ":C_(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return T_.linear;var r=S_(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":C_};function N_(t,e,n,r,i){if(1===r)return n;if(e===n)return n;var o=i(e,n,r);return null==t||((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max))),o}function O_(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function P_(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=O_(t,i),s=O_(e,i);if(qv(a)&&qv(s))return N_(o,a,s,n,r);if(zv(a)&&zv(s)){for(var l=[],u=0;u<s.length;u++){var c=a[u],h=s[u];if(null!=c&&null!=h){var d=N_(o,c,h,n,r);l.push(d)}else l.push(h)}return l}}function M_(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,l=a.startTime,u=(r?t:t.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=T_.linear;else{var c,h,d;if(jv(s))c=u.parse("transition-timing-function",s).value;else c=s;jv(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map((function(t){return+t}))),d.length>0?("spring"===h&&d.push(a.duration),a.easingImpl=T_[h].apply(null,d)):a.easingImpl=T_[h]}var f,p=a.easingImpl;if(f=0===a.duration?1:(n-l)/a.duration,a.applying&&(f=a.progress),f<0?f=0:f>1&&(f=1),null==a.delay){var g=a.startPosition,v=a.position;if(v&&i&&!t.locked()){var y={};D_(g.x,v.x)&&(y.x=P_(g.x,v.x,f,p)),D_(g.y,v.y)&&(y.y=P_(g.y,v.y,f,p)),t.position(y)}var m=a.startPan,b=a.pan,w=o.pan,x=null!=b&&r;x&&(D_(m.x,b.x)&&(w.x=P_(m.x,b.x,f,p)),D_(m.y,b.y)&&(w.y=P_(m.y,b.y,f,p)),t.emit("pan"));var _=a.startZoom,E=a.zoom,k=null!=E&&r;k&&(D_(_,E)&&(o.zoom=bm(o.minZoom,P_(_,E,f,p),o.maxZoom)),t.emit("zoom")),(x||k)&&t.emit("viewport");var S=a.style;if(S&&S.length>0&&i){for(var C=0;C<S.length;C++){var T=S[C],N=T.name,O=T,P=a.startStyle[N],M=P_(P,O,f,p,u.properties[P.name]);u.overrideBypass(t,N,M)}t.emit("style")}}return a.progress=f,f}function D_(t,e){return null!=t&&null!=e&&(!(!qv(t)||!qv(e))||!(!t||!e))}function A_(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function L_(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,a=i.animation.queue,s=!1;if(0===o.length){var l=a.shift();l&&o.push(l)}for(var u=function(t){for(var e=t.length-1;e>=0;e--){(0,t[e])()}t.splice(0,t.length)},c=o.length-1;c>=0;c--){var h=o[c],d=h._private;d.stopped?(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||A_(0,h,t),M_(e,h,t,n),d.applying&&(d.applying=!1),u(d.frames),null!=d.step&&d.step(t),h.completed()&&(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.completes)),s=!0)}return n||0!==o.length||0!==a.length||r.push(e),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var I_={animate:lw.animate(),animation:lw.animation(),animated:lw.animated(),clearQueue:lw.clearQueue(),delay:lw.delay(),delayAnimation:lw.delayAnimation(),stop:lw.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender((function(e,n){L_(n,t)}),e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&dy((function(n){L_(n,t),e()}))}()}}},R_={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&Wv(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},B_=function(t){return jv(t)?new Ww(t):t},j_={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new zx(R_,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,B_(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,B_(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,B_(e),n),this},once:function(t,e,n){return this.emitter().one(t,B_(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};lw.eventAliasesOn(j_);var F_={png:function(t){return t=t||{},this._private.renderer.png(t)},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};F_.jpeg=F_.jpg;var z_={layout:function(t){if(null!=t)if(null!=t.name){var e=t.name,n=this.extension("layout",e);if(null!=n){var r;r=jv(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$();var i=new n(iy({},t,{cy:this,eles:r}));return i}My("No such layout `"+e+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else My("A `name` must be specified to make a layout");else My("Layout options must be specified to make a layout")}};z_.createLayout=z_.makeLayout=z_.layout;var V_={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch((function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}}))}},q_=jy({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),U_={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&Ay("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=q_(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else My("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach((function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};U_.invalidateDimensions=U_.resize;var H_={collection:function(t,e){return jv(t)?this.$(t):Hv(t)?t.collection():zv(t)?new __(this,t,e):new __(this)},nodes:function(t){var e=this.$((function(t){return t.isNode()}));return t?e.filter(t):e},edges:function(t){var e=this.$((function(t){return t.isEdge()}));return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};H_.elements=H_.filter=H_.$;var W_={};W_.apply=function(t){var e=this._private,n=e.cy.collection();e.newStyle&&(e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0));for(var r=0;r<t.length;r++){var i=t[r],o=this.getContextMeta(i);if(!o.empty){var a=this.getContextStyle(o),s=this.applyContextStyle(o,a,i);e.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)&&n.merge(i)}}return e.newStyle=!1,n},W_.getPropertiesDiff=function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var l=this[s],u="t"===t[s],c="t"===e[s],h=u!==c,d=l.mappedProperties.length>0;if(h||c&&d){var f=void 0;h&&d||h?f=l.properties:d&&(f=l.mappedProperties);for(var p=0;p<f.length;p++){for(var g=f[p],v=g.name,y=!1,m=s+1;m<this.length;m++){var b=this[m];if("t"===e[m]&&(y=null!=b.properties[g.name]))break}a[v]||y||(a[v]=!0,o.push(v))}}}return n[r]=o,o},W_.getContextMeta=function(t){var e,n="",r=t._private.styleCxtKey||"";this._private.newStyle&&(r="");for(var i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},W_.getContextStyle=function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[e]=r,r},W_.applyContextStyle=function(t,e,n){for(var r=t.diffPropNames,i={},o=this.types,a=0;a<r.length;a++){var s=r[a],l=e[s],u=n.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===o.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(n,l),h.next=n.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},W_.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(t,e,r){return n.getPropertiesHash(t,e,r)},a=e.styleKey;if(t.removed())return!1;var s="nodes"===e.group,l=t._private.style;r=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];e.styleKeys[c]=[9261,5381]}for(var h,d=function(t,n){return e.styleKeys[n][0]=vy(t,e.styleKeys[n][0])},f=function(t,n){return e.styleKeys[n][1]=yy(t,e.styleKeys[n][1])},p=function(t,e){d(t,e),f(t,e)},g=function(t,e){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);d(r,e),f(r,e)}},v=0;v<r.length;v++){var y=r[v],m=l[y];if(null!=m){var b=this.properties[y],w=b.type,x=b.groupKey,_=void 0;null!=b.hashOverride?_=b.hashOverride(t,m):null!=m.pfValue&&(_=m.pfValue);var E=null==b.enums?m.value:null,k=null!=_,S=k||null!=E,C=m.units;if(w.number&&S&&!w.multiple)p(-128<(h=k?_:E)&&h<128&&Math.floor(h)!==h?2e9-(1024*h|0):h,x),k||null==C||g(C,x);else g(m.strValue,x)}}for(var T,N,O=[9261,5381],P=0;P<i.length;P++){var M=i[P],D=e.styleKeys[M];O[0]=vy(D[0],O[0]),O[1]=yy(D[1],O[1])}e.styleKey=(T=O[0],N=O[1],2097152*T+N);var A=e.styleKeys;e.labelDimsKey=my(A.labelDimensions);var L=o(t,["label"],A.labelDimensions);if(e.labelKey=my(L),e.labelStyleKey=my(by(A.commonLabel,L)),!s){var I=o(t,["source-label"],A.labelDimensions);e.sourceLabelKey=my(I),e.sourceLabelStyleKey=my(by(A.commonLabel,I));var R=o(t,["target-label"],A.labelDimensions);e.targetLabelKey=my(R),e.targetLabelStyleKey=my(by(A.commonLabel,R))}if(s){var B=e.styleKeys,j=B.nodeBody,F=B.nodeBorder,z=B.backgroundImage,V=B.compound,q=B.pie,U=[j,F,z,V,q].reduce(by,[9261,5381]);e.nodeKey=my(U),e.hasPie=9261!==q[0]&&5381!==q[1]}return a!==e.styleKey},W_.clearStyleHints=function(t){var e=t._private;e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},W_.applyParsedProperty=function(t,e){var n,r=this,i=e,o=t._private.style,a=r.types,s=r.properties[i.name].type,l=i.bypass,u=o[i.name],c=u&&u.bypass,h=t._private,d=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},f=function(){var e=d(u),n=d(i);r.checkTriggers(t,i.name,e,n)};if("curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",l)),i.delete)return o[i.name]=void 0,f(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,f(),!0):(f(),!0);if(i.deleteBypass)return u?!!u.bypass&&(o[i.name]=u.bypassed,f(),!0):(f(),!0);var p=function(){Ay("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var g,v=i.field.split("."),y=h.data,m=0;m<v.length&&y;m++){y=y[v[m]]}if(null==y)return p(),!1;if(!qv(y))return Ay("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((g=0===b?0:(y-i.fieldMin)/b)<0?g=0:g>1&&(g=1),s.color){var w=i.valueMin[0],x=i.valueMax[0],_=i.valueMin[1],E=i.valueMax[1],k=i.valueMin[2],S=i.valueMax[2],C=null==i.valueMin[3]?1:i.valueMin[3],T=null==i.valueMax[3]?1:i.valueMax[3],N=[Math.round(w+(x-w)*g),Math.round(_+(E-_)*g),Math.round(k+(S-k)*g),Math.round(C+(T-C)*g)];n={bypass:i.bypass,name:i.name,value:N,strValue:"rgb("+N[0]+", "+N[1]+", "+N[2]+")"}}else{if(!s.number)return!1;var O=i.valueMin+(i.valueMax-i.valueMin)*g;n=this.parse(i.name,O,i.bypass,"mapping")}if(!n)return p(),!1;n.mapping=i,i=n;break;case a.data:for(var P=i.field.split("."),M=h.data,D=0;D<P.length&&M;D++){M=M[P[D]]}if(null!=M&&(n=this.parse(i.name,M,i.bypass,"mapping")),!n)return p(),!1;n.mapping=i,i=n;break;case a.fn:var A=i.value,L=null!=i.fnValue?i.fnValue:A(t);if(i.prevFnValue=L,null==L)return Ay("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,L,i.bypass,"mapping")))return Ay("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=Ly(i),i=n;break;case void 0:break;default:return!1}return l?(i.bypassed=c?u.bypassed:u,o[i.name]=i):c?u.bypassed=i:o[i.name]=i,f(),!0},W_.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},W_.update=function(){this._private.cy.mutableElements().updateStyle()},W_.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=t.pstyle(c),d=e[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,g=!1,v=void 0;f&&(qv(f.pfValue)&&qv(p.pfValue)?(g=p.pfValue-f.pfValue,v=f.pfValue+1e-6*g):qv(f.value)&&qv(p.value)?(g=p.value-f.value,v=f.value+1e-6*g):zv(f.value)&&zv(p.value)&&(g=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],v=f.strValue),g&&(s[c]=p.strValue,this.applyBypass(t,c,v),l=!0))}}if(!l)return;r.transitioning=!0,new ow((function(e){a>0?t.delayAnimation(a).play().promise().then(e):e()})).then((function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1}))}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},W_.checkTrigger=function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);null!=s&&s(n,r)&&o(a)},W_.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,(function(t){return t.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},W_.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,(function(t){return t.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"bezier"!==t.pstyle("curve-style").value&&("curve-style"!==e||"bezier"!==n&&"bezier"!==r)||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach((function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()}))}))},W_.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)};var Y_={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var a=this.properties[o].name,s=this.parse(a,n,!0);s&&i.push(s)}}else if(jv(e)){var l=this.parse(e,n,!0);l&&i.push(l)}else{if(!Vv(e))return!1;var u=e;r=n;for(var c=Object.keys(u),h=0;h<c.length;h++){var d=c[h],f=u[d];if(void 0===f&&(f=u[Qv(d)]),void 0!==f){var p=this.parse(d,f,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var g=!1,v=0;v<t.length;v++){for(var y=t[v],m={},b=void 0,w=0;w<i.length;w++){var x=i[w];if(r){var _=y.pstyle(x.name);b=m[x.name]={prev:_}}g=this.applyParsedProperty(y,x)||g,r&&(b.next=y.pstyle(x.name))}g&&this.updateStyleHints(y),r&&this.updateTransitions(y,m,!0)}return g},overrideBypass:function(t,e,n){e=Jv(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,l=a.mutiple,u=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,u,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=o[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}},G_={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(Mv&&e&&Mv.getComputedStyle)return Mv.getComputedStyle(e).getPropertyValue(t)}},X_={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],o=this.getStylePropertyValue(t,i.name,e);null!=o&&(n[i.name]=o,n[Qv(i.name)]=o)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name);if(o){var a=o.value,s=o.units,l=o.strValue;if(n&&i.number&&null!=a&&qv(a)){var u=t.cy().zoom(),c=function(t){return t*u},h=function(t,e){return c(t)+e},d=zv(a);return(d?s.every((function(t){return null!=t})):null!=s)?d?a.map((function(t,e){return h(t,s[e])})).join(" "):h(a,s):d?a.map((function(t){return jv(t)?t:""+c(t)})).join(" "):""+c(a)}if(null!=l)return l}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=Vv(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],l=r[a]||r[Jv(a)],u=this.parse(l.name,s);u&&e.push(u)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,a,s,l,u=n.slice();for(s=0;s<e.length;s++)if(r=e[s],null!=(i=t.pstyle(r,!1)))if(null!=i.pfValue)u[0]=vy(a,u[0]),u[1]=yy(a,u[1]);else for(o=i.strValue,l=0;l<o.length;l++)a=o.charCodeAt(l),u[0]=vy(a,u[0]),u[1]=yy(a,u[1]);return u}};X_.getPropertiesHash=X_.getNonDefaultPropertiesHash;var K_={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var a=0;a<o.length;a++){var s=o[a],l=i[s];this.css(s,l)}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},$_={appendFromString:function(t){var e,n,r,i=""+t;function o(){i=i.length>e.length?i.substr(e.length):""}function a(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(i.match(/^\s*$/))break;var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){Ay("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=s[0];var l=s[1];if("core"!==l)if(new Ww(l).invalid){Ay("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),o();continue}var u=s[2],c=!1;n=u;for(var h=[];;){if(n.match(/^\s*$/))break;var d=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!d){Ay("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=d[0];var f=d[1],p=d[2];if(this.properties[f])this.parse(f,p)?(h.push({name:f,val:p}),a()):(Ay("Skipping property: Invalid property definition in: "+r),a());else Ay("Skipping property: Invalid property name in: "+r),a()}if(c){o();break}this.selector(l);for(var g=0;g<h.length;g++){var v=h[g];this.css(v.name,v.val)}o()}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},Z_={};!function(){var t=ny,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(e){var n=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Z_.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return jv(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var i={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||(0==t&&0!=e||0!=t&&0==e)},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var n=Kv(t),r=Kv(e);return n&&!r||!n&&r}},o=Z_.types,a=[{name:"label",type:o.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],s=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],l=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:o.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any},{name:"line-height",type:o.positiveNumber,triggersBounds:i.any}],c=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:o.justification}],h=[{name:"events",type:o.bool},{name:"text-events",type:o.bool}],d=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.nonNegativeInt,triggersZOrder:i.any}],f=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero}],p=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],g=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},v=[{name:"height",type:o.nodeSize,triggersBounds:i.any,hashOverride:g},{name:"width",type:o.nodeSize,triggersBounds:i.any,hashOverride:g},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.boundsExpansion,triggersBounds:i.any}],y=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle}],m=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],b=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],w=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"taxi-turn",type:o.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],x=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],_=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],E=[];Z_.pieBackgroundN=16,E.push({name:"pie-size",type:o.sizeMaybePercent});for(var k=1;k<=Z_.pieBackgroundN;k++)E.push({name:"pie-"+k+"-background-color",type:o.color}),E.push({name:"pie-"+k+"-background-size",type:o.percent}),E.push({name:"pie-"+k+"-background-opacity",type:o.zeroOneNumber});var S=[],C=Z_.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill}].forEach((function(t){C.forEach((function(e){var n=e+"-"+t.name,r=t.type,i=t.triggersBounds;S.push({name:n,type:r,triggersBounds:i})}))}),{});var T=Z_.properties=[].concat(h,p,d,f,x,c,u,a,s,l,v,y,m,E,b,w,S,_),N=Z_.propertyGroups={behavior:h,transition:p,visibility:d,overlay:f,ghost:x,commonLabel:c,labelDimensions:u,mainLabel:a,sourceLabel:s,targetLabel:l,nodeBody:v,nodeBorder:y,backgroundImage:m,pie:E,compound:b,edgeLine:w,edgeArrow:S,core:_},O=Z_.propertyGroupNames={};(Z_.propertyGroupKeys=Object.keys(N)).forEach((function(t){O[t]=N[t].map((function(t){return t.name})),N[t].forEach((function(e){return e.groupKey=t}))}));var P=Z_.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Z_.propertyNames=T.map((function(t){return t.name}));for(var M=0;M<T.length;M++){var D=T[M];T[D.name]=D}for(var A=0;A<P.length;A++){var L=P[A],I=T[L.pointsTo],R={name:L.name,alias:!0,pointsTo:I};T.push(R),T[L.name]=R}}(),Z_.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Z_.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=iy({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,e){for(var n=1;n<=Z_.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),i=e.value;t[r]=i}return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(t,e){return Z_.arrowPrefixes.forEach((function(n){var r=n+"-"+e.name,i=e.value;t[r]=i})),t}),{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);n[o]=s}}return t.defaultProperties=n,t.defaultProperties},Z_.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var J_={parse:function(t,e,n,r){if(Fv(e))return this.parseImplWarn(t,e,n,r);var i,o=xy(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),a=this.propCache=this.propCache||[];return(i=a[o])||(i=a[o]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=Ly(i))&&(i.value=Ly(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||Ay("The style property `".concat(t,": ").concat(e,"` is invalid")),i}};J_.parseImpl=function(t,e,n,r){t=Jv(t);var i=this.properties[t],o=e,a=this.types;if(!i)return null;if(void 0===e)return null;i.alias&&(i=i.pointsTo,t=i.name);var s=jv(e);s&&(e=e.trim());var l,u,c=i.type;if(!c)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Fv(e))return{name:t,value:e,strValue:"fn",mapped:a.fn,bypass:n};if(!s||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(l=new RegExp(a.data.regex).exec(e))){if(n)return!1;var h=a.data;return{name:t,value:l,strValue:""+e,mapped:h,field:l[1],bypass:n}}if(e.length>=10&&"m"===e[0]&&(u=new RegExp(a.mapData.regex).exec(e))){if(n)return!1;if(c.multiple)return!1;var d=a.mapData;if(!c.color&&!c.number)return!1;var f=this.parse(t,u[4]);if(!f||f.mapped)return!1;var p=this.parse(t,u[5]);if(!p||p.mapped)return!1;if(f.pfValue===p.pfValue||f.strValue===p.strValue)return Ay("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+f.strValue+"`"),this.parse(t,f.strValue);if(c.color){var g=f.value,v=p.value;if(!(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3]&&(null!=g[3]&&1!==g[3]||null!=v[3]&&1!==v[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:d,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:f.value,valueMax:p.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var y;if(y=s?e.split(/\s+/):zv(e)?e:[e],c.evenMultiple&&y.length%2!=0)return null;for(var m=[],b=[],w=[],x="",_=!1,E=0;E<y.length;E++){var k=this.parse(t,y[E],n,"multiple");_=_||jv(k.value),m.push(k.value),w.push(null!=k.pfValue?k.pfValue:k.value),b.push(k.units),x+=(E>0?" ":"")+k.strValue}return c.validate&&!c.validate(m,b)?null:c.singleEnum&&_?1===m.length&&jv(m[0])?{name:t,value:m[0],strValue:m[0],bypass:n}:null:{name:t,value:m,pfValue:w,strValue:x,bypass:n,units:b}}var S,C,T=function(){for(var r=0;r<c.enums.length;r++){if(c.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(c.number){var N,O="px";if(c.units&&(N=c.units),c.implicitUnits&&(O=c.implicitUnits),!c.unitless)if(s){var P="px|em"+(c.allowPercent?"|\\%":"");N&&(P=N);var M=e.match("^("+ny+")("+P+")?$");M&&(e=M[1],N=M[2]||O)}else N&&!c.implicitUnits||(N=O);if(e=parseFloat(e),isNaN(e)&&void 0===c.enums)return null;if(isNaN(e)&&void 0!==c.enums)return e=o,T();if(c.integer&&(!qv(C=e)||Math.floor(C)!==C))return null;if(void 0!==c.min&&(e<c.min||c.strictMin&&e===c.min)||void 0!==c.max&&(e>c.max||c.strictMax&&e===c.max))return null;var D={name:t,value:e,strValue:""+e+(N||""),units:N,bypass:n};return c.unitless||"px"!==N&&"em"!==N?D.pfValue=e:D.pfValue="px"!==N&&N?this.getEmSizeInPixels()*e:e,"ms"!==N&&"s"!==N||(D.pfValue="ms"===N?e:1e3*e),"deg"!==N&&"rad"!==N||(D.pfValue="rad"===N?e:(S=e,Math.PI*S/180)),"%"===N&&(D.pfValue=e/100),D}if(c.propList){var A=[],L=""+e;if("none"===L);else{for(var I=L.split(/\s*,\s*|\s+/),R=0;R<I.length;R++){var B=I[R].trim();this.properties[B]?A.push(B):Ay("`"+B+"` is not a valid property name")}if(0===A.length)return null}return{name:t,value:A,strValue:0===A.length?"none":A.join(" "),bypass:n}}if(c.color){var j=oy(e);return j?{name:t,value:j,pfValue:j,strValue:"rgb("+j[0]+","+j[1]+","+j[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var F=T();if(F)return F}for(var z=c.regexes?c.regexes:[c.regex],V=0;V<z.length;V++){var q=new RegExp(z[V]).exec(e);if(q)return{name:t,value:c.singleRegexMatchValue?q[1]:q,strValue:""+e,bypass:n}}return null}return c.string?{name:t,value:""+e,strValue:""+e,bypass:n}:c.enums?T():null};var Q_=function t(e){if(!(this instanceof t))return new t(e);Gv(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):My("A style must have a core reference")},tE=Q_.prototype;tE.instanceString=function(){return"style"},tE.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},tE.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},tE.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},tE.selector=function(t){var e="core"===t?null:new Ww(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},tE.css=function(){var t=this,e=arguments;if(1===e.length)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];void 0===o&&(o=n[Qv(i.name)]),void 0!==o&&this.cssRule(i.name,o)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},tE.style=tE.css,tE.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},tE.append=function(t){return Xv(t)?t.appendToStyle(this):zv(t)?this.appendFromJson(t):jv(t)&&this.appendFromString(t),this},Q_.fromJson=function(t,e){var n=new Q_(t);return n.fromJson(e),n},Q_.fromString=function(t,e){return new Q_(t).fromString(e)},[W_,Y_,G_,X_,K_,$_,Z_,J_].forEach((function(t){iy(tE,t)})),Q_.types=tE.types,Q_.properties=tE.properties,Q_.propertyGroups=tE.propertyGroups,Q_.propertyGroupNames=tE.propertyGroupNames,Q_.propertyGroupKeys=tE.propertyGroupKeys;var eE={style:function(t){t&&this.setStyle(t).update();return this._private.style},setStyle:function(t){var e=this._private;return Xv(t)?e.style=t.generateStyle(this):zv(t)?e.style=Q_.fromJson(this,t):jv(t)?e.style=Q_.fromString(this,t):e.style=Q_(this),e.style}},nE={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(jv(o[0]))return a[t=o[0]];if(Vv(o[0])){if(!this._private.panningEnabled)return this;r=(n=o[0]).x,i=n.y,qv(r)&&(a.x=r),qv(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[0],e=o[1],"x"!==t&&"y"!==t||!qv(e)||(a[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:Vv(t)&&(o=(i=s[0]).x,a=i.y,qv(o)&&(l.x+=o),qv(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!qv(r)||(l[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){if(qv(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n,r;if(jv(t)){var i=t;t=this.$(i)}else if(Vv(r=t)&&qv(r.x1)&&qv(r.x2)&&qv(r.y1)&&qv(r.y2)){var o=t;(n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else Hv(t)||(t=this.mutableElements());if(!Hv(t)||!t.empty()){n=n||t.boundingBox();var a,s=this.width(),l=this.height();if(e=qv(e)?e:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:a=(a=(a=Math.min((s-2*e)/n.w,(l-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(s-a*(n.x1+n.x2))/2,y:(l-a*(n.y1+n.y2))/2}}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return qv(t)&&qv(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):qv(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:qv(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,a=!1;if(r.zoomingEnabled||(a=!0),qv(t)?n=t:Vv(t)&&(n=t.level,null!=t.position?e=lm(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,a||!qv(n)||n===o||null!=e&&(!qv(e.x)||!qv(e.y)))return null;if(null!=e){var s=i,l=o,u=n;return{zoomed:!0,panned:!0,zoom:u,pan:{x:-u/l*(e.x-s.x)+e.x,y:-u/l*(e.y-s.y)+e.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!t)return this;if(qv(t.zoom)||(n=!1),Vv(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;qv(l.x)&&(e.pan.x=l.x,a=!1),qv(l.y)&&(e.pan.y=l.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(jv(t)){var n=t;t=this.mutableElements().filter(n)}else Hv(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,e=t.container;return t.sizeCache=t.sizeCache||(e?function(){var t=Mv.getComputedStyle(e),n=function(e){return parseFloat(t.getPropertyValue(e))};return{width:e.clientWidth-n("padding-left")-n("padding-right"),height:e.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};nE.centre=nE.center,nE.autolockNodes=nE.autolock,nE.autoungrabifyNodes=nE.autoungrabify;var rE={data:lw.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:lw.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:lw.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:lw.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})};rE.attr=rE.data,rE.removeAttr=rE.removeData;var iE=function(t){var e=this,n=(t=iy({},t)).container;n&&!Uv(n)&&Uv(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var o=void 0!==Mv&&void 0!==n&&!t.headless,a=t;a.layout=iy({name:o?"grid":"null"},a.layout),a.renderer=iy({name:o?"canvas":"null"},a.renderer);var s=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},l=this._private={container:n,ready:!1,options:a,elements:new __(this),listeners:[],aniEles:new __(this),data:{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:qv(a.zoom)?a.zoom:1,pan:{x:Vv(a.pan)&&qv(a.pan.x)?a.pan.x:0,y:Vv(a.pan)&&qv(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});l.styleEnabled&&e.setStyle([]);var u=iy({},a,a.renderer);e.initRenderer(u);!function(t,e){if(t.some($v))return ow.all(t).then(e);e(t)}([a.style,a.elements],(function(t){var n=t[0],o=t[1];l.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(Vv(t)||zv(t))&&e.add(t),e.one("layoutready",(function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",r),e.emit("done")}));var o=iy({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()}(o,(function(){e.startAnimationLoop(),l.ready=!0,Fv(a.ready)&&e.on("ready",a.ready);for(var t=0;t<i.length;t++){var n=i[t];e.on("ready",n)}r&&(r.readies=[]),e.emit("ready")}),a.done)}))},oE=iE.prototype;iy(oE,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!Uv(t)&&Uv(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(iy({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Ly(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(Vv(t)){if(e.startBatch(),t.elements){var i={},o=function(t,n){for(var r=[],o=[],a=0;a<t.length;a++){var s=t[a],l=""+s.data.id,u=e.getElementById(l);i[l]=!0,0!==u.length?o.push({ele:u,json:s}):n?(s.group=n,r.push(s)):r.push(s)}e.add(r);for(var c=0;c<o.length;c++){var h=o[c],d=h.ele,f=h.json;d.json(f)}};if(zv(t.elements))o(t.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var l=a[s],u=t.elements[l];zv(u)&&o(u,l)}var c=e.collection();r.filter((function(t){return!i[t.id()]})).forEach((function(t){t.isParent()?c.merge(t):t.remove()})),c.forEach((function(t){return t.children().move({parent:null})})),c.forEach((function(t){return function(t){return e.getElementById(t.id())}(t).remove()}))}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<h.length;d++){var f=h[d];null!=t[f]&&e[f](t[f])}return e.endBatch(),this}var p={};!!t?p.elements=this.elements().map((function(t){return t.json()})):(p.elements={},r.forEach((function(t){var e=t.group();p.elements[e]||(p.elements[e]=[]),p.elements[e].push(t.json())}))),this._private.styleEnabled&&(p.style=e.style().json()),p.data=Ly(e.data());var g=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=Ly(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=Ly(g.renderer),p.hideEdgesOnViewport=g.hideEdgesOnViewport,p.textureOnViewport=g.textureOnViewport,p.wheelSensitivity=g.wheelSensitivity,p.motionBlur=g.motionBlur,p}}),oE.$id=oE.getElementById,[k_,I_,j_,F_,z_,V_,U_,H_,eE,nE,rE].forEach((function(t){iy(oE,t)}));var aE={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},sE=function(t){return t.scratch("breadthfirst")},lE=function(t,e){return t.scratch("breadthfirst",e)};function uE(t){this.options=iy({},aE,t)}uE.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter((function(t){return!t.isParent()})),a=i,s=n.directed,l=n.maximal||n.maximalAdjustments>0,u=wm(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(Hv(n.roots))t=n.roots;else if(zv(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var d=n.roots[h],f=r.getElementById(d);c.push(f)}t=r.collection(c)}else if(jv(n.roots))t=r.$(n.roots);else if(s)t=o.roots();else{var p=i.components();t=r.collection();for(var g=function(e){var n=p[e],r=n.maxDegree(!1),i=n.filter((function(t){return t.degree(!1)===r}));t=t.add(i)},v=0;v<p.length;v++)g(v)}var y=[],m={},b=function(t,e){null==y[e]&&(y[e]=[]);var n=y[e].length;y[e].push(t),lE(t,{index:n,depth:e})};a.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();b(o,i),m[a]=!0}});for(var w=[],x=0;x<o.length;x++){var _=o[x];m[_.id()]||w.push(_)}var E=function(t){for(var e=y[t],n=0;n<e.length;n++){var r=e[n];null!=r?lE(r,{depth:t,index:n}):(e.splice(n,1),n--)}},k=function(){for(var t=0;t<y.length;t++)E(t)},S=function(t,e){for(var n=sE(t),r=t.incomers().filter((function(t){return t.isNode()&&i.has(t)})),o=-1,a=t.id(),s=0;s<r.length;s++){var l=r[s],u=sE(l);o=Math.max(o,u.depth)}return n.depth<=o&&(e[a]?null:(function(t,e){var n=sE(t),r=n.depth,i=n.index;y[r][i]=null,b(t,e)}(t,o+1),e[a]=!0,!0))};if(s&&l){var C=[],T={},N=function(t){return C.push(t)};for(o.forEach((function(t){return C.push(t)}));C.length>0;){var O=C.shift(),P=S(O,T);if(P)O.outgoers().filter((function(t){return t.isNode()&&i.has(t)})).forEach(N);else if(null===P){Ay("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var M=0;if(n.avoidOverlap)for(var D=0;D<o.length;D++){var A=o[D].layoutDimensions(n),L=A.w,I=A.h;M=Math.max(M,L,I)}for(var R={},B=function(t){if(R[t.id()])return R[t.id()];for(var e=sE(t).depth,n=t.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var l=sE(s),u=l.index,c=l.depth;if(null!=u&&null!=c){var h=y[c].length;c<e&&(r+=u/h,i++)}}}return r/=i=Math.max(1,i),0===i&&(r=0),R[t.id()]=r,r},j=function(t,e){var n=B(t)-B(e);return 0===n?ry(t.id(),e.id()):n},F=0;F<y.length;F++)y[F].sort(j),E(F);for(var z=[],V=0;V<w.length;V++)z.push(w[V]);y.unshift(z),k();for(var q=0,U=0;U<y.length;U++)q=Math.max(y[U].length,q);var H=u.x1+u.w/2,W=u.x1+u.h/2,Y=y.reduce((function(t,e){return Math.max(t,e.length)}),0);return o.layoutPositions(this,n,(function(t){var e=sE(t),r=e.depth,i=e.index,o=y[r].length,a=Math.max(u.w/((n.grid?Y:o)+1),M),s=Math.max(u.h/(y.length+1),M),l=Math.min(u.w/2/y.length,u.h/2/y.length);if(l=Math.max(l,M),n.circle){var c=l*r+l-(y.length>0&&y[0].length<=3?l/2:0),h=2*Math.PI/y[r].length*i;return 0===r&&1===y[0].length&&(c=1),{x:H+c*Math.cos(h),y:W+c*Math.sin(h)}}return{x:H+(i+1-(o+1)/2)*a,y:(r+1)*s}})),this};var cE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function hE(t){this.options=iy({},cE,t)}hE.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a,s=wm(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l=s.x1+s.w/2,u=s.y1+s.h/2,c=(void 0===e.sweep?2*Math.PI-2*Math.PI/o.length:e.sweep)/Math.max(1,o.length-1),h=0,d=0;d<o.length;d++){var f=o[d].layoutDimensions(e),p=f.w,g=f.h;h=Math.max(h,p,g)}if(a=qv(e.radius)?e.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&e.avoidOverlap){h*=1.75;var v=Math.cos(c)-Math.cos(0),y=Math.sin(c)-Math.sin(0),m=Math.sqrt(h*h/(v*v+y*y));a=Math.max(m,a)}return o.layoutPositions(this,e,(function(t,n){var r=e.startAngle+n*c*(i?1:-1),o=a*Math.cos(r),s=a*Math.sin(r);return{x:l+o,y:u+s}})),this};var dE,fE={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function pE(t){this.options=iy({},fE,t)}pE.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles.nodes().not(":parent"),o=wm(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),a=o.x1+o.w/2,s=o.y1+o.h/2,l=[],u=0,c=0;c<i.length;c++){var h,d=i[c];h=e.concentric(d),l.push({value:h,node:d}),d._private.scratch.concentric=h}i.updateStyle();for(var f=0;f<i.length;f++){var p=i[f].layoutDimensions(e);u=Math.max(u,p.w,p.h)}l.sort((function(t,e){return e.value-t.value}));for(var g=e.levelWidth(i),v=[[]],y=v[0],m=0;m<l.length;m++){var b=l[m];if(y.length>0)Math.abs(y[0].value-b.value)>=g&&(y=[],v.push(y));y.push(b)}var w=u+e.minNodeSpacing;if(!e.avoidOverlap){var x=v.length>0&&v[0].length>1,_=(Math.min(o.w,o.h)/2-w)/(v.length+x?1:0);w=Math.min(w,_)}for(var E=0,k=0;k<v.length;k++){var S=v[k],C=void 0===e.sweep?2*Math.PI-2*Math.PI/S.length:e.sweep,T=S.dTheta=C/Math.max(1,S.length-1);if(S.length>1&&e.avoidOverlap){var N=Math.cos(T)-Math.cos(0),O=Math.sin(T)-Math.sin(0),P=Math.sqrt(w*w/(N*N+O*O));E=Math.max(P,E)}S.r=E,E+=w}if(e.equidistant){for(var M=0,D=0,A=0;A<v.length;A++){var L=v[A].r-D;M=Math.max(M,L)}D=0;for(var I=0;I<v.length;I++){var R=v[I];0===I&&(D=R.r),R.r=D,D+=M}}for(var B={},j=0;j<v.length;j++)for(var F=v[j],z=F.dTheta,V=F.r,q=0;q<F.length;q++){var U=F[q],H=e.startAngle+(n?1:-1)*z*q,W={x:a+V*Math.cos(H),y:s+V*Math.sin(H)};B[U.node.id()]=W}return i.layoutPositions(this,e,(function(t){var e=t.id();return B[e]})),this};var gE={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function vE(t){this.options=iy({},gE,t),this.options.layout=this}vE.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),dE=!0===t.debug;var r=yE(e,n,t);dE&&(void 0)(r),t.randomize&&wE(r);var i=fy(),o=function(){_E(r,e,t),!0===t.fit&&e.fit(t.padding)},a=function(e){return!(n.stopped||e>=t.numIter)&&(EE(r,t),r.temperature=r.temperature*t.coolingFactor,!(r.temperature<t.minTemp))},s=function(){if(!0===t.animate||!1===t.animate)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var e=t.eles.nodes(),i=xE(r,t,e);e.layoutPositions(n,t,i)}},l=0,u=!0;if(!0===t.animate){!function e(){for(var n=0;u&&n<t.refresh;)u=a(l),l++,n++;u?(fy()-i>=t.animationThreshold&&o(),dy(e)):(IE(r,t),s())}()}else{for(;u;)u=a(l),l++;IE(r,t),s()}return this},vE.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},vE.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var yE=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:wm(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},a=n.eles.components(),s={},l=0;l<a.length;l++)for(var u=a[l],c=0;c<u.length;c++){s[u[c].id()]=l}for(l=0;l<o.nodeSize;l++){var h=(v=i[l]).layoutDimensions(n);(D={}).isLocked=v.locked(),D.id=v.data("id"),D.parentId=v.data("parent"),D.cmptId=s[v.id()],D.children=[],D.positionX=v.position("x"),D.positionY=v.position("y"),D.offsetX=0,D.offsetY=0,D.height=h.w,D.width=h.h,D.maxX=D.positionX+D.width/2,D.minX=D.positionX-D.width/2,D.maxY=D.positionY+D.height/2,D.minY=D.positionY-D.height/2,D.padLeft=parseFloat(v.style("padding")),D.padRight=parseFloat(v.style("padding")),D.padTop=parseFloat(v.style("padding")),D.padBottom=parseFloat(v.style("padding")),D.nodeRepulsion=Fv(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(D),o.idToIndex[D.id]=l}var d=[],f=0,p=-1,g=[];for(l=0;l<o.nodeSize;l++){var v,y=(v=o.layoutNodes[l]).parentId;null!=y?o.layoutNodes[o.idToIndex[y]].children.push(v.id):(d[++p]=v.id,g.push(v.id))}for(o.graphSet.push(g);f<=p;){var m=d[f++],b=o.idToIndex[m],w=o.layoutNodes[b].children;if(w.length>0){o.graphSet.push(w);for(l=0;l<w.length;l++)d[++p]=w[l]}}for(l=0;l<o.graphSet.length;l++){var x=o.graphSet[l];for(c=0;c<x.length;c++){var _=o.idToIndex[x[c]];o.indexToGraph[_]=l}}for(l=0;l<o.edgeSize;l++){var E=r[l],k={};k.id=E.data("id"),k.sourceId=E.data("source"),k.targetId=E.data("target");var S=Fv(n.idealEdgeLength)?n.idealEdgeLength(E):n.idealEdgeLength,C=Fv(n.edgeElasticity)?n.edgeElasticity(E):n.edgeElasticity,T=o.idToIndex[k.sourceId],N=o.idToIndex[k.targetId];if(o.indexToGraph[T]!=o.indexToGraph[N]){for(var O=mE(k.sourceId,k.targetId,o),P=o.graphSet[O],M=0,D=o.layoutNodes[T];-1===P.indexOf(D.id);)D=o.layoutNodes[o.idToIndex[D.parentId]],M++;for(D=o.layoutNodes[N];-1===P.indexOf(D.id);)D=o.layoutNodes[o.idToIndex[D.parentId]],M++;S*=M*n.nestingFactor}k.idealLength=S,k.elasticity=C,o.layoutEdges.push(k)}return o},mE=function(t,e,n){var r=bE(t,e,0,n);return 2>r.count?0:r.graph},bE=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var l=o[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=t(e,n,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2===++a)break}}}return{count:a,graph:r}},wE=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},xE=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach((function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,o){var a=t.layoutNodes[t.idToIndex[n.data("id")]];if(e.boundingBox){var s=(a.positionX-i.x1)/i.w,l=(a.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+l*r.h}}return{x:a.positionX,y:a.positionY}}},_E=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=xE(t,n,i);i.positions(o),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},EE=function(t,e,n){kE(t,e),OE(t),PE(t,e),ME(t),DE(t)},kE=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=t.layoutNodes[t.idToIndex[r[o]]],s=o+1;s<i;s++){var l=t.layoutNodes[t.idToIndex[r[s]]];CE(a,l,t,e)}},SE=function(t){return-t+2*t*Math.random()},CE=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY;0===i&&0===o&&(i=SE(1),o=SE(1));var a=TE(t,e,i,o);if(a>0)var s=(u=r.nodeOverlap*a)*i/(g=Math.sqrt(i*i+o*o)),l=u*o/g;else{var u,c=NE(t,i,o),h=NE(e,-1*i,-1*o),d=h.x-c.x,f=h.y-c.y,p=d*d+f*f,g=Math.sqrt(p);s=(u=(t.nodeRepulsion+e.nodeRepulsion)/p)*d/g,l=u*f/g}t.isLocked||(t.offsetX-=s,t.offsetY-=l),e.isLocked||(e.offsetX+=s,e.offsetY+=l)}},TE=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},NE=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,l=o/a,u={};return 0===e&&0<n||0===e&&0>n?(u.x=r,u.y=i+o/2,u):0<e&&-1*l<=s&&s<=l?(u.x=r+a/2,u.y=i+a*n/2/e,u):0>e&&-1*l<=s&&s<=l?(u.x=r-a/2,u.y=i-a*n/2/e,u):0<n&&(s<=-1*l||s>=l)?(u.x=r+o*e/2/n,u.y=i+o/2,u):0>n&&(s<=-1*l||s>=l)?(u.x=r-o*e/2/n,u.y=i-o/2,u):u},OE=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],o=t.layoutNodes[i],a=t.idToIndex[r.targetId],s=t.layoutNodes[a],l=s.positionX-o.positionX,u=s.positionY-o.positionY;if(0!==l||0!==u){var c=NE(o,l,u),h=NE(s,-1*l,-1*u),d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f),g=Math.pow(r.idealLength-p,2)/r.elasticity;if(0!==p)var v=g*d/p,y=g*f/p;else v=0,y=0;o.isLocked||(o.offsetX+=v,o.offsetY+=y),s.isLocked||(s.offsetX-=v,s.offsetY-=y)}}},PE=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[r[0]]],l=t.layoutNodes[t.idToIndex[s.parentId]];o=l.positionX,a=l.positionY}for(var u=0;u<i;u++){var c=t.layoutNodes[t.idToIndex[r[u]]];if(!c.isLocked){var h=o-c.positionX,d=a-c.positionY,f=Math.sqrt(h*h+d*d);if(f>1){var p=e.gravity*h/f,g=e.gravity*d/f;c.offsetX+=p,c.offsetY+=g}}}}},ME=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.idToIndex[o],s=t.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=t.layoutNodes[t.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,n[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},DE=function(t,e){for(var n=0;n<t.nodeSize;n++){0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(n=0;n<t.nodeSize;n++){if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=AE(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,LE(i,t)}}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},AE=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},LE=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},IE=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],a=o.cmptId;(r[a]=r[a]||[]).push(o)}var s=0;for(i=0;i<r.length;i++){if(g=r[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var u=g[l];g.x1=Math.min(g.x1,u.positionX-u.width/2),g.x2=Math.max(g.x2,u.positionX+u.width/2),g.y1=Math.min(g.y1,u.positionY-u.height/2),g.y2=Math.max(g.y2,u.positionY+u.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}}r.sort((function(t,e){return e.w*e.h-t.w*t.h}));var c=0,h=0,d=0,f=0,p=Math.sqrt(s)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var g;if(g=r[i]){for(l=0;l<g.length;l++){(u=g[l]).isLocked||(u.positionX+=c-g.x1,u.positionY+=h-g.y1)}c+=g.w+e.componentSpacing,d+=g.w+e.componentSpacing,f=Math.max(f,g.h),d>p&&(h+=f+e.componentSpacing,c=0,d=0,f=0)}}},RE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function BE(t){this.options=iy({},RE,t)}BE.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var i=wm(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===i.h||0===i.w)r.layoutPositions(this,e,(function(t){return{x:i.x1,y:i.y1}}));else{var o=r.size(),a=Math.sqrt(o*i.h/i.w),s=Math.round(a),l=Math.round(i.w/i.h*a),u=function(t){if(null==t)return Math.min(s,l);Math.min(s,l)==s?s=t:l=t},c=function(t){if(null==t)return Math.max(s,l);Math.max(s,l)==s?s=t:l=t},h=e.rows,d=null!=e.cols?e.cols:e.columns;if(null!=h&&null!=d)s=h,l=d;else if(null!=h&&null==d)s=h,l=Math.ceil(o/s);else if(null==h&&null!=d)l=d,s=Math.ceil(o/l);else if(l*s>o){var f=u(),p=c();(f-1)*p>=o?u(f-1):(p-1)*f>=o&&c(p-1)}else for(;l*s<o;){var g=u(),v=c();(v+1)*g>=o?c(v+1):u(g+1)}var y=i.w/l,m=i.h/s;if(e.condense&&(y=0,m=0),e.avoidOverlap)for(var b=0;b<r.length;b++){var w=r[b],x=w._private.position;null!=x.x&&null!=x.y||(x.x=0,x.y=0);var _=w.layoutDimensions(e),E=e.avoidOverlapPadding,k=_.w+E,S=_.h+E;y=Math.max(y,k),m=Math.max(m,S)}for(var C={},T=function(t,e){return!!C["c-"+t+"-"+e]},N=function(t,e){C["c-"+t+"-"+e]=!0},O=0,P=0,M=function(){++P>=l&&(P=0,O++)},D={},A=0;A<r.length;A++){var L=r[A],I=e.position(L);if(I&&(void 0!==I.row||void 0!==I.col)){var R={row:I.row,col:I.col};if(void 0===R.col)for(R.col=0;T(R.row,R.col);)R.col++;else if(void 0===R.row)for(R.row=0;T(R.row,R.col);)R.row++;D[L.id()]=R,N(R.row,R.col)}}r.layoutPositions(this,e,(function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var o=D[t.id()];if(o)n=o.col*y+y/2+i.x1,r=o.row*m+m/2+i.y1;else{for(;T(O,P);)M();n=P*y+y/2+i.x1,r=O*m+m/2+i.y1,N(O,P),M()}return{x:n,y:r}}))}return this};var jE={ready:function(){},stop:function(){}};function FE(t){this.options=iy({},jE,t)}FE.prototype.run=function(){var t=this.options,e=t.eles;t.cy;return this.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},FE.prototype.stop=function(){return this};var zE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function VE(t){this.options=iy({},zE,t)}VE.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=Fv(t.positions);return e.layoutPositions(this,t,(function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i})),this};var qE={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function UE(t){this.options=iy({},qE,t)}UE.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles.nodes().not(":parent"),r=wm(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.layoutPositions(this,t,(function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}})),this};var HE=[{name:"breadthfirst",impl:uE},{name:"circle",impl:hE},{name:"concentric",impl:pE},{name:"cose",impl:vE},{name:"grid",impl:BE},{name:"null",impl:FE},{name:"preset",impl:VE},{name:"random",impl:UE}];function WE(t){this.options=t,this.notifications=0}var YE=function(){},GE=function(){throw new Error("A headless instance can not render images")};WE.prototype={recalculateRenderedStyle:YE,notify:function(){this.notifications++},init:YE,isHeadless:function(){return!0},png:GE,jpg:GE};var XE={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){var s=i.x-n/2-a,l=i.x+n/2+a,u=i.y-n/2-a,c=i.y+n/2+a;return s<=t&&t<=l&&u<=e&&e<=c},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},i=function(t,e,n,i){for(var o=[],a=0;a<t.length;a+=2){var s=t[a],l=t[a+1];o.push(r(s,l,e,n,i))}return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},a=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){jv(s)&&(s=t[s]),t[r]=iy({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,a,s){var l=o(i(this.points,n+2*s,r,a));return Lm(t,e,l)},roughCollide:n,draw:function(t,n,r,o){var a=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:a},s)};s("none",{collide:Ny,roughCollide:Ny,draw:Py,spacing:Oy,gap:Oy}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,a,s){var l=i(this.points,n,o,a),u=this.controlPoint,c=r(u[0],u[1],n,o,a);e.arrowShapeImpl(this.name)(t,l,c)},gap:function(t){return.8*a(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.pointsTee,n+2*l,r,a));return Lm(t,e,u)||Lm(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,n,r,a,s,l){var u=a,c=Math.pow(u.x-t,2)+Math.pow(u.y-e,2)<=Math.pow((n+2*l)*this.radius,2),h=o(i(this.points,n+2*l,r,a));return Lm(t,e,h)||c},draw:function(t,n,r,o,a){var s=i(this.pointsTr,n,r,o);e.arrowShapeImpl(this.name)(t,s,o.x,o.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.crossLinePts(n,s),n+2*l,r,a));return Lm(t,e,u)||Lm(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.crossLinePts(n,a),n,r,o);e.arrowShapeImpl(this.name)(t,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*a(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},KE={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((t-i)/a-s.x)/l,((e-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=Mv.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),o=r("padding-right"),a=r("padding-top"),s=r("padding-bottom"),l=r("border-left-width"),u=r("border-right-width"),c=r("border-top-width"),h=(r("border-bottom-width"),t.clientWidth),d=t.clientHeight,f=i+o,p=a+s,g=l+u,v=e.width/(h+g),y=h-f,m=d-p,b=e.left+i+l,w=e.top+a+c;return this.containerBB=[b,w,y,m,v]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,a=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),d=(r?24:8)/c,f=(r?8:2)/c,p=(r?8:2)/c,g=1/0;function v(t,e){if(t.isNode()){if(o)return;o=t,u.push(t)}if(t.isEdge()&&(null==e||e<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=t,i=t,g=null!=e?e:g;break}}else u.push(t),i=t,g=null!=e?e:g}function y(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,o=r/2,l=i/2,u=n.position();if(u.x-o<=t&&t<=u.x+o&&u.y-l<=e&&e<=u.y+l&&s.nodeShapes[a.getNodeShape(n)].checkPoint(t,e,0,r,i,u.x,u.y))return v(n,0),!0}function m(n){var r,i=n._private,o=i.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,f=l/2+d,p=f*f,g=2*f,m=i.source,b=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var w=o.allpts,x=0;x+3<w.length;x+=2)if(Pm(t,e,w[x],w[x+1],w[x+2],w[x+3],g)&&p>(r=Am(t,e,w[x],w[x+1],w[x+2],w[x+3])))return v(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(w=o.allpts,x=0;x+5<o.allpts.length;x+=4)if(Mm(t,e,w[x],w[x+1],w[x+2],w[x+3],w[x+4],w[x+5],g)&&p>(r=Dm(t,e,w[x],w[x+1],w[x+2],w[x+3],w[x+4],w[x+5])))return v(n,r),!0;m=m||i.source,b=b||i.target;var _=a.getArrowWidth(l,c),E=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(x=0;x<E.length;x++){var k=E[x],S=s.arrowShapes[n.pstyle(k.name+"-arrow-shape").value],C=n.pstyle("width").pfValue;if(S.roughCollide(t,e,_,k.angle,{x:k.x,y:k.y},C,d)&&S.collide(t,e,_,k.angle,{x:k.x,y:k.y},C,d))return v(n),!0}h&&u.length>0&&(y(m),y(b))}function b(t,e,n){return Vy(t,e,n)}function w(n,r){var i,o=n._private,a=p;i=r?r+"-":"",n.boundingBox();var s=o.labelBounds[r||"main"],l=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var u=o.rstyle,c=b(u,"labelX",r),h=b(u,"labelY",r),d=b(o.rscratch,"labelAngle",r),f=s.x1-a,g=s.x2+a,y=s.y1-a,m=s.y2+a;if(d){var w=Math.cos(d),x=Math.sin(d),_=function(t,e){return{x:(t-=c)*w-(e-=h)*x+c,y:t*x+e*w+h}},E=_(f,y),k=_(f,m),S=_(g,y),C=_(g,m),T=[E.x,E.y,S.x,S.y,C.x,C.y,k.x,k.y];if(Lm(t,e,T))return v(n),!0}else if(Tm(s,t,e))return v(n),!0}}n&&(l=l.interactive);for(var x=l.length-1;x>=0;x--){var _=l[x];_.isNode()?y(_)||w(_):m(_)||w(_)||w(_,"source")||w(_,"target")}return u},getAllInBox:function(t,e,n,r){for(var i,o,a=this.getCachedZSortedEles().interactive,s=[],l=Math.min(t,n),u=Math.max(t,n),c=Math.min(e,r),h=Math.max(e,r),d=wm({x1:t=l,y1:e=c,x2:n=u,y2:r=h}),f=0;f<a.length;f++){var p=a[f];if(p.isNode()){var g=p,v=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Cm(d,v)&&!Nm(v,d)&&s.push(g)}else{var y=p,m=y._private,b=m.rscratch;if(null!=b.startX&&null!=b.startY&&!Tm(d,b.startX,b.startY))continue;if(null!=b.endX&&null!=b.endY&&!Tm(d,b.endX,b.endY))continue;if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var w=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,x=!0,_=0;_<w.length;_++)if(i=d,o=w[_],!Tm(i,o.x,o.y)){x=!1;break}x&&s.push(y)}else"haystack"!==b.edgeType&&"straight"!==b.edgeType||s.push(y)}}return s}},$E={calculateArrowAngles:function(t){var e,n,r,i,o,a,s=t._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;if(l?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),g=s.midX,v=s.midY,h)e=r-s.segpts[0],n=i-s.segpts[1];else if(c||d||f||u){var p=s.allpts;e=r-ym(p[0],p[2],p[4],.1),n=i-ym(p[1],p[3],p[5],.1)}else e=r-g,n=i-v;s.srcArrowAngle=hm(e,n);var g=s.midX,v=s.midY;if(l&&(g=(r+o)/2,v=(i+a)/2),e=o-r,n=a-i,h)if((p=s.allpts).length/2%2==0){var y=(m=p.length/2)-2;e=p[m]-p[y],n=p[m+1]-p[y+1]}else{y=(m=p.length/2-1)-2;var m,b=m+2;e=p[m]-p[y],n=p[m+1]-p[y+1]}else if(c||d||f){var w,x,_,E,p=s.allpts;if(s.ctrlpts.length/2%2==0){var k=(S=(C=p.length/2-1)+2)+2;w=ym(p[C],p[S],p[k],0),x=ym(p[C+1],p[S+1],p[k+1],0),_=ym(p[C],p[S],p[k],1e-4),E=ym(p[C+1],p[S+1],p[k+1],1e-4)}else{var S,C;k=(S=p.length/2-1)+2;w=ym(p[C=S-2],p[S],p[k],.4999),x=ym(p[C+1],p[S+1],p[k+1],.4999),_=ym(p[C],p[S],p[k],.5),E=ym(p[C+1],p[S+1],p[k+1],.5)}e=_-w,n=E-x}(s.midtgtArrowAngle=hm(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,h)&&((p=s.allpts).length/2%2==0||(e=-(p[b=(m=p.length/2-1)+2]-p[m]),n=-(p[b+1]-p[m+1])));if(s.midsrcArrowAngle=hm(e,n),h)e=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(c||d||f||u){var T=(p=s.allpts).length;e=o-ym(p[T-6],p[T-4],p[T-2],.9),n=a-ym(p[T-5],p[T-3],p[T-1],.9)}else e=o-g,n=a-v;s.tgtArrowAngle=hm(e,n)}};$E.getArrowWidth=$E.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var ZE={};function JE(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}ZE.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,l=a.position(),u=s.position(),c=a.width(),h=s.width(),d=a.height(),f=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*h*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},ZE.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,a=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<u;c++){var h=s.pfValue[c],d=l.pfValue[c],f=1-h,p=h,g="node-position"===a?r:i,v={x:g.x1*f+g.x2*p,y:g.y1*f+g.y2*p};n.segpts.push(v.x+o.x*d,v.y+o.y*d)}},ZE.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,f=h;r&&(d=0,f=l);var p=u-Math.PI/2,g=p-c/2,v=p+c/2,y=String(u+"_"+c);d=void 0===o[y]?o[y]=0:++o[y],i.ctrlpts=[a.x+1.4*Math.cos(g)*f*(d/3+1),a.y+1.4*Math.sin(g)*f*(d/3+1),a.x+1.4*Math.cos(v)*f*(d/3+1),a.y+1.4*Math.sin(v)*f*(d/3+1)]},ZE.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=n,g=h;r&&(p=0,g=f);var v={x:o.x-s/2,y:o.y-l/2},y={x:a.x-u/2,y:a.y-c/2},m={x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},b=Math.max(.5,Math.log(.01*s)),w=Math.max(.5,Math.log(.01*u));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*b,m.x-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*w,m.y]},ZE.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},ZE.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),f=h&&d?Math.min(h.value.length,d.value.length):1,p=h?h.pfValue[0]:void 0,g=d.value[0],v=r;o.edgeType=v?"multibezier":"bezier",o.ctrlpts=[];for(var y=0;y<f;y++){var m=(.5-e.eles.length/2+n)*c*(i?-1:1),b=void 0,w=fm(m);v&&(p=h?h.pfValue[y]:c,g=d.value[y]);var x=void 0!==(b=r?p:void 0!==p?w*p:void 0)?b:m,_=1-g,E=g,k="node-position"===u?s:l,S={x:k.x1*_+k.x2*E,y:k.y1*_+k.y2*E};o.ctrlpts.push(S.x+a.x*x,S.y+a.y*x)}},ZE.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,o=e.srcH,a=e.tgtW,s=e.tgtH,l="node-position"!==t.pstyle("edge-distances").value,u=t.pstyle("taxi-direction").value,c=u,h=t.pstyle("taxi-turn"),d="%"===h.units,f=h.pfValue,p=f<0,g=t.pstyle("taxi-turn-min-distance").pfValue,v=l?(i+a)/2:0,y=l?(o+s)/2:0,m=r.x2-r.x1,b=r.y2-r.y1,w=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},x=w(m,v),_=w(b,y),E=!1;"auto"===c?u=Math.abs(x)>Math.abs(_)?"horizontal":"vertical":"upward"===c||"downward"===c?(u="vertical",E=!0):"leftward"!==c&&"rightward"!==c||(u="horizontal",E=!0);var k,S="vertical"===u,C=S?_:x,T=S?b:m,N=fm(T),O=!1;(E&&(d||p)||!("downward"===c&&T<0||"upward"===c&&T>0||"leftward"===c&&T>0||"rightward"===c&&T<0)||(C=(N*=-1)*Math.abs(C),O=!0),d)?k=(f<0?1+f:f)*C:k=(f<0?C:0)+f*N;var P=function(t){return Math.abs(t)<g||Math.abs(t)>=Math.abs(C)},M=P(k),D=P(Math.abs(C)-Math.abs(k));if((M||D)&&!O)if(S){var A=Math.abs(T)<=o/2,L=Math.abs(m)<=a/2;if(A){var I=(r.x1+r.x2)/2,R=r.y1,B=r.y2;n.segpts=[I,R,I,B]}else if(L){var j=(r.y1+r.y2)/2,F=r.x1,z=r.x2;n.segpts=[F,j,z,j]}else n.segpts=[r.x1,r.y2]}else{var V=Math.abs(T)<=i/2,q=Math.abs(b)<=s/2;if(V){var U=(r.y1+r.y2)/2,H=r.x1,W=r.x2;n.segpts=[H,U,W,U]}else if(q){var Y=(r.x1+r.x2)/2,G=r.y1,X=r.y2;n.segpts=[Y,G,Y,X]}else n.segpts=[r.x2,r.y1]}else if(S){var K=r.y1+k+(l?o/2*N:0),$=r.x1,Z=r.x2;n.segpts=[$,K,Z,K]}else{var J=r.x1+k+(l?i/2*N:0),Q=r.y1,tt=r.y2;n.segpts=[J,Q,J,tt]}},ZE.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,h=!qv(n.startX)||!qv(n.startY),d=!qv(n.arrowStartX)||!qv(n.arrowStartY),f=!qv(n.endX)||!qv(n.endY),p=!qv(n.arrowEndX)||!qv(n.arrowEndY),g=3*(this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth),v=pm({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=v<g,m=pm({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=m<g,w=!1;if(h||d||y){w=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},_=Math.sqrt(x.x*x.x+x.y*x.y),E={x:x.x/_,y:x.y/_},k=Math.max(o,a),S={x:n.ctrlpts[0]+2*E.x*k,y:n.ctrlpts[1]+2*E.y*k},C=u.intersectLine(r.x,r.y,o,a,S.x,S.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+E.x*(g-v),n.ctrlpts[1]=n.ctrlpts[1]+E.y*(g-v)):(n.ctrlpts[0]=C[0]+E.x*g,n.ctrlpts[1]=C[1]+E.y*g)}if(f||p||b){w=!0;var T={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},N=Math.sqrt(T.x*T.x+T.y*T.y),O={x:T.x/N,y:T.y/N},P=Math.max(o,a),M={x:n.ctrlpts[0]+2*O.x*P,y:n.ctrlpts[1]+2*O.y*P},D=c.intersectLine(i.x,i.y,s,l,M.x,M.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+O.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+O.y*(g-m)):(n.ctrlpts[0]=D[0]+O.x*g,n.ctrlpts[1]=D[1]+O.y*g)}w&&this.findEndpoints(t)}},ZE.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,.5,e.midX=ym(e.allpts[r],e.allpts[r+2],e.allpts[r+4],.5),e.midY=ym(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var a=e.segpts.length/2-1;e.midX=e.segpts[a],e.midY=e.segpts[a+1]}},ZE.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||qv(e.startX)&&qv(e.startY)&&qv(e.endX)&&qv(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ay("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},ZE.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new Uy,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var n=this.map.get(t[0]);null==n&&(n=new Uy,this.map.set(t[0],n)),n.set(t[1],e)}},o=[],a=[],s=0;s<t.length;s++){var l=t[s],u=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var h="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,d="unbundled-bezier"===c||"bezier"===c,f=u.source,p=u.target,g=[f.poolIndex(),p.poolIndex()].sort(),v=i.get(g);null==v&&(v={eles:[]},i.set(g,v),o.push(g)),v.eles.push(l),h&&(v.hasUnbundled=!0),d&&(v.hasBezier=!0)}else a.push(l)}for(var y=function(t){var a=o[t],s=i.get(a),l=void 0;if(!s.hasUnbundled){var u=s.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));zy(s.eles),u.forEach((function(t){return s.eles.push(t)})),s.eles.sort((function(t,e){return t.poolIndex()-e.poolIndex()}))}var c=s.eles[0],h=c.source(),d=c.target();if(h.poolIndex()>d.poolIndex()){var f=h;h=d,d=f}var p=s.srcPos=h.position(),g=s.tgtPos=d.position(),v=s.srcW=h.outerWidth(),y=s.srcH=h.outerHeight(),m=s.tgtW=d.outerWidth(),b=s.tgtH=d.outerHeight(),w=s.srcShape=n.nodeShapes[e.getNodeShape(h)],x=s.tgtShape=n.nodeShapes[e.getNodeShape(d)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _=0;_<s.eles.length;_++){var E=s.eles[_],k=E[0]._private.rscratch,S=E.pstyle("curve-style").value,C="unbundled-bezier"===S||"segments"===S||"taxi"===S,T=!h.same(E.source());if(!s.calculatedIntersection&&h!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var N=w.intersectLine(p.x,p.y,v,y,g.x,g.y,0),O=s.srcIntn=N,P=x.intersectLine(g.x,g.y,m,b,p.x,p.y,0),M=s.tgtIntn=P,D=s.intersectionPts={x1:N[0],x2:P[0],y1:N[1],y2:P[1]},A=s.posPts={x1:p.x,x2:g.x,y1:p.y,y2:g.y},L=P[1]-N[1],I=P[0]-N[0],R=Math.sqrt(I*I+L*L),B=s.vector={x:I,y:L},j=s.vectorNorm={x:B.x/R,y:B.y/R},F={x:-j.y,y:j.x};s.nodesOverlap=!qv(R)||x.checkPoint(N[0],N[1],0,m,b,g.x,g.y)||w.checkPoint(P[0],P[1],0,v,y,p.x,p.y),s.vectorNormInverse=F,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,tgtPos:p,srcW:m,srcH:b,tgtW:v,tgtH:y,srcIntn:M,tgtIntn:O,srcShape:x,tgtShape:w,posPts:{x1:A.x2,y1:A.y2,x2:A.x1,y2:A.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-F.x,y:-F.y}}}var z=T?l:s;k.nodesOverlap=z.nodesOverlap,k.srcIntn=z.srcIntn,k.tgtIntn=z.tgtIntn,r&&(h.isParent()||h.isChild()||d.isParent()||d.isChild())&&(h.parents().anySame(d)||d.parents().anySame(h)||h.same(d)&&h.isParent())?e.findCompoundLoopPoints(E,z,_,C):h===d?e.findLoopPoints(E,z,_,C):"segments"===S?e.findSegmentsPoints(E,z):"taxi"===S?e.findTaxiPoints(E,z):"straight"===S||!C&&s.eles.length%2==1&&_===Math.floor(s.eles.length/2)?e.findStraightEdgePoints(E):e.findBezierPoints(E,z,_,C,T),e.findEndpoints(E),e.tryToCorrectInvalidPoints(E,z),e.checkForInvalidEdgeWarning(E),e.storeAllpts(E),e.storeEdgeProjections(E),e.calculateArrowAngles(E),e.recalculateEdgeLabelProjections(E),e.calculateLabelAngles(E)}},m=0;m<o.length;m++)y(m);this.findHaystackPoints(a)}},ZE.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),JE(e.segpts)},ZE.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),JE(e.ctrlpts)},ZE.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var QE={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=e.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),l=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},findEndpoints:function(t){var e,n,r,i,o,a=this,s=t.source()[0],l=t.target()[0],u=s.position(),c=l.position(),h=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,p=t.pstyle("source-distance-from-node").pfValue,g=t.pstyle("curve-style").value,v=t._private.rscratch,y=v.edgeType,m="self"===y||"compound"===y,b="bezier"===y||"multibezier"===y||m,w="bezier"!==y,x="straight"===y||"segments"===y,_="segments"===y,E=b||w||x,k=m||"taxi"===g,S=t.pstyle("source-endpoint"),C=k?"outside-to-node":S.value,T=t.pstyle("target-endpoint"),N=k?"outside-to-node":T.value;if(v.srcManEndpt=S,v.tgtManEndpt=T,b){var O=[v.ctrlpts[0],v.ctrlpts[1]];n=w?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:O,r=O}else if(x){var P=_?v.segpts.slice(0,2):[c.x,c.y];n=_?v.segpts.slice(v.segpts.length-2):[u.x,u.y],r=P}if("inside-to-node"===N)e=[c.x,c.y];else if(T.units)e=this.manualEndptToPx(l,T);else if("outside-to-line"===N)e=v.tgtIntn;else if("outside-to-node"===N||"outside-to-node-or-label"===N?i=n:"outside-to-line"!==N&&"outside-to-line-or-label"!==N||(i=[u.x,u.y]),e=a.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===N||"outside-to-line-or-label"===N){var M=l._private.rscratch,D=M.labelWidth,A=M.labelHeight,L=M.labelX,I=M.labelY,R=D/2,B=A/2,j=l.pstyle("text-valign").value;"top"===j?I-=B:"bottom"===j&&(I+=B);var F=l.pstyle("text-halign").value;"left"===F?L-=R:"right"===F&&(L+=R);var z=qm(i[0],i[1],[L-R,I-B,L+R,I-B,L+R,I+B,L-R,I+B],c.x,c.y);if(z.length>0){var V=u,q=gm(V,cm(e)),U=gm(V,cm(z)),H=q;if(U<q&&(e=z,H=U),z.length>2)gm(V,{x:z[2],y:z[3]})<H&&(e=[z[2],z[3]])}}var W=Um(e,n,a.arrowShapes[h].spacing(t)+f),Y=Um(e,n,a.arrowShapes[h].gap(t)+f);if(v.endX=Y[0],v.endY=Y[1],v.arrowEndX=W[0],v.arrowEndY=W[1],"inside-to-node"===C)e=[u.x,u.y];else if(S.units)e=this.manualEndptToPx(s,S);else if("outside-to-line"===C)e=v.srcIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?o=r:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(o=[c.x,c.y]),e=a.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var G=s._private.rscratch,X=G.labelWidth,K=G.labelHeight,$=G.labelX,Z=G.labelY,J=X/2,Q=K/2,tt=s.pstyle("text-valign").value;"top"===tt?Z-=Q:"bottom"===tt&&(Z+=Q);var et=s.pstyle("text-halign").value;"left"===et?$-=J:"right"===et&&($+=J);var nt=qm(o[0],o[1],[$-J,Z-Q,$+J,Z-Q,$+J,Z+Q,$-J,Z+Q],u.x,u.y);if(nt.length>0){var rt=c,it=gm(rt,cm(e)),ot=gm(rt,cm(nt)),at=it;if(ot<it&&(e=[nt[0],nt[1]],at=ot),nt.length>2)gm(rt,{x:nt[2],y:nt[3]})<at&&(e=[nt[2],nt[3]])}}var st=Um(e,r,a.arrowShapes[d].spacing(t)+p),lt=Um(e,r,a.arrowShapes[d].gap(t)+p);v.startX=lt[0],v.startY=lt[1],v.arrowStartX=st[0],v.arrowStartY=st[1],E&&(qv(v.startX)&&qv(v.startY)&&qv(v.endX)&&qv(v.endY)?v.badLine=!1:v.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}},tk={};function ek(t,e,n){for(var r=function(t,e,n,r){return ym(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var a=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}tk.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)ek(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},tk.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var nk={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!Kv(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(u){case"left":n=l.x-o/2-s;break;case"right":n=l.x+o/2+s;break;default:n=l.x}switch(c){case"top":r=l.y-a/2-s;break;case"bottom":r=l.y+a/2+s;break;default:r=l.y}h.labelX=n,h.labelY=r,d.labelX=n,d.labelY=r,this.applyLabelDimensions(t)}}},rk=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},ik=function(t,e){var n=e.x-t.x,r=e.y-t.y;return rk(n,r)};nk.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:r.midX,y:r.midY};var a=function(t,e,r){qy(n.rscratch,t,e,r),qy(n.rstyle,t,e,r)};a("labelX",null,e.x),a("labelY",null,e.y);var s=rk(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var l=function(s){var l,u="source"===s;if(o[s]){var c=t.pstyle(s+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var h,d=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4){var a={x:r.allpts[o],y:r.allpts[o+1]},s={x:r.allpts[o+2],y:r.allpts[o+3]},l={x:r.allpts[o+4],y:r.allpts[o+5]};e.push({p0:a,p1:s,p2:l,startDist:0,length:0,segments:[]})}var u=n.rstyle.bezierPts,c=i.bezierProjPcts.length;function h(t,e,n,r,i){var o=pm(e,n),a=t.segments[t.segments.length-1],s={p0:e,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o};t.segments.push(s),t.length+=o}for(var d=0;d<e.length;d++){var f=e[d],p=e[d-1];p&&(f.startDist=p.startDist+p.length),h(f,f.p0,u[d*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)h(f,u[d*c+g],u[d*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);h(f,u[d*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return t.cache=e}(),f=0,p=0,g=0;g<d.length;g++){for(var v=d[u?g:d.length-1-g],y=0;y<v.segments.length;y++){var m=v.segments[u?y:v.segments.length-1-y],b=g===d.length-1&&y===v.segments.length-1;if(f=p,(p+=m.length)>=c||b){h={cp:v,segment:m};break}}if(h)break}var w=h.cp,x=h.segment,_=(c-f)/x.length,E=x.t1-x.t0,k=u?x.t0+E*_:x.t1-E*_;k=bm(0,k,1),e=mm(w.p0,w.p1,w.p2,k),l=function(t,e,n,r){var i=bm(0,r-.001,1),o=bm(0,r+.001,1),a=mm(t,e,n,i),s=mm(t,e,n,o);return ik(a,s)}(w.p0,w.p1,w.p2,k);break;case"straight":case"segments":case"haystack":for(var S,C,T,N,O=0,P=r.allpts.length,M=0;M+3<P&&(u?(T={x:r.allpts[M],y:r.allpts[M+1]},N={x:r.allpts[M+2],y:r.allpts[M+3]}):(T={x:r.allpts[P-2-M],y:r.allpts[P-1-M]},N={x:r.allpts[P-4-M],y:r.allpts[P-3-M]}),C=O,!((O+=S=pm(T,N))>=c));M+=2);var D=(c-C)/S;D=bm(0,D,1),e=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=pm(t,e),s=i/a,l=o/a;return n=null==n?0:n,r=null!=r?r:n*a,{x:t.x+s*r,y:t.y+l*r}}(T,N,D),l=ik(T,N)}a("labelX",s,e.x),a("labelY",s,e.y),a("labelAutoAngle",s,l)}};l("source"),l("target"),this.applyLabelDimensions(t)}},nk.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},nk.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),o=t.pstyle("line-height").pfValue,a=t.pstyle("text-wrap").strValue,s=Vy(n.rscratch,"labelWrapCachedLines",e)||[],l="wrap"!==a?1:Math.max(s.length,1),u=i.height/l,c=u*o,h=i.width,d=i.height+(l-1)*(o-1)*u;qy(n.rstyle,"labelWidth",e,h),qy(n.rscratch,"labelWidth",e,h),qy(n.rstyle,"labelHeight",e,d),qy(n.rscratch,"labelHeight",e,d),qy(n.rscratch,"labelLineHeight",e,c)},nk.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,a=function(t,r){return r?(qy(n.rscratch,t,e,r),r):Vy(n.rscratch,t,e)};if(!i)return"";"none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if("wrap"===s){var l=a("labelKey");if(null!=l&&a("labelWrapKey")===l)return a("labelWrapCachedText");for(var u=i.split("\n"),c=t.pstyle("text-max-width").pfValue,h="anywhere"===t.pstyle("text-overflow-wrap").value,d=[],f=/[\s\u200b]+/,p=h?"":" ",g=0;g<u.length;g++){var v=u[g],y=this.calculateLabelDimensions(t,v).width;if(h){var m=v.split("").join("â");v=m}if(y>c){for(var b=v.split(f),w="",x=0;x<b.length;x++){var _=b[x],E=0===w.length?_:w+p+_;this.calculateLabelDimensions(t,E).width<=c?w+=_+p:(w&&d.push(w),w=_+p)}w.match(/^[\s\u200b]+$/)||d.push(w)}else d.push(v)}a("labelWrapCachedLines",d),i=a("labelWrapCachedText",d.join("\n")),a("labelWrapKey",l)}else if("ellipsis"===s){for(var k=t.pstyle("text-max-width").pfValue,S="",C=!1,T=0;T<i.length;T++){if(this.calculateLabelDimensions(t,S+i[T]+"â¦").width>k)break;S+=i[T],T===i.length-1&&(C=!0)}return C||(S+="â¦"),S}return i},nk.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},nk.calculateLabelDimensions=function(t,e){var n=wy(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var o=t.pstyle("font-style").strValue,a=1*t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,u=this.labelCalcDiv;u||(u=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(u));var c=u.style;return c.fontFamily=s,c.fontStyle=o,c.fontSize=a,c.fontWeight=l,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none",c.padding="0",c.lineHeight="1",c.whiteSpace="pre",u.textContent=e,r[n]={width:Math.ceil(u.clientWidth/1),height:Math.ceil(u.clientHeight/1)}},nk.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),a=o.strValue;return"none"===a?0:r&&"autorotate"===a?n.labelAutoAngle:"autorotate"===a?0:o.pfValue},nk.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var ok={},ak=!1;ok.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return ak||(Ay("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ak=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var sk={registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++){var i=t[r],o=i._private,a=o.rstyle;a.clean=!1,a.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",(function(t){var e=t.target;r(e)})).on("style.* background.*",(function(t){var e=t.target;r(e,!1)}));var i=function(i){if(i){for(var o=n.onUpdateEleCalcsFns,a=0;a<e.length;a++){var s=e[a],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(r(s.connectedEdges()),l.cleanConnected=!0)}if(o)for(var u=0;u<o.length;u++){(0,o[u])(i,e)}n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(t){return t._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,l=s.rstyle;!a.isEdge()||n(a.source())&&n(a.target())||(l.clean=!1),e&&l.clean||a.removed()||"none"!==a.pstyle("display").value&&("nodes"===s.group?i.push(a):r.push(a),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var p=r[f]._private,g=p.rstyle,v=p.rscratch;g.srcX=v.arrowStartX,g.srcY=v.arrowStartY,g.tgtX=v.arrowEndX,g.tgtY=v.arrowEndY,g.midX=v.midX,g.midY=v.midY,g.labelAngle=v.labelAngle,g.sourceLabelAngle=v.sourceLabelAngle,g.targetLabelAngle=v.targetLabelAngle}}}},lk={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort($x),e.interactive=e.filter((function(t){return t.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},uk={};[KE,$E,ZE,QE,tk,nk,ok,sk,lk].forEach((function(t){iy(uk,t)}));var ck={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;o.addEventListener("load",n),o.addEventListener("error",(function(){o.error=!0}));return"data:"===t.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=e),o.src=t,o}},hk={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)}};hk.binder=function(t){var e,n=this,r=t===window||t===document||t===document.body||(e=t,"undefined"!=typeof HTMLElement&&e instanceof HTMLElement);if(null==n.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});window.addEventListener("test",null,o)}catch(t){}n.supportsPassiveEvents=i}var a=function(e,i,o){var a=Array.prototype.slice.call(arguments);return r&&n.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),n.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},hk.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},hk.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()},hk.load=function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++){var a=n[o];e.emit({originalEvent:r,type:a,position:i})}},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},i=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable())for(var i=0;n&&i<n.length;i++){if((e=n[i]).isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},o=function(t){t[0]._private.rscratch.inDragLayer=!0},a=function(t){t[0]._private.rscratch.isGrabTarget=!0},s=function(t,e){var n=e.addToList;n.has(t)||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},l=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(o),e.neighborhood().stdFilter((function(t){return!r||t.isEdge()})).forEach(o)),n.addToList&&e.forEach((function(t){s(t,n)})),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(o),n.connectedEdges().forEach(o)),e.addToList&&e.addToList.unmerge(n)}}(e,n),h(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},u=l,c=function(e){e&&(t.getCachedZSortedEles().forEach((function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)})),t.updateCachedGrabbedEles())},h=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(o),r.forEach(o)),e.addToList&&r.forEach((function(t){s(t,e)}))}}},d=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},f="undefined"!=typeof MutationObserver,p="undefined"!=typeof ResizeObserver;f?(t.removeObserver=new MutationObserver((function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++){if(r[i]===t.container){t.destroy();break}}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(e){t.destroy()}));var g=Ev((function(){t.cy.resize()}),100);f&&(t.styleObserver=new MutationObserver(g),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",g),p&&(t.resizeObserver=new ResizeObserver(g),t.resizeObserver.observe(t.container));var v=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,(function(e){t.registerBinding(e,"transitionend",v),t.registerBinding(e,"animationend",v),t.registerBinding(e,"scroll",v)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var y=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],l=!1,u=0;u<s.length;u++){var c=s[u];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var h=t.container,d=e.target.parentNode,f=!1;d;){if(d===h){f=!0;break}d=d.parentNode}return!!f};t.registerBinding(t.container,"mousedown",(function(e){if(y(e)){e.preventDefault(),d(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,c=t.findNearestElements(o[0],o[1],!0,!1),h=c[0],f=t.dragData.possibleDragElements;t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i;if(3==e.which){t.hoverData.cxtStarted=!0;var p={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};h?(h.activate(),h.emit(p),t.hoverData.down=h):r.emit(p),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(h&&h.activate(),null!=h&&t.nodeIsGrabbable(h)){var g=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(a(h),h.selected()){f=t.dragData.possibleDragElements=r.collection();var v=r.$((function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)}));l(v,{addToList:f}),h.emit(g("grabon")),v.forEach((function(t){t.emit(g("grab"))}))}else f=t.dragData.possibleDragElements=r.collection(),u(h,{addToList:f}),h.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=h,t.hoverData.downs=c,t.hoverData.downTime=(new Date).getTime(),n(h,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==h?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):h.pannable()&&(s[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}}),t.tapholdDuration)}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}}),!1),t.registerBinding(window,"mousemove",(function(e){if(t.hoverData.capture||y(e)){var o=!1,a=t.cy,s=a.zoom(),u=[e.clientX,e.clientY],h=t.projectIntoViewport(u[0],u[1]),d=t.hoverData.mdownPos,f=t.hoverData.mdownGPos,p=t.selection,g=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(g=t.findNearestElement(h[0],h[1],!0,!1));var v,m=t.hoverData.last,b=t.hoverData.down,w=[h[0]-p[2],h[1]-p[3]],x=t.dragData.possibleDragElements;if(f){var _=u[0]-f[0],E=_*_,k=u[1]-f[1],S=E+k*k;t.hoverData.isOverThresholdDrag=v=S>=t.desktopTapThreshold2}var C=r(e);v&&(t.hoverData.tapholdCancelled=!0);o=!0,n(g,["mousemove","vmousemove","tapdrag"],e,{x:h[0],y:h[1]});var T=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:h[0],y:h[1]}}),p[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(v){var N={originalEvent:e,type:"cxtdrag",position:{x:h[0],y:h[1]}};b?b.emit(N):a.emit(N),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&g===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:h[0],y:h[1]}}),t.hoverData.cxtOver=g,g&&g.emit({originalEvent:e,type:"cxtdragover",position:{x:h[0],y:h[1]}}))}}else if(t.hoverData.dragging){if(o=!0,a.panningEnabled()&&a.userPanningEnabled()){var O;if(t.hoverData.justStartedPan){var P=t.hoverData.mdownPos;O={x:(h[0]-P[0])*s,y:(h[1]-P[1])*s},t.hoverData.justStartedPan=!1}else O={x:w[0]*s,y:w[1]*s};a.panBy(O),t.hoverData.dragged=!0}h=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=p[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==m||(m&&n(m,["mouseout","tapdragout"],e,{x:h[0],y:h[1]}),g&&n(g,["mouseover","tapdragover"],e,{x:h[0],y:h[1]}),t.hoverData.last=g),b)if(v){if(a.boxSelectionEnabled()&&C)b&&b.grabbed()&&(c(x),b.emit("freeon"),x.emit("free"),t.dragData.didDrag&&(b.emit("dragfreeon"),x.emit("dragfree"))),T();else if(b&&b.grabbed()&&t.nodeIsDraggable(b)){var M=!t.dragData.didDrag;M&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var D=a.collection();t.hoverData.draggingEles||l(x,{inDragLayer:!0});var A={x:0,y:0};if(qv(w[0])&&qv(w[1])&&(A.x+=w[0],A.y+=w[1],M)){var L=t.hoverData.dragDelta;L&&qv(L[0])&&qv(L[1])&&(A.x+=L[0],A.y+=L[1])}for(var I=0;I<x.length;I++){var R=x[I];t.nodeIsDraggable(R)&&R.grabbed()&&D.merge(R)}t.hoverData.draggingEles=!0,D.silentShift(A).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(w[0]),e.push(w[1])):(e[0]+=w[0],e[1]+=w[1])}();o=!0}else if(v){if(t.hoverData.dragging||!a.boxSelectionEnabled()||!C&&a.panningEnabled()&&a.userPanningEnabled()){if(!t.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()){i(b,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,p[4]=0,t.data.bgActivePosistion=cm(d),t.redrawHint("select",!0),t.redraw())}}else T();b&&b.pannable()&&b.active()&&b.unactivate()}return p[2]=h[0],p[3]=h[1],o?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}}),!1),t.registerBinding(window,"mouseup",(function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,a=t.projectIntoViewport(i.clientX,i.clientY),s=t.selection,l=t.findNearestElement(a[0],a[1],!0,!1),u=t.dragData.possibleDragElements,h=t.hoverData.down,d=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,h&&h.unactivate(),3===t.hoverData.which){var f={originalEvent:i,type:"cxttapend",position:{x:a[0],y:a[1]}};if(h?h.emit(f):o.emit(f),!t.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:a[0],y:a[1]}};h?h.emit(p):o.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(l,["mouseup","tapend","vmouseup"],i,{x:a[0],y:a[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||n(h,["click","tap","vclick"],i,{x:a[0],y:a[1]}),null!=h||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(o.$(e).unselect(["tapunselect"]),u.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=u=o.collection()),l!=h||t.dragData.didDrag||t.hoverData.selecting||null!=l&&l._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(o.$(e).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var g=o.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),g.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:a[0],y:a[1]}});var v=function(t){return t.selectable()&&!t.selected()};"additive"===o.selectionType()||d||o.$(e).unmerge(g).unselect(),g.emit("box").stdFilter(v).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var y=h&&h.grabbed();c(u),y&&(h.emit("freeon"),u.emit("free"),t.dragData.didDrag&&(h.emit("dragfreeon"),u.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}}),!1);var m,b,w,x,_,E,k,S,C,T,N,O,P,M=function(e){if(!t.scrollingPage){var n=t.cy,r=n.zoom(),i=n.pan(),o=t.projectIntoViewport(e.clientX,e.clientY),a=[o[0]*r+i.x,o[1]*r+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])e.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){var s;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),s=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,s*=t.wheelSensitivity,1===e.deltaMode&&(s*=33);var l=n.zoom()*Math.pow(10,s);"gesturechange"===e.type&&(l=t.gestureStartZoom*e.scale),n.zoom({level:l,renderedPosition:{x:a[0],y:a[1]}})}}};t.registerBinding(t.container,"wheel",M,!0),t.registerBinding(window,"scroll",(function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"gesturestart",(function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()}),!0),t.registerBinding(t.container,"gesturechange",(function(e){t.hasTouchStarted||M(e)}),!0),t.registerBinding(t.container,"mouseout",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})}),!1);var D,A,L,I,R=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},B=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",D=function(e){if(t.hasTouchStarted=!0,y(e)){d(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var s=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(e.touches[1]){s=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=s[0],i[3]=s[1]}if(e.touches[2]){s=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=s[0],i[5]=s[1]}if(e.touches[1]){t.touchData.singleTouchMoved=!0,c(t.dragData.touchDragEles);var h=t.findContainerClientCoords();C=h[0],T=h[1],N=h[2],O=h[3],m=e.touches[0].clientX-C,b=e.touches[0].clientY-T,w=e.touches[1].clientX-C,x=e.touches[1].clientY-T,P=0<=m&&m<=N&&0<=w&&w<=N&&0<=b&&b<=O&&0<=x&&x<=O;var f=r.pan(),p=r.zoom();_=R(m,b,w,x),E=B(m,b,w,x),S=[((k=[(m+w)/2,(b+x)/2])[0]-f.x)/p,(k[1]-f.y)/p];if(E<4e4&&!e.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),v=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):v&&v.isNode()?(v.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=v):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])r.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var M=t.findNearestElements(i[0],i[1],!0,!0),D=M[0];if(null!=D&&(D.activate(),t.touchData.start=D,t.touchData.starts=M,t.nodeIsGrabbable(D))){var A=t.dragData.touchDragEles=r.collection(),L=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),D.selected()?(L=r.$((function(e){return e.selected()&&t.nodeIsGrabbable(e)})),l(L,{addToList:A})):u(D,{addToList:A}),a(D);var I=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};D.emit(I("grabon")),L?L.forEach((function(t){t.emit(I("grab"))})):D.emit(I("grab"))}n(D,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==D&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})}),t.tapholdDuration)}if(e.touches.length>=1){for(var j=t.touchData.startPosition=[],F=0;F<i.length;F++)j[F]=o[F]=i[F];var z=e.touches[0];t.touchData.startGPosition=[z.clientX,z.clientY]}}},!1),t.registerBinding(window,"touchmove",A=function(e){var r=t.touchData.capture;if(r||y(e)){var o=t.selection,a=t.cy,s=t.touchData.now,u=t.touchData.earlier,h=a.zoom();if(e.touches[0]){var d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(e.touches[1]){d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(e.touches[2]){d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);s[4]=d[0],s[5]=d[1]}var f,p=t.touchData.startGPosition;if(r&&e.touches[0]&&p){for(var g=[],v=0;v<s.length;v++)g[v]=s[v]-u[v];var k=e.touches[0].clientX-p[0],N=k*k,O=e.touches[0].clientY-p[1];f=N+O*O>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var M=e.touches[0].clientX-C,D=e.touches[0].clientY-T,A=e.touches[1].clientX-C,L=e.touches[1].clientY-T,I=B(M,D,A,L);if(I/E>=2.25||I>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var j={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(j),t.touchData.start=null):a.emit(j)}}if(r&&t.touchData.cxt){j={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(j):a.emit(j),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var F=t.findNearestElement(s[0],s[1],!0,!0);t.touchData.cxtOver&&F===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=F,F&&F.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&e.touches[2]&&a.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,o[4]=1,o&&0!==o.length&&void 0!==o[0]?(o[2]=(s[0]+s[2]+s[4])/3,o[3]=(s[1]+s[3]+s[5])/3):(o[0]=(s[0]+s[2]+s[4])/3,o[1]=(s[1]+s[3]+s[5])/3,o[2]=(s[0]+s[2]+s[4])/3+1,o[3]=(s[1]+s[3]+s[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(r&&e.touches[1]&&!t.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),Q=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var z=0;z<Q.length;z++){var V=Q[z]._private;V.grabbed=!1,V.rscratch.inDragLayer=!1}}var q=t.touchData.start,U=(M=e.touches[0].clientX-C,D=e.touches[0].clientY-T,A=e.touches[1].clientX-C,L=e.touches[1].clientY-T,R(M,D,A,L)),H=U/_;if(P){var W=(M-m+(A-w))/2,Y=(D-b+(L-x))/2,G=a.zoom(),X=G*H,K=a.pan(),$=S[0]*G+K.x,Z=S[1]*G+K.y,J={x:-X/G*($-K.x-W)+$,y:-X/G*(Z-K.y-Y)+Z};if(q&&q.active()){var Q=t.dragData.touchDragEles;c(Q),t.redrawHint("drag",!0),t.redrawHint("eles",!0),q.unactivate().emit("freeon"),Q.emit("free"),t.dragData.didDrag&&(q.emit("dragfreeon"),Q.emit("dragfree"))}a.viewport({zoom:X,pan:J,cancelOnFailedZoom:!0}),_=U,m=M,b=D,w=A,x=L,t.pinching=!0}if(e.touches[0]){d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(e.touches[1]){d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(e.touches[2]){d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);s[4]=d[0],s[5]=d[1]}}else if(e.touches[0]&&!t.touchData.didSelect){var tt=t.touchData.start,et=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(F=t.findNearestElement(s[0],s[1],!0,!0)),r&&null!=tt&&e.preventDefault(),r&&null!=tt&&t.nodeIsDraggable(tt))if(f){Q=t.dragData.touchDragEles;var nt=!t.dragData.didDrag;nt&&l(Q,{inDragLayer:!0}),t.dragData.didDrag=!0;var rt={x:0,y:0};if(qv(g[0])&&qv(g[1]))if(rt.x+=g[0],rt.y+=g[1],nt)t.redrawHint("eles",!0),(it=t.touchData.dragDelta)&&qv(it[0])&&qv(it[1])&&(rt.x+=it[0],rt.y+=it[1]);t.hoverData.draggingEles=!0,Q.silentShift(rt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==u[0]&&t.touchData.startPosition[1]==u[1]&&t.redrawHint("eles",!0),t.redraw()}else{var it;0===(it=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(it.push(g[0]),it.push(g[1])):(it[0]+=g[0],it[1]+=g[1])}if(n(tt||F,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),tt&&tt.grabbed()||F==et||(et&&et.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),F&&F.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=F,r)for(z=0;z<s.length;z++)s[z]&&t.touchData.startPosition[z]&&f&&(t.touchData.singleTouchMoved=!0);if(r&&(null==tt||tt.pannable())&&a.panningEnabled()&&a.userPanningEnabled()){i(tt,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=cm(t.touchData.startPosition)),t.swipePanning?a.panBy({x:g[0]*h,y:g[1]*h}):f&&(t.swipePanning=!0,a.panBy({x:k*h,y:O*h}),tt&&(tt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=d[0],s[1]=d[1]}}for(v=0;v<s.length;v++)u[v]=s[v];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",L=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",I=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var a,s=t.cy,l=s.zoom(),u=t.touchData.now,h=t.touchData.earlier;if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(r.touches[1]){d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=d[0],u[3]=d[1]}if(r.touches[2]){d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=d[0],u[5]=d[1]}if(i&&i.unactivate(),t.touchData.cxt){if(a={originalEvent:r,type:"cxttapend",position:{x:u[0],y:u[1]}},i?i.emit(a):s.emit(a),!t.touchData.cxtDragged){var f={originalEvent:r,type:"cxttap",position:{x:u[0],y:u[1]}};i?i.emit(f):s.emit(f)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=s.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:u[0],y:u[1]}});p.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var v=i._private.grabbed;c(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),v&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]}),i.unactivate(),t.touchData.start=null}else{var y=t.findNearestElement(u[0],u[1],!0,!0);n(y,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]})}var m=t.touchData.startPosition[0]-u[0],b=m*m,w=t.touchData.startPosition[1]-u[1],x=(b+w*w)*l*l;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:u[0],y:u[1]})),null!=i&&!t.dragData.didDrag&&i._private.selectable&&x<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var _=0;_<u.length;_++)h[_]=u[_];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),r.touches.length<2&&(1===r.touches.length&&(t.touchData.startGPosition=[r.touches[0].clientX,r.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var j=[],F=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},z=function(t){j.push(function(t){return{event:t,touch:F(t)}}(t))},V=function(t){for(var e=0;e<j.length;e++){if(j[e].event.pointerId===t.pointerId)return void j.splice(e,1)}},q=function(t){t.touches=j.map((function(t){return t.touch}))},U=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){U(t)||(t.preventDefault(),z(t),q(t),D(t))})),t.registerBinding(t.container,"pointerup",(function(t){U(t)||(V(t),q(t),I(t))})),t.registerBinding(t.container,"pointercancel",(function(t){U(t)||(V(t),q(t),L())})),t.registerBinding(t.container,"pointermove",(function(t){U(t)||(t.preventDefault(),function(t){var e=j.filter((function(e){return e.event.pointerId===t.pointerId}))[0];e.event=t,e.touch=F(t)}(t),q(t),A(t))}))}};var dk={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return qm(i,o,this.points,t,e,n/2,r/2,a)},checkPoint:function(t,e,n,r,i,o,a){return Im(t,e,this.points,o,a,r,i,[0,-1],n)}}}};dk.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-t)*c+t,(r-e)*c+e]}(i,o,t,e,n/2+a,r/2+a)},checkPoint:function(t,e,n,r,i,o,a){return jm(t,e,r,i,o,a,n)}}},dk.generateRoundPolygon=function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var i=2*r,o=void 0;o=r<e.length/2-1?2*(r+1):0,n[4*r]=e[i],n[4*r+1]=e[i+1];var a=e[o]-e[i],s=e[o+1]-e[i+1],l=Math.sqrt(a*a+s*s);n[4*r+2]=a/l,n[4*r+3]=s/l}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("round-polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o,a,s){for(var l,u=[],c=new Array(n.length),h=o/2,d=a/2,f=Xm(o,a),p=0;p<n.length/4;p++){var g,v=void 0;v=0===p?n.length-2:4*p-2,g=4*p+2;var y=r+h*n[4*p],m=i+d*n[4*p+1],b=-n[v]*n[g]-n[v+1]*n[g+1],w=f/Math.tan(Math.acos(b)/2),x=y-w*n[v],_=m-w*n[v+1],E=y+w*n[g],k=m+w*n[g+1];0===p?(c[n.length-2]=x,c[n.length-1]=_):(c[4*p-2]=x,c[4*p-1]=_),c[4*p]=E,c[4*p+1]=k;var S=n[v+1],C=-n[v];S*n[g]+C*n[g+1]<0&&(S*=-1,C*=-1),0!==(l=Fm(t,e,r,i,x+S*f,_+C*f,f)).length&&u.push(l[0],l[1])}for(var T=0;T<c.length/4;T++)0!==(l=Vm(t,e,r,i,c[4*T],c[4*T+1],c[4*T+2],c[4*T+3],!1)).length&&u.push(l[0],l[1]);if(u.length>2){for(var N=[u[0],u[1]],O=Math.pow(N[0]-t,2)+Math.pow(N[1]-e,2),P=1;P<u.length/2;P++){var M=Math.pow(u[2*P]-t,2)+Math.pow(u[2*P+1]-e,2);M<=O&&(N[0]=u[2*P],N[1]=u[2*P+1],O=M)}return N}return u}(i,o,this.points,t,e,n,r)},checkPoint:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o,a){for(var s=new Array(n.length),l=o/2,u=a/2,c=Xm(o,a),h=c*c,d=0;d<n.length/4;d++){var f,p=void 0;p=0===d?n.length-2:4*d-2,f=4*d+2;var g=r+l*n[4*d],v=i+u*n[4*d+1],y=-n[p]*n[f]-n[p+1]*n[f+1],m=c/Math.tan(Math.acos(y)/2),b=g-m*n[p],w=v-m*n[p+1],x=g+m*n[f],_=v+m*n[f+1];s[4*d]=b,s[4*d+1]=w,s[4*d+2]=x,s[4*d+3]=_;var E=n[p+1],k=-n[p];E*n[f]+k*n[f+1]<0&&(E*=-1,k*=-1);var S=b+E*c,C=w+k*c;if(Math.pow(S-t,2)+Math.pow(C-e,2)<=h)return!0}return Lm(t,e,s)}(t,e,this.points,o,a,r,i)}}},dk.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Hm(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return Om(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Gm(r,i),l=2*s;return!!Im(t,e,this.points,o,a,r,i-l,[0,-1],n)||(!!Im(t,e,this.points,o,a,r-l,i,[0,-1],n)||(!!jm(t,e,l,l,o-r/2+s,a-i/2+s,n)||(!!jm(t,e,l,l,o+r/2-s,a-i/2+s,n)||(!!jm(t,e,l,l,o+r/2-s,a+i/2-s,n)||!!jm(t,e,l,l,o-r/2+s,a+i/2-s,n)))))}}},dk.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Hm(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,l=n+a,u=r-o,c=r+o;return{topLeft:[s,u+i,s+i,u,s+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,t,e),l=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return qm(i,o,l,t,e)},checkPoint:function(t,e,n,r,i,o,a){if(Im(t,e,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n))return!0;if(Im(t,e,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return Lm(t,e,s.topLeft)||Lm(t,e,s.topRight)||Lm(t,e,s.bottomRight)||Lm(t,e,s.bottomLeft)}}},dk.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Hm(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateBarrelBezierPts(n+2*a,r+2*a,t,e),l=function(t){var e=mm({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=mm({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=mm({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},u=[].concat(l(s.topLeft),l(s.topRight),l(s.bottomRight),l(s.bottomLeft));return qm(i,o,u,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,a=n-o,s=n+o,l=r-i,u=r+i,c=Km(t,e),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*t,p={topLeft:[a,l+h,a+f,l,a+d,l],topRight:[s-d,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-d,u],bottomLeft:[a+d,u,a+f,u,a,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(t,e,n,r,i,o,a){var s=Km(r,i),l=s.heightOffset,u=s.widthOffset;if(Im(t,e,this.points,o,a,r,i-2*l,[0,-1],n))return!0;if(Im(t,e,this.points,o,a,r-2*u,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,i,o,a),h=function(t,e,n){var r,i,o=n[4],a=n[2],s=n[0],l=n[5],u=n[1],c=Math.min(o,s),h=Math.max(o,s),d=Math.min(l,u),f=Math.max(l,u);if(c<=t&&t<=h&&d<=e&&e<=f){var p=[(r=o)-2*(i=a)+s,2*(i-r),r],g=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]}(p[0],p[1],p[2],t).filter((function(t){return 0<=t&&t<=1}));if(g.length>0)return g[0]}return null},d=Object.keys(c),f=0;f<d.length;f++){var p=c[d[f]],g=h(t,e,p);if(null!=g){var v=p[5],y=p[3],m=p[1],b=ym(v,y,m,g);if(p.isTop&&b<=e)return!0;if(p.isBottom&&e<=b)return!0}}return!1}}},dk.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Hm(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=e-(r/2+a),l=Vm(i,o,t,e,t-(n/2+a),s,t+(n/2+a),s,!1);return l.length>0?l:Om(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Gm(r,i),l=2*s;if(Im(t,e,this.points,o,a,r,i-l,[0,-1],n))return!0;if(Im(t,e,this.points,o,a,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!Lm(t,e,[o-u,a-c,o-u,a,o+u,a,o+u,a-c])||(!!jm(t,e,l,l,o+r/2-s,a+i/2-s,n)||!!jm(t,e,l,l,o-r/2+s,a+i/2-s,n))}}},dk.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Hm(3,0)),this.generateRoundPolygon("round-triangle",Hm(3,0)),this.generatePolygon("rectangle",Hm(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Hm(5,0)),this.generateRoundPolygon("round-pentagon",Hm(5,0)),this.generatePolygon("hexagon",Hm(6,0)),this.generateRoundPolygon("round-hexagon",Hm(6,0)),this.generatePolygon("heptagon",Hm(7,0)),this.generateRoundPolygon("round-heptagon",Hm(7,0)),this.generatePolygon("octagon",Hm(8,0)),this.generateRoundPolygon("round-octagon",Hm(8,0));var r=new Array(20),i=Ym(5,0),o=Ym(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=o[2*s],r[4*s+3]=o[2*s+1];r=Wm(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}};var fk={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||By();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&My("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort((function(t,e){return e.priority-t.priority}))}}},pk=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};fk.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;dy((function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){pk(t,!0,r);var i=fy();t.render(t.renderOptions);var o=t.lastDrawTime=fy();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=o-i;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}else pk(t,!1,r);t.skipFrame=!1,dy(n)}}))}};var gk=function(t){this.init(t)},vk=gk.prototype;vk.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],vk.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(Mv){var r=Mv.document,i=r.head,o="__________cytoscape_container",a=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(o)<0&&(n.className=(n.className||"")+" "+o),!a){var s=r.createElement("style");s.id="__________cytoscape_stylesheet",s.innerHTML="."+o+" { position: relative; }",i.insertBefore(s,i.children[0])}"static"===Mv.getComputedStyle(n).getPropertyValue("position")&&Ay("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=qv(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},vk.notify=function(t,e){var n=this,r=n.cy;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&r.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},vk.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},vk.isHeadless=function(){return!1},[XE,uk,ck,hk,dk,fk].forEach((function(t){iy(vk,t)}));var yk=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=Ev((function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()}),t.deqRedrawThreshold),i=t.priority||Py;n.beforeRender((function(i,o){var a=fy(),s=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=fy(),f=d-a,p=d-o;if(l<1e3/60){var g=1e3/60-(i?s:0);if(p>=t.deqFastCost*g)break}else if(i){if(f>=t.deqCost*l||f>=t.deqAvgCost*s)break}else if(p>=t.deqNoDrawCost*(1e3/60))break;var v=t.deq(e,h,c);if(!(v.length>0))break;for(var y=0;y<v.length;y++)u.push(v[y])}u.length>0&&(t.onDeqd(e,u),!i&&t.shouldRedraw(e,u,h,c)&&r())}),i(e))}}},mk=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ny;Cv(this,t),this.idsByKey=new Uy,this.keyForId=new Uy,this.cachesByLvl=new Uy,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return Nv(t,[{key:"getIdsFor",value:function(t){null==t&&My("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Wy,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new Uy,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach((function(n){return e.deleteCache(t,n)}))}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),bk={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},wk=jy({getKey:null,doesEleInvalidateKey:Ny,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ty,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xk=function(t,e){this.renderer=t,this.onDequeues=[];var n=wk(e);iy(this,n),this.lookup=new mk(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},_k=xk.prototype;_k.reasons=bk,_k.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},_k.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},_k.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new kv((function(t,e){return e.reqs-t.reqs}))},_k.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},_k.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible())return null;if(!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(dm(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var u=Math.pow(2,r),c=e.h*u,h=e.w*u,d=a.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var f,p=l.get(t,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(f=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||h>1024)return null;var g=o.getTextureQueue(f),v=g[g.length-2],y=function(){return o.recycleTexture(f,h)||o.addTexture(f,h)};v||(v=g[g.length-1]),v||(v=y()),v.width-v.usedWidth<h&&(v=y());for(var m,b=function(t){return t&&t.scaledLabelShown===d},w=i&&i===bk.dequeue,x=i&&i===bk.highQuality,_=i&&i===bk.downscale,E=r+1;E<=3;E++){var k=l.get(t,E);if(k){m=k;break}}var S=m&&m.level===r+1?m:null,C=function(){v.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,v.usedWidth,0,h,c)};if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,h,f),b(S))C();else if(b(m)){if(!x)return o.queueElement(t,m.level-1),m;for(var T=m.level;T>r;T--)S=o.getElement(t,e,n,T,bk.downscale);C()}else{var N;if(!w&&!x&&!_)for(var O=r-1;O>=-4;O--){var P=l.get(t,O);if(P){N=P;break}}if(b(N))return o.queueElement(t,r),N;v.context.translate(v.usedWidth,0),v.context.scale(u,u),this.drawElement(v.context,t,e,d,!1),v.context.scale(1/u,1/u),v.context.translate(-v.usedWidth,0)}return p={x:v.usedWidth,texture:v,level:r,scale:u,width:h,height:c,scaledLabelShown:d},v.usedWidth+=Math.ceil(h+8),v.eleCaches.push(p),l.set(t,r,p),o.checkTextureFullness(v),p},_k.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},_k.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var o=0;o<n.length;o++){var a=n[o],s=a.texture;s.invalidatedWidth+=a.width,a.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(t)}},_k.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},_k.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Fy(e,t):t.fullnessChecks++},_k.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;Fy(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var a=i[o];r.deleteCache(a.key,a.level)}zy(i),this.getRetiredTextureQueue(e).push(t)},_k.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},_k.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var o=r[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,zy(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Fy(r,o),n.push(o),o}},_k.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),o=r[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var a={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(a),r[i]=a}},_k.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,o=0;o<1&&e.size()>0;o++){var a=e.pop(),s=a.key,l=a.eles[0],u=i.hasCache(l,a.level);if(n[s]=null,!u){r.push(a);var c=this.getBoundingBox(l);this.getElement(l,c,t,a.level,bk.dequeue)}}return r},_k.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=Cy,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},_k.onDequeue=function(t){this.onDequeues.push(t)},_k.offDequeue=function(t){Fy(this.onDequeues,t)},_k.setupDequeueing=yk({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++){(0,t.onDequeues[n])(e)}},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(Cm(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Ek=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=fy()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=Ev((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),50),n.beforeRender((function(t,n){n-e.lastInvalidationTime<=250?e.skipping=!0:e.skipping=!1}),n.beforeRenderPriorities.lyrTxrSkip);e.layersQueue=new kv((function(t,e){return e.reqs-t.reqs})),e.setupDequeueing()},kk=Ek.prototype,Sk=0,Ck=Math.pow(2,53)-1;kk.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:Sk=++Sk%Ck,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(n,n),s.translate(l,u),a},kk.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(dm(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var a,s,l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(r.levelIsComplete(n,t))return c;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=l[e],!0},i=function(t){if(!s)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&Fy(c,a)}}();var h=function(e){var i=(e=e||{}).after;if(function(){if(!a){a=wm();for(var e=0;e<t.length;e++)n=a,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),a.w*u*(a.h*u)>16e6)return null;var o=r.makeLayer(a,n);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,o)}else(void 0===e.insert||e.insert)&&c.unshift(o);return o};if(r.skipping&&!o)return null;for(var d=null,f=t.length/1,p=!o,g=0;g<t.length;g++){var v=t[g],y=v._private.rscratch,m=y.imgLayerCaches=y.imgLayerCaches||{},b=m[n];if(b)d=b;else{if((!d||d.eles.length>=f||!Nm(d.bb,v.boundingBox()))&&!(d=h({insert:!0,after:d})))return null;s||p?r.queueLayer(d,v):r.drawEleInLayer(d,v,n,e),d.eles.push(v),m[n]=d}}return s||(p?null:c)},kk.getEleLevelForLayerLevel=function(t,e){return t},kk.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,a=e.boundingBox();0!==a.w&&0!==a.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,n,!0),i.setImgSmoothing(o,!0))},kk.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},kk.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},kk.updateElementsInLayers=function(t,e){for(var n=Wv(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,o,i))}},kk.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},kk.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=fy(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,(function(t,n,r){e.invalidateLayer(t)})))},kk.invalidateLayer=function(t){if(this.lastInvalidationTime=fy(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];Fy(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}},kk.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,(function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])}))},kk.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},kk.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},kk.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},kk.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[t.level]=t)}this.requestRedraw()}},kk.requestRedraw=Ev((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),kk.setupDequeueing=yk({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:Py,shouldRedraw:Ty,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var Tk,Nk={};function Ok(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function Pk(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Mk(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];t.moveTo(s.x,s.y);for(i=1;i<a.length;i++){o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function Dk(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var l=o[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function Ak(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}Nk.arrowShapeImpl=function(t){return(Tk||(Tk={polygon:Ok,"triangle-backcurve":Pk,"triangle-tee":Mk,"circle-triangle":Dk,"triangle-cross":Mk,circle:Ak}))[t]};var Lk={drawElement:function(t,e,n,r,i,o){e.isNode()?this.drawNode(t,e,n,r,i,o):this.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,a,s){var l=this,u=n.getBoundingBox(e);if(0!==u.w&&0!==u.h){var c=n.getElement(e,u,r,i,o);if(null!=c){var h=s(l,e);if(0===h)return;var d,f,p,g,v,y,m=a(l,e),b=u.x1,w=u.y1,x=u.w,_=u.h;if(0!==m){var E=n.getRotationPoint(e);p=E.x,g=E.y,t.translate(p,g),t.rotate(m),(v=l.getImgSmoothing(t))||l.setImgSmoothing(t,!0);var k=n.getRotationOffset(e);d=k.x,f=k.y}else d=b,f=w;1!==h&&(y=t.globalAlpha,t.globalAlpha=y*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,f,x,_),1!==h&&(t.globalAlpha=y),0!==m&&(t.rotate(-m),t.translate(-p,-g),v||l.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},Ik=function(){return 0},Rk=function(t,e){return t.getTextAngle(e,null)},Bk=function(t,e){return t.getTextAngle(e,"source")},jk=function(t,e){return t.getTextAngle(e,"target")},Fk=function(t,e){return e.effectiveOpacity()},zk=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};Lk.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,d=e.boundingBox(),f=!0===o?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&e.visible()&&(!r||Cm(d,r))){var p=e.isEdge(),g=e.element()._private.rscratch.badLine;a.drawCachedElementPortion(t,e,l,n,i,f,Ik,Fk),p&&g||a.drawCachedElementPortion(t,e,u,n,i,f,Rk,zk),p&&!g&&(a.drawCachedElementPortion(t,e,c,n,i,f,Bk,zk),a.drawCachedElementPortion(t,e,h,n,i,f,jk,zk)),a.drawElementOverlay(t,e)}},Lk.drawElements=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];this.drawElement(t,r)}},Lk.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];this.drawCachedElement(t,o,n,r)}},Lk.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},Lk.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&t.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)};var Vk={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=e._private.rscratch;if((!o||e.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;n&&(l=n,t.translate(-l.x1,-l.y1));var u=o?e.pstyle("opacity").value:1,c=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,f=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;t.lineWidth=h,t.lineCap=d,a.eleStrokeStyle(t,e,n),a.drawEdgePath(e,t,s.allpts,c),t.lineCap="butt"},p=function(){i&&a.drawEdgeOverlay(t,e)},g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;a.drawArrowheads(t,e,n)},v=function(){a.drawElementText(t,e,null,r)};t.lineJoin="round";var y="yes"===e.pstyle("ghost").value;if(y){var m=e.pstyle("ghost-offset-x").pfValue,b=e.pstyle("ghost-offset-y").pfValue,w=e.pstyle("ghost-opacity").value,x=u*w;t.translate(m,b),f(x),g(x),t.translate(-m,-b)}f(),g(),p(),v(),n&&t.translate(l.x1,l.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var n=e.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),o=e._private.rscratch,a=2*e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-color").value;t.lineWidth=a,"self"!==o.edgeType||i?t.lineCap="round":t.lineCap="butt",r.colorStrokeStyle(t,s[0],s[1],s[2],n),r.drawEdgePath(e,t,o.allpts,"solid")}}},drawEdgePath:function(t,e,n,r){var i,o=t._private.rscratch,a=e,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=e=o.pathCache,s=!0):(i=e=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)e.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)e.lineTo(n[f],n[f+1])}e=a,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;void 0===a&&(a=h);var d=t.globalCompositeOperation;1===a&&"hollow"!==u||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,l,c,s,r,i,o),t.globalCompositeOperation=d);var f=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,f[0],f[1],f[2],a),this.colorStrokeStyle(t,f[0],f[1],f[2],a),this.drawArrowShape(e,t,u,c,s,r,i,o)}}},drawArrowShape:function(t,e,n,r,i,o,a,s){var l,u=this,c=this.usePaths()&&"triangle-cross"!==i,h=!1,d=e,f={x:o,y:a},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,p),v=u.arrowShapes[i];if(c){var y=u.arrowPathCache=u.arrowPathCache||[],m=wy(i),b=y[m];null!=b?(l=e=b,h=!0):(l=e=new Path2D,y[m]=l)}h||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,g,s,f,r),e.closePath&&e.closePath()),e=d,c&&(e.translate(o,a),e.rotate(s),e.scale(g,g)),"filled"!==n&&"both"!==n||(c?e.fill(l):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(v.matchEdgeWidth?r:1)/(c?g:1),e.lineJoin="miter",c?e.stroke(l):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-o,-a))}},qk={safeDrawImage:function(t,e,n,r,i,o,a,s,l,u){i<=0||o<=0||l<=0||u<=0||t.drawImage(e,n,r,i,o,a,s,l,u)},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),h=c(n,"background-fit","value",r),d=c(n,"background-repeat","value",r),f=n.width(),p=n.height(),g=2*n.padding(),v=f+("inner"===c(n,"background-width-relative-to","value",r)?0:g),y=p+("inner"===c(n,"background-height-relative-to","value",r)?0:g),m=n._private.rscratch,b="node"===c(n,"background-clip","value",r),w=c(n,"background-image-opacity","value",r)*i,x=e.width||e.cachedW,_=e.height||e.cachedH;null!=x&&null!=_||(document.body.appendChild(e),x=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var E=x,k=_;if("auto"!==c(n,"background-width","value",r)&&(E="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*v:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(k="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*y:c(n,"background-height","pfValue",r)),0!==E&&0!==k){if("contain"===h)E*=S=Math.min(v/E,y/k),k*=S;else if("cover"===h){var S;E*=S=Math.max(v/E,y/k),k*=S}var C=s-v/2,T=c(n,"background-position-x","units",r),N=c(n,"background-position-x","pfValue",r);C+="%"===T?(v-E)*N:N;var O=c(n,"background-offset-x","units",r),P=c(n,"background-offset-x","pfValue",r);C+="%"===O?(v-E)*P:P;var M=l-y/2,D=c(n,"background-position-y","units",r),A=c(n,"background-position-y","pfValue",r);M+="%"===D?(y-k)*A:A;var L=c(n,"background-offset-y","units",r),I=c(n,"background-offset-y","pfValue",r);M+="%"===L?(y-k)*I:I,m.pathCache&&(C-=s,M-=l,s=0,l=0);var R=t.globalAlpha;if(t.globalAlpha=w,"no-repeat"===d)b&&(t.save(),m.pathCache?t.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,v,y),t.clip())),o.safeDrawImage(t,e,0,0,x,_,C,M,E,k),b&&t.restore();else{var B=t.createPattern(e,d);t.fillStyle=B,o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,v,y),t.translate(C,M),t.fill(),t.translate(-C,-M)}t.globalAlpha=R}}},Uk={};function Hk(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}Uk.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(dm(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Uk.drawElementText=function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(o&&!a.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=a.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var f,p=!n;n&&(f=n,t.translate(-f.x1,-f.y1)),null==i?(a.drawText(t,e,null,p,o),e.isEdge()&&(a.drawText(t,e,"source",p,o),a.drawText(t,e,"target",p,o))):a.drawText(t,e,i,p,o),n&&t.translate(f.x1,f.y1)},Uk.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},Uk.setupTextStyle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)},Uk.getTextAngle=function(t,e){var n=t._private.rscratch,r=e?e+"-":"",i=t.pstyle(r+"text-rotation"),o=Vy(n,"labelAngle",e);return"autorotate"===i.strValue?t.isEdge()?o:0:"none"===i.strValue?0:i.pfValue},Uk.drawText=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!i||0!==s&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var l,u,c=Vy(a,"labelX",n),h=Vy(a,"labelY",n),d=this.getLabelText(e,n);if(null!=d&&""!==d&&!isNaN(c)&&!isNaN(h)){this.setupTextStyle(t,e,i);var f,p=n?n+"-":"",g=Vy(a,"labelWidth",n),v=Vy(a,"labelHeight",n),y=e.pstyle(p+"text-margin-x").pfValue,m=e.pstyle(p+"text-margin-y").pfValue,b=e.isEdge(),w=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;switch(b&&(w="center",x="center"),c+=y,h+=m,0!==(f=r?this.getTextAngle(e,n):0)&&(l=c,u=h,t.translate(l,u),t.rotate(f),c=0,h=0),x){case"top":break;case"center":h+=v/2;break;case"bottom":h+=v}var _=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,k=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue;if(_>0||k>0&&E>0){var C=c-S;switch(w){case"left":C-=g;break;case"center":C-=g/2}var T=h-v-S,N=g+2*S,O=v+2*S;if(_>0){var P=t.fillStyle,M=e.pstyle("text-background-color").value;t.fillStyle="rgba("+M[0]+","+M[1]+","+M[2]+","+_*s+")";var D=e.pstyle("text-background-shape").strValue;0===D.indexOf("round")?Hk(t,C,T,N,O,2):t.fillRect(C,T,N,O),t.fillStyle=P}if(k>0&&E>0){var A=t.strokeStyle,L=t.lineWidth,I=e.pstyle("text-border-color").value,R=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+E*s+")",t.lineWidth=k,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=k/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(C,T,N,O),"double"===R){var B=k/2;t.strokeRect(C+B,T+B,N-2*B,O-2*B)}t.setLineDash&&t.setLineDash([]),t.lineWidth=L,t.strokeStyle=A}}var j=2*e.pstyle("text-outline-width").pfValue;if(j>0&&(t.lineWidth=j),"wrap"===e.pstyle("text-wrap").value){var F=Vy(a,"labelWrapCachedLines",n),z=Vy(a,"labelLineHeight",n),V=g/2,q=this.getLabelJustification(e);switch("auto"===q||("left"===w?"left"===q?c+=-g:"center"===q&&(c+=-V):"center"===w?"left"===q?c+=-V:"right"===q&&(c+=V):"right"===w&&("center"===q?c+=V:"right"===q&&(c+=g))),x){case"top":h-=(F.length-1)*z;break;case"center":case"bottom":h-=(F.length-1)*z}for(var U=0;U<F.length;U++)j>0&&t.strokeText(F[U],c,h),t.fillText(F[U],c,h),h+=z}else j>0&&t.strokeText(d,c,h),t.fillText(d,c,h);0!==f&&(t.rotate(-f),t.translate(-l,-u))}}};var Wk={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=e._private,c=u.rscratch,h=e.position();if(qv(h.x)&&qv(h.y)&&(!s||e.visible())){var d,f,p=s?e.effectiveOpacity():1,g=l.usePaths(),v=!1,y=e.padding();r=e.width()+2*y,i=e.height()+2*y,n&&(f=n,t.translate(-f.x1,-f.y1));for(var m=e.pstyle("background-image"),b=m.value,w=new Array(b.length),x=new Array(b.length),_=0,E=0;E<b.length;E++){var k=b[E],S=w[E]=null!=k&&"none"!==k;if(S){var C=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);_++,x[E]=l.getCachedImage(k,C,(function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var T=e.pstyle("background-blacken").value,N=e.pstyle("border-width").pfValue,O=e.pstyle("background-opacity").value*p,P=e.pstyle("border-color").value,M=e.pstyle("border-style").value,D=e.pstyle("border-opacity").value*p;t.lineJoin="miter";var A=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;l.eleFillStyle(t,e,n)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;l.colorStrokeStyle(t,P[0],P[1],P[2],e)},I=e.pstyle("shape").strValue,R=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(h.x,h.y);var B=l.nodePathCache=l.nodePathCache||[],j=xy("polygon"===I?I+","+R.join(","):I,""+i,""+r),F=B[j];null!=F?(d=F,v=!0,c.pathCache=d):(d=new Path2D,B[j]=c.pathCache=d)}var z=function(){if(!v){var n=h;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(d||t,n.x,n.y,r,i)}g?t.fill(d):t.fill()},V=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=u.backgrounding,i=0,o=0;o<x.length;o++)w[o]&&x[o].complete&&!x[o].error&&(i++,l.drawInscribedImage(t,x[o],e,o,n));u.backgrounding=!(i===_),r!==u.backgrounding&&e.updateStyle(!1)},q=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasPie(e)&&(l.drawPie(t,e,o),n&&(g||l.nodeShapes[l.getNodeShape(e)].draw(t,h.x,h.y,r,i)))},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=(T>0?T:-T)*e,r=T>0?0:255;0!==T&&(l.colorFillStyle(t,r,r,r,n),g?t.fill(d):t.fill())},H=function(){if(N>0){if(t.lineWidth=N,t.lineCap="butt",t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(g?t.stroke(d):t.stroke(),"double"===M){t.lineWidth=N/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(d):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}},W=function(){a&&l.drawNodeOverlay(t,e,h,r,i)},Y=function(){l.drawElementText(t,e,null,o)},G="yes"===e.pstyle("ghost").value;if(G){var X=e.pstyle("ghost-offset-x").pfValue,K=e.pstyle("ghost-offset-y").pfValue,$=e.pstyle("ghost-opacity").value,Z=$*p;t.translate(X,K),A($*O),z(),V(Z),q(0!==T||0!==N),U(Z),L($*D),H(),t.translate(-X,-K)}A(),z(),V(),q(0!==T||0!==N),U(),L(),H(),g&&t.translate(-h.x,-h.y),Y(),W(),n&&t.translate(f.x1,f.y1)}},drawNodeOverlay:function(t,e,n,r,i){if(e.visible()){var o=e.pstyle("overlay-padding").pfValue,a=e.pstyle("overlay-opacity").value,s=e.pstyle("overlay-color").value;if(a>0){if(n=n||e.position(),null==r||null==i){var l=e.padding();r=e.width()+2*l,i=e.height()+2*l}this.colorFillStyle(t,s[0],s[1],s[2],a),this.nodeShapes.roundrectangle.draw(t,n.x,n.y,r+2*o,i+2*o),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,h=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var f=e.pstyle("pie-"+d+"-background-size").value,p=e.pstyle("pie-"+d+"-background-color").value,g=e.pstyle("pie-"+d+"-background-opacity").value*n,v=f/100;v+h>1&&(v=1-h);var y=1.5*Math.PI+2*Math.PI*h,m=y+2*Math.PI*v;0===f||h>=1||h+v>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,y,m),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],g),t.fill(),h+=v)}}},Yk={};Yk.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},Yk.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},Yk.createGradientStyleFor=function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,l=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),d=pm(u,h),f=pm(c,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=a?{x:0,y:0}:n.position(),g=n.paddedWidth(),v=n.paddedHeight();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,v))}else if(n.isEdge()){var y=n.sourceEndpoint(),m=n.targetEndpoint();o=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=a?{x:0,y:0}:n.position(),w=n.paddedWidth()/2,x=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":o=t.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":o=t.createLinearGradient(b.x+w,b.y,b.x-w,b.y);break;case"to-right":o=t.createLinearGradient(b.x-w,b.y,b.x+w,b.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(b.x-w,b.y-x,b.x+w,b.y+x);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(b.x-w,b.y+x,b.x+w,b.y-x);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(b.x+w,b.y-x,b.x-w,b.y+x);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(b.x+w,b.y+x,b.x-w,b.y-x)}}if(!o)return null;for(var _=l.length===s.length,E=s.length,k=0;k<E;k++)o.addColorStop(_?l[k]:k/(E-1),"rgba("+s[k][0]+","+s[k][1]+","+s[k][2]+","+i+")");return o},Yk.gradientFillStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},Yk.colorFillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},Yk.eleFillStyle=function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},Yk.gradientStrokeStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},Yk.colorStrokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},Yk.eleStrokeStyle=function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},Yk.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=s);var l,u=i*a,c=o*a;if(u!==e.canvasWidth||c!==e.canvasHeight){e.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)(l=n.canvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";for(d=0;d<e.BUFFER_COUNT;d++)(l=n.bufferCanvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";e.textureMult=1,a<=1&&(l=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,l.width=u*e.textureMult,l.height=c*e.textureMult),e.canvasWidth=u,e.canvasHeight=c}},Yk.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},Yk.render=function(t){var e=(t=t||By()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=a.cy,u=a.data,c=u.canvasNeedsRedraw,h=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),d=void 0!==t.motionBlur?t.motionBlur:a.motionBlur,f=a.motionBlurPxRatio,p=l.hasCompoundNodes(),g=a.hoverData.draggingEles,v=!(!a.hoverData.selecting&&!a.touchData.selecting),y=d=d&&!e&&a.motionBlurEnabled&&!v;e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),d&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(y=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!h&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var m=l.style(),b=l.zoom(),w=void 0!==i?i:b,x=l.pan(),_={x:x.x,y:x.y},E={zoom:b,pan:{x:x.x,y:x.y}},k=a.prevViewport;void 0===k||E.zoom!==k.zoom||E.pan.x!==k.pan.x||E.pan.y!==k.pan.y||g&&!p||(a.motionBlurPxRatio=1),o&&(_=o),w*=s,_.x*=s,_.y*=s;var S=a.getCachedZSortedEles();function C(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,a.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function T(t,r){var s,l,c,h;a.clearingMotionBlur||t!==u.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&t!==u.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=_,l=w,c=a.canvasWidth,h=a.canvasHeight):(s={x:x.x*f,y:x.y*f},l=b*f,c=a.canvasWidth*f,h=a.canvasHeight*f),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?C(t,0,0,c,h):e||void 0!==r&&!r||t.clearRect(0,0,c,h),n||(t.translate(s.x,s.y),t.scale(l,l)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(h||(a.textureDrawLastFrame=!1),h){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=l.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var N=a.data.bufferContexts[a.TEXTURE_BUFFER];N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:N,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(E=a.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var O=u.contexts[a.NODE],P=a.textureCache.texture;E=a.textureCache.viewport;O.setTransform(1,0,0,1,0,0),d?C(O,0,0,E.width,E.height):O.clearRect(0,0,E.width,E.height);var M=m.core("outside-texture-bg-color").value,D=m.core("outside-texture-bg-opacity").value;a.colorFillStyle(O,M[0],M[1],M[2],D),O.fillRect(0,0,E.width,E.height);b=l.zoom();T(O,!1),O.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/s,E.height/E.zoom/s),O.drawImage(P,E.mpan.x,E.mpan.y,E.width/E.zoom/s,E.height/E.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var A=l.extent(),L=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),I=a.hideEdgesOnViewport&&L,R=[];if(R[a.NODE]=!c[a.NODE]&&d&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,R[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),R[a.DRAG]=!c[a.DRAG]&&d&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,R[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||R[a.NODE]){var B=d&&!R[a.NODE]&&1!==f;T(O=e||(B?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:u.contexts[a.NODE]),d&&!B?"motionBlur":void 0),I?a.drawCachedNodes(O,S.nondrag,s,A):a.drawLayeredElements(O,S.nondrag,s,A),a.debug&&a.drawDebugPoints(O,S.nondrag),n||d||(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||R[a.DRAG])){B=d&&!R[a.DRAG]&&1!==f;T(O=e||(B?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:u.contexts[a.DRAG]),d&&!B?"motionBlur":void 0),I?a.drawCachedNodes(O,S.drag,s,A):a.drawCachedElements(O,S.drag,s,A),a.debug&&a.drawDebugPoints(O,S.drag),n||d||(c[a.DRAG]=!1)}if(a.showFps||!r&&c[a.SELECT_BOX]&&!n){if(T(O=e||u.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){b=a.cy.zoom();var j=m.core("selection-box-border-width").value/b;O.lineWidth=j,O.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",O.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),j>0&&(O.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",O.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(u.bgActivePosistion&&!a.hoverData.selecting){b=a.cy.zoom();var F=u.bgActivePosistion;O.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",O.beginPath(),O.arc(F.x,F.y,m.core("active-bg-size").pfValue/b,0,2*Math.PI),O.fill()}var z=a.lastRedrawTime;if(a.showFps&&z){z=Math.round(z);var V=Math.round(1e3/z);O.setTransform(1,0,0,1,0,0),O.fillStyle="rgba(255, 0, 0, 0.75)",O.strokeStyle="rgba(255, 0, 0, 0.75)",O.lineWidth=1,O.fillText("1 frame = "+z+" ms = "+V+" fps",0,20);O.strokeRect(0,30,250,20),O.fillRect(0,30,250*Math.min(V/60,1),20)}n||(c[a.SELECT_BOX]=!1)}if(d&&1!==f){var q=u.contexts[a.NODE],U=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],H=u.contexts[a.DRAG],W=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],Y=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!y?t.clearRect(0,0,a.canvasWidth,a.canvasHeight):C(t,0,0,a.canvasWidth,a.canvasHeight);var r=f;t.drawImage(e,0,0,a.canvasWidth*r,a.canvasHeight*r,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||R[a.NODE])&&(Y(q,U,R[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||R[a.DRAG])&&(Y(H,W,R[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=E,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),d&&(a.motionBlurTimeout=setTimeout((function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!h,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()}),100)),e||l.emit("render")};for(var Gk={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+a*o[2*l],n+s*o[2*l+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2,l=Xm(r,i);t.beginPath&&t.beginPath();for(var u=0;u<o.length/4;u++){var c,h=void 0;h=0===u?o.length-2:4*u-2,c=4*u+2;var d=e+a*o[4*u],f=n+s*o[4*u+1],p=-o[h]*o[c]-o[h+1]*o[c+1],g=l/Math.tan(Math.acos(p)/2),v=d-g*o[h],y=f-g*o[h+1],m=d+g*o[c],b=f+g*o[c+1];0===u?t.moveTo(v,y):t.lineTo(v,y),t.arcTo(d,f,m,b,l)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Gm(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.arcTo(e+o,n-a,e+o,n,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.arcTo(e-o,n-a,e,n-a,s),t.lineTo(e,n-a),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Gm(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.lineTo(e+o,n-a),t.lineTo(e+o,n),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.lineTo(e-o,n-a),t.lineTo(e,n-a),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-o+8,n-a),t.lineTo(e+o-8,n-a),t.lineTo(e+o,n-a+8),t.lineTo(e+o,n+a-8),t.lineTo(e+o-8,n+a),t.lineTo(e-o+8,n+a),t.lineTo(e-o,n+a-8),t.lineTo(e-o,n-a+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,l=e+o,u=n-a,c=n+a,h=Km(r,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,u+f),t.lineTo(s,c-f),t.quadraticCurveTo(s+p,c,s+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-p,c,l,c-f),t.lineTo(l,u+f),t.quadraticCurveTo(l-p,u,l-d,u),t.lineTo(s+d,u),t.quadraticCurveTo(s+p,u,s,u+f),t.closePath()}},Xk=Math.sin(0),Kk=Math.cos(0),$k={},Zk={},Jk=Math.PI/40,Qk=0*Math.PI;Qk<2*Math.PI;Qk+=Jk)$k[Qk]=Math.sin(Qk),Zk[Qk]=Math.cos(Qk);Gk.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=Jk)o=e-s*$k[u]*Xk+s*Zk[u]*Kk,a=n+l*Zk[u]*Xk+l*$k[u]*Kk,0===u?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var tS={};function eS(t){var e=t.indexOf(",");return t.substr(e+1)}function nS(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new ow((function(r,i){try{e.toBlob((function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),n,t.quality)}catch(t){i(t)}}));case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(eS(r()),n);case"base64":return eS(r());case"base64uri":default:return r()}}tS.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},tS.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],a=qv(t.maxWidth)||qv(t.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,l=t.scale;else if(a){var u=1/0,c=1/0;qv(t.maxWidth)&&(u=l*t.maxWidth/i),qv(t.maxHeight)&&(c=l*t.maxHeight/o),i*=l=Math.min(u,c),o*=l}a||(i*=s,o*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var d=h.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=e.pan(),g={x:p.x*l,y:p.y*l};l*=e.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,o),d.fill())}return h},tS.png=function(t){return nS(t,this.bufferCanvasImage(t),"image/png")},tS.jpg=function(t){return nS(t,this.bufferCanvasImage(t),"image/jpeg")};var rS={nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}},iS=aS,oS=aS.prototype;function aS(t){var e=this;e.data={canvases:new Array(oS.CANVAS_LAYERS),contexts:new Array(oS.CANVAS_LAYERS),canvasNeedsRedraw:new Array(oS.CANVAS_LAYERS),bufferCanvases:new Array(oS.BUFFER_COUNT),bufferContexts:new Array(oS.CANVAS_LAYERS)};e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Dv&&Dv.userAgent.match(/msie|trident|edge/i)&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var o=0;o<oS.CANVAS_LAYERS;o++){var a=e.data.canvases[o]=document.createElement("canvas");e.data.contexts[o]=a.getContext("2d"),Object.keys(i).forEach((function(t){a.style[t]=i[t]})),a.style.position="absolute",a.setAttribute("data-id","layer"+o),a.style.zIndex=String(oS.CANVAS_LAYERS-o),e.data.canvasContainer.appendChild(a),e.data.canvasNeedsRedraw[o]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[oS.NODE].setAttribute("data-id","layer"+oS.NODE+"-node"),e.data.canvases[oS.SELECT_BOX].setAttribute("data-id","layer"+oS.SELECT_BOX+"-selectbox"),e.data.canvases[oS.DRAG].setAttribute("data-id","layer"+oS.DRAG+"-drag");for(o=0;o<oS.BUFFER_COUNT;o++)e.data.bufferCanvases[o]=document.createElement("canvas"),e.data.bufferContexts[o]=e.data.bufferCanvases[o].getContext("2d"),e.data.bufferCanvases[o].style.position="absolute",e.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),e.data.bufferCanvases[o].style.zIndex=String(-o-1),e.data.bufferCanvases[o].style.visibility="hidden";e.pathsEnabled=!0;var s=wm(),l=function(t){return{x:-t.w/2,y:-t.h/2}},u=function(t){return t.boundingBox(),t[0]._private.bodyBounds},c=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||s},h=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||s},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||s},f=function(t,e){return e},p=function(t,e,n){var r=t?t+"-":"";return{x:e.x+n.pstyle(r+"text-margin-x").pfValue,y:e.y+n.pstyle(r+"text-margin-y").pfValue}},g=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},v=e.data.eleTxrCache=new xk(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},getBoundingBox:u,getRotationPoint:function(t){return{x:((e=u(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return l(u(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),y=e.data.lblTxrCache=new xk(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},getBoundingBox:c,getRotationPoint:function(t){return p("",g(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=c(t),n=l(c(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:f}),m=e.data.slbTxrCache=new xk(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},getBoundingBox:h,getRotationPoint:function(t){return p("source",g(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return l(h(t))},isVisible:f}),b=e.data.tlbTxrCache=new xk(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},getBoundingBox:d,getRotationPoint:function(t){return p("target",g(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return l(d(t))},isVisible:f}),w=e.data.lyrTxrCache=new Ek(e);e.onUpdateEleCalcs((function(t,e){v.invalidateElements(e),y.invalidateElements(e),m.invalidateElements(e),b.invalidateElements(e),w.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}}));var x=function(t){for(var e=0;e<t.length;e++)w.enqueueElementRefinement(t[e].ele)};v.onDequeue(x),y.onDequeue(x),m.onDequeue(x),b.onDequeue(x)}oS.CANVAS_LAYERS=3,oS.SELECT_BOX=0,oS.DRAG=1,oS.NODE=2,oS.BUFFER_COUNT=3,oS.TEXTURE_BUFFER=0,oS.MOTIONBLUR_BUFFER_NODE=1,oS.MOTIONBLUR_BUFFER_DRAG=2,oS.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[oS.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[oS.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[oS.SELECT_BOX]=e}};var sS="undefined"!=typeof Path2D;oS.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},oS.usePaths=function(){return sS&&this.pathsEnabled},oS.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},oS.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},oS.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":Sv(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[Nk,Lk,Vk,qk,Uk,Wk,Yk,Gk,tS,rS].forEach((function(t){iy(oS,t)}));var lS=[{type:"layout",extensions:HE},{type:"renderer",extensions:[{name:"null",impl:WE},{name:"base",impl:gk},{name:"canvas",impl:iS}]}],uS={},cS={};function hS(t,e,n){var r=n,i=function(n){My("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(iE.prototype[e])return i(e);iE.prototype[e]=n}else if("collection"===t){if(__.prototype[e])return i(e);__.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),Vv(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(t){return t._private.cy},d={addEventFields:function(t,e){e.layout=t,e.cy=h(t),e.target=t},bubble:function(){return!0},parent:function(t){return h(t)}};iy(a,{createEmitter:function(){return this._private.emitter=new zx(d,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),lw.eventAliasesOn(a),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var f=dS("renderer","base"),p=f.prototype,g=n,v=n.prototype,y=function(){f.apply(this,arguments),g.apply(this,arguments)},m=y.prototype;for(var b in p){var w=p[b];if(null!=v[b])return i(b);m[b]=w}for(var x in v)m[x]=v[x];p.clientFunctions.forEach((function(t){m[t]=m[t]||function(){My("Renderer does not implement `renderer."+t+"()` on its prototype")}})),r=y}return sy({map:uS,keys:[t,e],value:r})}function dS(t,e){return ly({map:uS,keys:[t,e]})}function fS(t,e,n,r,i){return sy({map:cS,keys:[t,e,n,r],value:i})}function pS(t,e,n,r){return ly({map:cS,keys:[t,e,n,r]})}var gS=function(){return 2===arguments.length?dS.apply(null,arguments):3===arguments.length?hS.apply(null,arguments):4===arguments.length?pS.apply(null,arguments):5===arguments.length?fS.apply(null,arguments):void My("Invalid extension access syntax")};iE.prototype.extension=gS,lS.forEach((function(t){t.extensions.forEach((function(e){hS(t.type,e.name,e.impl)}))}));var vS=function t(){if(!(this instanceof t))return new t;this.length=0},yS=vS.prototype;yS.instanceString=function(){return"stylesheet"},yS.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},yS.css=function(t,e){var n=this.length-1;if(jv(t))this[n].properties.push({name:t,value:e});else if(Vv(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var l=Q_.properties[a]||Q_.properties[Qv(a)];if(null!=l){var u=l.name,c=s;this[n].properties.push({name:u,value:c})}}}return this},yS.style=yS.css,yS.generateStyle=function(t){var e=new Q_(t);return this.appendToStyle(e)},yS.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t};var mS=function(t){return void 0===t&&(t={}),Vv(t)?new iE(t):jv(t)?gS.apply(gS,arguments):void 0};mS.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(mS),t.apply(null,e),this},mS.warnings=function(t){return Dy(t)},mS.version="3.15.2",mS.stylesheet=mS.Stylesheet=vS;var bS=mS,wS=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Yn(this,t),this.name=e,this.id=n,this.cy=bS(),r&&this.addElems(r)}return Xn(t,[{key:"addElems",value:function(t){this.cy.add(t)}},{key:"nodes",get:function(){return this.cy.nodes().jsons()}},{key:"edges",get:function(){return this.cy.edges().jsons()}}]),t}(),xS=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Yn(this,t),this.prefixes=e||[""],this.value=n,this.standard=r}return Xn(t,[{key:"isStandard",value:function(){return this.standard}}]),t}(),_S=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Yn(this,t),this.name=e,this.version=n,this.namespaces=r,this.diagrams=i}return Xn(t,[{key:"addIri",value:function(t){this.namespaces.push(t)}},{key:"getIriFromValue",value:function(t){var e,n=ur(this.namespaces);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.value==t)return r}}catch(t){n.e(t)}finally{n.f()}}},{key:"getIriFromPrefix",value:function(t){var e,n=ur(this.namespaces);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.prefixes&&r.prefixes.includes(t))return r}}catch(t){n.e(t)}finally{n.f()}}},{key:"destructureIri",value:function(t){var e,n={namespace:"",prefix:"",rem_chars:""},r=ur(this.namespaces);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(-1!=t.search(i.value)){n.namespace=i.value,n.prefix=i.prefixes[0],n.rem_chars=t.slice(i.value.length);break}}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"addDiagram",value:function(t){this.diagrams.push(t)}},{key:"getDiagram",value:function(t){if(!(t<0||t>this.diagrams.length)){if(this.diagrams[t])return this.diagrams[t];var e,n=ur(this.diagrams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.name.toLowerCase()===t.toLowerCase())return r}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getElem",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=ur(this.diagrams);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.cy.$id(t);if(o&&o.length>0)return n?o.json():o}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"getEntity",value:function(t){return this.getEntities().find((function(e){return e.data.iri.full_iri===t||e.data.iri.prefix+e.data.iri.remaining_chars===t}))}},{key:"getOccurrences",value:function(t){return this.getEntities().filter((function(e){return e.data.iri.full_iri===t||e.data.iri.prefix+e.data.iri.remaining_chars===t}))}},{key:"getElemByDiagramAndId",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getDiagram(e);if(r){var i=r.cy.$('[id_xml = "'.concat(t,'"]'))||r.cy.$id(t);if(i.length>0)return n?i.json():i}return!1}},{key:"getEntities",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=bS().collection();return this.diagrams.forEach((function(t){e=e.union(t.cy.$(".predicate"))})),e=e.sort((function(t,e){return t.data("displayed_name").localeCompare(e.data("displayed_name"))})),t?e.jsons():e}}]),t}();function ES(t){if(null==t||null==t.nextSibling)return null;for(t=t.nextSibling;1!==t.nodeType;){if(null==t.nextSibling)return null;t=t.nextSibling}return t}function kS(t){switch(t.getAttribute("type")){case"concept":case"attribute":case"role":case"individual":return!0}return!1}function SS(t,e,n){var r=[];r.x=n.x-e.x,r.y=n.y-e.y;var i=[];i.x=t.x-e.x,i.y=t.y-e.y;var o,a=[];if(0==i.x)a.x=0,a.y=r.y;else if(0==i.y)a.x=r.x,a.y=0,o=0;else{o=i.y/i.x;var s=r.y+r.x/o;a.x=s*o/(Math.pow(o,2)+1),a.y=a.x*o}var l=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),u=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))/l;i.x>0&&a.x<0&&(u=-u),i.x<0&&a.x>0&&(u=-u);var c=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));return i.x<0&&r.y>o*r.x&&(c=-c),i.x>0&&r.y<o*r.x&&(c=-c),0==i.x&&i.y>0&&r.x>0&&(c=-c),0==i.x&&i.y<0&&r.x<0&&(c=-c),[c,u]}function CS(t,e,n){var r=[];if(r.x=t.x-e.position("x"),r.y=t.y-e.position("y"),0==r.x&&0==r.y)return r;var i=[];if(i.x=n.x-e.position("x"),i.y=n.y-e.position("y"),r.x==i.x){if(i.y>0)return r.y=e.data("height")/2,r;if(i.y<0)return r.y=-e.data("height")/2,r}else if(r.y==i.y){if(i.x>0)return r.x=e.data("width")/2,r;if(i.x<0)return r.x=-e.data("width")/2,r}return r}var TS=new Set;var NS=Object.freeze({__proto__:null,warnings:TS,getOntologyInfo:function(t){var e=t.getElementsByTagName("ontology")[0];return{name:e.getElementsByTagName("name")[0].textContent,version:e.getElementsByTagName("version")[0]?e.getElementsByTagName("version")[0].textContent:"Undefined",languages:[""]}},getIriPrefixesDictionary:function(t){var e=[];if(0===t.getElementsByTagName("IRI_prefixes_nodes_dict").length)e.push({prefix:[""],value:t.getElementsByTagName("iri")[0].textContent,standard:!1});else{var n,r,i,o,a,s=ur(t.getElementsByTagName("iri"));try{for(s.s();!(a=s.n()).done;){var l=a.value;r=l.getAttribute("iri_value"),i=!1,o=l.getElementsByTagName("prefix"),n=[];var u,c=ur(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;n.push(h.getAttribute("prefix_value"))}}catch(t){c.e(t)}finally{c.f()}0==n.length&&n.push("");var d,f=ur(l.getElementsByTagName("property"));try{for(f.s();!(d=f.n()).done;){i="Standard_IRI"==d.value.getAttribute("property_value")}}catch(t){f.e(t)}finally{f.f()}e.push({prefixes:n,value:r,standard:i})}}catch(t){s.e(t)}finally{s.f()}}return e},getIri:function(t,e){var n={},r=t.getElementsByTagName("label")[0];if(r){var i,o,a=(r=r.textContent.replace(/\n/g,"")).split(":"),s=a.length>1?a[0]:"";return-1!=s.search(/"[\w]+"\^\^[\w]+:/)?(o=r,i="",s=s.slice(s.lastIndexOf("^")+1,s.lastIndexOf(":")+1)):(o=a.length>1?r.slice(r.indexOf(":")+1):r,!(i=e.getIriFromPrefix(s))&&kS(t)&&this.warnings.add('The prefix "'.concat(s,'" is not associated to any namespace')),i=i?i.value:""),n.remaining_chars=o,n.prefix=s.length>0?s+":":s,n.full_iri=i+o,n}},getLabel:function(t){return t.getElementsByTagName("label")[0]?{"":t.getElementsByTagName("label")[0].textContent}:void 0},getPredicateInfo:function(t,e){var n,r,i,o,a={},s=t.getElementsByTagName("label")[0].textContent.replace(/\n/g,""),l=t.getAttribute("type"),u=ur(e.getElementsByTagName("predicate"));try{for(u.s();!(o=u.n()).done;){var c=o.value;if(s===c.getAttribute("name")&&l===c.getAttribute("type")){r=(n=(n=c.getElementsByTagName("description")[0].textContent).replace(/font-size:0pt/g,"")).indexOf("<p"),i=n.indexOf("</body"),n&&(a.description={"":[n.slice(r,i)]}),"attribute"!==l&&"role"!==l||(a.functional=parseInt(c.getElementsByTagName("functional")[0].textContent)),"role"===l&&(a.inverseFunctional=parseInt(c.getElementsByTagName("inverseFunctional")[0].textContent),a.asymmetric=parseInt(c.getElementsByTagName("asymmetric")[0].textContent),a.irreflexive=parseInt(c.getElementsByTagName("irreflexive")[0].textContent),a.reflexive=parseInt(c.getElementsByTagName("reflexive")[0].textContent),a.symmetric=parseInt(c.getElementsByTagName("symmetric")[0].textContent),a.transitive=parseInt(c.getElementsByTagName("transitive")[0].textContent));break}}}catch(t){u.e(t)}finally{u.f()}return a}}),OS=new Set;function PS(t){var e,n,r,i={description:{},annotations:{}},o=MS(t,"annotations");if(o){var a,s=ur(o.children);try{for(s.s();!(a=s.n()).done;){var l=a.value;n=LS(DS(l,"property")),e=DS(l,"language"),r=DS(l,"lexicalForm"),"comment"==n?(i.description[e]||(i.description[e]=[]),i.description[e].push(r)):(i.annotations[n]||(i.annotations[n]={}),i.annotations[n][e]||(i.annotations[n][e]=r))}}catch(t){s.e(t)}finally{s.f()}}return i}function MS(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t&&t.getElementsByTagName(e[n]))return t.getElementsByTagName(e)[n]}function DS(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t&&t.getElementsByTagName(e)[n])return t.getElementsByTagName(e)[n].textContent}function AS(t,e){var n=null;if(!(n="string"==typeof t?t:DS(t,"iri")))return null;var r,i=ur(e.getElementsByTagName("iris")[0].children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(n==DS(o,"value"))return o}}catch(t){i.e(t)}finally{i.f()}return null}function LS(t){var e=t.slice(t.lastIndexOf("#")+1);return e.length==t.length&&(e=t.slice(t.lastIndexOf("/")+1)),e}var IS=Object.freeze({__proto__:null,warnings:OS,getOntologyInfo:function(t){var e=t.getElementsByTagName("project")[0],n=t.getElementsByTagName("languages")[0].children,r=MS(t,"ontology").getAttribute("iri"),i=AS(r,t);return{name:e.getAttribute("name"),version:e.getAttribute("version"),iri:r,languages:ar(n).map((function(t){return t.textContent})),default_language:MS(t,"ontology").getAttribute("lang"),other_infos:PS(i)}},getIriPrefixesDictionary:function(t){var e,n=[],r=ur(MS(t,"prefixes").children);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push({prefixes:[DS(i,"value")],value:DS(i,"namespace"),standard:!1})}}catch(t){r.e(t)}finally{r.f()}return n},getIri:function(t,e){var n={},r=DS(t,"iri")||"";if(r){n.full_iri=r;var i=e.destructureIri(r);i.namespace?(n.prefix=i.prefix.length>0?i.prefix+":":i.prefix,n.remaining_chars=i.rem_chars):(this.warnings.add("Namespace not found for [".concat(r,']. The prefix "undefined" has been assigned')),n.prefix="undefined:",n.remaining_chars=r)}return n},getLabel:function(t,e,n){if("facet"===t.getAttribute("type")){var r=e.destructureIri(DS(t,"constrainingFacet"));return(r=r.prefix+":"+r.rem_chars)+'^^"'+DS(t,"lexicalForm")+'"'}var i=DS(t,"label");if(i)return i;var o=DS(t,"iri");if(!o)return{union:"or",intersection:"and","role-chain":"chain","role-inverse":"inv",complement:"not","datatype-restriction":"data",enumeration:"oneOf","has-key":"key"}[t.getAttribute("type")];var a=e.destructureIri(o),s=a.rem_chars||o,l=(a.prefix||"undefined")+":"+s;if("value-domain"==t.getAttribute("type"))return l;var u=AS(t,n);if(!u)return o==s?o:l;var c=e.getIriFromPrefix("rdfs").value+"label",h=MS(u,"annotations"),d={};if(h){var f,p=ur(h.children);try{for(p.s();!(f=p.n()).done;){var g=f.value;DS(g,"property")==c&&(d[DS(g,"language")]=d[DS(g,"language")]||DS(g,"lexicalForm"))}}catch(t){p.e(t)}finally{p.f()}}return Object.keys(d).length?d:l},getPredicateInfo:function(t,e){var n={},r=AS(t,e);if(n=PS(r),r&&r.children){var i,o=ur(r.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"value"!=a.tagName&&"annotations"!=a.tagName&&(n[a.tagName]=parseInt(a.textContent)||0)}}catch(t){o.e(t)}finally{o.f()}}return n},getTag:MS,getTagText:DS}),RS=function(){function t(e){if(Yn(this,t),this.xmlDocument=e instanceof XMLDocument?e:(new DOMParser).parseFromString(e,"text/xml"),this.graphol_ver=this.xmlDocument.getElementsByTagName("graphol")[0].getAttribute("version")||-1,2==this.graphol_ver||-1==this.graphol_ver)this.graphol=NS;else{if(3!=this.graphol_ver)throw new Error("Graphol version [".concat(this.graphol_ver,"] not supported"));this.graphol=IS}}return Xn(t,[{key:"parseGraphol",value:function(){var t,e,n,r,i,o,a,s,l=this,u=this.graphol.getOntologyInfo(this.xmlDocument);this.ontology=new _S(u.name,u.version),this.ontology.languages=u.languages||[],this.ontology.default_language=u.default_language||u.languages[0],u.other_infos&&(this.ontology.annotations=u.other_infos.annotations,this.ontology.description=u.other_infos.description),this.graphol.getIriPrefixesDictionary(this.xmlDocument).forEach((function(t){l.ontology.addIri(new xS(t.prefixes,t.value,t.standard))}));var c=this.xmlDocument.getElementsByTagName("diagram");for(t=0;t<c.length;t++){for(a=new wS(c[t].getAttribute("name"),t),this.ontology.addDiagram(a),o=[],n=c[t].getElementsByTagName("node"),r=c[t].getElementsByTagName("edge"),i=0,e=0;e<n.length;e++){if((s=this.getBasicNodeInfos(n[e],t)).data.iri=this.graphol.getIri(n[e],this.ontology),s.data.label=this.graphol.getLabel(n[e],this.ontology,this.xmlDocument),"string"==typeof s.data.label){var h=s.data.label;s.data.label={},s.data.label[this.ontology.default_language]=h}if(s.data.label)if(s.data.label[this.ontology.default_language])s.data.displayed_name=s.data.label[this.ontology.default_language];else{var d,f=ur(this.ontology.languages);try{for(f.s();!(d=f.n()).done;){var p=d.value;if(s.data.label[p]){s.data.displayed_name=s.data.label[p];break}}}catch(t){f.e(t)}finally{f.f()}s.data.displayed_name||(s.data.displayed_name=s.data.label[Object.keys(s.data.label)[0]])}kS(n[e])&&function(){var t=l.graphol.getPredicateInfo(n[e],l.xmlDocument,l.ontology);t&&Object.keys(t).forEach((function(e){s.data[e]=t[e]}))}(),o.push(s),"property-assertion"===o[i].data.type||"facet"===o[i].data.type||o[i].data.functional&&o[i].data.inverseFunctional?(this.addFakeNodes(o),i+=o.length-i):i++}for(a.addElems(o),o=[],e=0;e<r.length;e++)o.push(this.EdgeXmlToJson(r[e],t));a.addElems(o)}if(0==t)throw new Error("The selected .graphol file has no defined diagram");if(this.getIdentityForNeutralNodes(),this.warnings=ar(this.graphol.warnings),this.warnings.length>10){var g=this.warnings.length;this.warnings=this.warnings.slice(0,9),this.warnings.push("...".concat(g-10," warnings not shown"))}return this.warnings.forEach((function(t){return console.warn(t)})),this.ontology}},{key:"getBasicNodeInfos",value:function(t,e){var n={data:{id_xml:t.getAttribute("id"),diagram_id:e,id:t.getAttribute("id")+"_"+e,fillColor:t.getAttribute("color"),type:t.getAttribute("type")},position:{},classes:t.getAttribute("type")},r=t.getElementsByTagName("geometry")[0];switch(n.data.width=parseInt(r.getAttribute("width")),n.data.height=parseInt(r.getAttribute("height")),n.data.width<0&&(n.data.width=-n.data.width),n.data.height<0&&(n.data.height=-n.data.height),"facet"===n.data.type&&(n.data.height=40),n.position.x=parseInt(r.getAttribute("x")),n.position.y=parseInt(r.getAttribute("y")),n.data.type){case"concept":case"domain-restriction":n.data.shape="rectangle",n.data.identity="concept";break;case"range-restriction":n.data.shape="rectangle",n.data.identity="neutral";break;case"role":n.data.shape="diamond",n.data.identity="role";break;case"attribute":n.data.shape="ellipse",n.data.identity="attribute";break;case"union":case"disjoint-union":case"complement":case"intersection":case"enumeration":case"has-key":n.data.shape="hexagon",n.data.identity="neutral";break;case"role-inverse":case"role-chain":n.data.shape="hexagon",n.data.identity="role","role-chain"===n.data.type&&""!==t.getAttribute("inputs")&&(n.data.inputs=t.getAttribute("inputs").split(","));break;case"datatype-restriction":n.data.shape="hexagon",n.data.identity="value_domain";break;case"value-domain":n.data.shape="roundrectangle",n.data.identity="value_domain";break;case"property-assertion":n.data.shape="roundrectangle",n.data.identity="neutral",n.data.inputs=t.getAttribute("inputs").split(",");break;case"literal":case"individual":n.data.shape="octagon",n.data.identity="individual"==n.data.type?"individual":"value";break;case"facet":n.data.shape="polygon",n.data.shape_points="-0.9 -1 1 -1 0.9 1 -1 1",n.data.fillColor="#ffffff",n.data.identity="facet";break;default:console.error("tipo di nodo sconosciuto"),console.log(n)}var i=t.getElementsByTagName("label")[0];return null!=i&&(n.data.labelXpos=parseInt(i.getAttribute("x"))-n.position.x+1,n.data.labelYpos=parseInt(i.getAttribute("y"))-n.position.y+(n.data.height+2)/2+parseInt(i.getAttribute("height"))/4,n.data.fontSize=parseInt(i.getAttribute("size"))||12),kS(t)&&(n.classes+=" predicate"),n}},{key:"EdgeXmlToJson",value:function(t,e){var n,r={data:{target:t.getAttribute("target")+"_"+e,source:t.getAttribute("source")+"_"+e,id:t.getAttribute("id")+"_"+e,id_xml:t.getAttribute("id"),diagram_id:e,type:t.getAttribute("type"),breakpoints:[]}};"membership"==r.data.type.toLowerCase()?r.data.displayed_name="instance Of":"same"!=r.data.type.toLowerCase()&&"different"!=r.data.type.toLowerCase()||(r.data.displayed_name=r.data.type.toLowerCase());var i=this.ontology.getDiagram(e).cy.$id(r.data.source),o=this.ontology.getDiagram(e).cy.$id(r.data.target);if("role-chain"===o.data("type")||"property-assertion"===o.data("type"))for(n=0;n<o.data("inputs").length;n++)if(o.data("inputs")[n]===r.data.id_xml){r.data.target_label=n+1;break}var a,s=function(t){return null==t||null==t.firstChild?null:(1!==(t=t.firstChild).nodeType&&(t=ES(t)),t)}(t),l=[],u=[],c=[],h=0;for(a=0;a<t.childNodes.length;a++)if(1==t.childNodes[a].nodeType){if(l[h]={x:parseInt(s.getAttribute("x")),y:parseInt(s.getAttribute("y"))},null==ES(s))break;if(s=ES(s),h>0){var d=SS(o.position(),i.position(),l[h]);c.push(d[0]),u.push(d[1])}h++}h>1&&(r.data.breakpoints=l.slice(1,h),r.data.segment_distances=c,r.data.segment_weights=u);var f=[];f.x=l[0].x,f.y=l[0].y,0==(f=CS(f,i,l[1])).x&&0==f.y||(r.data.source_endpoint=[],r.data.source_endpoint.push(f.x),r.data.source_endpoint.push(f.y));var p=[];return p.x=l[l.length-1].x,p.y=l[l.length-1].y,0==(p=CS(p,o,l[l.length-2])).x&&0==p.y||(r.data.target_endpoint=[],r.data.target_endpoint.push(p.x),r.data.target_endpoint.push(p.y)),r}},{key:"addFakeNodes",value:function(t){var e=t[t.length-1];if("facet"===e.data.type){e.data.displayed_name=e.data.displayed_name.replace("^^","\n\n"),e.data.labelYpos=e.data.height;var n={selectable:!1,data:{height:e.data.height,width:e.data.width,shape:"polygon",shape_points:"-0.9 -1 1 -1 0.95 0 -0.95 0",diagram_id:e.data.diagram_id,parent_node_id:e.data.id,type:e.data.type},position:{x:e.position.x,y:e.position.y},classes:"fake-top-rhomboid"},r={selectable:!1,data:{height:e.data.height,width:e.data.width,shape:"polygon",shape_points:"-0.95 0 0.95 0 0.9 1 -1 1",diagram_id:e.data.diagram_id,parent_node_id:e.data.id,type:e.data.type},position:{x:e.position.x,y:e.position.y}};return t[t.length-1]=n,t.push(r),void t.push(e)}if(1===e.data.functional&&1===e.data.inverseFunctional){var i={selectable:!1,data:{height:e.data.height,width:e.data.width,fillColor:"#000",shape:"polygon",shape_points:"0 -1 1 0 0 1",diagram_id:e.data.diagram_id,type:e.data.type},position:{x:e.position.x,y:e.position.y},classes:"fake-triangle fake-triangle-right"},o={selectable:!1,data:{height:e.data.height,width:e.data.width+2,fillColor:"#fcfcfc",shape:"polygon",shape_points:"0 -1 -1 0 0 1",diagram_id:e.data.diagram_id,type:e.data.type},position:{x:e.position.x,y:e.position.y},classes:"fake-triangle"};e.data.height-=8,e.data.width-=10,null!=e.data.displayed_name&&(e.data.labelYpos-=4),t[t.length-1]=o,t.push(i),t.push(e)}if("property-assertion"===e.data.type){var a={selectable:!1,classes:"no_overlay",data:{height:e.data.height,width:e.data.height,shape:"ellipse",diagram_id:e.data.diagram_id,fillColor:"#fff",parent_node_id:e.data.id,type:e.data.type},position:{x:e.position.x-(e.data.width-e.data.height)/2,y:e.position.y}},s={selectable:!1,classes:"no_overlay",data:{height:e.data.height,width:e.data.height,shape:"ellipse",diagram_id:e.data.diagram_id,fillColor:"#fff",parent_node_id:e.data.id,type:e.data.type},position:{x:e.position.x+(e.data.width-e.data.height)/2,y:e.position.y}},l={data:{selectable:!1,height:e.data.height,width:e.data.width-e.data.height,shape:"rectangle",diagram_id:e.data.diagram_id,fillColor:"#fff",parent_node_id:e.data.id,type:e.data.type},position:e.position};e.data.height-=1,e.data.width=e.data.width-e.data.height,e.data.shape="rectangle",e.classes="property-assertion no_border",t[t.length-1]=l,t.push(a),t.push(s),t.push(e)}}},{key:"getIdentityForNeutralNodes",value:function(){this.ontology.diagrams.forEach((function(t){t.cy.nodes('[identity = "neutral"]').forEach((function(t){t.data("identity",function t(e){var n=e.incomers('[type = "input"]').sources(),r=n.data("identity");if("neutral"===r)return t(n);switch(e.data("type")){case"range-restriction":return"role"===r?"concept":"attribute"===r?"value_domain":r;case"enumeration":return"individual"===r?"concept":r;default:return r}}(t))}))}))}}]),t}(),BS="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,jS=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e!==n;){var r=e.nextSibling;t.removeChild(e),e=r}},FS="{{lit-".concat(String(Math.random()).slice(2),"}}"),zS="\x3c!--".concat(FS,"--\x3e"),VS=new RegExp("".concat(FS,"|").concat(zS)),qS=function t(e,n){Yn(this,t),this.parts=[],this.element=n;for(var r=[],i=[],o=document.createTreeWalker(n.content,133,null,!1),a=0,s=-1,l=0,u=e.strings,c=e.values.length;l<c;){var h=o.nextNode();if(null!==h){if(s++,1===h.nodeType){if(h.hasAttributes()){for(var d=h.attributes,f=d.length,p=0,g=0;g<f;g++)US(d[g].name,"$lit$")&&p++;for(;p-- >0;){var v=u[l],y=YS.exec(v)[2],m=y.toLowerCase()+"$lit$",b=h.getAttribute(m);h.removeAttribute(m);var w=b.split(VS);this.parts.push({type:"attribute",index:s,name:y,strings:w}),l+=w.length-1}}"TEMPLATE"===h.tagName&&(i.push(h),o.currentNode=h.content)}else if(3===h.nodeType){var x=h.data;if(x.indexOf(FS)>=0){for(var _=h.parentNode,E=x.split(VS),k=E.length-1,S=0;S<k;S++){var C=void 0,T=E[S];if(""===T)C=WS();else{var N=YS.exec(T);null!==N&&US(N[2],"$lit$")&&(T=T.slice(0,N.index)+N[1]+N[2].slice(0,-"$lit$".length)+N[3]),C=document.createTextNode(T)}_.insertBefore(C,h),this.parts.push({type:"node",index:++s})}""===E[k]?(_.insertBefore(WS(),h),r.push(h)):h.data=E[k],l+=k}}else if(8===h.nodeType)if(h.data===FS){var O=h.parentNode;null!==h.previousSibling&&s!==a||(s++,O.insertBefore(WS(),h)),a=s,this.parts.push({type:"node",index:s}),null===h.nextSibling?h.data="":(r.push(h),s--),l++}else for(var P=-1;-1!==(P=h.data.indexOf(FS,P+1));)this.parts.push({type:"node",index:-1}),l++}else o.currentNode=i.pop()}for(var M=0,D=r;M<D.length;M++){var A=D[M];A.parentNode.removeChild(A)}},US=function(t,e){var n=t.length-e.length;return n>=0&&t.slice(n)===e},HS=function(t){return-1!==t.index},WS=function(){return document.createComment("")},YS=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function GS(t,e){for(var n=t.element.content,r=t.parts,i=document.createTreeWalker(n,133,null,!1),o=KS(r),a=r[o],s=-1,l=0,u=[],c=null;i.nextNode();){s++;var h=i.currentNode;for(h.previousSibling===c&&(c=null),e.has(h)&&(u.push(h),null===c&&(c=h)),null!==c&&l++;void 0!==a&&a.index===s;)a.index=null!==c?-1:a.index-l,a=r[o=KS(r,o)]}u.forEach((function(t){return t.parentNode.removeChild(t)}))}var XS=function(t){for(var e=11===t.nodeType?0:1,n=document.createTreeWalker(t,133,null,!1);n.nextNode();)e++;return e},KS=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e+1;n<t.length;n++){var r=t[n];if(HS(r))return n}return-1};
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
var $S=new WeakMap,ZS=function(t){return"function"==typeof t&&$S.has(t)},JS={},QS={},tC=function(){function t(e,n,r){Yn(this,t),this.__parts=[],this.template=e,this.processor=n,this.options=r}return Xn(t,[{key:"update",value:function(t){var e,n=0,r=ur(this.__parts);try{for(r.s();!(e=r.n()).done;){var i=e.value;void 0!==i&&i.setValue(t[n]),n++}}catch(t){r.e(t)}finally{r.f()}var o,a=ur(this.__parts);try{for(a.s();!(o=a.n()).done;){var s=o.value;void 0!==s&&s.commit()}}catch(t){a.e(t)}finally{a.f()}}},{key:"_clone",value:function(){for(var t,e=BS?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],r=this.template.parts,i=document.createTreeWalker(e,133,null,!1),o=0,a=0,s=i.nextNode();o<r.length;)if(t=r[o],HS(t)){for(;a<t.index;)a++,"TEMPLATE"===s.nodeName&&(n.push(s),i.currentNode=s.content),null===(s=i.nextNode())&&(i.currentNode=n.pop(),s=i.nextNode());if("node"===t.type){var l=this.processor.handleTextExpression(this.options);l.insertAfterNode(s.previousSibling),this.__parts.push(l)}else{var u;(u=this.__parts).push.apply(u,ar(this.processor.handleAttributeExpressions(s,t.name,t.strings,this.options)))}o++}else this.__parts.push(void 0),o++;return BS&&(document.adoptNode(e),customElements.upgrade(e)),e}}]),t}(),eC=" ".concat(FS," "),nC=function(){function t(e,n,r,i){Yn(this,t),this.strings=e,this.values=n,this.type=r,this.processor=i}return Xn(t,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,e="",n=!1,r=0;r<t;r++){var i=this.strings[r],o=i.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===i.indexOf("--\x3e",o+1);var a=YS.exec(i);e+=null===a?i+(n?eC:zS):i.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+FS}return e+=this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}]),t}(),rC=function(t){return null===t||!("object"===Hn(t)||"function"==typeof t)},iC=function(t){return Array.isArray(t)||!(!t||!t[Symbol.iterator])},oC=function(){function t(e,n,r){Yn(this,t),this.dirty=!0,this.element=e,this.name=n,this.strings=r,this.parts=[];for(var i=0;i<r.length-1;i++)this.parts[i]=this._createPart()}return Xn(t,[{key:"_createPart",value:function(){return new aC(this)}},{key:"_getValue",value:function(){for(var t=this.strings,e=t.length-1,n="",r=0;r<e;r++){n+=t[r];var i=this.parts[r];if(void 0!==i){var o=i.value;if(rC(o)||!iC(o))n+="string"==typeof o?o:String(o);else{var a,s=ur(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;n+="string"==typeof l?l:String(l)}}catch(t){s.e(t)}finally{s.f()}}}}return n+=t[e]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),t}(),aC=function(){function t(e){Yn(this,t),this.value=void 0,this.committer=e}return Xn(t,[{key:"setValue",value:function(t){t===JS||rC(t)&&t===this.value||(this.value=t,ZS(t)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;ZS(this.value);){var t=this.value;this.value=JS,t(this)}this.value!==JS&&this.committer.commit()}}]),t}(),sC=function(){function t(e){Yn(this,t),this.value=void 0,this.__pendingValue=void 0,this.options=e}return Xn(t,[{key:"appendInto",value:function(t){this.startNode=t.appendChild(WS()),this.endNode=t.appendChild(WS())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t.__insert(this.startNode=WS()),t.__insert(this.endNode=WS())}},{key:"insertAfterPart",value:function(t){t.__insert(this.startNode=WS()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;ZS(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=JS,t(this)}var e=this.__pendingValue;e!==JS&&(rC(e)?e!==this.value&&this.__commitText(e):e instanceof nC?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):iC(e)?this.__commitIterable(e):e===QS?(this.value=QS,this.clear()):this.__commitText(e))}}},{key:"__insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"__commitNode",value:function(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}},{key:"__commitText",value:function(t){var e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}},{key:"__commitTemplateResult",value:function(t){var e=this.options.templateFactory(t);if(this.value instanceof tC&&this.value.template===e)this.value.update(t.values);else{var n=new tC(e,t.processor,this.options),r=n._clone();n.update(t.values),this.__commitNode(r),this.value=n}}},{key:"__commitIterable",value:function(e){Array.isArray(this.value)||(this.value=[],this.clear());var n,r,i=this.value,o=0,a=ur(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;void 0===(n=i[o])&&(n=new t(this.options),i.push(n),0===o?n.appendIntoPart(this):n.insertAfterPart(i[o-1])),n.setValue(s),n.commit(),o++}}catch(t){a.e(t)}finally{a.f()}o<i.length&&(i.length=o,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;jS(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),t}(),lC=function(){function t(e,n,r){if(Yn(this,t),this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=n,this.strings=r}return Xn(t,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;ZS(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=JS,t(this)}if(this.__pendingValue!==JS){var e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=JS}}}]),t}(),uC=function(t){Kn(n,t);var e=rr(n);function n(t,r,i){var o;return Yn(this,n),(o=e.call(this,t,r,i)).single=2===i.length&&""===i[0]&&""===i[1],o}return Xn(n,[{key:"_createPart",value:function(){return new cC(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:ir($n(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(oC),cC=function(t){Kn(n,t);var e=rr(n);function n(){return Yn(this,n),e.apply(this,arguments)}return n}(aC),hC=!1;!function(){try{var t={get capture(){return hC=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}}();var dC=function(){function t(e,n,r){var i=this;Yn(this,t),this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=n,this.eventContext=r,this.__boundHandleEvent=function(t){return i.handleEvent(t)}}return Xn(t,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;ZS(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=JS,t(this)}if(this.__pendingValue!==JS){var e=this.__pendingValue,n=this.value,r=null==e||null!=n&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),i=null!=e&&(null==n||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=fC(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=JS}}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),t}(),fC=function(t){return t&&(hC?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)};function pC(t){var e=gC.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},gC.set(t.type,e));var n=e.stringsArray.get(t.strings);if(void 0!==n)return n;var r=t.strings.join(FS);return void 0===(n=e.keyString.get(r))&&(n=new qS(t,t.getTemplateElement()),e.keyString.set(r,n)),e.stringsArray.set(t.strings,n),n}var gC=new Map,vC=new WeakMap,yC=new(function(){function t(){Yn(this,t)}return Xn(t,[{key:"handleAttributeExpressions",value:function(t,e,n,r){var i=e[0];return"."===i?new uC(t,e.slice(1),n).parts:"@"===i?[new dC(t,e.slice(1),r.eventContext)]:"?"===i?[new lC(t,e.slice(1),n)]:new oC(t,e,n).parts}},{key:"handleTextExpression",value:function(t){return new sC(t)}}]),t}());
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");var mC=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new nC(t,n,"html",yC)},bC=function(t,e){return"".concat(t,"--").concat(e)},wC=!0;void 0===window.ShadyCSS?wC=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),wC=!1);var xC=function(t){return function(e){var n=bC(e.type,t),r=gC.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},gC.set(n,r));var i=r.stringsArray.get(e.strings);if(void 0!==i)return i;var o=e.strings.join(FS);if(void 0===(i=r.keyString.get(o))){var a=e.getTemplateElement();wC&&window.ShadyCSS.prepareTemplateDom(a,t),i=new qS(e,a),r.keyString.set(o,i)}return r.stringsArray.set(e.strings,i),i}},_C=["html","svg"],EC=new Set,kC=function(t,e,n){EC.add(t);var r=n?n.element:document.createElement("template"),i=e.querySelectorAll("style"),o=i.length;if(0!==o){for(var a=document.createElement("style"),s=0;s<o;s++){var l=i[s];l.parentNode.removeChild(l),a.textContent+=l.textContent}!function(t){_C.forEach((function(e){var n=gC.get(bC(e,t));void 0!==n&&n.keyString.forEach((function(t){var e=t.element.content,n=new Set;Array.from(e.querySelectorAll("style")).forEach((function(t){n.add(t)})),GS(t,n)}))}))}(t);var u=r.content;n?function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.element.content,i=t.parts;if(null!=n)for(var o=document.createTreeWalker(r,133,null,!1),a=KS(i),s=0,l=-1;o.nextNode();){l++;var u=o.currentNode;for(u===n&&(s=XS(e),n.parentNode.insertBefore(e,n));-1!==a&&i[a].index===l;){if(s>0){for(;-1!==a;)i[a].index+=s,a=KS(i,a);return}a=KS(i,a)}}else r.appendChild(e)}(n,a,u.firstChild):u.insertBefore(a,u.firstChild),window.ShadyCSS.prepareTemplateStyles(r,t);var c=u.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)e.insertBefore(c.cloneNode(!0),e.firstChild);else if(n){u.insertBefore(a,u.firstChild);var h=new Set;h.add(a),GS(n,h)}}else window.ShadyCSS.prepareTemplateStyles(r,t)};window.JSCompiler_renameProperty=function(t,e){return t};var SC={toAttribute:function(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute:function(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},CC=function(t,e){return e!==t&&(e==e||t==t)},TC={attribute:!0,type:String,converter:SC,reflect:!1,hasChanged:CC},NC=function(t){Kn(r,t);var e,n=rr(r);function r(){var t;return Yn(this,r),(t=n.call(this))._updateState=0,t._instanceProperties=void 0,t._updatePromise=new Promise((function(e){return t._enableUpdatingResolver=e})),t._changedProperties=new Map,t._reflectingProperties=void 0,t.initialize(),t}return Xn(r,[{key:"initialize",value:function(){this._saveInstanceProperties(),this._requestUpdate()}},{key:"_saveInstanceProperties",value:function(){var t=this;this.constructor._classProperties.forEach((function(e,n){if(t.hasOwnProperty(n)){var r=t[n];delete t[n],t._instanceProperties||(t._instanceProperties=new Map),t._instanceProperties.set(n,r)}}))}},{key:"_applyInstanceProperties",value:function(){var t=this;this._instanceProperties.forEach((function(e,n){return t[n]=e})),this._instanceProperties=void 0}},{key:"connectedCallback",value:function(){this.enableUpdating()}},{key:"enableUpdating",value:function(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&this._attributeToProperty(t,n)}},{key:"_propertyToAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TC,r=this.constructor,i=r._attributeNameForProperty(t,n);if(void 0!==i){var o=r._propertyValueToAttribute(e,n);if(void 0===o)return;this._updateState=8|this._updateState,null==o?this.removeAttribute(i):this.setAttribute(i,o),this._updateState=-9&this._updateState}}},{key:"_attributeToProperty",value:function(t,e){if(!(8&this._updateState)){var n=this.constructor,r=n._attributeToPropertyMap.get(t);if(void 0!==r){var i=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(e,i),this._updateState=-17&this._updateState}}}},{key:"_requestUpdate",value:function(t,e){var n=!0;if(void 0!==t){var r=this.constructor,i=r.getPropertyOptions(t);r._valueHasChanged(this[t],e,i.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==i.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,i))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}},{key:"requestUpdate",value:function(t,e){return this._requestUpdate(t,e),this.updateComplete}},{key:"_enqueueUpdate",value:(e=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Wn(o,r,i,a,s,"next",t)}function s(t){Wn(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._updateState=4|this._updateState,t.prev=1,t.next=4,this._updatePromise;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:if(null==(e=this.performUpdate())){t.next=12;break}return t.next=12,e;case 12:return t.abrupt("return",!this._hasRequestedUpdate);case 13:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(){return e.apply(this,arguments)})},{key:"performUpdate",value:function(){this._instanceProperties&&this._applyInstanceProperties();var t=!1,e=this._changedProperties;try{(t=this.shouldUpdate(e))?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}},{key:"_markUpdated",value:function(){this._changedProperties=new Map,this._updateState=-5&this._updateState}},{key:"_getUpdateComplete",value:function(){return this._updatePromise}},{key:"shouldUpdate",value:function(t){return!0}},{key:"update",value:function(t){var e=this;void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((function(t,n){return e._propertyToAttribute(n,e[n],t)})),this._reflectingProperties=void 0),this._markUpdated()}},{key:"updated",value:function(t){}},{key:"firstUpdated",value:function(t){}},{key:"_hasRequestedUpdate",get:function(){return 4&this._updateState}},{key:"hasUpdated",get:function(){return 1&this._updateState}},{key:"updateComplete",get:function(){return this._getUpdateComplete()}}],[{key:"_ensureClassProperties",value:function(){var t=this;if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;var e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((function(e,n){return t._classProperties.set(n,e)}))}}},{key:"createProperty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TC;if(this._ensureClassProperties(),this._classProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){var n="symbol"===Hn(t)?Symbol():"__".concat(t),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&Object.defineProperty(this.prototype,t,r)}}},{key:"getPropertyDescriptor",value:function(t,e,n){return{get:function(){return this[e]},set:function(n){var r=this[t];this[e]=n,this._requestUpdate(t,r)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(t){return this._classProperties&&this._classProperties.get(t)||TC}},{key:"finalize",value:function(){var t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var e,n=this.properties,r=ur([].concat(ar(Object.getOwnPropertyNames(n)),ar("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[])));try{for(r.s();!(e=r.n()).done;){var i=e.value;this.createProperty(i,n[i])}}catch(t){r.e(t)}finally{r.f()}}}},{key:"_attributeNameForProperty",value:function(t,e){var n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}},{key:"_valueHasChanged",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:CC;return n(t,e)}},{key:"_propertyValueFromAttribute",value:function(t,e){var n=e.type,r=e.converter||SC,i="function"==typeof r?r:r.fromAttribute;return i?i(t,n):t}},{key:"_propertyValueToAttribute",value:function(t,e){if(void 0!==e.reflect){var n=e.type,r=e.converter;return(r&&r.toAttribute||SC.toAttribute)(t,n)}}},{key:"observedAttributes",get:function(){var t=this;this.finalize();var e=[];return this._classProperties.forEach((function(n,r){var i=t._attributeNameForProperty(r,n);void 0!==i&&(t._attributeToPropertyMap.set(i,r),e.push(i))})),e}}]),r}(tr(HTMLElement));NC.finalized=!0;
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
var OC="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,PC=Symbol(),MC=function(){function t(e,n){if(Yn(this,t),n!==PC)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}return Xn(t,[{key:"toString",value:function(){return this.cssText}},{key:"styleSheet",get:function(){return void 0===this._styleSheet&&(OC?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}}]),t}(),DC=function(t){if(t instanceof MC)return t.cssText;if("number"==typeof t)return t;throw new Error("Value passed to 'css' function must be a 'css' function result: ".concat(t,". Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security."))},AC=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.reduce((function(e,n,r){return e+DC(n)+t[r+1]}),t[0]);return new MC(i,PC)};(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");var LC={},IC=function(t){Kn(n,t);var e=rr(n);function n(){return Yn(this,n),e.apply(this,arguments)}return Xn(n,[{key:"initialize",value:function(){ir($n(n.prototype),"initialize",this).call(this),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}},{key:"createRenderRoot",value:function(){return this.attachShadow({mode:"open"})}},{key:"adoptStyles",value:function(){var t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?OC?this.renderRoot.adoptedStyleSheets=t.map((function(t){return t.styleSheet})):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((function(t){return t.cssText})),this.localName))}},{key:"connectedCallback",value:function(){ir($n(n.prototype),"connectedCallback",this).call(this),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}},{key:"update",value:function(t){var e=this,r=this.render();ir($n(n.prototype),"update",this).call(this,t),r!==LC&&this.constructor.render(r,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((function(t){var n=document.createElement("style");n.textContent=t.cssText,e.renderRoot.appendChild(n)})))}},{key:"render",value:function(){return LC}}],[{key:"getStyles",value:function(){return this.styles}},{key:"_getUniqueStyles",value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))){var t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){var e=function t(e,n){return e.reduceRight((function(e,n){return Array.isArray(n)?t(n,e):(e.add(n),e)}),n)}(t,new Set),n=[];e.forEach((function(t){return n.unshift(t)})),this._styles=n}else this._styles=[t]}}}]),n}(NC);IC.finalized=!0,IC.render=function(t,e,n){if(!n||"object"!==Hn(n)||!n.scopeName)throw new Error("The `scopeName` option is required.");var r=n.scopeName,i=vC.has(e),o=wC&&11===e.nodeType&&!!e.host,a=o&&!EC.has(r),s=a?document.createDocumentFragment():e;if(function(t,e,n){var r=vC.get(e);void 0===r&&(jS(e,e.firstChild),vC.set(e,r=new sC(Object.assign({templateFactory:pC},n))),r.appendInto(e)),r.setValue(t),r.commit()}(t,s,Object.assign({templateFactory:xC(r)},n)),a){var l=vC.get(s);vC.delete(s);var u=l.value instanceof tC?l.value.template:void 0;kC(r,s,u),jS(e,e.firstChild),e.appendChild(s),vC.set(e,l)}!i&&o&&window.ShadyCSS.styleElement(e.host)};
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
var RC=new WeakMap,BC=function(t){return"function"==typeof t&&RC.has(t)},jC=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,FC=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e!==n;){var r=e.nextSibling;t.removeChild(e),e=r}},zC={},VC={},qC="{{lit-".concat(String(Math.random()).slice(2),"}}"),UC="\x3c!--".concat(qC,"--\x3e"),HC=function(t){return-1!==t.index},WC=function(){return document.createComment("")},YC=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,GC=function(){function t(e,n,r){Yn(this,t),this.__parts=[],this.template=e,this.processor=n,this.options=r}return Xn(t,[{key:"update",value:function(t){var e,n=0,r=ur(this.__parts);try{for(r.s();!(e=r.n()).done;){var i=e.value;void 0!==i&&i.setValue(t[n]),n++}}catch(t){r.e(t)}finally{r.f()}var o,a=ur(this.__parts);try{for(a.s();!(o=a.n()).done;){var s=o.value;void 0!==s&&s.commit()}}catch(t){a.e(t)}finally{a.f()}}},{key:"_clone",value:function(){for(var t,e=jC?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],r=this.template.parts,i=document.createTreeWalker(e,133,null,!1),o=0,a=0,s=i.nextNode();o<r.length;)if(t=r[o],HC(t)){for(;a<t.index;)a++,"TEMPLATE"===s.nodeName&&(n.push(s),i.currentNode=s.content),null===(s=i.nextNode())&&(i.currentNode=n.pop(),s=i.nextNode());if("node"===t.type){var l=this.processor.handleTextExpression(this.options);l.insertAfterNode(s.previousSibling),this.__parts.push(l)}else{var u;(u=this.__parts).push.apply(u,ar(this.processor.handleAttributeExpressions(s,t.name,t.strings,this.options)))}o++}else this.__parts.push(void 0),o++;return jC&&(document.adoptNode(e),customElements.upgrade(e)),e}}]),t}(),XC=function(){function t(e,n,r,i){Yn(this,t),this.strings=e,this.values=n,this.type=r,this.processor=i}return Xn(t,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,e="",n=!1,r=0;r<t;r++){var i=this.strings[r],o=i.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===i.indexOf("--\x3e",o+1);var a=YC.exec(i);e+=null===a?i+(n?qC:UC):i.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+qC}return e+=this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}]),t}(),KC=function(t){return null===t||!("object"===Hn(t)||"function"==typeof t)},$C=function(t){return Array.isArray(t)||!(!t||!t[Symbol.iterator])},ZC=function(){function t(e,n,r){Yn(this,t),this.dirty=!0,this.element=e,this.name=n,this.strings=r,this.parts=[];for(var i=0;i<r.length-1;i++)this.parts[i]=this._createPart()}return Xn(t,[{key:"_createPart",value:function(){return new JC(this)}},{key:"_getValue",value:function(){for(var t=this.strings,e=t.length-1,n="",r=0;r<e;r++){n+=t[r];var i=this.parts[r];if(void 0!==i){var o=i.value;if(KC(o)||!$C(o))n+="string"==typeof o?o:String(o);else{var a,s=ur(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;n+="string"==typeof l?l:String(l)}}catch(t){s.e(t)}finally{s.f()}}}}return n+=t[e]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),t}(),JC=function(){function t(e){Yn(this,t),this.value=void 0,this.committer=e}return Xn(t,[{key:"setValue",value:function(t){t===zC||KC(t)&&t===this.value||(this.value=t,BC(t)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;BC(this.value);){var t=this.value;this.value=zC,t(this)}this.value!==zC&&this.committer.commit()}}]),t}(),QC=function(){function t(e){Yn(this,t),this.value=void 0,this.__pendingValue=void 0,this.options=e}return Xn(t,[{key:"appendInto",value:function(t){this.startNode=t.appendChild(WC()),this.endNode=t.appendChild(WC())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t.__insert(this.startNode=WC()),t.__insert(this.endNode=WC())}},{key:"insertAfterPart",value:function(t){t.__insert(this.startNode=WC()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;BC(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=zC,t(this)}var e=this.__pendingValue;e!==zC&&(KC(e)?e!==this.value&&this.__commitText(e):e instanceof XC?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):$C(e)?this.__commitIterable(e):e===VC?(this.value=VC,this.clear()):this.__commitText(e))}},{key:"__insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"__commitNode",value:function(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}},{key:"__commitText",value:function(t){var e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType?e.data=t:this.__commitNode(document.createTextNode("string"==typeof t?t:String(t))),this.value=t}},{key:"__commitTemplateResult",value:function(t){var e=this.options.templateFactory(t);if(this.value instanceof GC&&this.value.template===e)this.value.update(t.values);else{var n=new GC(e,t.processor,this.options),r=n._clone();n.update(t.values),this.__commitNode(r),this.value=n}}},{key:"__commitIterable",value:function(e){Array.isArray(this.value)||(this.value=[],this.clear());var n,r,i=this.value,o=0,a=ur(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;void 0===(n=i[o])&&(n=new t(this.options),i.push(n),0===o?n.appendIntoPart(this):n.insertAfterPart(i[o-1])),n.setValue(s),n.commit(),o++}}catch(t){a.e(t)}finally{a.f()}o<i.length&&(i.length=o,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;FC(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),t}(),tT=function(){function t(e,n,r){if(Yn(this,t),this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=n,this.strings=r}return Xn(t,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;BC(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=zC,t(this)}if(this.__pendingValue!==zC){var e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=zC}}}]),t}(),eT=function(t){Kn(n,t);var e=rr(n);function n(t,r,i){var o;return Yn(this,n),(o=e.call(this,t,r,i)).single=2===i.length&&""===i[0]&&""===i[1],o}return Xn(n,[{key:"_createPart",value:function(){return new nT(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:ir($n(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(ZC),nT=function(t){Kn(n,t);var e=rr(n);function n(){return Yn(this,n),e.apply(this,arguments)}return n}(JC),rT=!1;try{var iT={get capture(){return rT=!0,!1}};window.addEventListener("test",iT,iT),window.removeEventListener("test",iT,iT)}catch(t){}var oT=function(){function t(e,n,r){var i=this;Yn(this,t),this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=n,this.eventContext=r,this.__boundHandleEvent=function(t){return i.handleEvent(t)}}return Xn(t,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;BC(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=zC,t(this)}if(this.__pendingValue!==zC){var e=this.__pendingValue,n=this.value,r=null==e||null!=n&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),i=null!=e&&(null==n||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=aT(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=zC}}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),t}(),aT=function(t){return t&&(rT?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)};new(function(){function t(){Yn(this,t)}return Xn(t,[{key:"handleAttributeExpressions",value:function(t,e,n,r){var i=e[0];return"."===i?new eT(t,e.slice(1),n).parts:"@"===i?[new oT(t,e.slice(1),r.eventContext)]:"?"===i?[new tT(t,e.slice(1),n)]:new ZC(t,e,n).parts}},{key:"handleTextExpression",value:function(t){return new QC(t)}}]),t}());function sT(){var t=or([':host{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}']);return sT=function(){return t},t}
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");var lT=AC(sT()),uT=document.createElement("link");
/**
  @license
  Copyright 2018 Google Inc. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  */function cT(){var t=or(["<slot></slot>"]);return cT=function(){return t},t}uT.rel="stylesheet",uT.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(uT);var hT,dT=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Hn(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},fT=function(t){Kn(n,t);var e=rr(n);function n(){return Yn(this,n),e.apply(this,arguments)}return Xn(n,[{key:"render",value:function(){return mC(cT())}}]),n}(IC);function pT(){var t=or(["#422D53"]);return pT=function(){return t},t}function gT(){var t=or(["#9875b7"]);return gT=function(){return t},t}function vT(){var t=or(["#423500"]);return vT=function(){return t},t}function yT(){var t=or(["#b28f00"]);return yT=function(){return t},t}function mT(){var t=or(["#4B7900"]);return mT=function(){return t},t}function bT(){var t=or(["#C7DAAD"]);return bT=function(){return t},t}function wT(){var t=or(["#7fb3d2"]);return wT=function(){return t},t}function xT(){var t=or(["#043954"]);return xT=function(){return t},t}function _T(){var t=or(["#a0a0a0"]);return _T=function(){return t},t}function ET(){var t=or(["#a0a0a0"]);return ET=function(){return t},t}function kT(){var t=or(["#010101"]);return kT=function(){return t},t}function ST(){var t=or(["#a0a0a0"]);return ST=function(){return t},t}function CT(){var t=or(["#a0a0a0"]);return CT=function(){return t},t}function TT(){var t=or(["#181c22"]);return TT=function(){return t},t}function NT(){var t=or(["#fff"]);return NT=function(){return t},t}function OT(){var t=or(["#cc3b3b"]);return OT=function(){return t},t}function PT(){var t=or(["rgba(255, 255, 255, 0.25)"]);return PT=function(){return t},t}function MT(){var t=or(["#a0a0a0"]);return MT=function(){return t},t}function DT(){var t=or(["#0099e6"]);return DT=function(){return t},t}function AT(){var t=or(["#222831"]);return AT=function(){return t},t}function LT(){var t=or(["#72c1f5"]);return LT=function(){return t},t}function IT(){var t=or(["#a0a0a0"]);return IT=function(){return t},t}function RT(){var t=or(["#1a1a1a"]);return RT=function(){return t},t}function BT(){var t=or(["#a0a0a0"]);return BT=function(){return t},t}function jT(){var t=or(["#222831"]);return jT=function(){return t},t}function FT(){var t=or(["#9875b7"]);return FT=function(){return t},t}function zT(){var t=or(["#666"]);return zT=function(){return t},t}function VT(){var t=or(["#B08D00"]);return VT=function(){return t},t}function qT(){var t=or(["#666"]);return qT=function(){return t},t}function UT(){var t=or(["#4B7900"]);return UT=function(){return t},t}function HT(){var t=or(["#666"]);return HT=function(){return t},t}function WT(){var t=or(["#065A85"]);return WT=function(){return t},t}function YT(){var t=or(["#666"]);return YT=function(){return t},t}function GT(){var t=or(["#fcfcfc"]);return GT=function(){return t},t}function XT(){var t=or(["#fcfcfc"]);return XT=function(){return t},t}function KT(){var t=or(["#000"]);return KT=function(){return t},t}function $T(){var t=or(["#333"]);return $T=function(){return t},t}function ZT(){var t=or(["#fff"]);return ZT=function(){return t},t}function JT(){var t=or(["#333"]);return JT=function(){return t},t}function QT(){var t=or(["#fff"]);return QT=function(){return t},t}function tN(){var t=or(["#cc3b3b"]);return tN=function(){return t},t}function eN(){var t=or(["rgba(255, 255, 255, 0.5)"]);return eN=function(){return t},t}function nN(){var t=or(["#fff"]);return nN=function(){return t},t}function rN(){var t=or(["#0099e6"]);return rN=function(){return t},t}function iN(){var t=or(["#333"]);return iN=function(){return t},t}function oN(){var t=or(["#99ddff"]);return oN=function(){return t},t}function aN(){var t=or(["#fff"]);return aN=function(){return t},t}function sN(){var t=or(["#1a1a1a"]);return sN=function(){return t},t}function lN(){var t=or(["#fff"]);return lN=function(){return t},t}function uN(){var t=or(["#333"]);return uN=function(){return t},t}function cN(){var t=or(["#fcfcfc"]);return cN=function(){return t},t}function hN(){var t=or(["#000"]);return hN=function(){return t},t}function dN(){var t=or(["#000"]);return dN=function(){return t},t}function fN(){var t=or(["#000"]);return fN=function(){return t},t}function pN(){var t=or(["#fcfcfc"]);return pN=function(){return t},t}function gN(){var t=or(["#000"]);return gN=function(){return t},t}function vN(){var t=or(["#fafafa"]);return vN=function(){return t},t}function yN(){var t=or(["#fff"]);return yN=function(){return t},t}function mN(){var t=or(["#cc3b3b"]);return mN=function(){return t},t}function bN(){var t=or(["rgba(0,0,0,0.2)"]);return bN=function(){return t},t}function wN(){var t=or(["#fff"]);return wN=function(){return t},t}function xN(){var t=or(["#2c6187"]);return xN=function(){return t},t}function _N(){var t=or(["#fff"]);return _N=function(){return t},t}function EN(){var t=or(["rgb(81,149,199)"]);return EN=function(){return t},t}function kN(){var t=or(["#888"]);return kN=function(){return t},t}function SN(){var t=or(["#e6e6e6"]);return SN=function(){return t},t}function CN(){var t=or(["#666"]);return CN=function(){return t},t}function TN(){var t=or(["#fff"]);return TN=function(){return t},t}function NN(){var t=or(["#9875b7"]);return NN=function(){return t},t}function ON(){var t=or(["#d3b3ef"]);return ON=function(){return t},t}function PN(){var t=or(["#B08D00"]);return PN=function(){return t},t}function MN(){var t=or(["#F9F3A6"]);return MN=function(){return t},t}function DN(){var t=or(["#4B7900"]);return DN=function(){return t},t}function AN(){var t=or(["#C7DAAD"]);return AN=function(){return t},t}function LN(){var t=or(["#065A85"]);return LN=function(){return t},t}function IN(){var t=or(["#AACDE1"]);return IN=function(){return t},t}function RN(){var t=or(["#fcfcfc"]);return RN=function(){return t},t}function BN(){var t=or(["#000"]);return BN=function(){return t},t}function jN(){var t=or(["#000"]);return jN=function(){return t},t}function FN(){var t=or(["#000"]);return FN=function(){return t},t}function zN(){var t=or(["#fcfcfc"]);return zN=function(){return t},t}function VN(){var t=or(["#000"]);return VN=function(){return t},t}function qN(){var t=or(["#fafafa"]);return qN=function(){return t},t}function UN(){var t=or(["#fff"]);return UN=function(){return t},t}function HN(){var t=or(["#D39F0A"]);return HN=function(){return t},t}function WN(){var t=or(["#fff"]);return WN=function(){return t},t}function YN(){var t=or(["#cc3b3b"]);return YN=function(){return t},t}function GN(){var t=or(["rgba(0,0,0,0.2)"]);return GN=function(){return t},t}function XN(){var t=or(["#fff"]);return XN=function(){return t},t}function KN(){var t=or(["#2c6187"]);return KN=function(){return t},t}function $N(){var t=or(["#fff"]);return $N=function(){return t},t}function ZN(){var t=or(["rgb(81,149,199)"]);return ZN=function(){return t},t}function JN(){var t=or(["#888"]);return JN=function(){return t},t}function QN(){var t=or(["#e6e6e6"]);return QN=function(){return t},t}function tO(){var t=or(["#666"]);return tO=function(){return t},t}function eO(){var t=or(["#fff"]);return eO=function(){return t},t}fT.styles=lT,fT=dT([(hT="mwc-icon",function(t){return"function"==typeof t?function(t,e){return window.customElements.define(t,e),e}(hT,t):function(t,e){return{kind:e.kind,elements:e.elements,finisher:function(e){window.customElements.define(t,e)}}}(hT,t)})],fT);var nO={primary:AC(eO()),on_primary:AC(tO()),primary_dark:AC(QN()),on_primary_dark:AC(JN()),secondary:AC(ZN()),on_secondary:AC($N()),secondary_dark:AC(KN()),on_secondary_dark:AC(XN()),shadows:AC(GN()),error:AC(YN()),on_error:AC(WN()),warning:AC(HN()),on_warning:AC(UN()),background:AC(qN()),edge:AC(VN()),node_bg:AC(zN()),node_bg_contrast:AC(FN()),node_border:AC(jN()),label_color:AC(BN()),label_color_contrast:AC(RN()),role:AC(IN()),role_dark:AC(LN()),attribute:AC(AN()),attribute_dark:AC(DN()),concept:AC(MN()),concept_dark:AC(PN()),individual:AC(ON()),individual_dark:AC(NN())},rO={primary:AC(TN()),on_primary:AC(CN()),primary_dark:AC(SN()),on_primary_dark:AC(kN()),secondary:AC(EN()),on_secondary:AC(_N()),secondary_dark:AC(xN()),on_secondary_dark:AC(wN()),shadows:AC(bN()),error:AC(mN()),on_error:AC(yN()),background:AC(vN()),edge:AC(gN()),node_bg:AC(pN()),node_bg_contrast:AC(fN()),node_border:AC(dN()),label_color:AC(hN()),label_color_contrast:AC(cN())},iO={primary:AC(uN()),on_primary:AC(lN()),primary_dark:AC(sN()),on_primary_dark:AC(aN()),secondary:AC(oN()),on_secondary:AC(iN()),secondary_dark:AC(rN()),on_secondary_dark:AC(nN()),shadows:AC(eN()),error:AC(tN()),on_error:AC(QT()),background:AC(JT()),edge:AC(ZT()),node_bg:AC($T()),node_bg_contrast:AC(KT()),node_border:AC(XT()),label_color:AC(GT()),role:AC(YT()),role_dark:AC(WT()),attribute:AC(HT()),attribute_dark:AC(UT()),concept:AC(qT()),concept_dark:AC(VT()),individual:AC(zT()),individual_dark:AC(FT())},oO={primary:AC(jT()),on_primary:AC(BT()),primary_dark:AC(RT()),on_primary_dark:AC(IT()),secondary:AC(LT()),on_secondary:AC(AT()),secondary_dark:AC(DT()),on_secondary_dark:AC(MT()),shadows:AC(PT()),error:AC(OT()),on_error:AC(NT()),background:AC(TT()),edge:AC(CT()),node_bg:AC(ST()),node_bg_contrast:AC(kT()),node_border:AC(ET()),label_color:AC(_T()),role:AC(xT()),role_dark:AC(wT()),attribute_dark:AC(bT()),attribute:AC(mT()),concept_dark:AC(yT()),concept:AC(vT()),individual_dark:AC(gT()),individual:AC(pT())},aO=Object.freeze({__proto__:null,gscape:nO,classic:rO,dark_old:iO,dark:oO});function sO(){var t=or([""]);return sO=function(){return t},t}function lO(){var t=or(['\n      :host, .gscape-panel{\n        font-family : "Open Sans","Helvetica Neue",Helvetica,sans-serif;\n        display: block;\n        position: absolute;\n        color: var(--theme-gscape-on-primary, ',");\n        background-color:var(--theme-gscape-primary, ",");\n        box-shadow: 0 2px 4px 0 var(--theme-gscape-shadows, ",");\n        border-radius: 8px;\n        transition: opacity 0.2s;\n        scrollbar-width: thin;\n      }\n\n      :host(:hover){\n        box-shadow: 0 4px 8px 0 var(--theme-gscape-shadows, ",");\n      }\n\n      .hide {\n        display:none;\n      }\n\n      .widget-body {\n        width: 100%;\n        max-height:450px;\n        border-top:solid 1px var(--theme-gscape-shadows, ",');\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n        overflow:auto;\n        scrollbar-width: inherit;\n      }\n\n      .gscape-panel {\n        position: absolute;\n        bottom: 40px;\n        width: auto;\n        padding:10px;\n        overflow: unset;\n        border: none;\n      }\n\n      .gscape-panel::after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 16px;\n        margin-left: -8px;\n        border-width: 8px;\n        border-style: solid;\n        border-color: #ddd transparent transparent transparent;\n      }\n\n      .gscape-panel-title{\n        font-weight: bold;\n        text-align: center;\n        margin-bottom: 10px;\n      }\n\n      .widget-body .section:last-of-type {\n        margin-bottom: 12px;\n      }\n\n      .widget-body .section-header {\n        text-align: center;\n        font-weight: bold;\n        border-bottom: solid 1px var(--theme-gscape-shadows, ',");\n        color: var(--theme-gscape-secondary, ",");\n        width: 85%;\n        margin: auto;\n        margin-bottom: 10px;\n        padding-bottom: 5px;\n      }\n\n      .description {\n        margin-bottom: 20px;\n      }\n\n      .description:last-of-type {\n        margin-bottom: 0;\n      }\n\n      .description .language {\n        min-width: 50px;\n        display: inline-block;\n        font-weight: bold;\n        color: var(--theme-gscape-secondary, ",");\n        margin: 5px;\n      }\n\n      .section { padding: 10px; }\n\n      .details_table{\n        border-spacing: 0;\n      }\n\n      .details_table th {\n        color: var(--theme-gscape-secondary, ",");\n        border-right: solid 1px var(--theme-gscape-shadows, ",");\n        font-weight: bold;\n        text-align:left;\n        min-width: 50px;\n      }\n\n      .details_table th, td {\n        padding:5px 8px;\n        white-space: nowrap;\n      }\n\n      .highlight:hover {\n        color: var(--theme-gscape-on-secondary, ",");\n        background-color:var(--theme-gscape-secondary, ",");\n      }\n\n      /* width */\n      ::-webkit-scrollbar {\n        width: 5px;\n        height: 5px;\n      }\n\n      /* Track */\n      ::-webkit-scrollbar-track {\n        background: #f0f0f0;\n      }\n\n      /* Handle */\n      ::-webkit-scrollbar-thumb {\n        background: #cdcdcd;\n      }\n\n      /* Handle on hover */\n      ::-webkit-scrollbar-thumb:hover {\n        background: #888;\n      }\n\n      .clickable {\n        font-weight:bold;\n        text-decoration: underline;\n      }\n\n      .clickable:hover {\n        cursor:pointer;\n        color: var(--theme-gscape-secondary-dark, ",");\n      }\n\n    "]);return lO=function(){return t},t}var uO=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).draggable=!1,t.collapsible=!1,t.isEnabled=!0,t._hiddenDefault=!1,t.onselectstart=function(){},t.onToggleBody=function(){},t}return Xn(n,null,[{key:"properties",get:function(){return{isEnabled:{type:Boolean},hiddenDefault:{type:Boolean}}}},{key:"styles",get:function(){var t=nO;return[[AC(lO(),t.on_primary,t.primary,t.shadows,t.shadows,t.shadows,t.shadows,t.secondary,t.secondary,t.secondary,t.shadows,t.on_secondary,t.secondary,t.secondary_dark)],t]}}]),Xn(n,[{key:"render",value:function(){return mC(sO())}},{key:"toggleBody",value:function(){this.collapsible&&(this.header&&this.header.toggleIcon(),this.body&&this.body.classList.toggle("hide"),this.onToggleBody())}},{key:"collapseBody",value:function(){this.collapsible&&(this.header&&!this.isCollapsed&&this.header.toggleIcon(),this.body&&this.body.classList.add("hide"))}},{key:"showBody",value:function(){this.collapsible&&(this.header&&this.isCollapsed&&this.header.toggleIcon(),this.body&&this.body.classList.remove("hide"))}},{key:"firstUpdated",value:function(){this.header=this.shadowRoot.querySelector("gscape-head"),this.body=this.shadowRoot.querySelector(".widget-body"),this.collapsible&&this.addEventListener("toggle-widget-body",this.toggleBody),this.draggable&&this.makeDraggable()}},{key:"makeDraggable",value:function(){var t=0,e=0,n=0,r=0,i=this,o=this.shadowRoot.querySelector(".drag-handler");function a(o){o=o||window.event,t=n-o.clientX,e=r-o.clientY,n=o.clientX,r=o.clientY,i.style.top=i.offsetTop-e+"px",i.style.left=i.offsetLeft-t+"px"}function s(){document.onmouseup=null,document.onmousemove=null}o?o.onmousedown=function(t){t=t||window.event,n=t.clientX,r=t.clientY,document.onmouseup=s,document.onmousemove=a}:console.log("No .drag-handler elem for a ".concat(this.constructor.name," draggable instance"))}},{key:"show",value:function(){this.isEnabled&&(this.style.display="initial")}},{key:"hide",value:function(){this.style.display="none"}},{key:"enable",value:function(){this.isEnabled=!0,this.hiddenDefault||this.show()}},{key:"disable",value:function(){this.isEnabled=!1,this.hide()}},{key:"blur",value:function(){this.collapseBody()}},{key:"isVisible",get:function(){return"none"!==this.style.display}},{key:"hiddenDefault",set:function(t){this._hiddenDefault=t,t?this.hide():this.show(),this.requestUpdate()},get:function(){return this._hiddenDefault}},{key:"isCollapsed",get:function(){return!this.body||this.body.classList.contains("hide")}}]),n}(IC);function cO(){var t=or(["\n      :host {\n        display:flex;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: var(--header-padding, 8px);\n      }\n\n      .head-btn {\n        color:var(--theme-gscape-on-primary, ",");\n        right:0;\n        padding: var(--btn-padding, 0 0 0 5px);\n        cursor:pointer;\n      }\n\n      .head-btn:hover{\n        color:var(--theme-gscape-secondary, ",");\n      }\n\n      .head-title {\n        padding: var(--title-padding, 0 5px 0 0);\n        box-sizing: border-box;\n        font-weight:bold;\n        cursor:grab;\n        width: var(--title-width, '');\n        text-align: var(--title-text-align, '')\n      }\n    "]);return cO=function(){return t},t}function hO(){var t=or(['\n      <div class="head-title"> ',' </div>\n      <slot></slot>\n      <mwc-icon class="head-btn" @click="','">\n        ',"\n      </mwc-icon>\n    "]);return hO=function(){return t},t}var dO=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).title="header",t.initial_icon="arrow_drop_down",t.secondary_icon="arrow_drop_up",t.icon=t.initial_icon,t.onClick=function(){},t}return Xn(n,null,[{key:"properties",get:function(){return{title:{type:String},initial_icon:{type:String},secondary_icon:{type:String},icon:{type:String}}}}]),Xn(n,[{key:"render",value:function(){return mC(hO(),this.title,this.iconClickHandler,this.icon)}},{key:"iconClickHandler",value:function(){this.onClick(),this.toggleBody()}},{key:"toggleBody",value:function(){var t=new CustomEvent("toggle-widget-body",{bubbles:!0,composed:!0});this.dispatchEvent(t)}},{key:"invertIcons",value:function(){var t=[this.secondary_icon,this.initial_icon];this.initial_icon=t[0],this.secondary_icon=t[1],this.toggleIcon()}},{key:"toggleIcon",value:function(){this.icon=this.icon==this.initial_icon?this.secondary_icon:this.initial_icon}}],[{key:"styles",get:function(){var t=ir($n(n),"styles",this)[1];return AC(cO(),t.on_primary,t.secondary)}}]),n}(uO);function fO(){var t=or(['\n        <div\n          @click="','"\n          name="','"\n          diagram-id="','"\n          class="diagram-item highlight ','"\n        >\n          ',"\n        </div>\n        "]);return fO=function(){return t},t}function pO(){var t=or(['\n      <gscape-head title="','"\n        class="drag-handler"></gscape-head>\n\n      <div class="widget-body hide">\n        ',"\n      </div>\n    "]);return pO=function(){return t},t}function gO(){var t=or(["\n        :host {\n          top: 10px;\n          left: 10px;\n        }\n\n        .diagram-item {\n          cursor:pointer;\n          padding:5px 10px;\n        }\n\n        .diagram-item:last-of-type {\n          border-radius: inherit;\n        }\n\n        .selected {\n          background-color: var(--theme-gscape-primary-dark, ",");\n          color: var(--theme-gscape-on-primary-dark, ",");\n          font-weight: bold;\n        }\n      "]);return gO=function(){return t},t}customElements.define("gscape-head",dO);var vO=function(t){Kn(n,t);var e=rr(n);function n(t){var r;return Yn(this,n),(r=e.call(this)).draggable=!0,r.collapsible=!0,r.diagrams=t,r.actual_diagram_id=null,r.default_title="Select a Diagram",r._onDiagramChange=null,r}return Xn(n,null,[{key:"properties",get:function(){return[ir($n(n),"properties",this),{actual_diagram_id:String}]}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(gO(),e.primary_dark,e.on_primary_dark)]}}]),Xn(n,[{key:"render",value:function(){var t=this;return mC(pO(),this.default_title,this.diagrams.map((function(e,n){return mC(fO(),t.changeDiagram,e.name,n,n==t.actual_diagram_id?"selected":"",e.name)})))}},{key:"changeDiagram",value:function(t){this.shadowRoot.querySelector(".selected")&&this.shadowRoot.querySelector(".selected").classList.remove("selected"),t.target.classList.add("selected");var e=t.target.getAttribute("diagram-id");this.toggleBody(),this.actual_diagram_id=e,this._onDiagramChange(e)}},{key:"onDiagramChange",set:function(t){this._onDiagramChange=t}},{key:"actual_diagram_id",set:function(t){this._actual_diagram_id=t,null!=t&&(this.header.title=this.diagrams[t].name),this.requestUpdate()},get:function(){return this._actual_diagram_id}},{key:"actual_diagram",get:function(){return this._actual_diagram}}]),n}(uO);function yO(){var t=or(['\n                <div class="sub-row highlight"\n                  diagram_id="','"\n                  node_id="','"\n                  @click="','"\n                >\n                  - '," - ","\n                </div>\n              "]);return yO=function(){return t},t}function mO(){var t=or(['\n          <div>\n            <div\n              id="','"\n              class="row highlight"\n              type="','"\n              label = "',"\"\n            >\n              <span><mwc-icon @click='","'>keyboard_arrow_right</mwc-icon></span>\n              <span>",'</span>\n              <div class="row-label" @click=\'',"'>",'</div>\n            </div>\n\n            <div class="sub-rows-wrapper hide">\n            ',"\n            </div>\n          </div>\n        "]);return mO=function(){return t},t}function bO(){var t=or(['\n      <gscape-head title="Explorer" class="drag-handler">\n        <input\n          type="text"\n          autocomplete="off"\n          @keyup="','"\n          placeholder="Search Entities"\n        />\n      </gscape-head>\n\n      <div class="widget-body hide">\n      ',"\n      </div>\n    "]);return bO=function(){return t},t}function wO(){var t=or(['\n        <div class="type-img type-img-','">',"<div>\n      "]);return wO=function(){return t},t}function xO(){var t=or(["\n        :host {\n          left:50%;\n          top:10px;\n          min-width:340px;\n          max-width:450px;\n          transform: translate(-50%, 0);\n        }\n\n        .widget-body {\n          overflow:auto;\n        }\n\n        .row{\n          line-height: 0;\n          display: flex;\n          align-items: center;\n          padding:4px 0;\n        }\n\n        .row-label{\n          padding-left:5px;\n          cursor:pointer;\n          width:100%;\n          white-space: nowrap;\n        }\n\n        mwc-icon:hover{\n          color: var(--theme-gscape-primary, ",");\n          cursor:pointer;\n        }\n\n        .type-img{\n          width: 20px;\n          height: 20px;\n          text-align: center;\n          line-height: 20px;\n        }\n\n        .type-img-A{\n          background-color: var(--theme-graph-attribute, ",");\n          color: var(--theme-graph-attribute-dark, ",");\n          border: solid 1px var(--theme-graph-attribute-dark, ",");\n        }\n\n        .type-img-R{\n          background-color: var(--theme-graph-role, ",");\n          color: var(--theme-graph-role-dark, ",");\n          border: solid 1px var(--theme-graph-role-dark, ",");\n        }\n\n        .type-img-C{\n          background-color: var(--theme-graph-concept, ",");\n          color: var(--theme-graph-concept-dark, ",");\n          border: solid 1px var(--theme-graph-concept-dark, ",");\n        }\n\n        .type-img-I{\n          background-color: var(--theme-graph-individual, ",");\n          color: var(--theme-graph-individual-dark, ",");\n          border: solid 1px var(--theme-graph-individual-dark, ",");\n        }\n\n        .sub-row{\n          background-color: var(--theme-gscape-primary-dark, ",");\n          padding: 4px 0 4px 34px;\n          cursor: pointer;\n        }\n\n        .sub-rows-wrapper{\n          padding: 2px 0;\n        }\n\n        .add-shadow{\n          box-shadow: 0 2px 2px 0 var(--theme-gscape-shadows, ",");\n        }\n\n        gscape-head input {\n          position:absolute;\n          left: 30%;\n          width: 50%;\n          padding: 0;\n          line-height:22px;\n          box-sizing: border-box;\n          background-color: var(--theme-gscape-primary, ",");\n          border:none;\n          border-bottom: 1px solid var(--theme-gscape-shadows, ",");\n          transition: all .35s ease-in-out;\n          color:inherit;\n        }\n\n        gscape-head input:focus {\n          border-color: var(--theme-gscape-secondary, ",");\n          left:0;\n          margin: 0px 8px;\n          width:80%;\n        }\n      "]);return xO=function(){return t},t}customElements.define("gscape-diagram-selector",vO);var _O=function(t){Kn(n,t);var e=rr(n);function n(t,r){var i;return Yn(this,n),(i=e.call(this)).draggable=!0,i.collapsible=!0,i.diagrams=r,i.predicates=t,i.onEntitySelect={},i.onNodeNavigation={},i}return Xn(n,null,[{key:"properties",get:function(){return[ir($n(n),"properties",this),{predicates:Object}]}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(xO(),e.primary,e.attribute,e.attribute_dark,e.attribute_dark,e.role,e.role_dark,e.role_dark,e.concept,e.concept_dark,e.concept_dark,e.individual,e.individual_dark,e.individual_dark,e.primary_dark,e.shadows,e.primary,e.shadows,e.secondary)]}}]),Xn(n,[{key:"render",value:function(){var t=this;return mC(bO(),this.search,Object.keys(this.predicates).map((function(e){var n,r,i=t.predicates[e];return mC(mO(),i.subrows[0].id,i.type,i.label,t.toggleSubRows,(n=i.type,r=n.charAt(0).toUpperCase(),mC(wO(),r,r)),t.handleEntitySelection,i.label,i.subrows.map((function(e){return mC(yO(),e.diagram.id,e.id,t.handleNodeSelection,e.diagram.name,e.id_xml)})))})))}},{key:"toggleSubRows",value:function(t){var e=t.target.parentNode.parentNode.parentNode;e.querySelector(".sub-rows-wrapper").classList.toggle("hide"),t.target.innerHTML="keyboard_arrow_right"==t.target.innerHTML?"keyboard_arrow_down":"keyboard_arrow_right",e.querySelector(".row").classList.toggle("add-shadow")}},{key:"search",value:function(t){27==t.keyCode&&t.target.blur();var e=t.target.value.toLowerCase();""===e?this.collapseBody():this.showBody(),this.shadowRoot.querySelectorAll(".row").forEach((function(t){e.split(" ").forEach((function(e){t.getAttribute("label").toLowerCase().indexOf(e)>-1||t.getAttribute("type").toLowerCase().indexOf(e)>-1?t.style.display="":t.style.display="none"}))})),t.target.focus()}},{key:"handleEntitySelection",value:function(t){var e=t.target.parentNode.getAttribute("id");this.onEntitySelect(e,!0)}},{key:"handleNodeSelection",value:function(t){this.collapseBody();var e=t.target.getAttribute("node_id");this.onNodeNavigation(e)}},{key:"blur",value:function(){ir($n(n.prototype),"blur",this).call(this),this.shadowRoot.querySelector("input").blur()}},{key:"predicates",get:function(){return this._predicates},set:function(t){var e=function(t){return{id:t.id,id_xml:t.id_xml,diagram:{id:t.diagram_id,name:this.diagrams[t.diagram_id].name}}}.bind(this),n=[];t.forEach((function(t){var r=t.displayed_name.replace(/\r?\n|\r/g,""),i=r.concat(t.type);i in n||(n[i]={type:t.type,label:r,subrows:[]}),n[i].subrows.push(e(t))})),this._predicates=n}}]),n}(uO);function EO(){var t=or([""]);return EO=function(){return t},t}function kO(){var t=or(['<span class="language">',"</span>"]);return kO=function(){return t},t}function SO(){var t=or(['\n            <div class="description" lang="','">\n              ','\n              <span class="descr-text"></span>\n            </div>\n          ']);return SO=function(){return t},t}function CO(){var t=or(['\n      <div class="section">\n        <div class="section-header"> Description </div>\n        ',"\n      </div>\n    "]);return CO=function(){return t},t}function TO(){var t=or(['<th rowspan="3">',"</th>"]);return TO=function(){return t},t}function NO(){var t=or(["\n                  <tr>\n                    ",'\n                    <td class="language">',"</td>\n                    <td>","</td>\n                  </tr>\n                "]);return NO=function(){return t},t}function OO(){var t=or(['\n            <tbody class="annotation-row">\n              ',"\n            </tbody>\n          "]);return OO=function(){return t},t}function PO(){var t=or(['\n      <div class="section">\n        <div class="section-header">Annotations</div>\n        <table class="details_table annotations">\n        ',"\n        </table>\n      </div>\n    "]);return PO=function(){return t},t}function MO(){var t=or(["\n    ","\n\n  ","\n  "]);return MO=function(){return t},t}customElements.define("gscape-explorer",_O);var DO=function(t){return mC(MO(),t.annotations&&Object.keys(t.annotations).length>0?mC(PO(),Object.keys(t.annotations).map((function(e){var n=t.annotations[e];return mC(OO(),Object.keys(n).map((function(t,r){return mC(NO(),0==r?mC(TO(),e.charAt(0).toUpperCase()+e.slice(1)):"",t,n[t])})))}))):"",t.description&&Object.keys(t.description).length>0?mC(CO(),Object.keys(t.description).map((function(t){return mC(SO(),t,""!=t?mC(kO(),t):"")}))):mC(EO()))};function AO(){var t=or(["\n            <tr>\n              <th>",'</th>\n              <td node_id="','" class="clickable" @click="','">',"</td>\n            </tr>\n          "]);return AO=function(){return t},t}function LO(){var t=or(['\n      <table class="details_table">\n        <tbody>\n        ',"\n        </tbody>\n      </table>\n    "]);return LO=function(){return t},t}function IO(){var t=or(["",""]);return IO=function(){return t},t}function RO(){var t=or([""]);return RO=function(){return t},t}function BO(){var t=or([""]);return BO=function(){return t},t}function jO(){var t=or(['<span class="chip">&#10003; ',"</span>"]);return jO=function(){return t},t}function FO(){var t=or([""]);return FO=function(){return t},t}function zO(){var t=or(["\n                <tr>\n                  <th>IRI</th>\n                  <td>","</td>\n                </tr>\n                "]);return zO=function(){return t},t}function VO(){var t=or(['\n            <div class="section">\n              <table class="details_table">\n                <tr>\n                  <th>Name</th>\n                  <td class="wiki" @click="','">',"</td>\n                </tr>\n                <tr>\n                  <th>Type</th>\n                  <td>","</td>\n                </tr>\n                ",'\n              </table>\n            </div>\n\n            <div class="chips-wrapper">\n              ',"\n            </div>\n\n            ","\n          "]);return VO=function(){return t},t}function qO(){var t=or(['\n      <gscape-head title="Entity Details" class="drag-handler"></gscape-head>\n      <div class="widget-body">\n        ',"\n      </div>\n    "]);return qO=function(){return t},t}function UO(){var t=or(["\n        :host {\n          top:10px;\n          right:62px;\n          width:400px;\n        }\n\n        .chips-wrapper {\n          padding: 0 10px;\n        }\n\n        .descr-header {\n          text-align: center;\n          padding: 12px;\n          font-weight: bold;\n          border-bottom: solid 1px var(--theme-gscape-shadows, ",");\n          color: var(--theme-gscape-secondary, ",");\n          width: 85%;\n          margin: auto;\n        }\n\n        gscape-head {\n          --title-text-align: center;\n          --title-width: 100%;\n        }\n\n        .chip {\n          display: inline-block;\n          margin: 4px;\n          padding: 3px 8px;\n          border-radius: 32px;\n          border: 1px solid var(--theme-gscape-secondary, ",");\n          color: var(--theme-gscape-secondary, ",");\n          font-size: 13px;\n        }\n\n        .language {\n          text-align: center;\n          font-size: 14px;\n        }\n\n        tbody:nth-child(n+2)::before {\n          content: '';\n          display: table-row;\n          height: 20px;\n        }\n      "]);return UO=function(){return t},t}var HO=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).draggable=!0,t.collapsible=!0,t.hiddenDefault=!0,t._entity=null,t.properties={functional:"Functional",inverseFunctional:"Inverse Functional",symmetric:"Symmetric",asymmetric:"Asymmetric",reflexive:"Reflexive",irreflexive:"Irreflexive",transitive:"Transitive"},t.onNodeNavigation={},t}return Xn(n,null,[{key:"properties",get:function(){return[ir($n(n),"properties",this),{entity:{type:Object}}]}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(UO(),e.shadows,e.secondary,e.secondary,e.secondary)]}}]),Xn(n,[{key:"render",value:function(){var t=this;return mC(qO(),this.entity?mC(VO(),this.wikiClickHandler,this.entity.iri.remaining_chars,this.entity.type,"individual"!=this.entity.type?mC(zO(),this.entity.iri.full_iri):mC(FO()),Object.keys(this.properties).map((function(e){return t.entity[e]?mC(jO(),t.properties[e]):mC(BO())})),DO(this.entity)):mC(RO()))}},{key:"wikiClickHandler",value:function(t){this._onWikiClick&&this._onWikiClick(this.entity.iri.full_iri)}},{key:"updated",value:function(){this.entity&&this.entity.description&&this.renderDescription(this.entity.description),this._onWikiClick&&this.shadowRoot.querySelectorAll(".wiki").forEach((function(t){t.classList.add("clickable")}))}},{key:"renderDescription",value:function(t){var e,n,r=this;Object.keys(t).forEach((function(i){n="",e=r.shadowRoot.querySelector('[lang = "'.concat(i,'"] > .descr-text')),t[i].forEach((function(t,e){n+=e>0?"<p>"+t.replace(/(href=.)\/predicate\//g,"$1/documentation/predicate/")+"</p>":t.replace(/(href=.)\/predicate\//g,"$1/documentation/predicate/")})),e.innerHTML=n}))}},{key:"handleNodeSelection",value:function(t){var e=t.target.getAttribute("node_id");this.onNodeNavigation(e)}},{key:"firstUpdated",value:function(){ir($n(n.prototype),"firstUpdated",this).call(this),this.header.invertIcons()}},{key:"blur",value:function(){this.hide()}},{key:"onWikiClick",set:function(t){this._onWikiClick=t}},{key:"entity",set:function(t){var e=this.entity;switch(this._entity=t,this._entity.type){case"concept":this._entity.type="Class";break;case"role":this._entity.type="Object Property";break;case"attribute":this._entity.type="Data Property"}this.requestUpdate("entity",e)},get:function(){return this._entity}}]),n}(uO);function WO(){var t=or(['\n      <div\n        class="btn"\n        ?active = "','"\n        @click="','"\n        title="','">\n\n        <mwc-icon>',"</mwc-icon>\n      </div>\n    "]);return WO=function(){return t},t}function YO(){var t=or(["\n\n        mwc-icon {\n          font-size: var(--gscape-button-font-size, 24px)\n        }\n\n        .btn {\n          padding:5px;\n          line-height:0;\n          cursor: pointer;\n        }\n\n        .btn:hover {\n          color: var(--theme-gscape-secondary, ",");\n        }\n\n        .btn[active] {\n          color: var(--theme-gscape-secondary, ",");\n        }\n      "]);return YO=function(){return t},t}customElements.define("gscape-entity-details",HO);var GO=function(t){Kn(n,t);var e=rr(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Yn(this,n),(i=e.call(this)).draggable=o,i.icon=t,i.alternate_icon=r||t,i.onClick=null,i.highlight=!1,i.active=!1,i}return Xn(n,null,[{key:"properties",get:function(){return{icon:{type:String},active:{type:Boolean}}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(YO(),e.secondary,e.secondary)]}}]),Xn(n,[{key:"render",value:function(){return mC(WO(),this.active,this.clickHandler,this.icon,this.icon)}},{key:"clickHandler",value:function(){this.highlight&&(this.active=!this.active),this.toggleIcon(),this._onClick()}},{key:"toggleIcon",value:function(){var t=this._icon;this.icon=this._alternate_icon,this.alternate_icon=t}},{key:"firstUpdated",value:function(){ir($n(n.prototype),"firstUpdated",this).call(this),this.shadowRoot.querySelector("mwc-icon").onselectstart=function(){return!1}}},{key:"icon",set:function(t){var e=this._icon;this._icon=t,this.requestUpdate("icon",e)},get:function(){return this._icon}},{key:"alternate_icon",set:function(t){var e=this._alternate_icon;this._alternate_icon=t,this.requestUpdate("alternative_icon",e)}},{key:"onClick",set:function(t){this._onClick=t}}]),n}(uO);function XO(){var t=or(['<span class="toggle-label">',"</span>"]);return XO=function(){return t},t}function KO(){var t=or([""]);return KO=function(){return t},t}function $O(){var t=or([""]);return $O=function(){return t},t}function ZO(){var t=or(['\n    <div class="toggle-container">\n      ','\n      <label class="toggle-wrap">\n        <input id="','" type="checkbox"\n          ?checked="','"\n          ?disabled="','"\n          @click="','"\n        />\n        <span class="toggle"></span>\n      </label>\n      ',"\n    </div>\n    "]);return ZO=function(){return t},t}function JO(){var t=or(['\n        :host {\n          display: flex;\n        }\n\n        .toggle-container {\n          white-space: nowrap;\n          display: flex;\n          align-items: center;\n        }\n\n        .toggle-wrap {\n          width: 33px;\n          height: 19px;\n          display: inline-block;\n          position: relative;\n        }\n\n        .toggle {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: #ccc;\n          transition: checked 0.2s;\n          border-radius: 19px;\n        }\n\n        .toggle::before {\n          position: absolute;\n          content: "";\n          height: 11px;\n          width: 11px;\n          left: 4px;\n          bottom: 4px;\n          background-color: var(--theme-gscape-primary, ',");\n          transition: .1s;\n          border-radius: 20px;\n        }\n\n        .toggle-wrap input {\n          display:none;\n        }\n\n        .toggle-wrap input:checked + .toggle {\n          background-color: var(--theme-gscape-secondary, ",");\n        }\n\n        .toggle-wrap input:checked + .toggle::before {\n          -webkit-transform: translateX(14px);\n          -ms-transform: translateX(14px);\n          transform: translateX(14px);\n        }\n\n        .toggle-wrap input:disabled + .toggle {\n          opacity:0.25;\n        }\n\n        .toggle-label {\n          margin: 0 15px;\n        }\n      "]);return JO=function(){return t},t}customElements.define("gscape-button",GO);var QO=function(t){Kn(n,t);var e=rr(n);function n(t,r,i,o,a){var s,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Yn(this,n),(s=e.call(this)).key=t||"",s.inverse=l,s.state=r||!1,s.disabled=i||!1,s.onToggle=a||{},s.label=o||"",s.label_pos="left",s}return Xn(n,null,[{key:"properties",get:function(){return{state:{type:Boolean},disabled:{type:Boolean},label:{type:String},key:{type:String},checked:{type:Boolean}}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this)[1];return AC(JO(),t.primary,t.secondary)}}]),Xn(n,[{key:"render",value:function(){return mC(ZO(),"left"==this.label_pos?this.label_span:mC($O()),this.key,this.checked,this.disabled,this.clickHandler,"right"==this.label_pos?this.label_span:mC(KO()))}},{key:"clickHandler",value:function(t){this.state=!this.state,this.onToggle(t)}},{key:"updated",value:function(t){this.shadowRoot.querySelector("#".concat(this.key)).checked=this.checked}},{key:"state",set:function(t){this._state=t,this.checked=this.inverse?!t:t},get:function(){return this._state}},{key:"label_span",get:function(){return mC(XO(),this.label)}}]),n}(uO);function tP(){var t=or(["\n              ","\n            "]);return tP=function(){return t},t}function eP(){var t=or(["\n      ",'\n\n      <div class="widget-body hide gscape-panel">\n        <div class="gscape-panel-title">Filters</div>\n\n        <div class="filters-wrapper">\n          ',"\n        </div>\n      </div>\n    "]);return eP=function(){return t},t}function nP(){var t=or(["\n        :host {\n          bottom:10px;\n          left:10px;\n        }\n\n        gscape-button{\n          position: static;\n        }\n\n        gscape-toggle {\n          padding: 8px;\n        }\n\n        gscape-toggle[first]{\n          justify-content: center;\n          border-bottom: 1px solid #ccc;\n          margin-bottom: 10px;\n          padding: 10px;\n        }\n      "]);return nP=function(){return t},t}customElements.define("gscape-toggle",QO);var rP=function(t){Kn(n,t);var e=rr(n);function n(t){var r;return Yn(this,n),(r=e.call(this)).collapsible=!0,r.filters=t,r.btn=new GO("filter_list"),r.btn.onClick=r.toggleBody.bind(er(r)),r.btn.active=!1,r.onFilterOn=function(){},r.onFilterOff=function(){},r}return Xn(n,null,[{key:"properties",get:function(){return{filters:{type:Object,hasChanged:function(t,e){return!e||(Object.keys(t).map((function(n){if(t[n].active!=e[n].active||t[n].disabled!=e[n].disabled)return!0})),!1)}}}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this);t[1];return[t[0],AC(nP())]}}]),Xn(n,[{key:"render",value:function(){var t=this;return mC(eP(),this.btn,Object.keys(this.filters).map((function(e){var n=t.filters[e],r={};return"all"==e?(r=new QO(e,n.active,n.disabled,n.label,t.toggleFilter.bind(t))).setAttribute("first","true"):r=new QO(e,n.active,n.disabled,n.label,t.toggleFilter.bind(t),!0),r.label_pos="right",mC(tP(),r)})))}},{key:"toggleFilter",value:function(t){var e=t.target;"all"==e.id?e.checked?this.onFilterOn(e.id):this.onFilterOff(e.id):e.checked?this.onFilterOff(e.id):this.onFilterOn(e.id)}},{key:"updateTogglesState",value:function(){var t=this,e=this.shadowRoot.querySelectorAll("gscape-toggle"),n=!1;e.forEach((function(e){e.state=t.filters[e.key].active,e.disabled=t.filters[e.key].disabled,e.state&&(n=!0)})),this.btn.active=n,this.btn.requestUpdate()}}]),n}(uO);function iP(){var t=or(["\n                    <tr>\n                      <th>","</th>\n                      <td>","</td>\n                    </tr>\n                  "]);return iP=function(){return t},t}function oP(){var t=or(["\n      ",'\n\n      <div class="widget-body hide gscape-panel">\n        <div class="gscape-panel-title">Ontology Info</div>\n\n        <div class="wrapper">\n\n          <div class="section">\n            <table class="details_table">\n              <tr>\n                <th>Name</th>\n                <td>',"</td>\n              </tr>\n              <tr>\n                <th>Version</th>\n                <td>","</td>\n              </tr>\n            </table>\n          </div>\n\n          ",'\n\n          <div class="section">\n            <div class="section-header">IRI Prefixes Dictionary</div>\n            <table class="iri-dict details_table">\n              ',"\n            </table>\n          </div>\n        </div>\n      </div>\n    "]);return oP=function(){return t},t}function aP(){var t=or(["\n        :host {\n          bottom:10px;\n          left:52px;\n        }\n\n        .gscape-panel {\n          padding-right: 0;\n        }\n\n        gscape-button {\n          position: static;\n        }\n\n        .iri-dict th.table-header{\n          text-align: center;\n          padding: 12px;\n          font-weight: bold;\n          border-right: 0;\n          color: var(--theme-gscape-on-primary, ",");\n        }\n\n        .iri-dict th {\n          color: var(--theme-gscape-on-primary, ",");\n          border-right: solid 1px var(--theme-gscape-shadows, ",");\n          text-align: left;\n          font-weight: normal;\n        }\n\n        .wrapper {\n          overflow-y: auto;\n          scrollbar-width: inherit;\n          max-height: 420px;\n          overflow-x: hidden;\n          padding-right: 10px;\n        }\n\n        .section {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      "]);return aP=function(){return t},t}customElements.define("gscape-filters",rP);var sP=function(t){Kn(n,t);var e=rr(n);function n(t){var r;return Yn(this,n),(r=e.call(this)).collapsible=!0,r.ontology=t,r.btn=new GO("info_outline"),r.btn.onClick=r.toggleBody.bind(er(r)),r}return Xn(n,null,[{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(aP(),e.on_primary,e.on_primary,e.shadows)]}}]),Xn(n,[{key:"render",value:function(){return mC(oP(),this.btn,this.ontology.name,this.ontology.version,DO(this.ontology),ar(this.ontology.namespaces).map((function(t){if(!t.isStandard())return mC(iP(),t.prefixes[0],t.value)})))}},{key:"updated",value:function(){var t,e,n=this;this.ontology.description&&Object.keys(this.ontology.description).forEach((function(r){e="",t=n.shadowRoot.querySelector('[lang = "'.concat(r,'"] > .descr-text')),n.ontology.description[r].forEach((function(t,n){e+=n>0?"<p>"+t.replace(/(href=.)\/predicate\//g,"$1/documentation/predicate/")+"</p>":t.replace(/(href=.)\/predicate\//g,"$1/documentation/predicate/")})),t.innerHTML=e}))}}]),n}(uO);function lP(){var t=or(['\n      <div class="widget-body">\n        <div class="owl-text"></div>\n      </div>\n      <gscape-head title="Owl Translation"></gscape-head>\n    ']);return lP=function(){return t},t}function uP(){var t=or(["\n        :host {\n          left:50%;\n          bottom:10px;\n          transform: translate(-50%, 0);\n        }\n\n        gscape-head {\n          --title-text-align: center;\n          --title-width: 100%;\n        }\n\n        .widget-body {\n          margin:0;\n          border-top: none;\n          border-bottom: 1px solid var(--theme-gscape-shadows, ",');\n          border-bottom-left-radius:0;\n          border-bottom-right-radius:0;\n        }\n\n        .owl-text {\n          padding: 15px 10px;\n          font-family: "Lucida Console", Monaco, monospace;\n          overflow: auto;\n          white-space: nowrap;\n          line-height: 1.5;\n        }\n\n        .owl_concept{\n          color: #b58900;\n        }\n\n        .owl_role{\n          color: #268bd2;\n        }\n\n        .owl_attribute{\n          color: #859900;\n        }\n\n        .owl_value-domain{\n          color: #2aa198;\n        }\n\n        .owl_individual{\n          color: #6c71c4;\n        }\n\n        .owl_value {\n          color: #d33682;\n        }\n\n        .axiom_predicate_prefix{\n          color:#cb4b16;\n        }\n\n        .owl_error {\n          color: var(--theme-gscape-error, ',");\n        }\n\n        .axiom_predefinite_obj {\n          color: #00c0a0;\n        }\n\n      "]);return uP=function(){return t},t}customElements.define("gscape-ontology-info",sP);var cP=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).collapsible=!0,t.hiddenDefault=!0,t.owl_text="",t}return Xn(n,null,[{key:"properties",get:function(){return{owl_text:String}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this)[1];return[ir($n(n),"styles",this)[0],AC(uP(),t.shadows,t.error)]}}]),Xn(n,[{key:"render",value:function(){return mC(lP())}},{key:"updated",value:function(){this.shadowRoot.querySelector(".owl-text").innerHTML=this.owl_text}},{key:"blur",value:function(){this.hide()}}]),n}(uO);function hP(){var t=or(["\n      ",'\n      <div id="hr"></div>\n      ',"\n    "]);return hP=function(){return t},t}function dP(){var t=or(["\n        :host {\n          position: absolute;\n          bottom:52px;\n          right:10px;\n        }\n\n        gscape-button{\n          position: static;\n          box-shadow: initial;\n        }\n\n        #hr {\n          height:1px;\n          width:90%;\n          margin: 2px auto 0 auto;\n          background-color: var(--theme-gscape-shadows, ",")\n        }\n\n      "]);return dP=function(){return t},t}customElements.define("gscape-owl-translator",cP);var fP=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).btn_plus=new GO("add"),t.btn_minus=new GO("remove"),t._onZoomIn=null,t._onZoomOut=null,t}return Xn(n,null,[{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(dP(),e.shadows)]}}]),Xn(n,[{key:"render",value:function(){return mC(hP(),this.btn_plus,this.btn_minus)}},{key:"onZoomIn",set:function(t){this._onZoomIn=t,this.btn_plus.onClick=this._onZoomIn}},{key:"onZoomOut",set:function(t){this._onZoomOut=t,this.btn_minus.onClick=this._onZoomOut}}]),n}(uO);customElements.define("gscape-zoom-tools",fP);var pP=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Yn(this,t),this.actual_diagram=null;var r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",n&&n.insertBefore(r,n.firstChild),this.cy=bS({container:r,autoungrabify:!0,wheelSensitivity:.4,maxZoom:2.5,minZoom:.02,layout:{name:"preset"}}),this.cy.on("select","node",(function(t){switch(t.target.data("type")){case"intersection":case"union":case"disjoint-union":t.target.neighborhood().select()}t.target.select(),e.onNodeSelection(t.target.data("id_xml"),t.target.data("diagram_id"))})),this.cy.on("select","edge",(function(t){e.onEdgeSelection(t.target.data("id_xml"),t.target.data("diagram_id"))})),this.cy.on("tap",(function(t){t.target===e.cy&&e.onBackgroundClick()})),this.cy.on("mouseover","*",(function(t){e.cy.container().style.cursor="pointer"})),this.cy.on("mouseout","*",(function(t){e.cy.container().style.cursor="inherit"}))}return Xn(t,[{key:"mount",value:function(t){this.cy.container().style.display="block"}},{key:"unmount",value:function(){this.cy.container().style.display="none"}},{key:"centerOnNode",value:function(t,e){var n=this.cy.getElementById(t);n&&(this.centerOnPosition(n.position("x"),n.position("y"),e),this.cy.$(":selected").unselect(),n.select())}},{key:"centerOnPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cy.zoom();this.cy.reset();var r=this.cy.width()/2,i=this.cy.height()/2;t-=r,e-=i,this.cy.pan({x:-t,y:-e}),this.cy.zoom({level:n,renderedPosition:{x:r,y:i}})}},{key:"centerOnRenderedPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cy.zoom();this.cy.viewport({zoom:n,pan:{x:t,y:e}})}},{key:"resetView",value:function(){this.cy.fit()}},{key:"drawDiagram",value:function(t){this.cy.remove("*"),this.cy.add(t.nodes),this.cy.add(t.edges),this.cy.fit(),this.actual_diagram=t.id}},{key:"zoomIn",value:function(){this.cy.zoom({level:this.cy.zoom()+.08,renderedPosition:{x:this.cy.width()/2,y:this.cy.height()/2}})}},{key:"zoomOut",value:function(){this.cy.zoom({level:this.cy.zoom()-.08,renderedPosition:{x:this.cy.width()/2,y:this.cy.height()/2}})}},{key:"filter",value:function(t,e){var n=this,r=e||this.cy,i="".concat(t.selector,", .").concat(t.class);r.$(i).forEach((function(e){n.filterElem(e,t.class,r)}))}},{key:"filterElem",value:function(t,e,n){var r=this,i=n||this.cy;function o(t){var e=t.outgoers("edge").size()+t.incomers('edge[type != "input"]').size();return t.outgoers().forEach((function(t){t.target().hasClass("filtered")&&e--})),t.incomers('[type != "input"]').forEach((function(t){t.source().hasClass("filtered")&&e--})),e}t.addClass("filtered "+e),i.nodes('[parent_node_id = "'.concat(t.id(),'"]')).addClass("filtered "+e),t.outgoers("edge").forEach((function(t){var n=o(t.target());!t.target().hasClass("filtered")&&(n<=0||"input"===t.data("type"))&&r.filterElem(t.target(),e,i)})),t.incomers("edge").forEach((function(t){var n=o(t.source());t.source().hasClass("filtered")||0!==n||r.filterElem(t.source(),e,i)}))}},{key:"unfilter",value:function(t,e){var n="".concat(t.selector,", .").concat(t.class),r=e||this.cy;r.$(n).removeClass("filtered"),r.$(n).removeClass(t.class)}},{key:"setTheme",value:function(t){this.theme=t,this.cy.style(function(t){return[{selector:"node",style:{height:"data(height)",width:"data(width)","background-color":t.node_bg,shape:"data(shape)","border-width":1,"border-color":t.node_border,"border-style":"solid","font-size":12,color:t.label_color}},{selector:"[fontSize]",style:{"font-size":"data(fontSize)"}},{selector:"node[displayed_name]",style:{label:"data(displayed_name)","text-margin-x":"data(labelXpos)","text-margin-y":"data(labelYpos)","text-wrap":"wrap","min-zoomed-font-size":"5px"}},{selector:"edge",style:{width:2,"line-color":t.edge,"target-arrow-color":t.edge,"source-arrow-color":t.edge,"curve-style":"bezier","arrow-scale":1.3,color:t.label_color}},{selector:'edge[type = "inclusion"], [type = "membership"], edge.inclusion',style:{"line-style":"solid","target-arrow-shape":"triangle","target-arrow-fill":"filled"}},{selector:"edge.hierarchy",style:{width:6,"target-arrow-fill":"hollow"}},{selector:"edge.disjoint",style:{"target-arrow-fill":"filled"}},{selector:'edge[type = "input"]',style:{"line-style":"dashed","target-arrow-shape":"diamond","target-arrow-fill":"hollow"}},{selector:'edge[type = "easy_input"]',style:{"line-style":"solid"}},{selector:'edge[type = "equivalence"]',style:{"line-style":"solid","source-arrow-shape":"triangle","source-arrow-fill":"filled","target-arrow-shape":"triangle","target-arrow-fill":"filled"}},{selector:"[segment_distances]",style:{"curve-style":"segments","segment-distances":"data(segment_distances)","segment-weights":"data(segment_weights)","edge-distances":"node-position"}},{selector:":loop",style:{"control-point-step-size":"data(control_point_step_size)","control-point-weight":.5}},{selector:"[source_endpoint]",style:{"source-endpoint":"data(source_endpoint)"}},{selector:"[target_endpoint]",style:{"target-endpoint":"data(target_endpoint)"}},{selector:"[?functional][!inverseFunctional]",style:{"border-width":5,"border-color":t.node_border,"border-style":"double"}},{selector:"[?inverseFunctional][!functional]",style:{"border-width":4,"border-color":t.node_border,"border-style":"solid"}},{selector:"edge[displayed_name]",style:{label:"data(displayed_name)","font-size":10,"text-rotation":"autorotate","text-margin-y":-10}},{selector:"[target_label]",style:{"target-label":"data(target_label)"}},{selector:"[source_label]",style:{"source-label":"data(source_label)"}},{selector:"[source_label],[target_label]",style:{"font-size":15,"target-text-offset":20}},{selector:"edge[displayed_name],[source_label],[target_label],[text_background]",style:{"text-background-color":t.background,"text-background-opacity":1,"text-background-shape":"roundrectangle","text-background-padding":2}},{selector:"[shape_points]",style:{"shape-polygon-points":"data(shape_points)"}},{selector:".filtered",style:{display:"none"}},{selector:".facet",style:{"background-opacity":0}},{selector:".hidden",style:{visibility:"hidden"}},{selector:".no_border",style:{"border-width":0}},{selector:".no_overlay",style:{"overlay-opacity":0,"overlay-padding":0}},{selector:".concept",style:{"background-color":t.concept,"border-color":t.concept_dark}},{selector:".role, .fake-triangle",style:{"background-color":t.role,"border-color":t.role_dark}},{selector:".attribute",style:{"background-color":t.attribute,"border-color":t.attribute_dark,"text-background-color":t.background,"text-background-opacity":1}},{selector:"edge.role",style:{"line-color":t.role_dark,"source-arrow-color":t.role_dark,"target-arrow-color":t.role_dark,"target-arrow-shape":"square","target-arrow-fill":"filled","source-arrow-shape":"square","source-arrow-fill":"hollow"}},{selector:"edge.range",style:{"target-arrow-shape":"square","target-arrow-fill":"filled","source-arrow-shape":"none"}},{selector:"edge.domain",style:{"target-arrow-shape":"square","target-arrow-fill":"hollow","source-arrow-shape":"none"}},{selector:"edge.attribute",style:{"line-color":t.attribute_dark,"source-arrow-shape":"none","target-arrow-shape":"none"}},{selector:".bubble",style:{"text-margin-x":0,"text-margin-y":0,"text-valign":"center","text-halign":"center",shape:"ellipse",height:"data(width)"}},{selector:".individual",style:{"background-color":t.individual,"border-color":t.individual_dark}},{selector:'[type = "range-restriction"], [type = "disjoint-union"]',style:{"background-color":t.node_bg_contrast}},{selector:".float:locked",style:{"border-color":t.secondary,"border-width":"4px"}},{selector:".fake-triangle-right",style:{"background-color":t.role_dark||"black"}},{selector:'[shape = "hexagon"],[type = "value-domain"], .facet',style:{color:t.node_bg_contrast}},{selector:":selected",style:{"overlay-color":t.secondary,"overlay-opacity":.2,"z-index":"100"}}]}(t))}},{key:"getActualPosition",value:function(){return{x:this.cy.pan().x,y:this.cy.pan().y,zoom:this.cy.zoom()}}}]),t}(),gP=function(t){Kn(n,t);var e=rr(n);function n(t){return Yn(this,n),e.call(this,t)}return Xn(n,[{key:"drawDiagram",value:function(t){ir($n(n.prototype),"drawDiagram",this).call(this,t),this.cy.autoungrabify(!1),this.cy.nodes().lock(),this.cy.nodes(".repositioned").unlock(),this.cy.$(".repositioned").closedNeighborhood().closedNeighborhood().layout({name:"cola",randomize:!1,fit:!1,refresh:3,maxSimulationTime:8e3,convergenceThreshold:1e-7}).run()}}]),n}(pP),vP=function(t){Kn(n,t);var e=rr(n);function n(t){var r;return Yn(this,n),(r=e.call(this,t)).cy.style.textureOnViewport=!0,r.cy.autoungrabify(!1),r.layoutStopped=!1,r.dragAndPin=!1,r.cy.on("grab",(function(t){t.target.data("old_pos",JSON.stringify(t.target.position()))})),r.cy.on("free",(function(t){var e=JSON.stringify(t.target.position());r.dragAndPin&&t.target.data("old_pos")!==e&&r.lockNode(t.target),t.target.removeData("old_pos")})),r}return Xn(n,[{key:"drawDiagram",value:function(t){this.clearPoppers(),ir($n(n.prototype),"drawDiagram",this).call(this,t),this.cy.nodes().addClass("float"),this.main_layout=this.layout(),this.main_layout.run()}},{key:"centerOnNode",value:function(t,e){var n=this,r=this.cy.$id(t);if(r)if(this.cy.$(":selected").unselect(),"role"==r.data("type")){var i=r.connectedNodes();setTimeout((function(){return n.cy.fit(i)}),300),r.select(),i.select()}else setTimeout((function(){return n.centerOnPosition(r.position("x"),r.position("y"),e)}),300),r.select()}},{key:"layout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":unlocked";return this.cy.$(t).layout(this.layout_settings)}},{key:"unlockNode",value:function(t){t.unlockButton.destroy(),t.unlock()}},{key:"lockNode",value:function(t){var e=this;t.lock();var n=t.popper({content:function(){var n=t.data("width")/9*e.cy.zoom(),r=document.createElement("div");return r.style.background=t.style("border-color"),r.style.borderRadius="100%",r.style.padding="5px",r.style.color=e.theme.on_secondary,r.style.cursor="pointer",r.setAttribute("title","Unlock Node"),r.innerHTML="<mwc-icon>lock_open</mwc_icon>",i(n,r),r.onclick=function(){return e.unlockNode(t)},document.body.appendChild(r),r}});t.unlockButton=n;var r=function(){i(t.data("width")/9*e.cy.zoom(),n.popper),n.scheduleUpdate()};function i(t,e){var n=e.querySelector("mwc-icon");t>2?(t<8?n.style.display="none":(n.style.display="inline",n.style.fontSize=t+"px"),e.style.width=t+"px",e.style.height=t+"px",e.style.display="flex"):(n.style.display="none",e.style.display="none")}t.on("position",r),this.cy.on("pan zoom resize",r)}},{key:"clearPoppers",value:function(){this.cy.nodes().each((function(t){t.unlockButton&&t.unlockButton.destroy()}))}},{key:"unmount",value:function(){ir($n(n.prototype),"unmount",this).call(this),this.clearPoppers()}},{key:"layout_settings",get:function(){return{name:"cola",avoidOverlap:!0,edgeLength:function(t){return t.hasClass("role")?300+4*t.data("displayed_name").length:"attribute"==t.target().data("type")||"attribute"==t.source().data("type")?150:250},fit:!1,infinite:!this.layoutStopped,handleDisconnected:!0,convergenceThreshold:1e-9}}},{key:"layoutStopped",set:function(t){this._layoutStopped=t,this.main_layout&&(this.main_layout.options.infinite=!t,t?this.main_layout.stop():this.main_layout.run())},get:function(){return this._layoutStopped}},{key:"dragAndPin",set:function(t){var e=this;this._dragAndPin=t,t||this.cy.$(":locked").each((function(t){return e.unlockNode(t)}))},get:function(){return this._dragAndPin}}]),n}(pP);function yP(){var t=or(['<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 12 12" fill="currentColor" xml:space="preserve">\n<path id="path847" d="M5.4,11.9c-1.4-0.1-2.7-0.8-3.8-1.8c-0.8-0.8-1.3-1.8-1.6-3C0.1,6.8,0.1,6.7,0.1,6c0-0.7,0-0.8,0.1-1.1\n c0.3-1.2,0.8-2.3,1.7-3.1C2.3,1.3,2.7,1,3.3,0.7c1.7-0.9,3.8-0.9,5.5,0c2.4,1.3,3.6,3.9,3.1,6.5c-0.6,2.6-2.8,4.5-5.5,4.7\n C5.8,12,5.8,12,5.4,11.9L5.4,11.9z M6.5,10.5c0.2-0.1,0.3-0.1,0.8-0.7c0.3-0.3,1.2-1.2,2-1.9c1.1-1.1,1.3-1.4,1.4-1.5\n c0.2-0.4,0.2-0.7,0-1.1c-0.1-0.2-0.2-0.3-1-1.1c-1-1-1.1-1-1.6-1c-0.5,0-0.5,0-1.9,1.4C5.5,5.2,5,5.8,5,5.8c0,0,0.2,0.3,0.5,0.6\n L6,6.9l1-1l1-1l0.5,0.5l0.5,0.5L7.6,7.4L6,8.9L4.5,7.4L2.9,5.8L5,3.7c1.1-1.1,2.1-2.1,2.1-2.1c0-0.1-1-1-1-1c0,0-1,1-2.3,2.2\n c-2,2-2.3,2.3-2.3,2.4C1.3,5.5,1.3,5.7,1.3,6c0.1,0.4,0,0.4,2.1,2.4c1.1,1.1,1.9,1.9,2,2C5.7,10.6,6.1,10.6,6.5,10.5z"/>\n</svg>']);return yP=function(){return t},t}var mP=mC(yP());function bP(){var t=or(["<mwc-icon>","</mwc-icon>"]);return bP=function(){return t},t}function wP(){var t=or(['\n        <div\n          @click="','"\n          mode="','"\n          class="renderer-item ','"\n        >\n        ',"\n        <span>","</span>\n        </div>\n        "]);return wP=function(){return t},t}function xP(){var t=or(['\n      <div class="widget-body hide">\n        ',"\n      </div>\n\n      <gscape-head title=","></gscape-head>\n    "]);return xP=function(){return t},t}function _P(){var t=or(["\n        :host {\n          bottom:10px;\n          left: 136px;\n        }\n\n        .renderer-item {\n          cursor:pointer;\n          padding:5px 10px;\n          display: flex;\n          align-items: center;\n        }\n\n        .renderer-item:hover {\n          color: var(--theme-gscape-on-secondary, ",");\n          background-color:var(--theme-gscape-secondary, ",");\n        }\n\n        .renderer-item:first-of-type {\n          border-top-left-radius: inherit;\n          border-top-right-radius: inherit;\n        }\n\n        .selected {\n          background-color: var(--theme-gscape-primary-dark, ",");\n          color: var(--theme-gscape-on-primary-dark, ",");\n          font-weight: bold;\n        }\n\n        .widget-body {\n          margin:0;\n          border-top: none;\n          border-bottom: 1px solid var(--theme-gscape-shadows, ",");\n          border-radius: inherit;\n          border-bottom-left-radius:0;\n          border-bottom-right-radius:0;\n        }\n\n        gscape-head {\n          --header-padding: 5px 8px;\n        }\n\n        mwc-icon {\n          padding-right:8px;\n        }\n\n        svg {\n          height: 20px;\n          width: auto;\n          padding: 2px;\n          margin-right:8px;\n        }\n      "]);return _P=function(){return t},t}var EP=function(t){Kn(n,t);var e=rr(n);function n(t){var r;return Yn(this,n),(r=e.call(this)).collapsible=!0,r.renderers=t,r.dict={default:{name:"Graphol",icon:""},lite:{name:"Graphol-Lite",icon:"flash_on"},float:{name:"Floaty",icon:"bubble_chart"}},r.actual_mode="default",r._onRendererChange={},r}return Xn(n,null,[{key:"properties",get:function(){return{actual_mode:{type:String}}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(_P(),e.on_secondary,e.secondary,e.primary_dark,e.on_primary_dark,e.shadows)]}}]),Xn(n,[{key:"render",value:function(){var t=this;return mC(xP(),Object.keys(this.renderers).map((function(e){return mC(wP(),t.changeRenderer,e,e==t.actual_mode?"selected":"","default"==e?mP:mC(bP(),t.dict[e].icon),t.dict[e].name)})),this.dict[this.actual_mode].name)}},{key:"changeRenderer",value:function(t){this.shadowRoot.querySelector(".selected")&&this.shadowRoot.querySelector(".selected").classList.remove("selected");var e=t.currentTarget;e.classList.add("selected");var n=e.getAttribute("mode");this.header.title=this.dict[n].name,this.actual_mode=n,this._onRendererChange(n)}},{key:"firstUpdated",value:function(){ir($n(n.prototype),"firstUpdated",this).call(this),this.header.invertIcons()}},{key:"onRendererChange",set:function(t){this._onRendererChange=t}}]),n}(uO);function kP(){var t=or(['\n      \x3c!-- in case of body\n      <div class="widget-body hide">\n      </div>\n      <gscape-head title="Layout Settings" collapsed="true" class="drag-handler">\n        <span>\n          ',"\n          ",'\n        </span>\n      </gscape-head>\n      --\x3e\n\n      <div class="wrapper">\n        <span class="title">Layout Settings</span>\n        <span class="toggles-wrapper">\n          ',"\n          ","\n        </span>\n      </div>\n\n    "]);return kP=function(){return t},t}function SP(){var t=or(["\n        :host {\n          left: 50%;\n          bottom: 10px;\n          transform: translate(-50%, 0);\n        }\n\n        gscape-head span {\n          display: flex;\n        }\n\n        .widget-body {\n          margin:0;\n          border-top: none;\n          border-bottom: 1px solid var(--theme-gscape-shadows, ",");\n          border-radius: inherit;\n          border-bottom-left-radius:0;\n          border-bottom-right-radius:0;\n        }\n\n        gscape-head {\n          --header-padding: 5px 8px;\n          --title-padding: 0 30px 0 0;\n          --btn-padding: 0 0 0 10px;\n        }\n\n        gscape-toggle {\n          margin-left: 50px;\n        }\n\n        .wrapper {\n          display:flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 8px;\n        }\n\n        .title {\n          padding: 0 5px 0 0;\n          font-weight:bold;\n        }\n\n        .toggles-wrapper {\n          display: flex;\n        }\n      "]);return SP=function(){return t},t}customElements.define("gscape-render-selection",EP);var CP=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).collapsible=!1,t.onLayoutRunToggle={},t.onDragAndPinToggle={},t}return Xn(n,null,[{key:"properties",get:function(){return{}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(SP(),e.shadows)]}}]),Xn(n,[{key:"render",value:function(){return mC(kP(),new QO("layout-run",!0,!1,"Layout Running",this.onLayoutRunToggle),new QO("layout-pin",!1,!1,"Drag and Pin",this.onDragAndPinToggle),new QO("layout-run",!0,!1,"Layout Running",this.onLayoutRunToggle),new QO("layout-pin",!1,!1,"Drag and Pin",this.onDragAndPinToggle))}}]),n}(uO);function TP(){var t=or(['<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" id="Livello_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 1024 792.6" style="enable-background:new 0 0 1024 792.6;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#FFFFFF;}\n\t.st2{enable-background:new    ;}\n\t.st3{fill:url(#SVGID_2_);}\n</style>\n<g>\n\t<g id="Logo">\n\n\t\t\t<radialGradient id="SVGID_1_" cx="502.1" cy="894.61" r="662.91" gradientTransform="matrix(1 0 0 1 12.76 -283.3)" gradientUnits="userSpaceOnUse">\n\t\t\t<stop  offset="0" style="stop-color:#5B86E5"/>\n\t\t\t<stop  offset="0.34" style="stop-color:#509CE2"/>\n\t\t\t<stop  offset="1" style="stop-color:#36D1DC"/>\n\t\t</radialGradient>\n\t\t<path class="st0" d="M512,506c-138.1,0-250-111.9-250-250c0-66.3,26.3-129.9,73.2-176.8c97.6-97.6,256-97.6,353.6,0\n\t\t\ts97.6,256,0,353.6C642,479.8,578.3,506.2,512,506z"/>\n\t\t<path class="st1" d="M512,11.9c134.8,0,244.1,109.3,244.1,244.2c0,98.1-58.7,186.6-149.1,224.8c-124.2,52.5-267.4-5.7-319.9-129.9\n\t\t\tS292.8,83.6,417,31.1C447.1,18.4,479.4,11.9,512,11.9 M512,0C370.6,0,256,114.6,256,256s114.6,256,256,256s256-114.6,256-256\n\t\t\tS653.4,0,512,0z"/>\n\t\t<path class="st1" d="M513.6,432c-12.4,0-24.4-4.9-33.1-13.7L344.1,282c-18.3-18.3-18.3-48,0-66.3L513.6,46.2l40.3,40.3\n\t\t\tL391.6,248.8l122,122l122-122L594.7,208l-81.2,81.1l-40.3-40.3l88.3-88.3c18.3-18.3,48-18.3,66.3,0l55.2,55.2\n\t\t\tc18.3,18.3,18.3,48,0,66.3L546.7,418.3C537.9,427.1,526,432,513.6,432z"/>\n\t\t<g class="st2">\n\t\t\t<path d="M83,594.8c5.3,0,10.2,0.3,14.7,0.8s8.9,1.3,13.1,2.2c4.2,1,8.2,2.1,12.1,3.5s7.9,2.9,11.9,4.5v12.6\n\t\t\t\tc-3.2-2-6.5-3.9-10.1-5.7s-7.4-3.3-11.6-4.7c-4.1-1.3-8.6-2.4-13.3-3.2c-4.7-0.8-9.8-1.2-15.3-1.2c-11.1,0-20.8,1.2-29.1,3.5\n\t\t\t\ts-15.2,5.7-20.6,10c-5.5,4.3-9.6,9.6-12.4,15.8c-2.7,6.2-4.1,13.2-4.1,21c0,7.3,1.3,14,4,20.1s6.8,11.4,12.2,15.8\n\t\t\t\tc5.5,4.4,12.3,7.9,20.5,10.4s17.8,3.7,28.9,3.7c4.3,0,8.6-0.2,12.9-0.5c4.2-0.3,8.3-0.8,12-1.3c3.8-0.5,7.2-1.1,10.3-1.7\n\t\t\t\tc3.1-0.6,5.7-1.3,7.9-2V664H80.7v-9.7h56.9v50.3c-4.1,1.4-8.3,2.7-12.4,3.8c-4.2,1.1-8.5,2-13,2.8c-4.5,0.7-9.1,1.3-13.9,1.7\n\t\t\t\ts-9.8,0.6-15.1,0.6c-10.8,0-20.7-1.2-30-3.6c-9.2-2.4-17.2-6.1-23.9-11s-12-11.1-15.9-18.5c-3.8-7.4-5.7-16.2-5.7-26.2\n\t\t\t\tc0-6.7,0.9-12.8,2.7-18.3s4.3-10.5,7.5-14.9s7.2-8.3,11.7-11.5c4.6-3.3,9.7-6,15.2-8.1c5.6-2.1,11.6-3.7,18-4.8\n\t\t\t\tC69.3,595.3,76,594.8,83,594.8z"/>\n\t\t\t<path d="M181.2,662.2v48.9h-10.4V596.8h56.9c8.7,0,16.2,0.7,22.4,2c6.2,1.4,11.3,3.4,15.3,6.2c4,2.7,6.9,6.2,8.7,10.3\n\t\t\t\tc1.8,4.1,2.7,8.9,2.7,14.4c0,8.5-2.2,15.4-6.7,20.5s-11.7,8.6-21.7,10.5l39,50.4h-13.1l-36.9-49.3c-1.6,0.1-3.1,0.2-4.7,0.2\n\t\t\t\tc-1.6,0.1-3.3,0.1-5,0.1L181.2,662.2L181.2,662.2z M266.1,629.7c0-4.9-0.9-8.8-2.6-11.9c-1.7-3-4.5-5.4-8.4-7s-9-2.8-15.3-3.4\n\t\t\t\tc-6.3-0.6-14-0.9-23.2-0.9h-35.5v45.9h35.1c9.2,0,16.9-0.3,23.2-0.8s11.5-1.6,15.4-3.2c3.9-1.6,6.8-3.9,8.5-6.9\n\t\t\t\tC265.3,638.6,266.1,634.6,266.1,629.7z"/>\n\t\t\t<path d="M417.4,711.2L401.7,681h-77.6l-15.7,30.2H297l59.8-114.3H369l59.8,114.3H417.4z M362.9,606.9l-33.8,64.6h67.5\n\t\t\t\tL362.9,606.9z"/>\n\t\t\t<path d="M562.8,632c0,5.7-0.9,10.8-2.8,15.1c-1.9,4.4-4.8,8.1-8.8,11.1s-9.1,5.3-15.4,6.8c-6.3,1.5-13.9,2.3-22.8,2.3h-51.3v43.9\n\t\t\t\th-10.4V596.8H513c8.9,0,16.5,0.8,22.8,2.3s11.4,3.8,15.4,6.7s6.9,6.6,8.8,11C561.8,621.2,562.8,626.2,562.8,632z M552.1,632\n\t\t\t\tc0-5.4-0.9-9.8-2.7-13.1s-4.6-5.9-8.3-7.7s-8.5-3-14.2-3.6s-12.6-0.9-20.4-0.9h-44.7v50.9h44.7c3.1,0,6.3,0,9.8,0\n\t\t\t\ts6.9-0.1,10.3-0.5c3.4-0.4,6.6-1,9.7-1.9s5.8-2.3,8.2-4.2s4.2-4.4,5.7-7.4C551.4,640.5,552.1,636.6,552.1,632z"/>\n\t\t\t<path d="M703.6,711.2v-55.6H601.2v55.6h-10.4V596.8h10.4v49.3h102.4v-49.3H714v114.3h-10.4V711.2z"/>\n\t\t\t<path d="M889.7,654.1c0,10.3-1.9,19.1-5.6,26.6c-3.7,7.5-8.8,13.6-15.3,18.5s-14.1,8.4-23,10.8s-18.3,3.5-28.5,3.5\n\t\t\t\tc-10.3,0-19.8-1.2-28.7-3.5s-16.6-5.9-23.1-10.8c-6.5-4.9-11.7-11-15.4-18.5s-5.6-16.3-5.6-26.6c0-6.8,0.9-13,2.6-18.6\n\t\t\t\tc1.7-5.6,4.1-10.6,7.2-15c3.1-4.4,6.9-8.2,11.3-11.4c4.4-3.2,9.3-5.9,14.7-8s11.2-3.7,17.4-4.7s12.7-1.5,19.5-1.5\n\t\t\t\tc10.2,0,19.7,1.2,28.5,3.5s16.5,5.9,23,10.8c6.5,4.9,11.6,11,15.3,18.5C887.8,635,889.7,643.8,889.7,654.1z M879,654.1\n\t\t\t\tc0-8.1-1.3-15.3-4-21.5c-2.6-6.2-6.5-11.4-11.7-15.7c-5.2-4.2-11.6-7.5-19.3-9.7s-16.6-3.3-26.8-3.3s-19.1,1.1-26.9,3.3\n\t\t\t\tc-7.7,2.2-14.2,5.5-19.4,9.7s-9.2,9.5-11.8,15.7s-4,13.4-4,21.3c0,8.1,1.3,15.3,4,21.5s6.6,11.4,11.8,15.7\n\t\t\t\tc5.2,4.2,11.7,7.5,19.4,9.7s16.7,3.3,26.9,3.3s19.1-1.1,26.8-3.3s14.1-5.4,19.3-9.7c5.2-4.2,9.1-9.5,11.7-15.7\n\t\t\t\tC877.7,669.3,879,662.2,879,654.1z"/>\n\t\t\t<path d="M920.2,711.2V596.8h10.4v104.6h83.5v9.7h-93.9V711.2z"/>\n\t\t</g>\n\n\t\t\t<radialGradient id="SVGID_2_" cx="513.05" cy="1101.48" r="466.86" gradientTransform="matrix(1 0 0 1 0 -286)" gradientUnits="userSpaceOnUse">\n\t\t\t<stop  offset="0" style="stop-color:#5B86E5"/>\n\t\t\t<stop  offset="0.34" style="stop-color:#509CE2"/>\n\t\t\t<stop  offset="1" style="stop-color:#36D1DC"/>\n\t\t</radialGradient>\n\t\t<path class="st3" d="M389.9,700.8h244.3c16.8,0,30.4,13.6,30.4,30.4v27.4c0,16.8-13.6,30.4-30.4,30.4H389.9\n\t\t\tc-16.8,0-30.4-13.6-30.4-30.4v-27.4C359.4,714.4,373,700.8,389.9,700.8L389.9,700.8L389.9,700.8z"/>\n\t\t<path class="st1" d="M634.2,704.3c14.8,0,26.8,12,26.8,26.9v27.4c0,14.8-12,26.9-26.9,26.9l0,0H389.9c-14.8,0-26.9-12-26.9-26.9\n\t\t\tv-27.4c0-14.8,12-26.9,26.9-26.9l0,0H634.2 M634.2,697.2H389.9c-18.8,0-34,15.2-34,34v27.4c0,18.8,15.2,34,34,34h244.3\n\t\t\tc18.8,0,34-15.2,34-34v-27.4C668.2,712.4,652.9,697.2,634.2,697.2L634.2,697.2z"/>\n\t\t<g class="st2">\n\t\t\t<path class="st1" d="M385,764.8c-3.7-0.9-6.6-2-8.6-3.3l3-4c2.1,1.2,4.7,2.2,7.8,3c3.1,0.8,6.4,1.2,9.8,1.2\n\t\t\t\tc4.5,0,7.9-0.5,10.1-1.6c2.2-1.1,3.3-2.6,3.3-4.5c0-1.4-0.6-2.4-1.8-3.2c-1.2-0.8-2.7-1.4-4.5-1.8c-1.8-0.4-4.2-0.8-7.3-1.2\n\t\t\t\tc-4-0.6-7.3-1.1-9.7-1.7c-2.5-0.6-4.5-1.6-6.3-3c-1.7-1.4-2.6-3.4-2.6-5.9c0-3.1,1.7-5.7,5.2-7.7c3.5-2,8.3-3,14.4-3\n\t\t\t\tc3.2,0,6.4,0.3,9.6,1c3.2,0.6,5.9,1.5,7.9,2.5l-2.9,4c-4.1-2.1-9-3.2-14.6-3.2c-4.3,0-7.5,0.6-9.7,1.7c-2.2,1.1-3.3,2.6-3.3,4.5\n\t\t\t\tc0,1.4,0.6,2.6,1.8,3.4c1.2,0.9,2.8,1.5,4.6,1.9c1.8,0.4,4.3,0.8,7.6,1.2c4,0.6,7.1,1.1,9.5,1.7c2.4,0.6,4.4,1.5,6.1,2.9\n\t\t\t\ts2.5,3.3,2.5,5.7c0,3.3-1.8,5.9-5.4,7.8c-3.6,1.9-8.6,2.9-15.1,2.9C392.6,766.1,388.7,765.7,385,764.8z"/>\n\t\t\t<path class="st1" d="M436.9,763.7c-3.9-1.6-6.9-3.9-9.1-6.8c-2.2-2.9-3.3-6.2-3.3-9.8c0-3.6,1.1-6.9,3.3-9.8\n\t\t\t\tc2.2-2.9,5.2-5.1,9.1-6.7c3.9-1.6,8.3-2.4,13.2-2.4c4.3,0,8.1,0.6,11.5,1.9c3.4,1.3,6,3.1,8,5.5l-5,2.6c-1.6-1.8-3.7-3.2-6.2-4.2\n\t\t\t\tc-2.5-0.9-5.3-1.4-8.2-1.4c-3.6,0-6.8,0.6-9.7,1.8c-2.9,1.2-5.1,2.9-6.7,5.1s-2.4,4.8-2.4,7.6c0,2.9,0.8,5.4,2.4,7.6\n\t\t\t\tc1.6,2.2,3.8,3.9,6.7,5.1c2.9,1.2,6.1,1.8,9.7,1.8c3,0,5.7-0.4,8.2-1.3c2.5-0.9,4.6-2.3,6.2-4.1l5,2.6c-2,2.4-4.6,4.2-8,5.5\n\t\t\t\tc-3.4,1.3-7.2,1.9-11.4,1.9C445.1,766.1,440.7,765.3,436.9,763.7z"/>\n\t\t\t<path class="st1" d="M514.9,731.8c3.5,2.4,5.2,6,5.2,10.8v23.1h-6.4v-5.8c-1.5,1.9-3.7,3.5-6.7,4.5c-2.9,1.1-6.4,1.6-10.4,1.6\n\t\t\t\tc-5.5,0-9.9-1-13.2-3c-3.3-2-4.9-4.6-4.9-7.9c0-3.2,1.5-5.7,4.6-7.7c3.1-1.9,7.9-2.9,14.6-2.9h15.8v-2.3c0-3.2-1.2-5.7-3.6-7.3\n\t\t\t\tc-2.4-1.7-5.9-2.5-10.5-2.5c-3.1,0-6.2,0.4-9.1,1.2c-2.9,0.8-5.4,1.9-7.5,3.2l-3-3.8c2.5-1.6,5.5-2.9,9.1-3.7\n\t\t\t\tc3.5-0.9,7.2-1.3,11.1-1.3C506.5,728.1,511.5,729.3,514.9,731.8z M507.4,760.2c2.7-1.3,4.7-3.2,6-5.6v-6.1h-15.6\n\t\t\t\tc-8.5,0-12.7,2.2-12.7,6.7c0,2.2,1.1,3.9,3.3,5.1c2.2,1.3,5.3,1.9,9.3,1.9C501.4,762.1,504.7,761.5,507.4,760.2z"/>\n\t\t\t<path class="st1" d="M576.6,730.5c3.8,1.6,6.7,3.8,8.9,6.7c2.1,2.9,3.2,6.2,3.2,9.9c0,3.7-1.1,7.1-3.2,9.9\n\t\t\t\tc-2.1,2.9-5.1,5.1-8.8,6.7c-3.7,1.6-8,2.4-12.7,2.4c-4,0-7.7-0.6-10.9-1.9c-3.2-1.3-5.9-3.1-8-5.5v20.8h-6.7v-51.1h6.4v7.4\n\t\t\t\tc2-2.5,4.7-4.4,8-5.7s7-2,11.2-2C568.6,728.1,572.8,728.9,576.6,730.5z M572.9,759.8c2.8-1.2,5.1-2.9,6.7-5.1\n\t\t\t\tc1.6-2.2,2.4-4.8,2.4-7.6s-0.8-5.4-2.4-7.6c-1.6-2.2-3.8-3.9-6.7-5.1c-2.8-1.2-6-1.8-9.4-1.8c-3.5,0-6.7,0.6-9.5,1.8\n\t\t\t\tc-2.8,1.2-5,2.9-6.6,5.1s-2.4,4.7-2.4,7.6s0.8,5.4,2.4,7.6c1.6,2.2,3.8,3.9,6.6,5.1s6,1.8,9.5,1.8\n\t\t\t\tC566.9,761.6,570.1,761,572.9,759.8z"/>\n\t\t\t<path class="st1" d="M645.6,748.6h-41.5c0.4,3.9,2.4,7,5.9,9.4c3.6,2.4,8.1,3.6,13.6,3.6c3.1,0,5.9-0.4,8.5-1.2\n\t\t\t\tc2.6-0.8,4.8-2,6.7-3.7l3.8,3.3c-2.2,2-5,3.5-8.3,4.5c-3.3,1-6.9,1.6-10.9,1.6c-5.1,0-9.6-0.8-13.6-2.5c-3.9-1.6-7-3.9-9.2-6.8\n\t\t\t\tc-2.2-2.9-3.3-6.2-3.3-9.8c0-3.6,1.1-6.9,3.2-9.8c2.1-2.9,5-5.1,8.7-6.7c3.7-1.6,7.8-2.4,12.4-2.4c4.6,0,8.7,0.8,12.4,2.4\n\t\t\t\tc3.7,1.6,6.5,3.8,8.6,6.7c2.1,2.9,3.1,6.1,3.1,9.8L645.6,748.6z M609.6,735.9c-3.2,2.3-5.1,5.3-5.5,9h35.2\n\t\t\t\tc-0.4-3.7-2.3-6.7-5.5-9c-3.2-2.3-7.3-3.4-12.1-3.4C616.8,732.5,612.8,733.6,609.6,735.9z"/>\n\t\t</g>\n\t</g>\n</g>\n</svg>']);return TP=function(){return t},t}customElements.define("gscape-layout-settings",CP);var NP=mC(TP());function OP(){var t=or([""]);return OP=function(){return t},t}function PP(){var t=or(["\n                ","\n              "]);return PP=function(){return t},t}function MP(){var t=or([""]);return MP=function(){return t},t}function DP(){var t=or(['<option value="','" ?selected=',">","</option>"]);return DP=function(){return t},t}function AP(){var t=or(['\n                <div class="setting_obj">\n                  <select area="','" id="','" @change="','">\n                    ',"\n                  </select>\n                </div>\n              "]);return AP=function(){return t},t}function LP(){var t=or(['\n            <div class="setting">\n              <div class="title-wrap">\n                <div class="setting-title">','</div>\n                <div class="setting-label">',"</div>\n              </div>\n            ","\n\n            ","\n            </div>\n          "]);return LP=function(){return t},t}function IP(){var t=or(['\n          <div class="area">\n            <div class="area-title">',"</div>\n\n        ","\n        </div>\n        "]);return IP=function(){return t},t}function RP(){var t=or([""]);return RP=function(){return t},t}function BP(){var t=or(["\n      ",'\n\n      <div class="widget-body hide gscape-panel">\n        <div class="gscape-panel-title">Settings</div>\n\n        <div class="settings-wrapper">\n\n      ','\n\n        <div class="area">\n          <div class="area-title">About</div>\n          <div id="logo">\n            ','\n          </div>\n\n          <div id="version">\n            <span>Version: </span>\n            <span>',"</span>\n          </div>\n        </div>\n      </div>\n    "]);return BP=function(){return t},t}function jP(){var t=or(["\n        :host {\n          bottom:10px;\n          left: 94px;\n          padding-right:0;\n        }\n\n        gscape-button {\n          position: static;\n        }\n\n        .gscape-panel {\n          padding-right: 0;\n        }\n\n        .settings-wrapper {\n          overflow-y: auto;\n          scrollbar-width: inherit;\n          max-height: 420px;\n          overflow-x: hidden;\n          white-space: nowrap;\n          padding-right: 20px;\n        }\n\n        .area {\n          margin-bottom: 30px;\n        }\n\n        .area:last-of-type {\n          margin-bottom: 0;\n        }\n\n        .area-title {\n          font-weight: bold;\n          margin-bottom: 5px;\n          font-size: 105%;\n        }\n\n        .setting {\n          padding: 10px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .title-wrap {\n          margin-right: 50px;\n        }\n\n        .setting-label {\n          font-size : 12px;\n          opacity: 0.7;\n        }\n\n        #logo {\n          text-align:center;\n        }\n\n        #logo svg {\n          width: 40%;\n          height: auto;\n          margin: 20px 0;\n        }\n\n        #version {\n          text-align: center;\n          font-size: 14px;\n        }\n      "]);return jP=function(){return t},t}var FP=function(t){Kn(n,t);var e=rr(n);function n(t){var r;return Yn(this,n),(r=e.call(this)).collapsible=!0,r.settings=t,r.btn=new GO("settings"),r.btn.onClick=r.toggleBody.bind(er(r)),r.callbacks={},r}return Xn(n,null,[{key:"styles",get:function(){var t=ir($n(n),"styles",this);t[1];return[t[0],AC(jP())]}}]),Xn(n,[{key:"render",value:function(){var t=this;return mC(BP(),this.btn,Object.keys(this.settings).map((function(e){if("default"==e)return mC(RP());var n=t.settings[e];return mC(IP(),function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),Object.keys(n).map((function(r){var i=n[r];return mC(LP(),i.title,i.label,"list"==i.type?mC(AP(),e,r,t.onListChange,i.list.map((function(t){if(""!=t.value){var e=t.value==i.selected;return mC(DP(),t.value,e,t.label)}}))):mC(MP()),"boolean"==i.type?mC(PP(),new QO(r,i.enabled,!1,"",t.onToggleChange.bind(t))):mC(OP()))})))})),NP,"1.1.0")}},{key:"onListChange",value:function(t){var e=t.target,n=e.getAttribute("area");this.settings[n][e.id].selected=e.value,this.callbacks[e.id](e.value)}},{key:"onToggleChange",value:function(t){var e=t.target;this.settings.widgets[e.id].enabled=e.checked,e.checked?this.callbacks.widgetEnable(e.id):this.callbacks.widgetDisable(e.id)}},{key:"onEntityNameSelection",set:function(t){this.callbacks.entity_name=t}},{key:"onLanguageSelection",set:function(t){this.callbacks.language=t}},{key:"onThemeSelection",set:function(t){this.callbacks.theme=t}},{key:"onWidgetEnabled",set:function(t){this.callbacks.widgetEnable=t}},{key:"onWidgetDisabled",set:function(t){this.callbacks.widgetDisable=t}}]),n}(uO);function zP(){var t=or(['<div class="loader"></div>']);return zP=function(){return t},t}function VP(){var t=or(["\n      .loader {\n        border: 3px solid ",";\n        border-radius: 50%;\n        border-top: 3px solid ",";\n        width: 30px;\n        height: 30px;\n        -webkit-animation: spin 1s linear infinite; /* Safari */\n        animation: spin 1s linear infinite;\n        box-sizing: border-box;\n        position:absolute;\n        top:50%;\n        left: 50%;\n        margin-top: -15px;\n        margin-left: -15px;\n      }\n\n      /* Safari */\n      @-webkit-keyframes spin {\n        0% { -webkit-transform: rotate(0deg); }\n        100% { -webkit-transform: rotate(360deg); }\n      }\n\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    "]);return VP=function(){return t},t}customElements.define("gscape-settings",FP);var qP=function(t){Kn(n,t);var e=rr(n);function n(){return Yn(this,n),e.call(this)}return Xn(n,null,[{key:"styles",get:function(){return AC(VP(),nO.shadows,nO.secondary)}}]),Xn(n,[{key:"render",value:function(){return mC(zP())}},{key:"hide",value:function(){this.style.display="none"}},{key:"show",value:function(){this.style.display="initial"}}]),n}(IC);function UP(){var t=or(["<p>","</p>"]);return UP=function(){return t},t}function HP(){var t=or(['\n    <gscape-head\n      title="','"\n      icon="close"\n      class="',' drag-handler">\n    </gscape-head>\n    <div class="widget-body ','">\n      ',"\n    </div>\n    "]);return HP=function(){return t},t}function WP(){var t=or(["\n        :host {\n          top: 30%;\n          left: 50%;\n          max-width: 500px;\n          transform: translate(-50%, 0);\n        }\n\n        .widget-body {\n          padding : 10px;\n          width: initial;\n        }\n\n        .widget-body.error {\n          background : var(--theme-gscape-error, ",");\n          color : var(--theme-gscape-on-error, ",");\n        }\n\n        gscape-head {\n          --title-text-align : center;\n          --title-width : 100%;\n        }\n\n        gscape-head.error {\n          color : var(--theme-gscape-error, ",");\n        }\n\n        gscape-head.warning {\n          color : var(--theme-gscape-warning, ",");\n        }\n      "]);return WP=function(){return t},t}customElements.define("gscape-spinner",qP);var YP=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).draggable=!0,t.text=[],t.type="error",t}return Xn(n,null,[{key:"properties",get:function(){return{text:{type:Array},type:{type:String}}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this),e=t[1];return[t[0],AC(WP(),e.error,e.on_error,e.error,e.warning)]}}]),Xn(n,[{key:"render",value:function(){return mC(HP(),this.type,this.type.toLowerCase(),this.type.toLowerCase(),this.text.map((function(t){return mC(UP(),t)})))}},{key:"show",value:function(t,e){ir($n(n.prototype),"show",this).call(this),this.type=t,this.text="string"==typeof e?[e]:e}},{key:"clickHandler",value:function(){this.hide(),this._onClick()}},{key:"firstUpdated",value:function(){ir($n(n.prototype),"firstUpdated",this).call(this),this.hide(),this.header.onClick=this.hide.bind(this)}}]),n}(uO);function GP(){var t=or(['\n      <gscape-head title="Entity Occurrences" class="drag-handler"></gscape-head>\n      <div class="widget-body">\n        ',"\n      </div>\n    "]);return GP=function(){return t},t}function XP(){var t=or(["\n        :host {\n          top:50%;\n          transform: translate(0, -50%);\n          left:10px;\n        }\n\n        .widget-body {\n          max-height: 250px;\n        }\n\n        gscape-head {\n          --title-text-align: center;\n          --title-width: 100%;\n        }\n\n        .details_table {\n          margin:5px 0;\n        }\n      "]);return XP=function(){return t},t}customElements.define("gscape-dialog",YP);var KP=function(t){Kn(n,t);var e=rr(n);function n(){var t;return Yn(this,n),(t=e.call(this)).draggable=!0,t.collapsible=!0,t.occurrences=[],t.hiddenDefault=!0,t.onNodeNavigation={},t}return Xn(n,null,[{key:"properties",get:function(){return{occurrences:{type:Array}}}},{key:"styles",get:function(){var t=ir($n(n),"styles",this);t[1];return[t[0],AC(XP())]}}]),Xn(n,[{key:"render",value:function(){return mC(GP(),(t=this.occurrences,e=this.handleNodeSelection,mC(IO(),t&&t.length>0?mC(LO(),t.map((function(t){return mC(AO(),t.diagram_name,t.id,e,t.id_xml)}))):"")));var t,e}},{key:"handleNodeSelection",value:function(t){var e=t.target.getAttribute("node_id");this.onNodeNavigation(e)}},{key:"firstUpdated",value:function(){ir($n(n.prototype),"firstUpdated",this).call(this),this.header.invertIcons()}},{key:"blur",value:function(){this.hide()}}]),n}(uO);customElements.define("gscape-entity-occurrences",KP);var $P=function(){function t(e){Yn(this,t),this.container=e,this.graph_container=document.createElement("div"),this.graph_container.style.width="100%",this.graph_container.style.height="100%",this.graph_container.style.position="relative",this.container.appendChild(this.graph_container),this.onEdgeSelection={},this.onNodeSelection={},this.renderers={default:new pP(this.graph_container),lite:new gP(this.graph_container),float:new vP(this.graph_container)},this.setRenderer(this.renderers.default),this.container.requestFullscreen=this.container.requestFullscreen||this.container.mozRequestFullscreen||this.container.mozRequestFullScreen||this.container.webkitRequestFullscreen||this.container.msRequestFullscreen,document.cancelFullscreen=document.exitFullscreen||document.cancelFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen,this.spinner=new qP,this.container.appendChild(this.spinner),this.dialog=new YP,this.container.appendChild(this.dialog)}return Xn(t,[{key:"createUi",value:function(t,e,n,r){var i=this;this.settings=r,this.filters=this.settings.widgets.filters.filter_list,this.widgets=new Map,this.diagram_selector=new vO(e),this.diagram_selector.onDiagramChange=this.onDiagramChange,this.widgets.set("diagram_selector",this.diagram_selector),this.explorer=new _O(n,e),this.explorer.onEntitySelect=this.onEntitySelection,this.explorer.onNodeNavigation=this.onNodeNavigation,this.widgets.set("explorer",this.explorer),this.entity_details=new HO,this.entity_details.onNodeNavigation=this.onNodeNavigation,this.widgets.set("details",this.entity_details),this.occurrences_list=new KP,this.occurrences_list.onNodeNavigation=this.onNodeNavigation,this.widgets.set("occurrences_list",this.occurrences_list);var o=new GO("fullscreen","fullscreen_exit");o.style.top="10px",o.style.right="10px",o.onClick=this.toggleFullscreen.bind(this),this.widgets.set("btn_fullscreen",o);var a=new GO("filter_center_focus");a.style.bottom="10px",a.style.right="10px",a.onClick=this.resetView.bind(this),this.widgets.set("btn_reset",a),this.filters_widget=new rP(this.filters),this.filters_widget.onFilterOn=this.filter.bind(this),this.filters_widget.onFilterOff=this.unfilter.bind(this),this.widgets.set("filters",this.filters_widget),this.ontology_info=new sP(t),this.widgets.set("ontology_info",this.ontology_info),this.owl_translator=new cP,this.widgets.set("owl_translator",this.owl_translator);var s=new fP;for(var l in s.onZoomIn=this.zoomIn.bind(this),s.onZoomOut=this.zoomOut.bind(this),this.widgets.set("zoom_widget",s),this.renderer_selector=new EP(this.renderers),this.renderer_selector.onRendererChange=this.changeRenderingMode.bind(this),this.widgets.set("simplifications",this.renderer_selector),this.layout_settings=new CP,this.layout_settings.onLayoutRunToggle=function(){return i.renderer.layoutStopped=!i.renderer.layoutStopped},this.layout_settings.onDragAndPinToggle=function(){return i.renderer.dragAndPin=!i.renderer.dragAndPin},this.layout_settings.hide(),this.widgets.set("layout_settings",this.layout_settings),this.settings_widget=new FP(this.settings),this.settings_widget.onEntityNameSelection=this.onEntityNameTypeChange.bind(this),this.settings_widget.onLanguageSelection=this.onLanguageChange.bind(this),this.settings_widget.onThemeSelection=this.onThemeSelection.bind(this),this.settings_widget.onWidgetEnabled=this.onWidgetEnabled.bind(this),this.settings_widget.onWidgetDisabled=this.onWidgetDisabled.bind(this),this.widgets.set("settings_widget",this.settings_widget),Object.keys(this.renderers).forEach((function(t){return i.registerEvents(i.renderers[t])})),this.settings.widgets)this.settings.widgets[l].enabled||this.onWidgetDisabled(l);this.widgets.forEach((function(t,e){switch(i.container.appendChild(t),e){case"filters":case"ontology_info":case"settings_widget":case"simplifications":t.onToggleBody=function(){return i.blurAll(t)}}})),"custom"!=this.settings.rendering.theme.selected&&this.setTheme(aO[this.settings.rendering.theme.selected])}},{key:"registerEvents",value:function(t){t.onEdgeSelection=this.onEdgeSelection,t.onNodeSelection=this.onNodeSelection,t.onBackgroundClick=this.blurAll.bind(this)}},{key:"drawDiagram",value:function(t){this.diagram_selector.actual_diagram_id=t.id,this.renderer.drawDiagram(t),this.filters.all.active?this.filter("all"):this.applyActiveFilters()}},{key:"applyActiveFilters",value:function(){var t=this;Object.keys(this.filters).map((function(e){t.filters[e].active&&t.renderer.filter(t.filters[e])}))}},{key:"filter",value:function(t){this.filters[t].active=!0,this.onFilterToggle(t)}},{key:"unfilter",value:function(t){this.filters[t].active=!1,this.onFilterToggle(t)}},{key:"onFilterToggle",value:function(t){var e=this;"attributes"==t&&(this.filters.value_domain.disabled=this.filters.attributes.active),"all"==t?Object.keys(this.filters).map((function(t){"all"==t||e.filters[t].disbaled||(e.filters[t].active=e.filters.all.active,"value_domain"==t&&(e.filters[t].disabled=e.filters.all.active),e.executeFilter(t))})):!this.filters[t].active&&this.filters.all.active&&(this.filters.all.active=!1),"default"!==this.renderer_selector.actual_mode&&(this.filters.value_domain.disabled=!0),this.executeFilter(t),this.widgets.get("filters").updateTogglesState()}},{key:"executeFilter",value:function(t){this.filters[t].active?this.renderer.filter(this.filters[t]):(this.renderer.unfilter(this.filters[t]),this.applyActiveFilters())}},{key:"zoomIn",value:function(){this.renderer.zoomIn()}},{key:"zoomOut",value:function(){this.renderer.zoomOut()}},{key:"resetView",value:function(){this.renderer.resetView()}},{key:"centerOnNode",value:function(t,e){this.renderer.centerOnNode(t.id,e)}},{key:"showDetails",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.entity_details.entity=t,this.showWidget("details"),e&&this.renderer.cy.$(":selected").unselect()}},{key:"showOccurrences",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.occurrences_list.occurrences=t,this.showWidget("occurrences_list"),e&&this.renderer.cy.$(":selected").unselect()}},{key:"showOwlTranslation",value:function(t){"default"==this.renderer_selector.actual_mode&&(this.owl_translator.owl_text=t,this.showWidget("owl_translator"))}},{key:"toggleFullscreen",value:function(){var t=this.container;this.isFullscreen()?document.cancelFullscreen():t.requestFullscreen()}},{key:"isFullscreen",value:function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}},{key:"blurAll",value:function(t){this.widgets.forEach((function(e){Object.is(e,t)||e.blur()}))}},{key:"setRenderer",value:function(t){for(name in this.renderers)this.renderers[name]&&this.renderers[name].unmount();t.mount(this.graph_container),this.renderer=t}},{key:"changeRenderingMode",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n||this.resetView();var r=this.renderer.getActualPosition(),i=this.renderer;switch(this.setRenderer(this.renderers[t]),t){case"float":case"lite":Object.keys(this.filters).map((function(t){"all"!=t&&"attributes"!=t&&"individuals"!=t&&(e.filters[t].disabled=!0)}));break;case"default":Object.keys(this.filters).map((function(t){"all"!=t&&"attributes"!=t&&"individuals"!=t&&(e.filters[t].disabled=!1,"value_domain"==t&&e.filters.attributes.active&&(e.filters.value_domain.disabled=!0))}))}this.onRenderingModeChange(t,r),"float"==t?this.showWidget("layout_settings"):(i==this.renderers.float&&setTimeout((function(){return e.resetView()}),250),this.hideWidget("layout_settings")),this.filters_widget.requestUpdate(),this.blurAll()}},{key:"setViewPort",value:function(t){this.renderer.centerOnRenderedPosition(t.x,t.y,t.zoom)}},{key:"updateEntitiesList",value:function(t){this.explorer.predicates=t,this.explorer.requestUpdate()}},{key:"onThemeSelection",value:function(t){"custom"==t?this.setTheme(this.custom_theme):this.setTheme(aO[t])}},{key:"setTheme",value:function(t){var e=this,n={};Object.keys(t).map((function(r){var i="--theme-gscape-"+r.replace(/_/g,"-"),o="string"==typeof t[r]?t[r]:t[r].cssText;e.container.style.setProperty(i,o),n[r]=o})),this.graph_container.style.background=t.background,Object.keys(this.renderers).map((function(t){e.renderers[t].setTheme(n)}))}},{key:"setCustomTheme",value:function(t){var e=this;this.custom_theme=JSON.parse(JSON.stringify(nO)),Object.keys(t).forEach((function(n){e.custom_theme[n]&&(e.custom_theme[n]=t[n])})),this.setTheme(this.custom_theme)}},{key:"showWidget",value:function(t){this.widgets.get(t).show()}},{key:"hideWidget",value:function(t){this.widgets.get(t).hide()}},{key:"onWidgetEnabled",value:function(t){this.widgets.get(t).enable()}},{key:"onWidgetDisabled",value:function(t){this.widgets.get(t).disable()}},{key:"showDialog",value:function(t,e){this.dialog.show(t,e)}},{key:"actual_diagram_id",get:function(){return this.diagram_selector.actual_diagram_id}},{key:"onWikiClick",set:function(t){this.entity_details.onWikiClick=t}}]),t}(),ZP=function(){function t(){Yn(this,t)}return Xn(t,[{key:"edgeToOwlString",value:function(t){var e=t.source(),n=t.target(),r='<span class="owl_error">Malformed Axiom</span>';switch(t.data("type")){case"inclusion":return"concept"==e.data("identity")&&"concept"==n.data("identity")?"domain-restriction"==e.data("type")&&"self"!=e.data("displayed_name")&&"self"!=n.data("displayed_name")?function(t,e){var n=e.source().incomers('[type = "input"]').sources();if(n.size()>1)return o(t,e);if("role"==n.data("type"))return"ObjectPropertyDomain("+t.nodeToOwlString(n)+" "+t.nodeToOwlString(e.target())+")";if("attribute"==n.data("type"))return"DataPropertyDomain("+t.nodeToOwlString(n)+" "+t.nodeToOwlString(e.target())+")"}(this,t):"range-restriction"==e.data("type")&&"self"!=e.data("displayed_name")&&"self"!=n.data("displayed_name")?s(this,t):"complement"==n.data("type")||"complement"==e.data("type")?function(t,e){var n="DisjointClasses(";return e.forEach((function(e){"complement"==e.data("type")&&(e=e.incomers('[type = "input"]').source()),n+=t.nodeToOwlString(e)+" "})),n=n.slice(0,n.length-1),n+=")"}(this,t.connectedNodes()):o(this,t):"role"==e.data("identity")&&"role"==n.data("identity")?"complement"==n.data("type")?l(this,t):a(this,t):"value_domain"==e.data("identity")&&"value_domain"==n.data("identity")?s(this,t):"attribute"==e.data("identity")&&"attribute"==n.data("identity")?"complement"==n.data("type")?l(this,t):a(this,t):r;case"equivalence":return"concept"==e.data("identity")&&"concept"==n.data("identity")?function(t,e){return"EquivalentClasses("+t.nodeToOwlString(e.source())+" "+t.nodeToOwlString(e.target())+")"}(this,t):"role"==e.data("identity")&&"role"==n.data("identity")?"role-inverse"==e.data("type")||"role-inverse"==n.data("type")?function(t,e){var n,r;"role-inverse"==e.source().data("type")?(r=e.target(),n=e.source().incomers('[type = "input"]').sources().first()):(r=e.source(),n=e.target().incomers('[type = "input"]').sources().first());if(!n.length)return'<span class="owl_error">Missing Operand</span>';return"InverseObjectProperties("+t.nodeToOwlString(r)+" "+t.nodeToOwlString(n)+")"}(this,t):i(this,t):"attribute"==e.data("identity")&&"attribute"==n.data("identity")?i(this,t):r;case"membership":return"concept"==n.data("identity")?function(t,e){return"ClassAssertion("+t.nodeToOwlString(e.source())+" "+t.nodeToOwlString(e.target())+")"}(this,t):function(t,e){var n,r="Object";"attribute"==e.target().data("identity")&&(r="Data");if(n=r+"PropertyAssertion("+t.nodeToOwlString(e.target())+" ","property-assertion"==e.source().data("type")){e.source().incomers('[type = "input"]').sources().forEach((function(e){n+=t.nodeToOwlString(e)+" "})),n=n.slice(0,n.length-1)}else n+=t.nodeToOwlString(e.source());return n+")"}(this,t)}function i(t,e){return"Equivalent"+("role"==e.source().data("idenity")?"Object":"Data")+"Properties("+t.nodeToOwlString(e.source())+" "+t.nodeToOwlString(e.target())+")"}function o(t,e){return"SubClassOf("+t.nodeToOwlString(e.source())+" "+t.nodeToOwlString(e.target())+")"}function a(t,e){var n;if("role"==e.target().data("identity"))n="Object";else{if("attribute"!=e.target().data("type"))return null;n="Data"}return"Sub"+n+"PropertyOf("+t.nodeToOwlString(e.source())+" "+t.nodeToOwlString(e.target())+")"}function s(t,e){var n=e.source().incomers('[type = "input"]').sources();return n.size()>1?o(t,e):"role"==n.data("type")?"ObjectPropertyRange("+t.nodeToOwlString(n)+" "+t.nodeToOwlString(e.target())+")":"attribute"==n.data("type")?"DataPropertyRange("+t.nodeToOwlString(n)+" "+t.nodeToOwlString(e.target())+")":void 0}function l(t,e){var n,r;if("role"==e.target().data("identity"))n="Object";else{if("attribute"!=e.target().data("identity"))return null;n="Data"}return r="Disjoint"+n+"Properties(",e.connectedNodes().forEach((function(e){"complement"==e.data("type")&&(e=e.incomers('[type = "input"]').source()),r+=t.nodeToOwlString(e)+" "})),(r=r.slice(0,r.length-1))+")"}}},{key:"nodeToOwlString",value:function(t,e){var n='<span class="axiom_predicate_prefix">owl:</span><span class="axiom_predefinite_obj">Thing</span>',r='<span class="axiom_predicate_prefix">rdfs:</span><span class="axiom_predefinite_obj">Literal</span>',i='<span class="owl_error">Missing Operand</span>',o=e||null;if(o&&(t.hasClass("predicate")||"value-domain"==t.data("type"))){var a,s='<span class="axiom_predicate_prefix">'+t.data("iri").prefix+'</span><span class="owl_'+t.data("type")+'">'+t.data("iri").remaining_chars+"</span>";switch(t.data("type")){case"concept":return"Declaration("+(a="Class")+"("+s+"))";case"role":var l="Declaration("+(a="ObjectProperty")+"("+s+"))";return t.data("functional")&&(l+="<br/>Functional"+a+"("+s+")"),t.data("inverseFunctional")&&(l+="<br/>InverseFunctional"+a+"("+s+")"),t.data("asymmetric")&&(l+="<br />Asymmetric"+a+"("+s+")"),t.data("irreflexive")&&(l+="<br/>Irreflexive"+a+"("+s+")"),t.data("reflexive")&&(l+="<br/>Reflexive"+a+"("+s+")"),t.data("symmetric")&&(l+="<br/>Symmetric"+a+"("+s+")"),t.data("transitive")&&(l+="<br/>Transitive"+a+"("+s+")"),l;case"attribute":l="Declaration("+(a="DataProperty")+"("+s+"))";return t.data("functional")&&(l+="<br/>Functional"+a+"("+s+"))"),l;case"individual":if(-1!=t.data("iri").remaining_chars.search(/"[\w]+"\^\^[\w]+:/)){var u=t.data("iri").remaining_chars.split("^^")[0],c=t.data("iri").remaining_chars.split(":")[1];s='<span class="owl_value">'+u+'</span>^^<span class="axiom_predicate_prefix">'+t.data("iri").prefix+'</span><span class="owl_value-domain">'+c+"</span>"}return"Declaration("+(a="NamedIndividual")+"("+s+"))";case"value-domain":return"Declaration("+(a="Datatype")+"("+s+"))"}}switch(t.data("type")){case"individual":if(-1!=t.data("iri").remaining_chars.search(/"[\w]+"\^\^[\w]+:/)){u=t.data("iri").remaining_chars.split("^^")[0],c=t.data("iri").remaining_chars.split(":")[1];return'<span class="owl_value">'+u+'</span>^^<span class="axiom_predicate_prefix">'+t.data("iri").prefix+'</span><span class="owl_value-domain">'+c+"</span>"}case"concept":case"role":case"value-domain":case"attribute":case"individual":return'<span class="axiom_predicate_prefix">'+t.data("iri").prefix+'</span><span class="owl_'+t.data("type")+'">'+t.data("iri").remaining_chars+"</span>";case"facet":var h=t.data("displayed_name").replace(/\n/g,"^").split("^^");return h[0]=h[0].slice(4),'<span class="axiom_predicate_prefix">xsd:</span><span class="owl_value-domain">'+h[0]+'</span><span class="owl_value">'+h[1]+"</span>";case"domain-restriction":case"range-restriction":var d,f,p=t.connectedEdges('edge[target = "'+t.id()+'"][type = "input"]');if(!p.length)return i;if(p.forEach((function(t){"role"!=t.source().data("type")&&"attribute"!=t.source().data("type")||(d=t.source()),"role"!=t.source().data("type")&&"attribute"!=t.source().data("type")&&(f=t.source())})),!d)return i;if("attribute"==d.data("type")&&"range-restriction"==t.data("type"))return"Undefined";if("exists"==t.data("displayed_name"))return function(t,e,i,o){var a,s;"role"==e.data("type")&&(a="Object");"attribute"==e.data("type")&&(a="Data");s=a+"SomeValuesFrom(",s+="range-restriction"==o?b(t,e):t.nodeToOwlString(e);if(!i&&"Object"==a)return s+=" "+n+")";if(!i&&"Data"==a)return s+=" "+r+")";return s+=" "+t.nodeToOwlString(i)+")"}(this,d,f,t.data("type"));if("forall"==t.data("displayed_name"))return function(t,e,i,o){var a,s;"role"==e.data("type")&&(a="Object");"attribute"==e.data("type")&&(a="Data");s=a+"AllValuesFrom(",s+="range-restriction"==o?b(t,e):t.nodeToOwlString(e);if(!i&&"Object"==a)return s+=" "+n+")";if(!i&&"Data"==a)return s+=" "+r+")";return s+=" "+t.nodeToOwlString(i)+")"}(this,d,f,t.data("type"));if(-1!=t.data("displayed_name").search(/\(([-]|[\d]+),([-]|[\d]+)\)/)){var g=t.data("displayed_name").replace(/\(|\)/g,"").split(/,/);return function t(e,n,r,i,o){var a;"role"==n.data("type")&&(a="Object");"attribute"==n.data("type")&&(a="Data");if("-"==i[0])return"range-restriction"==o?r?a+"MaxCardinality("+i[1]+" "+b(e,n)+" "+e.nodeToOwlString(r)+")":a+"MaxCardinality("+i[1]+" "+b(e,n)+")":r?a+"MaxCardinality("+i[1]+" "+e.nodeToOwlString(n)+" "+e.nodeToOwlString(r)+")":a+"MaxCardinality("+i[1]+" "+e.nodeToOwlString(n)+")";if("-"==i[1])return"range-restriction"==o?r?a+"MinCardinality("+i[0]+" "+b(e,n)+" "+e.nodeToOwlString(r)+")":a+"MinCardinality("+i[0]+" "+b(e,n)+")":r?a+"MinCardinality("+i[0]+" "+e.nodeToOwlString(n)+" "+e.nodeToOwlString(r)+")":a+"MinCardinality("+i[0]+" "+e.nodeToOwlString(n)+")";if("-"!=i[0]&&"-"!=i[1]){var s=[],l=[];return s.push(i[0]),s.push("-"),l.push("-"),l.push(i[1]),a+"IntersectionOf("+t(e,n,r,s,o)+" "+t(e,n,r,l,o)+")"}}(this,d,f,g,t.data("type"))}if("self"==t.data("displayed_name"))return function(t,e,n){if("range-restriction"==n)return"ObjectHasSelf("+b(t,e)+")";return"ObjectHasSelf("+t.nodeToOwlString(e)+")"}(this,d,t.data("type"));case"role-inverse":var v=t.incomers('[type = "input"]').sources();return v.length?b(this,v):i;case"role-chain":return t.data("inputs")?function(t,e){var n="ObjectPropertyChain(";return e.forEach((function(e){n+=t.nodeToOwlString(e)+" "})),n=n.slice(0,n.length-1),n+=")"}(this,t.incomers('[type = "input"]').sources()):i;case"union":case"intersection":case"complement":case"enumeration":case"disjoint-union":var y=t.incomers('[type = "input"]').sources();if(!y.length)return i;var m="Object";return"concept"!=t.data("identity")&&"role"!=t.data("identity")&&(m="Data"),"disjoint-union"==t.data("type")?o?w(this,y,"union",m)+"<br />"+function(t,e){var n="DisjointClasses(";return e.forEach((function(e){n+=t.nodeToOwlString(e)+" "})),n=n.slice(0,n.length-1),n+=")"}(this,y):w(this,y,"union",m):w(this,y,t.data("type"),m);case"datatype-restriction":return(y=t.incomers('[type = "input"]').sources()).length?function(t,e){var n="DatatypeRestriction(",r=e.filter('[type = "value-domain"]').first();return n+=t.nodeToOwlString(r)+" ",e.forEach((function(e){"facet"==e.data("type")&&(n+=t.nodeToOwlString(e)+"^^",n+=t.nodeToOwlString(r)+" ")})),n=n.slice(0,n.length-1),n+=")"}(this,y):i;case"property-assertion":return"Undefined";case"has-key":return!(y=t.incomers('[type = "input"]')).length||y.length<2?i:function(t,e){var n=e.filter('[identity = "concept"]'),r="HasKey("+t.nodeToOwlString(n)+" ";return e.forEach((function(e){e.id()!=n.id()&&(r+=t.nodeToOwlString(e)+" ")})),r=r.slice(0,r.length-1)+")"}(this,y.sources())}function b(t,e){return"ObjectInverseOf("+t.nodeToOwlString(e)+")"}function w(t,e,n,r){var i;return n="enumeration"==n?"One":n.charAt(0).toUpperCase()+n.slice(1),i=r+n+"Of(",e.forEach((function(e){i+=t.nodeToOwlString(e)+" "})),i=i.slice(0,i.length-1),i+=")"}}}]),t}();function JP(t){var e=new pP(null),n=new _S(t.name,t.version),r=new _S(t.name,t.version),i={lite:n,float:r};return new Promise((function(p,g){try{window.setTimeout((function(){t.diagrams.forEach((function(t){var i,p,g,v=new wS(t.name,t.id),y=new wS(t.name,t.id);v.addElems((i=t.nodes,p=t.edges,(g=bS()).add(i),g.add(p),s(g,(function(t){switch(t.data("type")){case"complement":case"value-domain":case"role-chain":case"enumeration":return!0;case"domain-restriction":case"range-restriction":return"forall"==t.data("displayed_name")}})),s(g,l),s(g,c),s(g,u),g.remove(".filtered"),function(t){var n=t.$("*");n.filter('[type ^= "domain"],[type ^= "range"]').forEach((function(n){var r,i=(r=null,n.incomers('[type = "input"]').forEach((function(t){"role"!=t.source().data("type")&&"attribute"!=t.source().data("type")||(r=t)})),r),s=null,l="domain-restriction"==n.data("type")?"domain":"range";n.connectedEdges('[type != "input"]').forEach((function(e,n){(s=function(e,n,r,i){var s=[],l=null;return"domain-restriction"!=e.source().data("type")&&"range-restriction"!=e.source().data("type")||"domain-restriction"!=e.target().data("type")&&"range-restriction"!=e.target().data("type")?(e.target().data("id")!==n.target().data("id")?s.push(o(e)):s.push(e.json()),"attribute"==n.source().data("type")?(n.source().position(n.target().position()),(l=s[0]).data.target=n.source().id(),l.data.id+="_"+i):(s.push(o(n)),l=a(s,t,s[0].data.id+"_"+i)),l.classes+="".concat(n.source().data("type")," ").concat(r),l.data.type="default",l):(t.remove(e),l)}(e,i,l,n))&&(t.add(s),t.remove(e))})),e.filterElem(n,"",t),t.remove(".filtered")})),t.remove(".filtered")}(g),function(t){var n=t;n.nodes('[type = "intersection"],[type = "union"],[type = "disjoint-union"]').forEach((function(t){(function(t){if("union"!=t.data("type")&&"disjoint-union"!=t.data("type")&&"intersection"!=t.data("type"))return!1;var e=!1;return t.incomers('[type *= "input"]').forEach((function(t){"concept"!=t.source().data("type")&&(e=!0)})),e})(t)&&(f(t),e.filterElem(t,"",n))})),n.remove(".filtered")}(g),function(t){t.$("*").filter('[type $= "union"]').forEach((function(e){h(e),e.incomers('edge[type = "input"]').data("type","easy_input"),t.remove(e.incomers('edge[type = "inclusion"]')),e.connectedEdges('edge[type = "equivalence"]').forEach((function(n){if(n.data("type","inclusion"),n.data("target_label","C"),n.source().id()!=e.id()){var r=o(n);t.remove(n),t.add(r)}})),e.outgoers('edge[type = "inclusion"]').forEach((function(t){t.addClass("hierarchy"),"disjoint-union"==e.data("type")&&t.addClass("disjoint")})),e.data("label")&&e.data("label",""),f(e),d(e),0==e.connectedEdges('[type !*= "input"]').size()&&t.remove(e)}))}(g),function(t){var n=t;n.$('node[type = "intersection"]').forEach((function(t){f(t),d(t),0==t.incomers('edge[type !*= "input"]').size()&&0==t.connectedEdges('edge[type = "equivalence"]').size()?e.filterElem(t,"",n):(t.incomers('edge[type !*= "input"]').forEach((function(e){t.incomers('edge[type = "input"]').forEach((function(r,i){var s=[];e.source().id()==t.id()?s.push(o(e)):s.push(e.json());var l="".concat(e.id(),"_").concat(i);s.push(o(r));var u=a(s,n,l);n.remove(e),n.add(u)}))})),n.remove(t))}))}(g),function(t){var e=t;e.nodes('[type = "role-inverse"]').forEach((function(t){var n=0,r=t.incomers('[type *= "input"]');t.connectedEdges('[type !*= "input"]').forEach((function(i,s){var l=[];i.source().id()==t.id()?l.push(o(i)):l.push(i.json()),l.push(o(r));var u=r.id()+"_"+s,c=a(l,e,u);c.data.type="inclusion",c.classes="inverse-of",e.add(c),e.remove(i),n+=1})),n>1?(e.remove(r),h(t),t.data("label","inverse Of"),t.data("labelXpos",0),t.data("labelYpos",0),t.data("text_background",!0)):(r.source()&&r.source().connectedEdges("edge.inverse-of").data("displayed_name","inverse Of"),e.remove(t))}))}(g),g.$("*"))),n.addDiagram(v),y.addElems(function(t,e){var n=bS();return n.add(t),n.add(e),function(t){t.$('[type = "role"]').forEach((function(e){var n=e.incomers("edge.role"),r=n.filter(".domain"),i=n.filter(".range").sources();r.forEach((function(e){i.forEach((function(n,r){var i={data:{id:e.id()+"-"+r,id_xml:e.target().data("id_xml"),diagram_id:e.target().data("diagram_id"),source:e.source().id(),target:n.id(),type:e.target().data("type"),iri:e.target().data("iri"),displayed_name:e.target().data("displayed_name"),label:e.target().data("label"),description:e.target().data("description"),functional:e.target().data("functional"),inverseFunctional:e.target().data("inverseFunctional"),asymmetric:e.target().data("asymmetric"),irreflexive:e.target().data("irreflexive"),reflexive:e.target().data("reflexive"),symmetric:e.target().data("symmetric"),transitive:e.target().data("transitive")},classes:"role predicate"};(t.add(i),t.getElementById(i.data.id).isLoop())&&t.getElementById(i.data.id).data("control_point_step_size",n.data("width"))}))})),t.remove(e)}))}(n),function(t){t.$(".dummy").forEach((function(t){t.neighborhood("node").forEach((function(e){e.position(t.position())})),t.data("width",35),t.addClass("bubble")}))}(n),function(t){t.$('[type = "attribute"]').forEach((function(t){t.neighborhood("node").forEach((function(e){t.position(e.position())}))}))}(n),n.edges().removeData("segment_distances"),n.edges().removeData("segment_weights"),n.edges().removeData("target_endpoint"),n.edges().removeData("source_endpoint"),n.$('[type = "concept"]').addClass("bubble"),n.$("*")}(v.nodes,v.edges)),r.addDiagram(y)})),p(i)}),1)}catch(t){g(t)}}));function o(t){var e=t.json(),n=t.source().id();e.data.source=t.target().id(),e.data.target=n;var r=t.data("source_endpoint");return e.data.source_endpoint=t.data("target_endpoint"),e.data.target_endpoint=r,e.data.breakpoints=t.data("breakpoints").reverse(),t.data("segment_distances")&&(e.data.segment_distances=[],e.data.segment_weights=[],e.data.breakpoints.forEach((function(n){var r=SS(t.source().position(),t.target().position(),n);e.data.segment_distances.push(r[0]),e.data.segment_weights.push(r[1])}))),e}function a(t,e,n){var r=t[0].data.source,i=t[t.length-1].data.target,o=[],a=[],s=[],l=void 0;t.forEach((function(t,n,u){t.data.breakpoints&&(s=s.concat(t.data.breakpoints),t.data.breakpoints.forEach((function(t){l=SS(e.getElementById(i).position(),e.getElementById(r).position(),t),o.push(l[0]),a.push(l[1])}))),n<u.length-1&&(l=SS(e.getElementById(i).position(),e.getElementById(r).position(),e.getElementById(t.data.target).position()),o.push(l[0]),a.push(l[1]),s.push(e.getElementById(t.data.target).position()))}));var u=t[0];return u.data.id=n,u.data.source=r,u.data.target=i,u.data.target_endpoint=t[t.length-1].data.target_endpoint,u.data.type="inclusion",u.data.segment_distances=o,u.data.segment_weights=a,u.data.breakpoints=s,u}function s(t,n){var r=t;r.$("*").forEach((function(t){n(t)&&e.filterElem(t,"",r)}))}function l(t){return("domain-restriction"==t.data("type")||"range-restriction"==t.data("type"))&&"exists"==t.data("displayed_name")&&t.incomers('edge[type = "input"]').size()>1}function u(t){var e=!1;return"domain-restriction"!=t.data("type")&&"range-restriction"!=t.data("type")||t.incomers('edge[type = "input"]').forEach((function(t){t.source().data("type").endsWith("restriction")&&(e=!0)})),e}function c(t){return("domain-restriction"==t.data("type")||"range-restriction"==t.data("type"))&&t.data("displayed_name").search(/[0-9]/g)>=0}function h(t){t.data("width",.1),t.data("height",.1),t.addClass("dummy")}function d(t){var e=t.cy();t.connectedEdges("edge.role").forEach((function(n){t.incomers('[type *= "input"]').forEach((function(r,i){var o="".concat(n.id(),"_").concat(i),s={},l=[];if(t.connectedEdges('[type !*= "input"]').size()<=1)l.push(r.json()),l.push(n.json()),(s=a(l,e,o)).data.type="default",s.classes=n.json().classes;else{(s=n.json()).data.id=o;var u=void 0,c=void 0;u=n.target(),c=r.source(),s.data.source=r.source().id();var h=[],d=[];s.data.breakpoints.forEach((function(t){var e=SS(u.position(),c.position(),t);h.push(e[0]),d.push(e[1])})),s.data.segment_distances=h,s.data.segment_weights=d}e.add(s)})),e.remove(n)}))}function f(t){var n=t.cy(),r=function t(e){var n=e.cy().collection(),r=e.incomers('edge[type *= "input"]');return n=n.union(r.sources('[type = "concept"]')),r.sources('[type != "concept"]').forEach((function(e){n=n.union(t(e)),e.addClass("attr_replicated")})),n}(t),i=t.neighborhood('[type = "attribute"]'),o=n.collection();r.forEach((function(t,e){i.forEach((function(r,a){!function t(e,r,a,s){var l=a.json();l.position=e.position(),l.data.id+="_"+r+"_"+e.id(),l.classes+=" repositioned",n.add(l);var u={data:{id:l.data.id+"_edge",target:l.data.id,source:e.id()},classes:s};n.add(u),e.hasClass("repositioned")||a.neighborhood('[type = "attribute"]').forEach((function(e,r){i.contains(e)||(t(n.$id(l.data.id),r,e,"inclusion"),o=o.union(e))}))}(t,e,r,"attribute")}))})),n.remove(i),e.filterElem(o,"",n)}}const QP={entity_name:{type:"list",title:"Entities Name",label:"Select the type of name to display on entities",selected:"label",list:[{value:"label",label:"Label"},{value:"prefixed",label:"Prefixed IRI"},{value:"full",label:"Full IRI"}]},language:{type:"list",title:"Language",label:"Select the preferred language",selected:"",list:[]}},tM={theme:{type:"list",title:"Themes",label:"Select a theme",selected:"gscape",list:[{value:"gscape",label:"Light"},{value:"dark",label:"Dark"},{value:"classic",label:"Graphol"}]}},eM={explorer:{title:"Ontology Explorer",type:"boolean",enabled:!0,label:"Enable Ontology Explorer widget"},details:{type:"boolean",title:"Entity Details",enabled:!0,label:"Enable Entity Details widget"},owl_translator:{type:"boolean",title:"OWL Translator",enabled:!0,label:"Enable Owl Translation widget"},filters:{type:"boolean",title:"Filters",enabled:!0,label:"Enable Filters widget",filter_list:{all:{selector:"#undefined",label:"Filter All",active:!1,disabled:!1,class:"undefined"},attributes:{selector:'[type = "attribute"]',label:"Attributes",active:!1,disabled:!1,class:"filterattributes"},value_domain:{selector:'[type = "value-domain"]',label:"Value Domain",active:!1,disabled:!1,class:"filtervaluedomains"},individuals:{selector:'[type = "individual"]',label:"Individuals",active:!1,disabled:!1,class:"filterindividuals"},universal_quantifier:{selector:'[type $= "-restriction"][displayed_name = "forall"]',label:"Universal Quantifier",active:!1,disabled:!1,class:"filterforall"},not:{selector:'[type = "complement"]',label:"Not",active:!1,disabled:!1,class:"filtercomplements"}}},simplifications:{type:"boolean",title:"Simplifications",enabled:!0,label:"Allow ontology simplification widget"},occurrences_list:{type:"boolean",title:"Entity Occurrences",enabled:!0,label:"Enable entity occurrences list widget"}};var nM={preferences:QP,rendering:tM,widgets:eM},rM=Object.freeze({__proto__:null,preferences:QP,rendering:tM,widgets:eM,default:nM}),iM=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Yn(this,t),this.view=r,this._ontology=e,this.config=JSON.parse(JSON.stringify(rM)),i&&this.setConfig(i),this.config.preferences.language.list=e.languages.map((function(t){return{label:t,value:t}})),this.default_language=e.default_language;var o=this.config.preferences.language.selected;""==o?this.config.preferences.language.selected=this.default_language:e.languages.includes(o)||this.config.preferences.language.list.push({label:o+" - unsupported",value:o}),this.ontologies={default:e,lite:null,float:null},this.owl_translator=new ZP,this.actualMode="default",this.SimplifiedOntologyPromise=JP(e).then((function(t){n.ontologies.lite=t.lite,n.ontologies.float=t.float})).catch((function(t){console.log(t)})),this.config.preferences.entity_name.selected!=QP.entity_name.selected&&this.onEntityNameTypeChange(this.config.preferences.entity_name.selected),this.config.preferences.language.selected!=QP.language.selected&&this.onLanguageChange(this.config.preferences.language.selected)}return Xn(t,[{key:"init",value:function(){var t=this,e=this.ontology.diagrams,n=this.ontology.getEntities(),r=e.map((function(e){return t.diagramModelToViewData(e)})),i=n.map((function(e){return t.entityModelToViewData(e)})),o={name:this.ontology.name,version:this.ontology.version,namespaces:this.ontology.namespaces,annotations:this.ontology.annotations,description:this.ontology.description};this.view.onDiagramChange=this.onDiagramChange.bind(this),this.view.onNodeNavigation=this.onNodeNavigation.bind(this),this.view.onEntitySelection=this.onEntitySelection.bind(this),this.view.onNodeSelection=this.onNodeSelection.bind(this),this.view.onBackgroundClick=this.onBackgroundClick.bind(this),this.view.onEdgeSelection=this.onEdgeSelection.bind(this),this.view.onRenderingModeChange=this.onRenderingModeChange.bind(this),this.view.onEntityNameTypeChange=this.onEntityNameTypeChange.bind(this),this.view.onLanguageChange=this.onLanguageChange.bind(this),this.view.createUi(o,r,i,this.config)}},{key:"onBackgroundClick",value:function(){this.view.blurAll()}},{key:"filter",value:function(t){this.view.filter(t)}},{key:"onNodeNavigation",value:function(t){var e=this.ontology.getElem(t);this.centerOnNode(e,1.5),this.showDetails(e)}},{key:"onDiagramChange",value:function(t){var e=this.ontology.getDiagram(t);this.showDiagram(e)}},{key:"showDiagram",value:function(t){"string"!=typeof t&&"number"!=typeof t||(t=this.ontology.getDiagram(t)),t||this.view.showDialog("error","Diagram not existing");var e=this.diagramModelToViewData(t);this.view.drawDiagram(e)}},{key:"onEntitySelection",value:function(t,e){var n=this.ontology.getElem(t);this.showDetails(n,e)}},{key:"showDetails",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.config.widgets.details.enabled||this.config.widgets.occurrences_list.enabled){var r=this.entityModelToViewData(t);r.occurrences=this.ontology.getOccurrences(r.iri.full_iri).map((function(t){return{id:t.data.id,id_xml:t.data.id_xml,diagram_id:t.data.diagram_id,diagram_name:e.ontology.getDiagram(t.data.diagram_id).name}})),this.config.widgets.details.enabled&&this.view.showDetails(r,n),this.config.widgets.occurrences_list.enabled&&this.view.showOccurrences(r.occurrences,n)}}},{key:"onEdgeSelection",value:function(t,e){var n=this.ontology.getElemByDiagramAndId(t,e,!1);if(n&&this.showOwlTranslation(n),this.view.hideWidget("details"),this.view.hideWidget("occurrences_list"),"float"==this.actualMode){var r=this.ontology.getElemByDiagramAndId(t,e);r.classes.includes("predicate")&&this.showDetails(r,!1)}}},{key:"onNodeSelection",value:function(t,e){var n=this.ontology.getElemByDiagramAndId(t,e);if(n){n.classes.includes("predicate")?this.showDetails(n,!1):(this.view.hideWidget("details"),this.view.hideWidget("occurrences_list"));var r=this.ontology.getElemByDiagramAndId(t,e,!1);this.showOwlTranslation(r)}else console.error("Unable to find the node with {id= "+t+"} in the ontology")}},{key:"centerOnNode",value:function(t,e){if(this.view.actual_diagram_id!=t.data.diagram_id){var n=this.ontology.getDiagram(t.data.diagram_id);this.showDiagram(n)}var r={id:t.data.id,position:t.position};this.view.centerOnNode(r,e)}},{key:"showOwlTranslation",value:function(t){if(this.config.widgets.owl_translator.enabled){var e=null;t.isNode()?e=this.owl_translator.nodeToOwlString(t,!0):t.isEdge()&&(e=this.owl_translator.edgeToOwlString(t)),this.view.showOwlTranslation(e)}}},{key:"onRenderingModeChange",value:function(t,e){var n=this;switch(this.actualMode=t,t){case"lite":case"float":this.SimplifiedOntologyPromise.then((function(){n.actualMode===t&&(n.ontology=n.ontologies[t],n.updateGraphView(e),n.updateEntitiesList())}));break;case"default":this.ontology=this.ontologies.default,this.updateGraphView(e),this.updateEntitiesList()}}},{key:"changeRenderingMode",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.view.changeRenderingMode(t,e),this.view.widgets.get("simplifications").actual_mode=t}},{key:"updateGraphView",value:function(t){this.onDiagramChange(this.view.actual_diagram_id),t&&this.view.setViewPort(t)}},{key:"updateEntitiesList",value:function(){var t=this,e=this.ontology.getEntities().map((function(e){return t.entityModelToViewData(e)}));this.view.updateEntitiesList(e)}},{key:"onEntityNameTypeChange",value:function(t){var e=this;this.SimplifiedOntologyPromise.then((function(){Object.keys(e.ontologies).forEach((function(n){var r=e.ontologies[n].getEntities(!1);switch(t){case"label":r.forEach((function(t){if(t.data("label")[e.language])t.data("displayed_name",t.data("label")[e.language]);else if(t.data("label")[e.default_language])t.data("displayed_name",t.data("label")[e.default_language]);else{var n=Object.keys(t.data("label"))[0];t.data("displayed_name",t.data("label")[n])}}));break;case"full":r.forEach((function(t){t.data("displayed_name",t.data("iri").full_iri)}));break;case"prefixed":r.forEach((function(t){var e=t.data("iri").prefix+t.data("iri").remaining_chars;t.data("displayed_name",e)}))}})),e.updateGraphView(e.view.renderer.getActualPosition()),e.updateEntitiesList()}))}},{key:"onLanguageChange",value:function(t){this.config.preferences.language.selected=t,this.onEntityNameTypeChange(this.config.preferences.entity_name.selected)}},{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){if("theme"==n&&"object"==Hn(t[n]))return e.view.setCustomTheme(t[n]),e.config.rendering.theme.list.push({value:"custom",label:"Custom"}),void(e.config.rendering.theme.selected="custom");for(var r in e.config)try{var i=e.config[r][n];i&&("boolean"==i.type&&"boolean"==typeof t[n]?e.config[r][n].enabled=t[n]:e.config[r][n].list.map((function(t){return t.value})).includes(t[n])&&(e.config[r][n].selected=t[n]))}catch(t){}}))}},{key:"entityModelToViewData",value:function(t){for(var e=["label"],n=0,r=e;n<r.length;n++){var i=r[n];if(t.data[i])if(t.data[i][this.language])e[i]=t.data[i][this.language];else if(t.data[i][this.default_language])e[i]=t.data[i][this.default_language];else{var o,a=ur(this.languagesList);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t.data[i][s]){e[i]=t.data[i][s];break}}}catch(t){a.e(t)}finally{a.f()}}}var l={id:t.data.id,id_xml:t.data.id_xml,diagram_id:t.data.diagram_id,label:e.label,displayed_name:t.data.displayed_name,type:t.data.type,iri:t.data.iri,description:t.data.description,annotations:t.data.annotations,functional:t.data.functional,inverseFunctional:t.data.inverseFunctional,asymmetric:t.data.asymmetric,irreflexive:t.data.irreflexive,reflexive:t.data.reflexive,symmetric:t.data.symmetric,transitive:t.data.transitive};return JSON.parse(JSON.stringify(l))}},{key:"diagramModelToViewData",value:function(t){var e={name:t.name,id:t.id,nodes:t.nodes,edges:t.edges};return JSON.parse(JSON.stringify(e))}},{key:"ontology",set:function(t){this._ontology=t},get:function(){return this._ontology}},{key:"onWikiClick",set:function(t){this._onWikiClick=t,this.view.onWikiClick=t},get:function(){return this._onWikiClick}},{key:"language",get:function(){return this.config.preferences.language.selected}},{key:"languagesList",get:function(){return this.config.preferences.language.list.map((function(t){return t.value}))}},{key:"actual_diagram",get:function(){return this.ontology.getDiagram(this.view.actual_diagram_id)}}]),t}(),oM="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,aM=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(oM&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();var sM=oM&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),aM))}};function lM(t){return t&&"[object Function]"==={}.toString.call(t)}function uM(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function cM(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function hM(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=uM(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:hM(cM(t))}function dM(t){return t&&t.referenceNode?t.referenceNode:t}var fM=oM&&!(!window.MSInputMethodContext||!document.documentMode),pM=oM&&/MSIE 10/.test(navigator.userAgent);function gM(t){return 11===t?fM:10===t?pM:fM||pM}function vM(t){if(!t)return document.documentElement;for(var e=gM(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===uM(n,"position")?vM(n):n:t?t.ownerDocument.documentElement:document.documentElement}function yM(t){return null!==t.parentNode?yM(t.parentNode):t}function mM(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a=o.commonAncestorContainer;if(t!==a&&e!==a||r.contains(i))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||vM(t.firstElementChild)===t)}(a)?a:vM(a);var s=yM(t);return s.host?mM(s.host,e):mM(t,yM(e).host)}function bM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var i=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||i;return o[n]}return t[n]}function wM(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=bM(e,"top"),i=bM(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function xM(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function _M(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],gM(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function EM(t){var e=t.body,n=t.documentElement,r=gM(10)&&getComputedStyle(n);return{height:_M("Height",e,n,r),width:_M("Width",e,n,r)}}var kM=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},SM=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),CM=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},TM=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function NM(t){return TM({},t,{right:t.left+t.width,bottom:t.top+t.height})}function OM(t){var e={};try{if(gM(10)){e=t.getBoundingClientRect();var n=bM(t,"top"),r=bM(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?EM(t.ownerDocument):{},a=o.width||t.clientWidth||i.width,s=o.height||t.clientHeight||i.height,l=t.offsetWidth-a,u=t.offsetHeight-s;if(l||u){var c=uM(t);l-=xM(c,"x"),u-=xM(c,"y"),i.width-=l,i.height-=u}return NM(i)}function PM(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=gM(10),i="HTML"===e.nodeName,o=OM(t),a=OM(e),s=hM(t),l=uM(e),u=parseFloat(l.borderTopWidth),c=parseFloat(l.borderLeftWidth);n&&i&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var h=NM({top:o.top-a.top-u,left:o.left-a.left-c,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var d=parseFloat(l.marginTop),f=parseFloat(l.marginLeft);h.top-=u-d,h.bottom-=u-d,h.left-=c-f,h.right-=c-f,h.marginTop=d,h.marginLeft=f}return(r&&!n?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(h=wM(h,e)),h}function MM(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=PM(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=e?0:bM(n),s=e?0:bM(n,"left"),l={top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o};return NM(l)}function DM(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===uM(t,"position"))return!0;var n=cM(t);return!!n&&DM(n)}function AM(t){if(!t||!t.parentElement||gM())return document.documentElement;for(var e=t.parentElement;e&&"none"===uM(e,"transform");)e=e.parentElement;return e||document.documentElement}function LM(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=i?AM(t):mM(t,dM(e));if("viewport"===r)o=MM(a,i);else{var s=void 0;"scrollParent"===r?"BODY"===(s=hM(cM(e))).nodeName&&(s=t.ownerDocument.documentElement):s="window"===r?t.ownerDocument.documentElement:r;var l=PM(s,a,i);if("HTML"!==s.nodeName||DM(a))o=l;else{var u=EM(t.ownerDocument),c=u.height,h=u.width;o.top+=l.top-l.marginTop,o.bottom=c+l.top,o.left+=l.left-l.marginLeft,o.right=h+l.left}}var d="number"==typeof(n=n||0);return o.left+=d?n:n.left||0,o.top+=d?n:n.top||0,o.right-=d?n:n.right||0,o.bottom-=d?n:n.bottom||0,o}function IM(t){return t.width*t.height}function RM(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=LM(n,r,o,i),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(s).map((function(t){return TM({key:t},s[t],{area:IM(s[t])})})).sort((function(t,e){return e.area-t.area})),u=l.filter((function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight})),c=u.length>0?u[0].key:l[0].key,h=t.split("-")[1];return c+(h?"-"+h:"")}function BM(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?AM(e):mM(e,dM(n));return PM(n,i,r)}function jM(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function FM(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function zM(t,e,n){n=n.split("-")[0];var r=jM(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return i[a]=e[a]+e[l]/2-r[l]/2,i[s]=n===s?e[s]-r[u]:e[FM(s)],i}function VM(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function qM(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=VM(t,(function(t){return t[e]===n}));return t.indexOf(r)}(t,"name",n))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&lM(n)&&(e.offsets.popper=NM(e.offsets.popper),e.offsets.reference=NM(e.offsets.reference),e=n(e,t))})),e}function UM(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=BM(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=RM(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=zM(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=qM(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function HM(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function WM(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function YM(){return this.state.isDestroyed=!0,HM(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[WM("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function GM(t){var e=t.ownerDocument;return e?e.defaultView:window}function XM(t,e,n,r){n.updateBound=r,GM(t).addEventListener("resize",n.updateBound,{passive:!0});var i=hM(t);return function t(e,n,r,i){var o="BODY"===e.nodeName,a=o?e.ownerDocument.defaultView:e;a.addEventListener(n,r,{passive:!0}),o||t(hM(a.parentNode),n,r,i),i.push(a)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function KM(){this.state.eventsEnabled||(this.state=XM(this.reference,this.options,this.state,this.scheduleUpdate))}function $M(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,GM(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function ZM(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function JM(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&ZM(e[n])&&(r="px"),t.style[n]=e[n]+r}))}var QM=oM&&/Firefox/i.test(navigator.userAgent);function tD(t,e,n){var r=VM(t,(function(t){return t.name===e})),i=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!i){var o="`"+e+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var eD=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],nD=eD.slice(3);function rD(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=nD.indexOf(t),r=nD.slice(n+1).concat(nD.slice(0,n));return e?r.reverse():r}var iD="flip",oD="clockwise",aD="counterclockwise";function sD(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=t.split(/(\+|\-)/).map((function(t){return t.trim()})),s=a.indexOf(VM(a,(function(t){return-1!==t.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==s?[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1]].concat(a.slice(s+1))]:[a];return(u=u.map((function(t,r){var i=(1===r?!o:o)?"height":"width",a=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return t;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return NM(s)[e]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(t,i,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,r){ZM(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))}))})),i}var lD={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",c={start:CM({},l,o[l]),end:CM({},l,o[l]+o[u]-a[u])};t.offsets.popper=TM({},a,c[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,r=t.placement,i=t.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],l=void 0;return l=ZM(+n)?[+n,0]:sD(n,o,a,s),"left"===s?(o.top+=l[0],o.left-=l[1]):"right"===s?(o.top+=l[0],o.left+=l[1]):"top"===s?(o.left+=l[0],o.top-=l[1]):"bottom"===s&&(o.left+=l[0],o.top+=l[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||vM(t.instance.popper);t.instance.reference===n&&(n=vM(n));var r=WM("transform"),i=t.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var l=LM(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=o,i.left=a,i[r]=s,e.boundaries=l;var u=e.priority,c=t.offsets.popper,h={primary:function(t){var n=c[t];return c[t]<l[t]&&!e.escapeWithReference&&(n=Math.max(c[t],l[t])),CM({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=c[n];return c[t]>l[t]&&!e.escapeWithReference&&(r=Math.min(c[n],l[t]-("right"===t?c.width:c.height))),CM({},n,r)}};return u.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=TM({},c,h[e](t))})),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",l=a?"left":"top",u=a?"width":"height";return n[s]<o(r[l])&&(t.offsets.popper[l]=o(r[l])-n[u]),n[l]>o(r[s])&&(t.offsets.popper[l]=o(r[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!tD(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,a=o.popper,s=o.reference,l=-1!==["left","right"].indexOf(i),u=l?"height":"width",c=l?"Top":"Left",h=c.toLowerCase(),d=l?"left":"top",f=l?"bottom":"right",p=jM(r)[u];s[f]-p<a[h]&&(t.offsets.popper[h]-=a[h]-(s[f]-p)),s[h]+p>a[f]&&(t.offsets.popper[h]+=s[h]+p-a[f]),t.offsets.popper=NM(t.offsets.popper);var g=s[h]+s[u]/2-p/2,v=uM(t.instance.popper),y=parseFloat(v["margin"+c]),m=parseFloat(v["border"+c+"Width"]),b=g-t.offsets.popper[h]-y-m;return b=Math.max(Math.min(a[u]-p,b),0),t.arrowElement=r,t.offsets.arrow=(CM(n={},h,Math.round(b)),CM(n,d,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(HM(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=LM(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=FM(r),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case iD:a=[r,i];break;case oD:a=rD(r);break;case aD:a=rD(r,!0);break;default:a=e.behavior}return a.forEach((function(s,l){if(r!==s||a.length===l+1)return t;r=t.placement.split("-")[0],i=FM(r);var u=t.offsets.popper,c=t.offsets.reference,h=Math.floor,d="left"===r&&h(u.right)>h(c.left)||"right"===r&&h(u.left)<h(c.right)||"top"===r&&h(u.bottom)>h(c.top)||"bottom"===r&&h(u.top)<h(c.bottom),f=h(u.left)<h(n.left),p=h(u.right)>h(n.right),g=h(u.top)<h(n.top),v=h(u.bottom)>h(n.bottom),y="left"===r&&f||"right"===r&&p||"top"===r&&g||"bottom"===r&&v,m=-1!==["top","bottom"].indexOf(r),b=!!e.flipVariations&&(m&&"start"===o&&f||m&&"end"===o&&p||!m&&"start"===o&&g||!m&&"end"===o&&v),w=!!e.flipVariationsByContent&&(m&&"start"===o&&p||m&&"end"===o&&f||!m&&"start"===o&&v||!m&&"end"===o&&g),x=b||w;(d||y||x)&&(t.flipped=!0,(d||y)&&(r=a[l+1]),x&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=TM({},t.offsets.popper,zM(t.instance.popper,t.offsets.reference,t.placement)),t=qM(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),t.placement=FM(e),t.offsets.popper=NM(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!tD(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=VM(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=VM(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:e.gpuAcceleration,s=vM(t.instance.popper),l=OM(s),u={position:i.position},c=function(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=Math.round,a=Math.floor,s=function(t){return t},l=o(i.width),u=o(r.width),c=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),d=e?c||h||l%2==u%2?o:a:s,f=e?o:s;return{left:d(l%2==1&&u%2==1&&!h&&e?r.left-1:r.left),top:f(r.top),bottom:f(r.bottom),right:d(r.right)}}(t,window.devicePixelRatio<2||!QM),h="bottom"===n?"top":"bottom",d="right"===r?"left":"right",f=WM("transform"),p=void 0,g=void 0;if(g="bottom"===h?"HTML"===s.nodeName?-s.clientHeight+c.bottom:-l.height+c.bottom:c.top,p="right"===d?"HTML"===s.nodeName?-s.clientWidth+c.right:-l.width+c.right:c.left,a&&f)u[f]="translate3d("+p+"px, "+g+"px, 0)",u[h]=0,u[d]=0,u.willChange="transform";else{var v="bottom"===h?-1:1,y="right"===d?-1:1;u[h]=g*v,u[d]=p*y,u.willChange=h+", "+d}var m={"x-placement":t.placement};return t.attributes=TM({},m,t.attributes),t.styles=TM({},u,t.styles),t.arrowStyles=TM({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return JM(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach((function(n){!1!==e[n]?t.setAttribute(n,e[n]):t.removeAttribute(n)}))}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&JM(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=BM(i,e,t,n.positionFixed),a=RM(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),JM(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},uD=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kM(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=sM(this.update.bind(this)),this.options=TM({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(TM({},t.Defaults.modifiers,i.modifiers)).forEach((function(e){r.options.modifiers[e]=TM({},t.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return TM({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&lM(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return SM(t,[{key:"update",value:function(){return UM.call(this)}},{key:"destroy",value:function(){return YM.call(this)}},{key:"enableEventListeners",value:function(){return KM.call(this)}},{key:"disableEventListeners",value:function(){return $M.call(this)}}]),t}();uD.Utils=("undefined"!=typeof window?window:global).PopperUtils,uD.placements=eD,uD.Defaults=lD;var cD,hD=(cD=Object.freeze({__proto__:null,default:uD}))&&cD.default||cD,dD=r((function(t,e){var n;n=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach((function(e){null!=e&&Object.keys(e).forEach((function(n){return t[n]=e[n]}))})),t}},function(t,e,n){var r=n(5).getBoundingBox;t.exports={getRef:function(t,e){var n=e.renderedDimensions;return{getBoundingClientRect:function(){return r(t,e)},get clientWidth(){return n(t).w},get clientHeight(){return n(t).h}}}}},function(t,e,n){var r=n(0),i=n(1).getRef,o=n(6).getContent,a={},s=n(8),l=s.default;null!=l&&null!=l.Defaults&&(s=s.default),t.exports={getPopper:function(t,e){var n=i(t,e),l=o(t,e.content),u=r({},a,e.popper);return new s(n,l,u)}}},function(t,e,n){var r=n(0),i=n(2).getPopper,o=n(1).getRef;function a(t,e){var n=function(t){return t.isNode()?{w:t.renderedWidth(),h:t.renderedHeight()}:{w:3,h:3}},i=t.cy();return r({},{renderedDimensions:n,renderedPosition:function(t){return t.isNode()?function(t,e){var n=t.renderedPosition(),r=e(t),i=r.w/2,o=r.h/2;return{x:n.x-i,y:n.y-o}}(t,n):function(t){var e=t.midpoint(),n=t.cy().pan(),r=t.cy().zoom();return{x:e.x*r+n.x,y:e.y*r+n.y}}(t)},popper:{},cy:i},e)}function s(t){t.length>1&&(console.warn("Popper.js Extension should only be used on one element."),console.warn("Ignoring all subsequent elements"))}t.exports={popper:function(t){return s(this),i(this[0],a(this[0],t))},popperRef:function(t){return s(this),o(this[0],a(this[0],t))}}},function(t,e,n){var r=n(0),i=n(2).getPopper,o=n(1).getRef;function a(t,e){return r({},{boundingBox:{top:0,left:0,right:0,bottom:0,w:3,h:3},renderedDimensions:function(){return{w:3,h:3}},redneredPosition:function(){return{x:0,y:0}},popper:{},cy:t},e)}t.exports={popper:function(t){return i(this,a(this,t))},popperRef:function(t){return o(this,a(this,t))}}},function(t,e,n){t.exports={getBoundingBox:function(t,e){var n=e.renderedPosition,r=e.cy,i=e.renderedDimensions,o=r.container().getBoundingClientRect(),a=i(t),s=n(t);return{top:s.y+o.top,left:s.x+o.left,right:s.x+a.w+o.left,bottom:s.y+a.h+o.top,width:a.w,height:a.h}}}},function(t,e,n){t.exports={getContent:function(t,e){var n=null;if("function"!=typeof e){if(e instanceof HTMLElement)return e;throw new Error("Can not create popper from 'target' with unknown type")}if(null===(n=e(t)))throw new Error("No 'target' specified to create popper");return n}}},function(t,e,n){var r=n(4),i=n(3),o=function(t){t&&(t("core","popper",r.popper),t("collection","popper",i.popper),t("core","popperRef",r.popperRef),t("collection","popperRef",i.popperRef))};"undefined"!=typeof cytoscape&&o(cytoscape),t.exports=o},function(e,n){e.exports=t}])},t.exports=n(hD)})),fD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.source=t,this.target=e,this.type=n};e.PowerEdge=n;var r=function(){function t(t,e,n,r){var a=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new o);for(var s=0;s<t;++s)this.roots[0].add(this.modules[s]=new i(s))}this.R=e.length,e.forEach((function(t){var e=a.modules[n.getSourceIndex(t)],r=a.modules[n.getTargetIndex(t)],i=n.getType(t);e.outgoing.add(i,r),r.incoming.add(i,e)}))}return t.prototype.initModulesFromGroup=function(t){var e=new o;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],s=new i(r.id);this.modules[r.id]=s,e.add(s)}if(t.groups)for(var l=0;l<t.groups.length;++l){var u=t.groups[l],c={};for(var h in u)"leaves"!==h&&"groups"!==h&&u.hasOwnProperty(h)&&(c[h]=u[h]);e.add(new i(-1-l,new a,new a,this.initModulesFromGroup(u),c))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),a=t.outgoing.intersection(e.outgoing),s=new o;s.add(t),s.add(e);var l=new i(this.modules.length,a,r,s);this.modules.push(l);var u=function(n,r,i){n.forAll((function(n,o){n.forAll((function(n){var a=n[r];a.add(o,l),a.remove(o,t),a.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)}))}))};return u(a,"incoming","outgoing"),u(r,"outgoing","incoming"),this.R-=r.count()+a.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(l),l},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var l=e[o],u=e[s];r[i]={id:i,nEdges:this.nEdges(l,u),a:l,b:u},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort((function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}))[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,r=[];return function t(e,n,r){e.forAll((function(e){if(e.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(e.id);else{var i=n;if(e.gid=r.length,!e.isIsland()||e.isPredefined()){if(i={id:e.gid},e.isPredefined())for(var o in e.definition)i[o]=e.definition[o];n.groups||(n.groups=[]),n.groups.push(e.gid),r.push(i)}t(e.children,i,r)}}))}(this.roots[0],{},r),this.allEdges().forEach((function(i){var o=e.modules[i.source],a=e.modules[i.target];t.push(new n(void 0===o.gid?i.source:r[o.gid],void 0===a.gid?i.target:r[a.gid],i.type))})),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll((function(e){e.getEdges(n),t.getEdges(e.children,n)}))},t}();e.Configuration=r;var i=function(){function t(t,e,n,r,i){void 0===e&&(e=new a),void 0===n&&(n=new a),void 0===r&&(r=new o),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll((function(r,i){r.forAll((function(r){t.push(new n(e.id,r.id,i))}))}))},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();e.Module=i;var o=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=function(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll((function(e){e.isPredefined()||t.push(e)})),t},t}();e.ModuleSet=o;var a=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules((function(n){e||n.id!=t||(e=!0)})),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new o).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll((function(e,n){return e.forAll(t)}))},t.prototype.intersection=function(e){var n=new t;return this.forAll((function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}})),n},t}();e.LinkSets=a,e.getGroups=function(t,e,n,i){for(var o=t.length,a=new r(o,e,n,i);a.greedyMerge(););var s=[],l=a.getGroupHierarchy(s);return s.forEach((function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")})),{groups:l,powerEdges:s}}})),pD=r((function(t,e){function n(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function r(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function i(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach((function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)})),n}(t,r);t.forEach((function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))}))}function o(t,e,n){var r=[],i=0,o=[],a=[];function s(t){t.index=t.lowlink=i++,o.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(s(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var l=[];o.length&&((r=o.pop()).onStack=!1,l.push(r),r!==t););a.push(l.map((function(t){return t.id})))}}for(var l=0;l<t;l++)r.push({id:l,out:[]});for(var u=0,c=e;u<c.length;u++){var h=c[u],d=r[n.getSourceIndex(h)],f=r[n.getTargetIndex(h)];d.out.push(f)}for(var p=0,g=r;p<g.length;p++){var v=g[p];void 0===v.index&&s(v)}return a}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,(function(t,e){return Math.sqrt(n(t,e)-r(t,e))}),e)},e.jaccardLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,(function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:r(t,e)/n(t,e)}),e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i=o(t,e,r),a={};i.forEach((function(t,e){return t.forEach((function(t){return a[t]=e}))}));var s=[];return e.forEach((function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);a[e]!==a[i]&&s.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})})),s},e.stronglyConnectedComponents=o})),gD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=n;var r=function(){function t(t,e,r){void 0===r&&(r=null),this.D=e,this.G=r,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new i,this.project=null,this.x=t,this.k=t.length;var o=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new n,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var l=e[s][a];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map((function(e){return e*(t.minD/n)}))},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,l=0;l<n;++l){for(r=0;r<this.k;++r)a[r]=this.g[r][l]=0;for(var u=0;u<n;++u)if(l!==u){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=t[r][l]-t[r][u];h+=o[r]=d*d}if(h>1e-9)break;var f=this.offsetDir();for(r=0;r<this.k;++r)t[r][u]+=f[r]}var p=Math.sqrt(h),g=this.D[l][u],v=null!=this.G?this.G[l][u]:1;if(v>1&&p>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][l][u]=0;else{v>1&&(v=1);var y=g*g,m=2*v*(p-g)/(y*p),b=p*p*p,w=2*-v/(y*b);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][l]+=i[r]*m,a[r]-=this.H[r][l][u]=w*(b+g*(o[r]-h)+p*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][l][l]=a[r])}var x=this.snapGridSize/2,_=this.snapGridSize,E=this.snapStrength/(x*x),k=this.numGridSnapNodes;for(l=0;l<k;++l)for(r=0;r<this.k;++r){var S=this.x[r][l],C=S/_,T=C%1,N=C-T;-x<(d=Math.abs(T)<=.5?S-N*_:S>0?S-(N+1)*_:S-(N-1)*_)&&d<=x&&(this.scaleSnapByMaxH?(this.g[r][l]+=s*E*d,this.H[r][l][l]+=s*E):(this.g[r][l]+=E*d,this.H[r][l][l]+=E))}this.locks.isEmpty()||this.locks.apply((function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])}))}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply((function(r,i){return n.e[r][i]=t[r][i]-e[r][i]}));var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply((function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i})),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,(function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2}))},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var l=this.D[e][r];if(isFinite(l)){var u=l-o;t+=u*u/(l*l)}}return t},t.zeroDistance=1e-10,t}();e.Descent=r;var i=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=i})),vD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach((function(t){return n(t,t.right)})),this.cIn.forEach((function(t){return n(t,t.left)}))},t}();e.Variable=i;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,(function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)})),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,(function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)}))},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,(function(r,o){e.push(t(r)),i.traverse(t,e,o,n)}))},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,(function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)})),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,(function(){}));var n=null;return this.findPath(t,null,e,(function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)})),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,(function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))})),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=o;var a=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach((function(t){return t.updateWeightedPosition()}))},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach((function(n){var r=n.findMinLM();null!==r&&r.lm<s.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach((function(t){return e.insert(t)})),e.remove(n),t.push(r))}))},t}();e.Blocks=a;var s=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach((function(t){t.cIn=[],t.cOut=[]})),this.cs=e,e.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),this.inactive=e.map((function(t){return t.active=!1,t})),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map((function(t){return t.active=!1,t})),this.bs=new a(this.vs),this.bs.forEach((function(e,n){return e.posn=t[n]}))},t.prototype.setDesiredPositions=function(t){this.vs.forEach((function(e,n){return e.desiredPosition=t[n]}))},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var l=s.slack();if((s.equality||l<e)&&(e=l,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new a(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=s,e.removeOverlapInOneDimension=function(t,e,n){for(var o=t.map((function(t){return new i(t.desiredCenter)})),a=[],l=t.length,u=0;u<l-1;u++){var c=t[u],h=t[u+1];a.push(new r(o[u],o[u+1],(c.size+h.size)/2))}var d=o[0],f=o[l-1],p=t[0].size/2,g=t[l-1].size/2,v=null,y=null;return e&&(v=new i(e,1e3*d.weight),o.push(v),a.push(new r(v,d,p))),n&&(y=new i(n,1e3*f.weight),o.push(y),a.push(new r(f,y,g))),new s(o,a).solve(),{newCenters:o.slice(0,t.length).map((function(t){return t.position()})),lowerBound:v?v.position():d.position()-p,upperBound:y?y.position():f.position()+g}}})),yD=r((function(t,e){var r,i=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,(function(t,n){return e(n,t)}))},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new a(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(e(t,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=o;var a=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=a;var s=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),l=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return i(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new s(t),n=!0,this.size++;else{var r=new s(void 0),i=!1,o=!1,a=null,l=r,u=null,c=this._root;for(l.right=this._root;;){if(null===c?(c=new s(t),u.set_child(i,c),n=!0,this.size++):e.is_red(c.left)&&e.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),e.is_red(c)&&e.is_red(u)){var h=l.right===a;c===u.get_child(o)?l.set_child(h,e.single_rotate(a,!o)):l.set_child(h,e.double_rotate(a,!o))}var d=this._comparator(c.data,t);if(0===d)break;o=i,i=d<0,null!==a&&(l=a),a=u,u=c,c=c.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new s(void 0),r=n;r.right=this._root;for(var i=null,o=null,a=null,l=!0;null!==r.get_child(l);){var u=l;o=i,i=r,r=r.get_child(l);var c=this._comparator(t,r.data);if(l=c>0,0===c&&(a=r),!e.is_red(r)&&!e.is_red(r.get_child(l)))if(e.is_red(r.get_child(!l))){var h=e.single_rotate(r,l);i.set_child(u,h),i=h}else if(!e.is_red(r.get_child(!l))){var d=i.get_child(!u);if(null!==d)if(e.is_red(d.get_child(!u))||e.is_red(d.get_child(u))){var f=o.right===i;e.is_red(d.get_child(u))?o.set_child(f,e.double_rotate(i,u)):e.is_red(d.get_child(!u))&&o.set_child(f,e.single_rotate(i,u));var p=o.get_child(f);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else i.red=!1,d.red=!0,r.red=!0}}return null!==a&&(a.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==a},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(o);e.RBTree=l})),mD=r((function(t,e){var r,i=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function o(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce((function(t,e){return e.bounds.union(t)}),a.empty()):a.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce((function(t,e){return o(e).union(t)}),t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}Object.defineProperty(e,"__esModule",{value:!0}),e.computeGroupBounds=o;var a=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var l=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==l&&a.push({x:l.x,y:l.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var l=n-t,u=a-i,c=r-e,h=s-o,d=h*l-u*c;if(0==d)return null;var f=t-i,p=e-o,g=(u*p-h*f)/d,v=(l*p-c*f)/d;return g>=0&&g<=1&&v>=0&&v<=1?{x:t+g*l,y:e+g*c}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=a,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),l=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+l*o/s,y:r.y+l*a/s}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}};var s=function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=c(),this.next=c()},l=function(t,e,n){this.isOpen=t,this.v=e,this.pos=n};function u(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function c(){return new yD.RBTree((function(t,e){return t.pos-e.pos}))}var h={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new a(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}},d={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new a(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function f(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,s=o?t.groups.reduce((function(t,r){return t.concat(f(r,e,n,!0))}),[]):[],l=(r?2:0)+a+o,u=new Array(l),c=new Array(l),h=0,d=function(t,e){c[h]=t,u[h++]=e};if(r){var g=t.bounds,v=e.getCentre(g),y=e.getSize(g)/2,m=e.getOpen(g),b=e.getClose(g),w=v-y+i/2,x=v+y-i/2;t.minVar.desiredPosition=w,d(e.makeRect(m,b,w,i),t.minVar),t.maxVar.desiredPosition=x,d(e.makeRect(m,b,x,i),t.maxVar)}a&&t.leaves.forEach((function(t){return d(t.bounds,t.variable)})),o&&t.groups.forEach((function(t){var n=t.bounds;d(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)}));var _=p(c,u,e,n);return o&&(u.forEach((function(t){t.cOut=[],t.cIn=[]})),_.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),t.groups.forEach((function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach((function(t){return t.gap+=n})),t.minVar.cOut.forEach((function(e){e.left=t.maxVar,e.gap+=n}))}))),s.concat(_)}function p(t,e,n,r){var i,o=t.length,a=2*o;console.assert(e.length>=o);var h=new Array(a);for(i=0;i<o;++i){var d=t[i],f=new s(e[i],d,n.getCentre(d));h[i]=new l(!0,f,n.getOpen(d)),h[i+o]=new l(!1,f,n.getClose(d))}h.sort(u);var p=new Array,g=c();for(i=0;i<a;++i){var v=h[i];f=v.v;if(v.isOpen)g.insert(f),n.findNeighbours(f,g);else{g.remove(f);var y=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;p.push(new vD.Constraint(t.v,e.v,i))},m=function(t,e,n){for(var r,i=f[t].iterator();null!==(r=i[t]());)n(r,f),r[e].remove(f)};m("prev","next",(function(t,e){return y(t,e)})),m("next","prev",(function(t,e){return y(e,t)}))}}return console.assert(0===g.size),p}function g(t,e){return p(t,e,h,1e-6)}function v(t,e){return p(t,e,d,1e-6)}function y(t){return f(t,h,1e-6)}function m(t){return f(t,d,1e-6)}e.generateXConstraints=g,e.generateYConstraints=v,e.generateXGroupConstraints=y,e.generateYGroupConstraints=m,e.removeOverlaps=function(t){var e=t.map((function(t){return new vD.Variable(t.cx())})),n=g(t,e),r=new vD.Solver(e,n);r.solve(),e.forEach((function(e,n){return t[n].setXCentre(e.position())})),e=t.map((function(t){return new vD.Variable(t.cy())})),n=v(t,e),(r=new vD.Solver(e,n)).solve(),e.forEach((function(e,n){return t[n].setYCentre(e.position())}))};var b=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return i(e,t),e}(vD.Variable);e.IndexedVariable=b;var w=function(){function t(t,e,n,r,i){var s=this;if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1),this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map((function(t,e){return t.variable=new b(e,1)})),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach((function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new a(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new a(t.x,t.x,t.y,t.y)})),o(n);var l=t.length;e.forEach((function(t){s.variables[l]=t.minVar=new b(l++,void 0!==t.stiffness?t.stiffness:.01),s.variables[l]=t.maxVar=new b(l++,void 0!==t.stiffness?t.stiffness:.01)}))}}return t.prototype.createSeparation=function(t){return new vD.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map((function(t){return e.nodes[t.node]})).sort((function(t,e){return t[n]-e[n]})),o=null;i.forEach((function(t){if(o){var e=o[n]+o[r];e>t[n]&&(t[n]=e)}o=t}))}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach((function(t){var i=e.nodes[t.node].variable;r.push(new vD.Constraint(n,i,t.offset,!0))}))},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter((function(t){return"x"===t.axis&&n(t)})).map((function(t){return e.createSeparation(t)})),this.yConstraints=t.filter((function(t){return"y"===t.axis&&n(t)})).map((function(t){return e.createSeparation(t)})),t.filter((function(t){return"alignment"===t.type})).forEach((function(t){return e.createAlignment(t)}))},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach((function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var s=(i.width||0)/2,l=(i.height||0)/2,u=t[o],c=e[o];i.bounds=new a(u-s,u+s,c-l,c+l)}))},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,(function(t){return t.px}),this.xConstraints,y,(function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())}),(function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i}))},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,(function(t){return t.py}),this.yConstraints,m,(function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())}),(function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i}))},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,a,s,l,u){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(o(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,n,r),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(u),o(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new vD.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();e.Projection=w})),bD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach((function(e){return e.forEach(t)})))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce((function(t,e){return t+e.count()}),0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every((function(n){return t(e.elem,n.elem)&&n.isHeap(t)}))},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();e.PairingHeap=n;var r=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i,o=0;i=e[o];++o)t=new n(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=r})),wD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.id=t,this.distance=e},r=function(t){this.id=t,this.neighbours=[]},i=function(t,e,n){this.node=t,this.prev=e,this.d=n},o=function(){function t(t,e,i,o,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new r(s);for(s=this.es.length;s--;){var l=this.es[s],u=i(l),c=o(l),h=a(l);this.neighbours[u].neighbours.push(new n(c,h)),this.neighbours[c].neighbours.push(new n(u,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var r=new bD.PriorityQueue((function(t,e){return t.d<=e.d})),o=this.neighbours[t],a=new i(o,null,0),s={};for(r.push(a);!r.empty()&&(o=(a=r.pop()).node).id!==e;)for(var l=o.neighbours.length;l--;){var u=o.neighbours[l],c=this.neighbours[u.id];if(!a.prev||c.id!==a.prev.node.id){var h=c.id+","+o.id;if(!(h in s&&s[h]<=a.d)){var d=a.prev?n(a.prev.node.id,o.id,c.id):0,f=a.d+u.distance+d;s[h]=f,r.push(new i(c,a,f))}}}for(var p=[];a.prev;)a=a.prev,p.push(a.node.id);return p},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new bD.PriorityQueue((function(t,e){return t.d<=e.d})),r=this.neighbours.length,i=new Array(r);r--;){var o=this.neighbours[r];o.d=r===t?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var a=n.pop();if(i[a.id]=a.d,a.id===e){for(var s=[],l=a;void 0!==l.prev;)s.push(l.prev.id),l=l.prev;return s}for(r=a.neighbours.length;r--;){var u=a.neighbours[r],c=(l=this.neighbours[u.id],a.d+u.distance);a.d!==Number.MAX_VALUE&&l.d>c&&(l.d=c,l.prev=a,n.reduceKey(l.q,l,(function(t,e){return t.q=e})))}}return i},t}();e.Calculator=o})),xD=r((function(t,e){var r,i=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){};e.Point=o;var a=function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r};e.LineSegment=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o);function l(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function u(t,e,n){return l(t,e,n)>0}function c(t,e,n){return l(t,e,n)<0}function h(t,e){var n,r,i,o,a=e.length-1;if(c(t,e[1],e[0])&&!u(t,e[a-1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return u(t,e[n],e[r])?n:r;if((o=c(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!u(t,e[i-1],e[i]))return i;u(t,e[n+1],e[n])?o||u(t,e[n],e[i])?r=i:n=i:o&&c(t,e[n],e[i])?r=i:n=i}}function d(t,e){var n,r,i,o,a=e.length-1;if(u(t,e[a-1],e[0])&&!c(t,e[1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return c(t,e[n],e[r])?n:r;if(o=c(t,e[(i=Math.floor((n+r)/2))+1],e[i]),u(t,e[i-1],e[i])&&!o)return i;c(t,e[n+1],e[n])?o?c(t,e[n],e[i])?r=i:n=i:r=i:o?n=i:u(t,e[n],e[i])?r=i:n=i}}function f(t,e,n,r,i,o){var a,s;s=r(t[a=n(e[0],t)],e);for(var l=!1;!l;){for(l=!0;a===t.length-1&&(a=0),!i(e[s],t[a],t[a+1]);)++a;for(;0===s&&(s=e.length-1),!o(t[a],e[s],e[s-1]);)--s,l=!1}return{t1:a,t2:s}}function p(t,e){return f(t,e,h,d,u,c)}e.PolyPoint=s,e.isLeft=l,e.ConvexHull=function(t){var e,n=t.slice(0).sort((function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y})),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var o=e-1,a=[];if(a.push(n[0]),o===r-1)n[o].y!==n[0].y&&a.push(n[o]);else{var s,u=r-1,c=n[r-1].x;for(e=r-2;e>=0&&n[e].x===c;e--);for(s=e+1,e=o;++e<=s;)if(!(l(n[0],n[s],n[e])>=0&&e<s)){for(;a.length>1&&!(l(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}u!=s&&a.push(n[u]);var h=a.length;for(e=s;--e>=o;)if(!(l(n[u],n[o],n[e])>=0&&e>o)){for(;a.length>h&&!(l(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}}return a},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort((function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)})).forEach(n)},e.tangent_PolyPolyC=f,e.LRtangent_PolyPolyC=function(t,e){var n=p(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=p,e.LLtangent_PolyPolyC=function(t,e){return f(t,e,d,d,c,c)},e.RRtangent_PolyPolyC=function(t,e){return f(t,e,h,h,u,u)};var g=function(t,e){this.t1=t,this.t2=e};e.BiTangent=g;var v=function(){};e.BiTangents=v;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o);e.TVGPoint=y;var m=function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this};e.VisibilityVertex=m;var b=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=b;var w=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var a=i[o],s=new m(this.V.length,r,o,a);this.V.push(s),o>0&&this.E.push(new b(i[o-1].vv,s))}i.length>1&&this.E.push(new b(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var l=t[r];for(o=r+1;o<n;o++){var u=t[o],c=_(l,u);for(var h in c){var d=c[h],f=l[d.t1],p=u[d.t2];this.addEdgeIfVisible(f,p,r,o)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new a(t.x,t.y,e.x,e.y),n,r)||this.E.push(new b(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n,r,i,o=this.P.length;this.V.push(new m(this.V.length,o,0,t));for(var a=0;a<o;++a)if(a!==e){var s=this.P[a],l=(n=t,i=void 0,(i=(r=s).slice(0)).push(r[0]),{rtan:h(n,i),ltan:d(n,i)});this.addEdgeIfVisible(t,s[l.ltan],e,a),this.addEdgeIfVisible(t,s[l.rtan],e,a)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&x(t,this.P[r]).length>0)return!0;return!1},t}();function x(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var o=mD.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);o&&n.push(o)}return n}function _(t,e){for(var n=t.length-1,r=e.length-1,i=new v,o=0;o<n;++o)for(var a=0;a<r;++a){var s=t[0==o?n-1:o-1],u=t[o],c=t[o+1],h=e[0==a?r-1:a-1],d=e[a],f=e[a+1],p=l(s,u,d),y=l(u,h,d),m=l(u,d,f),b=l(h,d,u),w=l(d,s,u),x=l(d,u,c);p>=0&&y>=0&&m<0&&b>=0&&w>=0&&x<0?i.ll=new g(o,a):p<=0&&y<=0&&m>0&&b<=0&&w<=0&&x>0?i.rr=new g(o,a):p<=0&&y>0&&m<=0&&b>=0&&w<0&&x>=0?i.rl=new g(o,a):p>=0&&y<0&&m>=0&&b<=0&&w>0&&x<=0&&(i.lr=new g(o,a))}return i}function E(t,e){return!t.every((function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(c(e[n-1],e[n],t))return!1;return!0}(t,e)}))}e.TangentVisibilityGraph=w,e.tangents=_,e.polysOverlap=function(t,e){if(E(t,e))return!0;if(E(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(x(new a(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}})),_D=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=10,r=(1+Math.sqrt(5))/2,i=1e-4;e.applyPacking=function(t,e,o,a,s,l){void 0===s&&(s=1),void 0===l&&(l=!0);var u=e,c=o,h=(s=void 0!==s?s:1,a=void 0!==a?a:0,0),d=0,f=0,p=0,g=[];function v(t,e){g=[],h=0,d=0,p=0;for(var n=0;n<t.length;n++){y(t[n],e)}return Math.abs(h/d-s)}function y(t,e){for(var r=void 0,o=0;o<g.length;o++)if(g[o].space_left>=t.height&&g[o].x+g[o].width+t.width+n-e<=i){r=g[o];break}g.push(t),void 0!==r?(t.x=r.x+r.width+n,t.y=r.bottom,t.space_left=t.height,t.bottom=t.y,r.space_left-=t.height+n,r.bottom+=t.height+n):(t.y=p,p+=t.height+n,t.x=0,t.bottom=t.y,t.space_left=t.height),t.y+t.height-d>-i&&(d=t.y+t.height-0),t.x+t.width-h>-i&&(h=t.x+t.width-0)}0!=t.length&&(function(t){t.forEach((function(t){var e,n,r,i,o;e=t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=0,o=0,e.array.forEach((function(t){var e=void 0!==t.width?t.width:a,s=void 0!==t.height?t.height:a;e/=2,s/=2,i=Math.max(t.x+e,i),n=Math.min(t.x-e,n),o=Math.max(t.y+s,o),r=Math.min(t.y-s,r)})),e.width=i-n,e.height=o-r}))}(t),function(t,e){var o=Number.POSITIVE_INFINITY,a=0;t.sort((function(t,e){return e.height-t.height})),f=t.reduce((function(t,e){return t.width<e.width?t.width:e.width}));var s=y=f,l=m=function(t){var e=0;return t.forEach((function(t){return e+=t.width+n})),e}(t),u=0,c=Number.MAX_VALUE,h=Number.MAX_VALUE,d=-1,p=Number.MAX_VALUE,g=Number.MAX_VALUE;for(;p>f||g>i;){if(1!=d){var y=l-(l-s)/r;c=v(t,y)}if(0!=d){var m=s+(l-s)/r;h=v(t,m)}if(p=Math.abs(y-m),g=Math.abs(c-h),c<o&&(o=c,a=y),h<o&&(o=h,a=m),c>h?(s=y,y=m,c=h,d=1):(l=m,m=y,h=c,d=0),u++>100)break}v(t,a)}(t),l&&function(t){t.forEach((function(t){var e={x:0,y:0};t.array.forEach((function(t){e.x+=t.x,e.y+=t.y})),e.x/=t.array.length,e.y/=t.array.length;var n=e.x-t.width/2,r=e.y-t.height/2,i=t.x-n+u/2-h/2,o=t.y-r+c/2-d/2;t.array.forEach((function(t){t.x+=i,t.y+=o}))}))}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],o=0,a=0;a<e.length;a++){var s=e[a],l=s.source,u=s.target;r[l.index]?r[l.index].push(u):r[l.index]=[u],r[u.index]?r[u.index].push(l):r[u.index]=[l]}for(a=0;a<t.length;a++){var c=t[a];n[c.index]||h(c,!0)}function h(t,e){if(void 0===n[t.index]){e&&(o++,i.push({array:[]})),n[t.index]=o,i[o-1].array.push(t);var a=r[t.index];if(a)for(var s=0;s<a.length;s++)h(a[s],!1)}}return i}})),ED=r((function(t,e){var n;function r(t){return void 0!==t.leaves||void 0!==t.groups}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(n=e.EventType||(e.EventType={}));var i=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[n[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:n.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,r=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<r;++e)if((t=this._nodes[e]).fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var i=[t.px,t.py];this._descent.locks.add(e,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:n.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach((function(t){e=Math.max(e,t.source,t.target)})),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach((function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach((function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)})),void 0!==t.groups&&t.groups.forEach((function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)}))})),this._rootGroup.leaves=this._nodes.filter((function(t){return void 0===t.parent})),this._rootGroup.groups=this._groups.filter((function(t){return void 0===t.parent})),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=fD.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:n.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return pD.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return pD.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,o,a){var s=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!0),void 0===a&&(a=!0);var l,u=this.nodes().length,c=u+2*this._groups.length,h=(this._links.length,this._canvasSize[0]),d=this._canvasSize[1],f=new Array(c),p=new Array(c),g=null,v=this._avoidOverlaps;this._nodes.forEach((function(t,e){t.index=e,void 0===t.x&&(t.x=h/2,t.y=d/2),f[e]=t.x,p[e]=t.y})),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?l=this._distanceMatrix:(l=new wD.Calculator(c,this._links,t.getSourceIndex,t.getTargetIndex,(function(t){return s.getLinkLength(t)})).DistanceMatrix(),g=gD.Descent.createSquareMatrix(c,(function(){return 2})),this._links.forEach((function(t){"number"==typeof t.source&&(t.source=s._nodes[t.source]),"number"==typeof t.target&&(t.target=s._nodes[t.target])})),this._links.forEach((function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);g[n][r]=g[r][n]=e.weight||1})));var y=gD.Descent.createSquareMatrix(c,(function(t,e){return l[t][e]}));if(this._rootGroup&&void 0!==this._rootGroup.groups){var m=u;this._groups.forEach((function(t){!function(t,e,n,r){g[t][e]=g[e][t]=n,y[t][e]=y[e][t]=r}(m,m+1,s._groupCompactness,.1),f[m]=0,p[m++]=0,f[m]=0,p[m++]=0}))}else this._rootGroup={leaves:this._nodes,groups:[]};var b=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,b=b.concat(pD.generateDirectedEdgeConstraints(u,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new gD.Descent([f,p],y),this._descent.locks.clear();for(m=0;m<u;++m){var w=this._nodes[m];if(w.fixed){w.px=w.x,w.py=w.y;var x=[w.x,w.y];this._descent.locks.add(m,x)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,f,p),b.length>0&&(this._descent.project=new mD.Projection(this._nodes,this._groups,this._rootGroup,b).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(h,d,a),this.avoidOverlaps(v),v&&(this._nodes.forEach((function(t,e){t.x=f[e],t.y=p[e]})),this._descent.project=new mD.Projection(this._nodes,this._groups,this._rootGroup,b,!0).projectFunctions(),this._nodes.forEach((function(t,e){f[e]=t.x,p[e]=t.y}))),this._descent.G=g,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=u,this._descent.scaleSnapByMaxH=u!=c;var _=gD.Descent.createSquareMatrix(c,(function(t,e){return t>=u||e>=u?g[t][e]:0}));this._descent.G=_,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(h,d,a),o?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map((function(t){return{source:t.source.index,target:t.target.index}})),a=this._nodes.map((function(t){return{index:t.index}}));this._groups.forEach((function(t,e){a.push({index:t.index=i+e})})),this._groups.forEach((function(t,e){void 0!==t.leaves&&t.leaves.forEach((function(e){return o.push({source:t.index,target:e.index})})),void 0!==t.groups&&t.groups.forEach((function(e){return o.push({source:t.index,target:e.index})}))})),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach((function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y}))}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,n){var r=this;if(void 0===n&&(n=!0),!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach((function(t,e){t.x=i[e],t.y=o[e]}));var a=_D.separateGraphs(this._nodes,this._links);_D.applyPacking(a,t,e,this._defaultNodeSize,1,n),this._nodes.forEach((function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))}))}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new xD.TangentVisibilityGraph(this._nodes.map((function(e){return e.bounds.inflate(-t).vertices()})))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new xD.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},s=i.addPoint(o,t.source.index),l=i.addPoint(a,t.target.index);i.addEdgeIfVisible(o,a,t.source.index,t.target.index),void 0!==n&&n(i);var u=new wD.Calculator(i.V.length,i.E,(function(t){return t.source.id}),(function(t){return t.target.id}),(function(t){return t.length()})).PathFromNodeToNode(s.id,l.id);if(1===u.length||u.length===i.V.length){var c=mD.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[c.sourceIntersection,c.arrowStart]}else{for(var h=u.length-2,d=i.V[u[h]].p,f=i.V[u[0]].p,p=(r=[t.source.innerBounds.rayIntersection(d.x,d.y)],h);p>=0;--p)r.push(i.V[u[p]].p);r.push(mD.makeEdgeTo(f,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){r(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach((function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.storeOffset(e,n)}))},t.dragOrigin=function(t){return r(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){r(e)?(void 0!==e.leaves&&e.leaves.forEach((function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.drag(e,n)}))):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){r(e)?(void 0!==e.leaves&&e.leaves.forEach((function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY})),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=i})),kD=r((function(t,e){var r,i=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=ED.Layout.dragStart,n.dragend=n.dragEnd=ED.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(ED.Layout);e.LayoutAdaptor=o,e.adaptor=function(t){return new o(t)}})),SD=r((function(t,e){var r,i=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(ED.EventType[ED.EventType.start],ED.EventType[ED.EventType.tick],ED.EventType[ED.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(ED.Layout.dragOrigin).on("dragstart.d3adaptor",ED.Layout.dragStart).on("drag.d3adaptor",(function(t){ED.Layout.drag(t,d3.event),n.resume()})).on("dragend.d3adaptor",ED.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:ED.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer((function(){return t.prototype.tick.call(e)}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(ED.EventType[t],e),this},e}(ED.Layout);e.D3StyleLayoutAdaptor=o,e.d3adaptor=function(){return new o}})),CD=r((function(t,e){var r,i=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(ED.EventType[ED.EventType.start],ED.EventType[ED.EventType.tick],ED.EventType[ED.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(ED.Layout.dragOrigin).on("start.d3adaptor",ED.Layout.dragStart).on("drag.d3adaptor",(function(t){ED.Layout.drag(t,e.event),r.resume()})).on("end.d3adaptor",ED.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return i(e,t),e.prototype.trigger=function(t){var e={type:ED.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer((function(){return t.prototype.tick.call(e)&&n.stop()}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(ED.EventType[t],e),this},e}(ED.Layout);e.D3StyleLayoutAdaptor=o})),TD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new SD.D3StyleLayoutAdaptor:new CD.D3StyleLayoutAdaptor(t)}})),ND=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length};e.NodeWrapper=n;var r=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i};e.Vert=r;var i=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var l=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;l>i.length&&(i.length=l,i.si=a-l+1,i.ti=s-l+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=i;var o=function(){function t(t,e,i){var o=this;void 0===i&&(i=12),this.originalnodes=t,this.groupPadding=i,this.leaves=null,this.nodes=t.map((function(t,r){return new n(r,e.getBounds(t),e.getChildren(t))})),this.leaves=this.nodes.filter((function(t){return t.leaf})),this.groups=this.nodes.filter((function(t){return!t.leaf})),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach((function(t){return t.children.forEach((function(e){return o.nodes[e].parent=t}))})),this.root={children:[]},this.nodes.forEach((function(t){void 0===t.parent&&(t.parent=o.root,o.root.children.push(t.id)),t.ports=[]})),this.backToFront=this.nodes.slice(0),this.backToFront.sort((function(t,e){return o.getDepth(t)-o.getDepth(e)})),this.backToFront.slice(0).reverse().filter((function(t){return!t.leaf})).forEach((function(t){var e=mD.Rectangle.empty();t.children.forEach((function(t){return e=e.union(o.nodes[t].rect)})),t.rect=e.inflate(o.groupPadding)}));var a=this.midPoints(this.cols.map((function(t){return t.pos}))),s=this.midPoints(this.rows.map((function(t){return t.pos}))),l=a[0],u=a[a.length-1],c=s[0],h=s[s.length-1],d=this.rows.map((function(t){return{x1:l,x2:u,y1:t.pos,y2:t.pos}})).concat(s.map((function(t){return{x1:l,x2:u,y1:t,y2:t}}))),f=this.cols.map((function(t){return{x1:t.pos,x2:t.pos,y1:c,y2:h}})).concat(a.map((function(t){return{x1:t,x2:t,y1:c,y2:h}}))),p=d.concat(f);p.forEach((function(t){return t.verts=[]})),this.verts=[],this.edges=[],d.forEach((function(t){return f.forEach((function(e){var n=new r(o.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),o.verts.push(n);for(var i=o.backToFront.length;i-- >0;){var a=o.backToFront[i],s=a.rect,l=Math.abs(n.x-s.cx()),u=Math.abs(n.y-s.cy());if(l<s.width()/2&&u<s.height()/2){n.node=a;break}}}))})),p.forEach((function(t,e){o.nodes.forEach((function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach((function(n,i){var a=new r(o.verts.length,n.x,n.y,e,t);o.verts.push(a),t.verts.push(a),e.ports.push(a)}))}));var n=Math.abs(t.y1-t.y2)<.1,i=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(i);for(var a=1;a<t.verts.length;a++){var s=t.verts[a-1],l=t.verts[a];s.node&&s.node===l.node&&s.node.leaf||o.edges.push({source:s.id,target:l.id,length:Math.abs(i(s,l))})}}))}return t.prototype.avg=function(t){return t.reduce((function(t,e){return t+e}))/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter((function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)})),i={nodes:r,pos:this.avg(r.map((function(e){return e.rect["c"+t]()})))};e.push(i),i.nodes.forEach((function(t){return n.splice(n.indexOf(t),1)}))}return e.sort((function(t,e){return t.pos-e.pos})),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach((function(t){return i[t.id]={}}));var o=r.commonAncestor.children.filter((function(t){return!(t in i)}));return r.lineages.filter((function(t){return t.parent!==r.commonAncestor})).forEach((function(t){return o=o.concat(t.parent.children.filter((function(e){return e!==t.id})))})),o.map((function(t){return n.nodes[t]}))},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){(h=o[a]).edgeid=i,h.i=a;var s=h[1][e]-h[0][e];Math.abs(s)<.1&&r.push(h)}r.sort((function(t,n){return t[0][e]-n[0][e]}));for(var l=[],u=null,c=0;c<r.length;c++){var h=r[c];(!u||Math.abs(h[0][e]-u.pos)>.1)&&(u={pos:h[0][e],segments:[]},l.push(u)),u.segments.push(h)}return l},t.nudgeSegs=function(t,e,n,r,i,o){var a=r.length;if(!(a<=1)){for(var s=r.map((function(e){return new vD.Variable(e[0][t])})),l=[],u=0;u<a;u++)for(var c=0;c<a;c++)if(u!==c){var h=r[u],d=r[c],f=h.edgeid,p=d.edgeid,g=-1,v=-1;"x"==t?i(f,p)&&(h[0][e]<h[1][e]?(g=c,v=u):(g=u,v=c)):i(f,p)&&(h[0][e]<h[1][e]?(g=u,v=c):(g=c,v=u)),g>=0&&l.push(new vD.Constraint(s[g],s[v],o))}new vD.Solver(s,l).solve(),s.forEach((function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var s=n[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)}))}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),s=0;s<a.length;s++){for(var l=a[s],u=[],c=0;c<l.segments.length;c++){var h=l.segments[c];u.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),u.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}u.sort((function(t,e){return t.pos-e.pos+t.type-e.type}));var d=[],f=0;u.forEach((function(a){0===a.type?(d.push(a.s),f++):f--,0==f&&(t.nudgeSegs(n,r,e,d,i,o),d=[])}))}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map((function(t){return o.route(r(t),i(t))})),s=t.orderEdges(a),l=a.map((function(e){return t.makeSegments(e)}));return t.nudgeSegments(l,"x","y",s,n),t.nudgeSegments(l,"y","x",s,n),t.unreverseEdges(l,a),l},t.unreverseEdges=function(t,e){t.forEach((function(t,n){e[n].reversed&&(t.reverse(),t.forEach((function(t){t.reverse()})))}))},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var o=r+1;o<e.length;o++){var a,s,l,u=e[r],c=e[o],h=new i(u,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new i(u,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=u.length||h.ti+h.length>=c.length)?n.push({l:r,r:o}):(h.si+h.length>=u.length||h.ti+h.length>=c.length?(a=u[h.si+1],l=u[h.si-1],s=c[h.ti-1]):(a=u[h.si+h.length-2],s=u[h.si+h.length],l=c[h.ti+h.length]),t.isLeft(a,s,l)?n.push({l:o,r:r}):n.push({l:r,r:o})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var a=e(t[o]),s=o<t.length-1?t[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var o={};this.obstacles.forEach((function(t){return o[t.id]=t})),this.passableEdges=this.edges.filter((function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in o||r.node&&r.node.id in o)}));for(var a=1;a<r.ports.length;a++){var s=r.ports[0].id,l=r.ports[a].id;this.passableEdges.push({source:s,target:l,length:0})}for(a=1;a<i.ports.length;a++){s=i.ports[0].id,l=i.ports[a].id;this.passableEdges.push({source:s,target:l,length:0})}var u=new wD.Calculator(this.verts.length,this.passableEdges,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,(function(t,e,o){var a=n.verts[t],s=n.verts[e],l=n.verts[o],u=Math.abs(l.x-a.x),c=Math.abs(l.y-a.y);return a.node===r&&a.node===s.node||s.node===i&&s.node===l.node?0:u>1&&c>1?1e3:0})).reverse().map((function(t){return n.verts[t]}));return u.push(this.nodes[i.id].ports[0]),u.filter((function(t,e){return!(e<u.length-1&&u[e+1].node===r&&t.node===r||e>0&&t.node===i&&u[e-1].node===i)}))},t.getRoutePath=function(e,n,r,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=(w=e[a])[1].x,l=w[1].y,u=s-w[0].x,c=l-w[0].y;if(a<e.length-1){Math.abs(u)>0?s-=u/Math.abs(u)*n:l-=c/Math.abs(c)*n,o.routepath+="L "+s+" "+l+" ";var h=e[a+1],d=h[0].x,f=h[0].y;u=h[1].x-d,c=h[1].y-f;var p,g,v=t.angleBetween2Lines(w,h)<0?1:0;Math.abs(u)>0?(p=d+u/Math.abs(u)*n,g=f):(p=d,g=f+c/Math.abs(c)*n);var y=Math.abs(p-s),m=Math.abs(g-l);o.routepath+="A "+y+" "+m+" 0 0 "+v+" "+p+" "+g+" "}else{var b=[s,l];Math.abs(u)>0?(x=[s-=u/Math.abs(u)*i,l+r],_=[s,l-r]):(x=[s+r,l-=c/Math.abs(c)*i],_=[s-r,l]),o.routepath+="L "+s+" "+l+" ",i>0&&(o.arrowpath="M "+b[0]+" "+b[1]+" L "+x[0]+" "+x[1]+" L "+_[0]+" "+_[1])}}else{var w,x,_;s=(w=e[0])[1].x,l=w[1].y,u=s-w[0].x,c=l-w[0].y,b=[s,l];Math.abs(u)>0?(x=[s-=u/Math.abs(u)*i,l+r],_=[s,l-r]):(x=[s+r,l-=c/Math.abs(c)*i],_=[s-r,l]),o.routepath+="L "+s+" "+l+" ",i>0&&(o.arrowpath="M "+b[0]+" "+b[1]+" L "+x[0]+" "+x[1]+" L "+_[0]+" "+_[1])}return o},t}();e.GridRouter=o})),OD=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce((function(t,n){var r=n[e.target]-n[e.source];return t+r*r}),0))},t}();e.Link3D=n;var r=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n};e.Node3D=r;var i=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach((function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z}))}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,r=new o;this.useJaccardLinkLengths&&pD.jaccardLinkLengths(this.links,r,1.5),this.links.forEach((function(t){return t.length*=e.idealLinkLength}));var i=new wD.Calculator(n,this.links,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).DistanceMatrix(),a=gD.Descent.createSquareMatrix(n,(function(t,e){return i[t][e]})),s=gD.Descent.createSquareMatrix(n,(function(){return 2}));this.links.forEach((function(t){var e=t.source,n=t.target;return s[e][n]=s[n][e]=1})),this.descent=new gD.Descent(this.result,a),this.descent.threshold=.001,this.descent.G=s,this.constraints&&(this.descent.project=new mD.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var l=0;l<this.nodes.length;l++){var u=this.nodes[l];u.fixed&&this.descent.locks.add(l,[u.x,u.y,u.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=i;var o=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()})),PD=r((function(t,e){function n(t,e,n,r){t.forEach((function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}})),e.forEach((function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map((function(e){return t.length+e.id})):[]).concat(void 0!==e.leaves?e.leaves.map((function(t){return t.index})):[])}}));var i=t.concat(e).map((function(t,e){return t.routerNode.id=e,t.routerNode}));return new ND.GridRouter(i,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}Object.defineProperty(e,"__esModule",{value:!0}),e.gridify=function(t,e,r,i){return t.cola.start(0,0,0,10,!1),n(t.cola.nodes(),t.cola.groups(),r,i).routeEdges(t.powerGraph.powerEdges,e,(function(t){return t.source.routerNode.id}),(function(t){return t.target.routerNode.id}))},e.powerGraphGridLayout=function(t,e,n){var r;t.nodes.forEach((function(t,e){return t.index=e})),(new ED.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups((function(t){(r=t).groups.forEach((function(t){return t.padding=n}))}));var i=t.nodes.length,o=[],a=t.nodes.slice(0);return a.forEach((function(t,e){return t.index=e})),r.groups.forEach((function(t){var e=t.index=t.id+i;a.push(t),void 0!==t.leaves&&t.leaves.forEach((function(t){return o.push({source:e,target:t.index})})),void 0!==t.groups&&t.groups.forEach((function(t){return o.push({source:e,target:t.id+i})}))})),r.powerEdges.forEach((function(t){o.push({source:t.source.index,target:t.target.index})})),(new ED.Layout).size(e).nodes(a).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new ED.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups((function(t){(r=t).groups.forEach((function(t){t.padding=n}))})).start(50,0,100,0,!1),powerGraph:r}}})),MD=r((function(t,e){function n(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),n(kD),n(TD),n(gD),n(xD),n(ND),n(_D),n(ED),n(OD),n(pD),n(fD),n(bD),n(yD),n(mD),n(wD),n(vD),n(PD)})),DD=r((function(t,e){var n;n=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=n(2),a=n(5)||("undefined"!=typeof window?window.cola:null),s=n(4),l=function(t){return(void 0===t?"undefined":r(t))===r(0)},u=function(){},c=function(t,e){var n;return null!=(n=t)&&(void 0===n?"undefined":r(n))===r((function(){}))?t.apply(e,[e]):t};function h(t){this.options=i({},o,t)}h.prototype.run=function(){var t=this,e=this.options;t.manuallyStopped=!1;var n=e.cy,i=e.eles,o=i.nodes(),h=i.edges(),d=!1,f=o.filter((function(t){return t.isParent()})),p=o.subtract(f),g=e.boundingBox||{x1:0,y1:0,w:n.width(),h:n.height()};void 0===g.x2&&(g.x2=g.x1+g.w),void 0===g.w&&(g.w=g.x2-g.x1),void 0===g.y2&&(g.y2=g.y1+g.h),void 0===g.h&&(g.h=g.y2-g.y1);var v=function(){for(var t=0;t<o.length;t++){var r=o[t],i=r.layoutDimensions(e),a=r.scratch("cola");if(!a.updatedDims){var s=c(e.nodeSpacing,r);a.width=i.w+2*s,a.height=i.h+2*s}}o.positions((function(t){var e=t.scratch().cola,n=void 0;return!t.grabbed()&&p.contains(t)&&(n={x:g.x1+e.x,y:g.y1+e.y},l(n.x)&&l(n.y)||(n=void 0)),n})),o.updateCompoundBounds(),d||(m(),d=!0),e.fit&&n.fit(e.padding)},y=function(){e.ungrabifyWhileSimulating&&x.grabify(),n.off("destroy",_),o.off("grab free position",E),o.off("lock unlock",k),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})},m=function(){t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t})},b=e.refresh;b=e.refresh<0?1:Math.max(1,b);var w=t.adaptor=a.adaptor({trigger:function(t){var n=a.EventType?a.EventType.tick:null,r=a.EventType?a.EventType.end:null;switch(t.type){case"tick":case n:e.animate&&v();break;case"end":case r:v(),e.infinite||y()}},kick:function(){var n=!0,r=function(){if(t.manuallyStopped)return y(),!0;var r=w.tick();return e.infinite||n||w.convergenceThreshold(e.convergenceThreshold),n=!1,r&&e.infinite&&w.resume(),r};if(e.animate)s((function t(){(function(){for(var t=void 0,e=0;e<b&&!t;e++)t=t||r();return t})()||s(t)}));else for(;!r(););},on:u,drag:u});t.adaptor=w;var x=o.filter(":grabbable");e.ungrabifyWhileSimulating&&x.ungrabify();var _=void 0;n.one("destroy",_=function(){t.stop()});var E=void 0;o.on("grab free position",E=function(t){var e=this.scratch().cola,n=this.position();if(t.cyTarget===this||t.target===this)switch(t.type){case"grab":w.dragstart(e);break;case"free":w.dragend(e);break;case"position":e.px===n.x-g.x1&&e.py===n.y-g.y1||(e.px=n.x-g.x1,e.py=n.y-g.y1)}});var k=void 0;o.on("lock unlock",k=function(){var t=this.scratch().cola;t.fixed=this.locked(),this.locked()?w.dragstart(t):w.dragend(t)}),w.nodes(p.map((function(t,n){var r=c(e.nodeSpacing,t),i=t.position(),o=t.layoutDimensions(e);return t.scratch().cola={x:e.randomize||void 0===i.x?Math.round(Math.random()*g.w):i.x,y:e.randomize||void 0===i.y?Math.round(Math.random()*g.h):i.y,width:o.w+2*r,height:o.h+2*r,index:n,fixed:t.locked()}})));var S=[];if(e.alignment){var C=[],T=[];p.forEach((function(t){var n=c(e.alignment,t),r=t.scratch().cola.index;n&&(null!=n.x&&C.push({node:r,offset:n.x}),null!=n.y&&T.push({node:r,offset:n.y}))})),C.length>0&&S.push({type:"alignment",axis:"x",offsets:C}),T.length>0&&S.push({type:"alignment",axis:"y",offsets:T})}e.gapInequalities&&e.gapInequalities.forEach((function(t){var e=t.left.scratch().cola.index,n=t.right.scratch().cola.index;S.push({axis:t.axis,left:e,right:n,gap:t.gap,equality:t.equality})})),S.length>0&&w.constraints(S),w.groups(f.map((function(t,n){var r=c(e.nodeSpacing,t),i=function(e){return parseFloat(t.style("padding-"+e))},o=i("left")+r,a=i("right")+r,s=i("top")+r,l=i("bottom")+r;return t.scratch().cola={index:n,padding:Math.max(o,a,s,l),leaves:t.children().intersection(p).map((function(t){return t[0].scratch().cola.index})),fixed:t.locked()},t})).map((function(t){return t.scratch().cola.groups=t.children().intersection(f).map((function(t){return t.scratch().cola.index})),t.scratch().cola})));var N,O=void 0,P=void 0;if(null!=e.edgeLength?(O=e.edgeLength,P="linkDistance"):null!=e.edgeSymDiffLength?(O=e.edgeSymDiffLength,P="symmetricDiffLinkLengths"):null!=e.edgeJaccardLength?(O=e.edgeJaccardLength,P="jaccardLinkLengths"):(O=100,P="linkDistance"),w.links(h.stdFilter((function(t){return p.contains(t.source())&&p.contains(t.target())})).map((function(t){var e=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=O&&(e.calcLength=c(O,t)),e}))),w.size([g.w,g.h]),null!=O&&w[P]((function(t){return t.calcLength})),e.flow){var M=void 0;(void 0===(N=e.flow)?"undefined":r(N))===r("")?M={axis:e.flow,minSeparation:50}:l(e.flow)?M={axis:"y",minSeparation:e.flow}:function(t){return null!=t&&(void 0===t?"undefined":r(t))===r({})}(e.flow)?((M=e.flow).axis=M.axis||"y",M.minSeparation=null!=M.minSeparation?M.minSeparation:50):M={axis:"y",minSeparation:50},w.flowLayout(M.axis,M.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),w.avoidOverlaps(e.avoidOverlap).handleDisconnected(e.handleDisconnected).start(e.unconstrIter,e.userConstIter,e.allConstIter),e.infinite||setTimeout((function(){t.manuallyStopped||w.stop()}),e.maxSimulationTime),this},h.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t.exports=h},function(t,e,n){t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter((function(t){return null!=t})).forEach((function(e){Object.keys(e).forEach((function(n){return t[n]=e[n]}))})),t}},function(t,e,n){var r={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.exports=r},function(t,e,n){var r=n(0),i=function(t){t&&t("layout","cola",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=void 0;i="undefined"!==("undefined"==typeof window?"undefined":r(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)}:function(t){t()},t.exports=i},function(e,n){e.exports=t}])},t.exports=n(MD)}));return bS.use(dD),bS.use(DD),function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Yn(this,t),this.readGraphol(e).then((function(t){n._ontology=t})).catch((function(t){console.error(t)})),r)return this.init(r,i)}return Xn(t,[{key:"init",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.view=new $P(t),new Promise((function(t,r){e.readFilePromise.then((function(){e.controller=new iM(e._ontology,e.view,n),e.controller.init(),t(e.controller)})).catch((function(t){e.view.showDialog(t.name,t.message),r(t)})).finally((function(){return e.view.spinner.hide()}))}))}},{key:"readGraphol",value:function(t){return this.readFilePromise=new Promise((function(n,r){var i=null;if("object"===Hn(t)){var o=new FileReader;o.onloadend=function(){try{i=e(o.result)}catch(t){r(t)}n(i)},o.readAsText(t),setTimeout((function(){r("Error: timeout expired")}),1e4)}else"string"==typeof t?(i=e(t),n(i)):r("Err: Grapholscape needs a Graphol File or the corresponding string to be initialized")})),this.readFilePromise;function e(t){return new RS(t).parseGraphol()}}}]),t}()}));
