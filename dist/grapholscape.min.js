class GrapholScape{constructor(e){var t=this;if(this.ready=!1,"object"==typeof e){var a=new FileReader,i=new Event("grapholscape_ready");a.onloadend=function(){t.ontology=t.parseGraphol(a.result),this.ready=!0,window.dispatchEvent(i)},a.readAsText(e)}else{if("string"!=typeof e)return void console.error("Err: Grapholscape needs a Graphol File or the corresponding string to be initialized");this.ontology=this.parseGraphol(e),this.ready=!0}}setRenderer(e){return new Promise((t,a)=>{this.ready&&t(new GrapholscapeRenderer(e,this.ontology)),window.addEventListener("grapholscape_ready",()=>{t(new GrapholscapeRenderer(e,this.ontology))},this)})}getOccurrencesOfPredicate(e){for(var t=document.getElementById("predicates_list").getElementsByClassName("predicate"),a={},i=0;i<t.length;i++){if(t[i].getElementsByClassName("info")[0].innerHTML===e){for(var n=t[i].getElementsByClassName("sub_row"),r=0;r<n.length;r++){var s=n[r],o=s.getAttribute("diagram"),l=s.getAttribute("node_id");o in a?a[o].push(l):a[o]=[l]}break}}return a}}class Diagram{constructor(e,t,a={}){this.name=e,this.id=t,this.cy=cytoscape(),this.collection=this.cy.collection(a)}addElems(e){this.collection=this.collection.union(this.cy.collection(e))}}class Iri{constructor(e,t,a=!1,i=!1,n=!1){this.prefix=e,this.value=t,this.default=a,this.project=i,this.standard=n}getFullIri(){return this.prefix+":"+this.value}isDefault(){return this.default}isProject(){return this.project}isStandard(){return this.standard}}class Ontology{constructor(e,t,a=new Set,i=[]){this.name=e,this.version=t,this.iriSet=a,this.diagrams=i}addIri(e){this.iriSet.add(e)}addDiagram(e){this.diagrams.push(e)}getPredicates(){var e=cytoscape().collection();return this.diagrams.forEach(t=>{e=e.union(t.collection.filter(".predicate"))}),e}getDefaultIri(){let e=null;return this.iriSet.forEach(t=>{t.isDefault()&&(e=t)}),e}}function NodeXmlToJson(e,t,a,i){var n,r={data:{id_xml:e.getAttribute("id"),diagram_id:i,id:e.getAttribute("id")+"_"+i,fillColor:e.getAttribute("color"),type:e.getAttribute("type")},position:{},classes:e.getAttribute("type")};switch(r.data.type){case"concept":case"domain-restriction":r.data.shape="rectangle",r.data.identity="concept";break;case"range-restriction":r.data.shape="rectangle",r.data.identity="neutral";break;case"role":r.data.shape="diamond",r.data.identity="role";break;case"attribute":r.data.shape="ellipse",r.data.identity="attribute";break;case"union":case"disjoint-union":case"complement":case"intersection":case"enumeration":r.data.shape="hexagon",r.data.identity="neutral";break;case"role-inverse":case"role-chain":r.data.shape="hexagon",r.data.identity="role","role-chain"==r.data.type&&""!=e.getAttribute("inputs")&&(r.data.inputs=e.getAttribute("inputs").split(","));break;case"datatype-restriction":r.data.shape="hexagon",r.data.identity="value_domain";break;case"value-domain":r.data.shape="roundrectangle",r.data.identity="value_domain";break;case"property-assertion":r.data.shape="roundrectangle",r.data.identity="neutral",r.data.inputs=e.getAttribute("inputs").split(",");break;case"individual":r.data.shape="octagon",r.data.identity="individual";break;case"facet":r.data.shape="polygon",r.data.shape_points="-0.9 -1 1 -1 0.9 1 -1 1",r.data.fillColor="#ffffff",r.data.identity="facet";break;default:console.error("tipo di nodo sconosciuto")}var s=getFirstChild(e);if(r.data.width=parseInt(s.getAttribute("width")),r.data.width<0&&(r.data.width=-r.data.width),r.data.height=parseInt(s.getAttribute("height")),r.data.height<0&&(r.data.height=-r.data.height),"facet"==r.data.type&&(r.data.height=40),r.position.x=parseInt(s.getAttribute("x")),r.position.y=parseInt(s.getAttribute("y")),null!=(s=getNextSibling(s))&&(r.data.label=s.textContent,r.data.labelXpos=parseInt(s.getAttribute("x"))-r.position.x+1,r.data.labelYpos=parseInt(s.getAttribute("y"))-r.position.y+(r.data.height+2)/2+parseInt(s.getAttribute("height"))/4,n=r.data.label.replace(/\n/g,"")),isPredicate(e)){var o,l,d,c;r.classes+=" predicate";var p,u;t.getDefaultIri();for(null!=e.getAttribute("remaining_characters")?(l=e.getAttribute("remaining_characters").replace(/\n/g,""),d=n.length-l.length,":"!=(c=n.substring(0,d))&&c?t.iriSet.forEach(e=>{c!=e.prefix+":"||(o=e.value)}):o=t.getDefaultIri().value):(o=t.getDefaultIri().value,c="",l=n),-1!=c.search(/"[\w]+"\^\^[\w]+:/)?(l=n,o="",c=c.substring(c.lastIndexOf("^")+1,c.lastIndexOf(":")+1)):"/"==!o.substr(-1,1)&&"#"==!o.substr(-1,1)&&(o+="/"),r.data.remaining_chars=l,r.data.prefix_iri=c,r.data.iri=o+l,p=0;p<a.length;p++)if(n==(u=a[p]).getAttribute("name")&&r.data.type==u.getAttribute("type")){r.data.description=u.getElementsByTagName("description")[0].textContent,r.data.description=r.data.description.replace(/&lt;/g,"<"),r.data.description=r.data.description.replace(/&gt;/g,">"),r.data.description=r.data.description.replace(/font-family:'monospace'/g,""),r.data.description=r.data.description.replace(/&amp;/g,"&"),r.data.description=r.data.description.replace(/font-size:0pt/g,"font-size:inherit");var h=r.data.description.indexOf("<p"),m=r.data.description.indexOf("</body");r.data.description=r.data.description.substring(h,m),"attribute"!=r.data.type&&"role"!=r.data.type||(r.data.functional=parseInt(u.getElementsByTagName("functional")[0].textContent)),"role"==r.data.type&&(r.data.inverseFunctional=parseInt(u.getElementsByTagName("inverseFunctional")[0].textContent),r.data.asymmetric=parseInt(u.getElementsByTagName("asymmetric")[0].textContent),r.data.irreflexive=parseInt(u.getElementsByTagName("irreflexive")[0].textContent),r.data.symmetric=parseInt(u.getElementsByTagName("symmetric")[0].textContent),r.data.transitive=parseInt(u.getElementsByTagName("transitive")[0].textContent));break}}else r.data.prefix_iri="",r.data.remaining_chars=n,"value-domain"!=r.data.type&&"facet"!=r.data.type||(r.data.prefix_iri=n.split(":")[0]+":",r.data.remaining_chars=n.split(":")[1]);return r}function EdgeXmlToJson(e,t,a){var i,n={data:{target:e.getAttribute("target")+"_"+a,source:e.getAttribute("source")+"_"+a,id:e.getAttribute("id")+"_"+a,id_xml:e.getAttribute("id"),diagram_id:a,type:e.getAttribute("type")}};switch(n.data.type){case"inclusion":n.data.style="solid",n.data.target_arrow="triangle",n.data.arrow_fill="filled";break;case"input":n.data.style="dashed",n.data.target_arrow="diamond",n.data.arrow_fill="hollow";break;case"equivalence":n.data.style="solid",n.data.source_arrow="triangle",n.data.target_arrow="triangle",n.data.arrow_fill="filled";break;case"membership":n.data.style="solid",n.data.target_arrow="triangle",n.data.arrow_fill="filled",n.data.edge_label="instance Of";break;default:console.error("tipo di arco non implementato <"+e.getAttribute("type")+">")}var r=t.diagrams[a].collection.$id(n.data.source),s=t.diagrams[a].collection.$id(n.data.target);if("role-chain"==s.data("type")||"property-assertion"==s.data("type"))for(i=0;i<s.data("inputs").length;i++)if(s.data("inputs")[i]==n.data.id_xml){n.data.target_label=i+1;break}var o,l=getFirstChild(e),d=[],c=[],p=[],u=0;for(o=0;o<e.childNodes.length;o++)if(1==e.childNodes[o].nodeType){if(d[u]=[],d[u].push(parseInt(l.getAttribute("x"))),d[u].push(parseInt(l.getAttribute("y"))),null==getNextSibling(l))break;if(l=getNextSibling(l),u>0){var h=getDistanceWeight(s.position(),r.position(),d[u]);p.push(h[0]),c.push(h[1])}u++}u>1&&(n.data.segment_distances=p,n.data.segment_weights=c);var m=[];m.x=d[0][0],m.y=d[0][1],0==(m=getNewEndpoint(m,r,d[1])).x&&0==m.y||(n.data.source_endpoint=[],n.data.source_endpoint.push(m.x),n.data.source_endpoint.push(m.y));var g=[];return g.x=d[d.length-1][0],g.y=d[d.length-1][1],0==(g=getNewEndpoint(g,s,d[d.length-2])).x&&0==g.y||(n.data.target_endpoint=[],n.data.target_endpoint.push(g.x),n.data.target_endpoint.push(g.y)),n}function addFakeNodes(e){var t=e[e.length-1];if("facet"==t.data.type){t.data.label=t.data.label.replace("^^","\n\n"),t.data.labelYpos=t.data.height;var a={selectable:!1,data:{height:t.data.height,width:t.data.width,fillColor:"#ddd",shape:"polygon",shape_points:"-0.9 -1 1 -1 0.95 0 -0.95 0",diagram_id:t.data.diagram_id,parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x,y:t.position.y}},i={selectable:!1,data:{height:t.data.height,width:t.data.width,fillColor:"#fff",shape:"polygon",shape_points:"-0.95 0 0.95 0 0.9 1 -1 1",diagram_id:t.data.diagram_id,parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x,y:t.position.y}};return e[e.length-1]=a,e.push(i),void e.push(t)}if(1==t.data.functional&&1==t.data.inverseFunctional){var n={selectable:!1,data:{height:t.data.height,width:t.data.width,fillColor:"#000",shape:"polygon",shape_points:"0 -1 1 0 0 1",diagram_id:t.data.diagram_id},position:{x:t.position.x,y:t.position.y}},r={selectable:!1,data:{height:t.data.height,width:t.data.width+2,fillColor:"#fcfcfc",shape:"polygon",shape_points:"0 -1 -1 0 0 1",diagram_id:t.data.diagram_id},position:{x:t.position.x,y:t.position.y}};t.data.labelXpos,t.data.labelYpos;t.data.height-=8,t.data.width-=10,null!=t.data.label&&(t.data.labelYpos-=4),e[e.length-1]=r,e.push(n),e.push(t)}if("property-assertion"==t.data.type){var s={selectable:!1,classes:"no_overlay",data:{height:t.data.height,width:t.data.height,shape:"ellipse",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x-(t.data.width-t.data.height)/2,y:t.position.y}},o={selectable:!1,classes:"no_overlay",data:{height:t.data.height,width:t.data.height,shape:"ellipse",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:{x:t.position.x+(t.data.width-t.data.height)/2,y:t.position.y}},l={data:{selectable:!1,height:t.data.height,width:t.data.width-t.data.height,shape:"rectangle",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:t.position},d={data:{type:"property-assertion",height:t.data.height-1,width:t.data.width-t.data.height,shape:"rectangle",diagram_id:t.data.diagram_id,fillColor:"#fff",parent_node_id:t.data.id,type:t.data.type},position:t.position,classes:"property-assertion no_border"};t.classes+=" hidden",e[e.length-1]=t,e.push(l),e.push(s),e.push(o),e.push(d)}}function getIdentityForNeutralNodes(e){e.diagrams.forEach(e=>{e.collection.filter('node[identity = "neutral"]').forEach(e=>{e.data("identity",function e(t){var a=t.incomers('[type = "input"]').sources();var i=a.data("identity");if("neutral"==i)return e(a);switch(t.data("type")){case"range-restriction":return"role"==i?"concept":"attribute"==i?"value_domain":i;case"enumeration":return"individual"==i?"concept":i;default:return i}}(e))})})}function getFirstChild(e){return null==e||null==e.firstChild?null:(1!=(e=e.firstChild).nodeType&&(e=getNextSibling(e)),e)}function getNextSibling(e){if(null==e||null==e.nextSibling)return null;for(e=e.nextSibling;1!=e.nodeType;){if(null==e.nextSibling)return null;e=e.nextSibling}return e}function isPredicate(e){switch(e.getAttribute("type")){case"concept":case"attribute":case"role":case"individual":return!0}return!1}function getDistanceWeight(e,t,a){var i=[];i.x=a[0]-t.x,i.y=a[1]-t.y;var n=[];n.x=e.x-t.x,n.y=e.y-t.y;var r,s=[];if(0==n.x)s.x=0,s.y=i.y;else if(0==n.y)s.x=i.x,s.y=0,r=0;else{r=n.y/n.x;var o=i.y+i.x/r;s.x=o*r/(Math.pow(r,2)+1),s.y=s.x*r}var l=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),d=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))/l;n.x>0&&s.x<0&&(d=-d),n.x<0&&s.x>0&&(d=-d);var c=Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2));return n.x<0&&i.y>r*i.x&&(c=-c),n.x>0&&i.y<r*i.x&&(c=-c),0==n.x&&n.y>0&&i.x>0&&(c=-c),0==n.x&&n.y<0&&i.x<0&&(c=-c),[c,d]}function getNewEndpoint(e,t,a){var i=[];i.x=e.x-t.position("x"),i.y=e.y-t.position("y");var n=[];if(n.x=a[0]-t.position("x"),n.y=a[1]-t.position("y"),i.x==n.x){if(n.y>0)return i.y=t.data("height")/2,i;if(n.y<0)return i.y=-t.data("height")/2,i}else if(i.y==n.y){if(n.x>0)return i.x=t.data("width")/2,i;if(n.x<0)return i.x=-t.data("width")/2,i}return i}GrapholScape.prototype.parseGraphol=function(e){var t,a,i=new DOMParser,n=e instanceof XMLDocument?e:i.parseFromString(e,"text/xml"),r=n.getElementsByTagName("ontology")[0],s=r.getElementsByTagName("name")[0].textContent,o="";if(o=r.getElementsByTagName("version")[0]?r.getElementsByTagName("version")[0].textContent:"Undefined",ontology=new Ontology(s,o),0==n.getElementsByTagName("IRI_prefixes_nodes_dict").length){let e=n.getElementsByTagName("iri")[0].textContent;ontology.addIri(new Iri("",e,d=!0))}else{let e=n.getElementsByTagName("iri");for(t=0;t<e.length;t++){let i=e[t];var l=i.getAttribute("iri_value"),d=!1,c=!1,p=!1,u="";for(0==i.getElementsByTagName("prefix").length?d=!0:u=i.getElementsByTagName("prefix")[0].getAttribute("prefix_value"),a=0;a<i.getElementsByTagName("property").length;a++)switch(iri_property=i.getElementsByTagName("property")[a],iri_property.getAttribute("property_value")){case"Standard_IRI":p=!0;break;case"Project_IRI":c=!0}ontology.addIri(new Iri(u,l,d,c,p))}}var h=n.getElementsByTagName("predicate"),m=n.getElementsByTagName("diagram");for(t=0;t<m.length;t++){let e=m[t].getAttribute("name"),i=new Diagram(e,t);for(ontology.addDiagram(i),array_json_elems=[],array_json_edges=[],nodes=m[t].getElementsByTagName("node"),edges=m[t].getElementsByTagName("edge"),cnt=0,a=0;a<nodes.length;a++)array_json_elems.push(NodeXmlToJson(nodes[a],ontology,h,t)),"property-assertion"===array_json_elems[cnt].data.type||"facet"===array_json_elems[cnt].data.type||array_json_elems[cnt].data.functional&&array_json_elems[cnt].data.inverseFunctional?(addFakeNodes(array_json_elems),cnt+=array_json_elems.length-cnt):cnt++;for(i.addElems(array_json_elems),array_json_elems=[],a=0;a<edges.length;a++)array_json_elems.push(EdgeXmlToJson(edges[a],ontology,t));i.addElems(array_json_elems)}return getIdentityForNeutralNodes(ontology),ontology};class GrapholscapeRenderer{constructor(e,t){this.container=e,this.ontology=t,this.highlight_color="rgb(81,149,199)",this.container=e,this.container.style.fontSize="14px",this.container.style.color="#666",this.container.requestFullscreen=this.container.requestFullscreen||this.container.mozRequestFullscreen||this.container.mozRequestFullScreen||this.container.webkitRequestFullscreen||this.container.msRequestFullscreen,document.cancelFullscreen=document.cancelFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;var a=document.createElement("div");a.setAttribute("id","cy"),this.container.appendChild(a),this.cy=cytoscape({container:a,autoungrabify:!0,wheelSensitivity:.4,maxZoom:2.5,minZoom:.02,style:[{selector:"node",style:{height:"data(height)",width:"data(width)","background-color":"data(fillColor)",shape:"data(shape)","border-width":1,"border-color":"#000","border-style":"solid","font-size":12}},{selector:"[label]",style:{label:"data(label)","text-margin-x":"data(labelXpos)","text-margin-y":"data(labelYpos)","text-wrap":"wrap"}},{selector:"edge",style:{width:1,"line-color":"#000","target-arrow-color":"#000","target-arrow-shape":"data(target_arrow)","target-arrow-fill":"data(arrow_fill)","line-style":"data(style)","curve-style":"bezier","arrow-scale":1.3}},{selector:"[segment_distances]",style:{"curve-style":"segments","segment-distances":"data(segment_distances)","segment-weights":"data(segment_weights)","edge-distances":"node-position"}},{selector:"[source_arrow]",style:{"source-arrow-color":"#000","source-arrow-shape":"data(source_arrow)","source-arrow-fill":"data(arrow_fill)"}},{selector:"[source_endpoint]",style:{"source-endpoint":"data(source_endpoint)"}},{selector:"[target_endpoint]",style:{"target-endpoint":"data(target_endpoint)"}},{selector:"[?functional][!inverseFunctional]",style:{"border-width":5,"border-color":"#000","border-style":"double"}},{selector:"[?inverseFunctional][!functional]",style:{"border-width":4,"border-color":"#000","border-style":"solid"}},{selector:"[edge_label]",style:{label:"data(edge_label)","font-size":10,"text-rotation":"autorotate","text-margin-y":-10}},{selector:"[target_label]",style:{"target-label":"data(target_label)","font-size":10,"target-text-offset":15,"target-text-margin-y":-5}},{selector:"[shape_points]",style:{"shape-polygon-points":"data(shape_points)"}},{selector:"edge:selected",style:{"line-color":this.highlight_color,"source-arrow-color":this.highlight_color,"target-arrow-color":this.highlight_color,width:"4","z-index":"100"}},{selector:"node:selected",style:{"border-color":this.highlight_color,"border-width":"4","z-index":"100"}},{selector:".filtered",style:{display:"none"}},{selector:".facet",style:{"background-opacity":0}},{selector:".hidden",style:{visibility:"hidden"}},{selector:".no_border",style:{"border-width":0}},{selector:".no_overlay",style:{"overlay-opacity":0,"overlay-padding":0}}],layout:{name:"preset"}});var i=this;this.cy.on("select",".predicate",function(e){i.showDetails(e.target)}),this.cy.on("select","*",function(e){e.target.hasClass("predicate")||document.getElementById("details").classList.add("hide"),e.target.isEdge()&&"input"!=e.target.data("type")?(document.getElementById("owl_translator").classList.remove("hide"),document.getElementById("owl_axiomes").innerHTML=i.edgeToOwlString(e.target)):e.target.isNode()&&"facet"!=e.target.data("type")?(document.getElementById("owl_translator").classList.remove("hide"),document.getElementById("owl_axiomes").innerHTML=i.nodeToOwlString(e.target,!0)):document.getElementById("owl_translator").classList.add("hide")}),this.cy.on("tap",function(e){if(e.target===i.cy){var t;document.getElementById("details").classList.add("hide"),document.getElementById("owl_translator").classList.add("hide");var a=document.getElementsByClassName("bottom_window");for(t=0;t<a.length;t++)a[t].classList.add("hide");var n=document.getElementsByClassName("gcollapsible");for(t=0;t<n.length;t++)"details_body"!=n[t].id&&"translator_body"!=n[t].id&&0!=n[t].clientHeight&&(n[t].parentNode.getElementsByClassName("module_button")[0]?toggle(n[t].parentNode.getElementsByClassName("module_button")[0]):toggle(n[t]))}}),this.createUi()}centerOnNode(e,t,a){this.actual_diagram.id!=t.id&&this.drawDiagram(t);var i=this.cy.getElementById(e);this.centerOnPosition(i.position("x"),i.position("y"),a),this.cy.collection(":selected").unselect(),i.select()}centerOnPosition(e,t,a){this.cy.reset();var i=this.cy.width()/2,n=this.cy.height()/2;e-=i,t-=n,this.cy.pan({x:-e,y:-t}),this.cy.zoom({level:a,renderedPosition:{x:i,y:n}})}renderDescription(e){return e.replace(/(href=.)\/predicate\//g,"$1/documentation/predicate/")}showDetails(e){document.getElementById("details").classList.remove("hide");var t=document.getElementById("details_body");t.innerHTML='<table class="details_table">  <tr><th>Name</th><td>'+e.data("label").replace(/\n/g,"")+"</td></tr>  <tr><th>Type</th><td>"+e.data("type")+'</td></tr>  <tr><th>IRI</th><td><a style="text-decoration:underline" href="/documentation/predicate/'+e.data("type")+"/"+e.data("label").replace("\n","")+'">'+e.data("iri")+"</a></td></tr></table>","role"!=e.data("type")&&"attribute"!=e.data("type")||(e.data("functional")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Functional</span></div>'),e.data("inverseFunctional")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Inverse Functional</span></div>'),e.data("asymmetric")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Asymmetric</span></div>'),e.data("irreflexive")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Irreflexive</span></div>'),e.data("reflexive")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Asymmetric</span></div>'),e.data("symmetric")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Symmetric</span></div>'),e.data("transitive")&&(t.innerHTML+='<div><span class="checkmark">&#9745;</span><span>Transitive</span></div>')),e.data("description")&&(t.innerHTML+='<div class="table_header"><strong>Description</strong></div><div class="descr">'+this.renderDescription(e.data("description"))+"</div>")}toggleFullscreen(e,t,a,i){var n=this.container;this.isFullscreen()?document.cancelFullscreen():n.requestFullscreen()}isFullscreen(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}drawDiagram(e){this.cy.remove("*"),this.cy.add(e.collection);var t,a=document.getElementsByClassName("filtr_option");for(t=0;t<a.length;t++)a[t].firstElementChild.firstElementChild.checked||this.filter(a[t].firstElementChild.firstElementChild.id);return this.cy.fit(),this.actual_diagram=e,document.getElementById("title").innerHTML=e.name,!0}filter(e){var t,a,i=this;switch(e){case"val_check":a="value-domain";break;case"attr_check":a="attribute",document.getElementById("attr_check").checked?document.getElementById("val_check").removeAttribute("disabled"):document.getElementById("val_check").setAttribute("disabled","true");break;case"indiv_check":a="individual";break;case"forall_check":a="forall";break;case"not_check":a="complement"}t="forall"==a?this.cy.$(':visible[type $= "-restriction"][label = "forall"], .forall_check'):this.cy.$(':visible[type = "'+a+'"], .'+e);var n,r=document.getElementsByClassName("filtr_option"),s=0;if(document.getElementById(e).checked)for(t.removeClass(e),t.removeClass("filtered"),n=0;n<r.length;n++){var o=r[n].firstElementChild.firstElementChild;o.checked||this.filter(o.id)}else t.forEach(function(t){!function e(t,a){t.addClass("filtered "+a);i.cy.nodes('[parent_node_id = "'+t.id()+'"]').addClass("filtered "+a);var n='[source = "'+t.data("id")+'"]';t.connectedEdges(n).forEach(function(t){var i='edge:visible[source = "'+t.target().id()+'"]',n='edge:visible[target = "'+t.target().id()+'"][type != "input"]',r=t.target().connectedEdges(i).size()+t.target().connectedEdges(n).size();!t.target().hasClass("filtered")&&(r<=0||"input"==t.data("type"))&&e(t.target(),a)});n='[target ="'+t.data("id")+'"]';t.connectedEdges(n).forEach(function(t){var i='edge:visible[source = "'+t.source().id()+'"]',n='edge:visible[target = "'+t.source().id()+'"][type != "input"]',r=t.source().connectedEdges(i).size()+t.source().connectedEdges(n).size();t.source().hasClass("filtered")||0!=r||e(t.source(),a)})}(t,e)});for(n=0;n<r.length;n++)if(!r[n].firstElementChild.firstElementChild.checked){r[n].parentNode.nextElementSibling.getElementsByTagName("i")[0].style.color="rgb(81,149,199)",s=1;break}s||(r[0].parentNode.nextElementSibling.getElementsByTagName("i")[0].style.color="")}}function toggle(e){if(e.classList.contains("bottom_button")){var t=0,a=document.getElementsByClassName("bottom_window");for(t=0;t<a.length;t++)e.parentNode.getElementsByClassName("bottom_window")[0]!=a[t]&&a[t].classList.add("hide");e.parentNode.getElementsByClassName("bottom_window")[0].classList.toggle("hide")}else{var i=e.parentNode.getElementsByClassName("gcollapsible")[0];if("0"==i.clientHeight?i.style.maxHeight="450px":i.style.maxHeight="0",e.classList.contains("module_button")){var n=e.firstElementChild.innerHTML;"arrow_drop_up"==n?e.firstElementChild.innerHTML="arrow_drop_down":"arrow_drop_down"==n&&(e.firstElementChild.innerHTML="arrow_drop_up")}"diagram_list"!=i.id&&"slider_body"!=i.id||("0"==i.clientWidth?i.style.width="100%":i.style.width="0"),"slider_body"==i.id&&e.parentNode.getElementsByTagName("hr")[0].classList.toggle("hide")}}function search(e){var t=document.getElementById("predicates_list");""==e?(t.style.maxHeight=0,document.getElementById("predicates-list-button").getElementsByTagName("i")[0].innerHTML="arrow_drop_down"):(document.getElementById("predicates-list-button").getElementsByTagName("i")[0].innerHTML="arrow_drop_up",t.style.maxHeight="450px"),document.getElementById("search").value=e;var a=e.toLowerCase(),i=t.getElementsByClassName("predicate"),n=0;for(n=0;n<i.length;n++)i[n].getElementsByClassName("info")[0].innerHTML.toLowerCase().indexOf(a)>-1?i[n].style.display="":i[n].style.display="none";document.getElementById("search").focus()}function toggleSubRows(e){var t=e.parentNode.parentNode.getElementsByClassName("sub_row_wrapper")[0];"inherit"==t.style.display?(t.style.display="none",e.firstChild.innerHTML="keyboard_arrow_right"):(t.style.display="inherit",e.firstChild.innerHTML="keyboard_arrow_down")}function makeDraggable(e){var t=0,a=0,i=0,n=0;function r(r){r=r||window.event,t=i-r.clientX,a=n-r.clientY,i=r.clientX,n=r.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-t+"px"}function s(){document.onmouseup=null,document.onmousemove=null}e.classList.add("draggable"),e.getElementsByClassName("module_head")[0].onmousedown=function(e){e=e||window.event,i=e.clientX,n=e.clientY,document.onmouseup=s,document.onmousemove=r}}GrapholscapeRenderer.prototype.edgeToOwlString=function(e){var t=e.source(),a=e.target(),i='<span class="owl_error">Malformed Axiom</span>',n='<span class="owl_error">Missing Operand</span>';switch(e.data("type")){case"inclusion":return"concept"==t.data("identity")&&"concept"==a.data("identity")?"domain-restriction"==t.data("type")&&"self"!=t.data("label")&&"self"!=a.data("label")?function(e,t){var a=t.source().incomers('[type = "input"]').sources();if(a.size()>1)return s(e,t);if("role"==a.data("type"))return"ObjectPropertyDomain("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")";if("attribute"==a.data("type"))return"DataPropertyDomain("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")"}(this,e):"range-restriction"==t.data("type")&&"self"!=t.data("label")&&"self"!=a.data("label")?l(this,e):"complement"==a.data("type")||"complement"==t.data("type")?function(e,t){var a="DisjointClasses(";return t.forEach(function(t){"complement"==t.data("type")&&(t=t.incomers('[type = "input"]').source()),a+=e.nodeToOwlString(t)+" "}),a=a.slice(0,a.length-1),a+=")"}(this,e.connectedNodes()):s(this,e):"role"==t.data("identity")&&"role"==a.data("identity")?"complement"==a.data("type")?d(this,e):o(this,e):"value_domain"==t.data("identity")&&"value_domain"==a.data("identity")?l(this,e):"attribute"==t.data("identity")&&"attribute"==a.data("identity")?"complement"==a.data("type")?d(this,e):o(this,e):i;case"equivalence":return"concept"==t.data("identity")&&"concept"==a.data("identity")?function(e,t){return"EquivalentClasses("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}(this,e):"role"==t.data("identity")&&"role"==a.data("identity")?"role-inverse"==t.data("type")||"role-inverse"==a.data("type")?function(e,t){var a,i;"role-inverse"==t.source().data("type")?(i=t.target(),a=t.source().incomers('[type = "input"]').sources().first()):(i=t.source(),a=t.target().incomers('[type = "input"]').sources().first());return a.length?"InverseObjectProperties("+e.nodeToOwlString(i)+" "+e.nodeToOwlString(a)+")":n}(this,e):r(this,e):"attribute"==t.data("identity")&&"attribute"==a.data("identity")?r(this,e):i;case"membership":return"concept"==a.data("identity")?function(e,t){return"ClassAssertion("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}(this,e):function(e,t){var a,i="Object";"attribute"==t.target().data("identity")&&(i="Data");if(a=i+"PropertyAssertion("+e.nodeToOwlString(t.target())+" ","property-assertion"==t.source().data("type")){var n=t.source();n.data("inputs").forEach(function(t){input=e.cy.$('edge[id_xml = "'+t+'"]').source(),a+=e.nodeToOwlString(input)+" "}),a=a.slice(0,a.length-1)}else a+=e.nodeToOwlString(t.source());return a+")"}(this,e)}function r(e,t){return"Equivalent"+("role"==t.source().data("idenity")?"Object":"Data")+"Properties("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}function s(e,t){return"SubClassOf("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}function o(e,t){var a;if("role"==t.target().data("identity"))a="Object";else{if("attribute"!=t.target().data("type"))return null;a="Data"}return"Sub"+a+"PropertyOf("+e.nodeToOwlString(t.source())+" "+e.nodeToOwlString(t.target())+")"}function l(e,t){var a=t.source().incomers('[type = "input"]').sources();return a.size()>1?s(e,t):"role"==a.data("type")?"ObjectPropertyRange("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")":"attribute"==a.data("type")?"DataPropertyRange("+e.nodeToOwlString(a)+" "+e.nodeToOwlString(t.target())+")":void 0}function d(e,t){var a,i;if("role"==t.target().data("identity"))a="Object";else{if("attribute"!=t.target().data("identity"))return null;a="Data"}return i="Disjoint"+a+"Properties(",t.connectedNodes().forEach(function(t){"complement"==t.data("type")&&(t=t.incomers('[type = "input"]').source()),i+=e.nodeToOwlString(t)+" "}),(i=i.slice(0,i.length-1))+")"}},GrapholscapeRenderer.prototype.nodeToOwlString=function(e,t){var a='<span class="axiom_predicate_prefix">owl:</span><span class="axiom_predefinite_obj">Thing</span>',i='<span class="axiom_predicate_prefix">rdfs:</span><span class="axiom_predefinite_obj">Literal</span>',n='<span class="owl_error">Missing Operand</span>',r=t||null;if(r&&(e.hasClass("predicate")||"value-domain"==e.data("type"))){var s,o='<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_'+e.data("type")+'">'+e.data("remaining_chars")+"</span>";switch(e.data("type")){case"concept":return"Declaration("+(s="Class")+"("+o+"))";case"role":var l="Declaration("+(s="ObjectProperty")+"("+o+"))";return e.data("functional")&&(l+="<br/>Functional"+s+"("+o+")"),e.data("inverseFunctional")&&(l+="<br/>InverseFunctional"+s+"("+o+")"),e.data("asymmetric")&&(l+="<br />Asymmetric"+s+"("+o+")"),e.data("irreflexive")&&(l+="<br/>Irreflexive"+s+"("+o+")"),e.data("reflexive")&&(l+="<br/>Reflexive"+s+"("+o+")"),e.data("symmetric")&&(l+="<br/>Symmetric"+s+"("+o+")"),e.data("transitive")&&(l+="<br/>Transitive"+s+"("+o+")"),l;case"attribute":l="Declaration("+(s="DataProperty")+"("+o+"))";return e.data("functional")&&(l+="<br/>Functional"+s+"("+o+"))"),l;case"individual":if(-1!=e.data("remaining_chars").search(/"[\w]+"\^\^[\w]+:/)){var d=e.data("remaining_chars").split("^^")[0],c=e.data("remaining_chars").split(":")[1];o='<span class="owl_value">'+d+'</span>^^<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_value-domain">'+c+"</span>"}return"Declaration("+(s="NamedIndividual")+"("+o+"))";case"value-domain":return"Declaration("+(s="Datatype")+"("+o+"))"}}switch(e.data("type")){case"individual":if(-1!=e.data("remaining_chars").search(/"[\w]+"\^\^[\w]+:/)){d=e.data("remaining_chars").split("^^")[0],c=e.data("remaining_chars").split(":")[1];return'<span class="owl_value">'+d+'</span>^^<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_value-domain">'+c+"</span>"}case"concept":case"role":case"value-domain":case"attribute":case"individual":return'<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_'+e.data("type")+'">'+e.data("remaining_chars")+"</span>";case"facet":var p=e.data("remaining_chars").split("^^");return'<span class="axiom_predicate_prefix">'+e.data("prefix_iri")+'</span><span class="owl_value-domain">'+p[0]+'</span><span class="owl_value">'+p[1]+"</span>";case"domain-restriction":case"range-restriction":var u,h,m=e.connectedEdges('edge[target = "'+e.id()+'"][type = "input"]');if(!m.length)return n;if(m.forEach(function(e){"role"!=e.source().data("type")&&"attribute"!=e.source().data("type")||(u=e.source()),"role"!=e.source().data("type")&&"attribute"!=e.source().data("type")&&(h=e.source())}),!u)return n;if("attribute"==u.data("type")&&"range-restriction"==e.data("type"))return"Undefined";if("exists"==e.data("label"))return function(e,t,n,r){var s,o;"role"==t.data("type")&&(s="Object");"attribute"==t.data("type")&&(s="Data");o=s+"SomeValuesFrom(",o+="range-restriction"==r?_(e,t):e.nodeToOwlString(t);return o+=n||"Object"!=s?n||"Data"!=s?" "+e.nodeToOwlString(n)+")":" "+i+")":" "+a+")"}(this,u,h,e.data("type"));if("forall"==e.data("label"))return function(e,t,n,r){var s,o;"role"==t.data("type")&&(s="Object");"attribute"==t.data("type")&&(s="Data");o=s+"AllValuesFrom(",o+="range-restriction"==r?_(e,t):e.nodeToOwlString(t);return o+=n||"Object"!=s?n||"Data"!=s?" "+e.nodeToOwlString(n)+")":" "+i+")":" "+a+")"}(this,u,h,e.data("type"));if(-1!=e.data("label").search(/\(([-]|[\d]+),([-]|[\d]+)\)/)){var g=e.data("label").replace(/\(|\)/g,"").split(/,/);return function e(t,a,i,n,r){var s;"role"==a.data("type")&&(s="Object");"attribute"==a.data("type")&&(s="Data");if("-"==n[0])return"range-restriction"==r?i?s+"MaxCardinality("+n[1]+" "+_(t,a)+" "+t.nodeToOwlString(i)+")":s+"MaxCardinality("+n[1]+" "+_(t,a)+")":i?s+"MaxCardinality("+n[1]+" "+t.nodeToOwlString(a)+" "+t.nodeToOwlString(i)+")":s+"MaxCardinality("+n[1]+" "+t.nodeToOwlString(a)+")";if("-"==n[1])return"range-restriction"==r?i?s+"MinCardinality("+n[0]+" "+_(t,a)+" "+t.nodeToOwlString(i)+")":s+"MinCardinality("+n[0]+" "+_(t,a)+")":i?s+"MinCardinality("+n[0]+" "+t.nodeToOwlString(a)+" "+t.nodeToOwlString(i)+")":s+"MinCardinality("+n[0]+" "+t.nodeToOwlString(a)+")";if("-"!=n[0]&&"-"!=n[1]){var o=[],l=[];return o.push(n[0]),o.push("-"),l.push("-"),l.push(n[1]),s+"IntersectionOf("+e(t,a,i,o,r)+" "+e(t,a,i,l,r)+")"}}(this,u,h,g,e.data("type"))}if("self"==e.data("label"))return function(e,t,a){return"range-restriction"==a?"ObjectHasSelf("+_(e,t)+")":"ObjectHasSelf("+e.nodeToOwlString(t)+")"}(this,u,e.data("type"));case"role-inverse":var y=e.incomers('[type = "input"]').sources();return y.length?_(this,y):n;case"role-chain":return e.data("inputs")?function(e,t){var a="ObjectPropertyChain(";return t.forEach(function(t){y=e.cy.$('edge[id_xml = "'+t+'"]').source(),a+=e.nodeToOwlString(y)+" "}),a=a.slice(0,a.length-1),a+=")"}(this,e.data("inputs")):n;case"union":case"intersection":case"complement":case"enumeration":case"disjoint-union":if(!(b=e.incomers('[type = "input"]').sources()).length)return n;var f="Object";return"concept"!=e.data("identity")&&"role"!=e.data("identity")&&(f="Data"),"disjoint-union"==e.data("type")?r?v(this,b,"union",f)+"<br />"+function(e,t){var a="DisjointClasses(";return t.forEach(function(t){a+=e.nodeToOwlString(t)+" "}),a=a.slice(0,a.length-1),a+=")"}(this,b):v(this,b,"union",f):v(this,b,e.data("type"),f);case"datatype-restriction":var b;return(b=e.incomers('[type = "input"]').sources()).length?function(e,t){var a="DatatypeRestriction(",i=t.filter('[type = "value-domain"]').first();return a+=e.nodeToOwlString(i)+" ",t.forEach(function(t){"facet"==t.data("type")&&(a+=e.nodeToOwlString(t)+"^^",a+=e.nodeToOwlString(i)+" ")}),a=a.slice(0,a.length-1),a+=")"}(this,b):n;case"property-assertion":return"Undefined"}function _(e,t){return"ObjectInverseOf("+e.nodeToOwlString(t)+")"}function v(e,t,a,i){var n;return a="enumeration"==a?"One":a.charAt(0).toUpperCase()+a.slice(1),n=i+a+"Of(",t.forEach(function(t){n+=e.nodeToOwlString(t)+" "}),n=n.slice(0,n.length-1),n+=")"}},GrapholscapeRenderer.prototype.createUi=function(){var e,t,a,i,n,r,s,o=this,l=document.createElement("div"),d=document.createElement("div"),c=document.createElement("i"),p=document.createElement("i");p.setAttribute("class","material-icons md-24"),p.innerHTML="arrow_drop_down",l.setAttribute("id","diagram_name"),l.setAttribute("class","module"),d.setAttribute("id","title"),d.setAttribute("class","module_head"),d.innerHTML="Select a diagram",l.appendChild(d),(d=document.createElement("div")).setAttribute("id","diagram-list-button"),d.setAttribute("class","module_button"),d.setAttribute("onclick","toggle(this)"),d.appendChild(p),l.appendChild(d),(d=document.createElement("div")).setAttribute("id","diagram_list"),d.setAttribute("class","gcollapsible module_body"),this.ontology.diagrams.forEach(e=>{item=document.createElement("div"),item.setAttribute("class","diagram_item"),item.innerHTML=e.name,item.addEventListener("click",function(){o.drawDiagram(e),toggle(document.getElementById("diagram-list-button"))}),d.appendChild(item)}),l.appendChild(d),makeDraggable(l),this.container.appendChild(l),(l=l.cloneNode(!0)).setAttribute("id","explorer"),(g=document.createElement("input")).setAttribute("autocomplete","off"),g.setAttribute("type","text"),g.setAttribute("id","search"),g.setAttribute("placeholder","Search Predicates..."),g.setAttribute("onkeyup","search(this.value)"),l.firstElementChild.innerHTML="",l.firstElementChild.appendChild(g),l.getElementsByClassName("module_button")[0].setAttribute("id","predicates-list-button"),l.removeChild(l.lastElementChild),(d=document.createElement("div")).setAttribute("id","predicates_list"),d.setAttribute("class","gcollapsible module_body"),l.appendChild(d),makeDraggable(l),this.container.appendChild(l),this.ontology.getPredicates().forEach(e=>{let l=this.ontology.diagrams[e.data("diagram_id")];if(m=e.data("label").replace(/\r?\n|\r/g,""),s=m.concat(e.data("type")),null!=document.getElementById(s))n=document.getElementById(s).getElementsByClassName("sub_row_wrapper")[0],(r=document.createElement("div")).setAttribute("class","sub_row"),r.setAttribute("diagram",l.name),r.setAttribute("node_id",e.id()),r.innerHTML="- "+r.getAttribute("diagram")+" - "+e.data("id_xml"),r.addEventListener("click",function(){toggle(document.getElementById("predicates-list-button")),o.centerOnNode(e.id(),l,1.25)}),n.appendChild(r);else{switch((t=document.createElement("div")).setAttribute("id",s),t.setAttribute("class","predicate"),(a=document.createElement("div")).setAttribute("class","graphol_row"),i=document.createElement("span"),(c=document.createElement("i")).setAttribute("class","no_highlight material-icons md-18"),c.innerHTML="keyboard_arrow_right",i.appendChild(c),a.appendChild(i),i=document.createElement("span"),(c=document.createElement("div")).innerHTML=e.data("type").charAt(0).toUpperCase(),c.style.display="block",c.style.width="1.2vw",c.style.height="1.2vw",c.style.textAlign="center",c.style.verticalAlign="middle",c.style.lineHeight="1.2vw",c.innerHTML){case"C":lightColor="#F9F3A6",darkColor="#B08D00";break;case"R":lightColor="#AACDE1",darkColor="#065A85";break;case"A":lightColor="#C7DAAD",darkColor="#4B7900"}c.style.color=darkColor,c.style.backgroundColor=lightColor,c.style.border="1px solid "+darkColor,i.appendChild(c),a.appendChild(i),(i=document.createElement("div")).setAttribute("class","info"),i.innerHTML=m,a.appendChild(i),t.appendChild(a),a.firstChild.addEventListener("click",function(){toggleSubRows(this)}),a.getElementsByClassName("info")[0].addEventListener("click",function(){o.showDetails(e),o.cy.nodes().unselect()}),(n=document.createElement("div")).setAttribute("class","sub_row_wrapper"),(r=document.createElement("div")).setAttribute("class","sub_row"),r.setAttribute("diagram",l.name),r.setAttribute("node_id",e.id()),r.innerHTML="- "+r.getAttribute("diagram")+" - "+e.data("id_xml"),r.addEventListener("click",function(){toggle(document.getElementById("predicates-list-button")),o.centerOnNode(e.id(),l,1.25)}),n.appendChild(r),t.appendChild(n)}d.appendChild(t)},this),(l=document.createElement("div")).setAttribute("id","zoom_tools"),l.setAttribute("class","grapholscape-tooltip module"),(d=document.createElement("div")).setAttribute("class","bottom_button"),d.setAttribute("id","zoom_in"),(c=document.createElement("i")).setAttribute("class","material-icons md-24"),c.innerHTML="add",d.appendChild(c),d.addEventListener("click",function(){o.cy.zoom({level:o.cy.zoom()+.08,renderedPosition:{x:o.cy.width()/2,y:o.cy.height()/2}});var e=Math.round(o.cy.zoom()/o.cy.maxZoom()*100);document.getElementById("zoom_slider").setAttribute("value",e)}),l.appendChild(d),(d=document.createElement("span")).setAttribute("class","tooltiptext"),d.onclick=function(){toggle(this)},d.innerHTML="Toggle slider",l.appendChild(d),(d=document.createElement("div")).setAttribute("class","gcollapsible"),d.setAttribute("id","slider_body"),(g=document.createElement("input")).setAttribute("id","zoom_slider"),g.setAttribute("autocomplete","off"),g.setAttribute("type","range"),g.setAttribute("min","1"),g.setAttribute("max","100"),g.setAttribute("value","50"),g.oninput=function(){var e=o.cy.maxZoom()/100*this.value;o.cy.zoom({level:e,renderedPosition:{x:o.cy.width()/2,y:o.cy.height()/2}})},d.appendChild(g),l.appendChild(d),l.appendChild(document.createElement("hr")),(d=document.createElement("div")).setAttribute("class","bottom_button"),d.setAttribute("id","zoom_out"),(c=document.createElement("i")).setAttribute("class","material-icons md-24"),c.innerHTML="remove",d.appendChild(c),d.addEventListener("click",function(){o.cy.zoom({level:o.cy.zoom()-.08,renderedPosition:{x:o.cy.width()/2,y:o.cy.height()/2}});var e=Math.round(o.cy.zoom()/o.cy.maxZoom()*100);document.getElementById("zoom_slider").setAttribute("value",e)}),l.appendChild(d),this.container.appendChild(l),(l=document.createElement("div")).setAttribute("id","details"),l.setAttribute("class","module hide"),(d=document.createElement("div")).setAttribute("class","module_head"),d.style.textAlign="center",d.innerHTML="Details",l.appendChild(d),(d=document.createElement("div")).setAttribute("id","details_button"),d.setAttribute("class","module_button"),d.setAttribute("onclick","toggle(this)"),(c=p.cloneNode(!0)).innerHTML="arrow_drop_up",d.appendChild(c),l.appendChild(d),(d=document.createElement("div")).setAttribute("id","details_body"),d.setAttribute("class","gcollapsible module_body"),l.appendChild(d),makeDraggable(l),this.container.appendChild(l),(l=document.createElement("div")).setAttribute("id","filters"),l.setAttribute("class","module"),(d=document.createElement("div")).setAttribute("id","filter_body"),d.setAttribute("class","bottom_window hide"),d.innerHTML+='<div style="text-align:center; margin-bottom:10px;"><strong>Filters</strong></div>';var u=document.createElement("div");u.setAttribute("class","filtr_option");var h=document.createElement("label");h.setAttribute("class","check_slider_wrap"),(g=document.createElement("input")).setAttribute("id","attr_check"),g.setAttribute("type","checkbox"),g.setAttribute("checked","checked");var m,g,y=document.createElement("span");y.setAttribute("class","check_slider"),h.appendChild(g),h.appendChild(y),u.appendChild(h),(m=document.createElement("span")).innerHTML="Attributes",m.setAttribute("class","filtr_text"),u.appendChild(m),d.appendChild(u),(u=u.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","val_check"),u.lastElementChild.innerHTML="Value Domain",d.appendChild(u),(u=u.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","indiv_check"),u.lastElementChild.innerHTML="Individuals",d.appendChild(u),(u=u.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","forall_check"),u.lastElementChild.innerHTML="Universal Quantifier",d.appendChild(u),(u=u.cloneNode(!0)).firstElementChild.firstElementChild.setAttribute("id","not_check"),u.lastElementChild.innerHTML="Not",d.appendChild(u),l.appendChild(d),l.innerHTML+='<div onclick="toggle(this)" class="bottom_button" title="filters"><i alt="filters" class="material-icons md-24"/>filter_list</i></div>',this.container.appendChild(l);var f=l.getElementsByClassName("filtr_option");for(e=0;e<f.length;e++)(g=f[e].firstElementChild.firstElementChild).addEventListener("click",function(){o.filter(this.id)});(l=document.createElement("div")).setAttribute("id","center_button"),l.setAttribute("class","module bottom_button"),l.setAttribute("title","reset"),(c=p.cloneNode(!0)).innerHTML="filter_center_focus",l.appendChild(c),l.addEventListener("click",function(){o.cy.fit()}),this.container.appendChild(l),(l=document.createElement("div")).setAttribute("id","grapholscape-fullscreen-btn"),l.setAttribute("class","module bottom_button"),l.setAttribute("title","fullscreen"),(c=document.createElement("i")).setAttribute("class","material-icons md-24"),c.innerHTML="fullscreen",c.onclick=function(){this.toggleFullscreen()}.bind(this);var b=this,_=function(e){var t=document.getElementById("grapholscape-fullscreen-btn").getElementsByTagName("i")[0],a=b.container;if(b.isFullscreen())a.fullScreenRestore={position:a.style.position,scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:a.style.width,height:a.style.height},a.style.position=void 0,a.style.width="100%",a.style.height="100%",a.className+=" grapholscape-fullscreen",document.documentElement.style.overflow="hidden",t.innerHTML="fullscreen_exit";else{a.className=a.className.replace(/\s*grapholscape-fullscreen\b/,""),document.documentElement.style.overflow="";var i=a.fullScreenRestore;a.style.position=i.position,a.style.width=i.width,a.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),t.innerHTML="fullscreen"}b.cy.resize()};document.addEventListener("fullscreenchange",_,!1),document.addEventListener("mozfullscreenchange",_,!1),document.addEventListener("webkitfullscreenchange",_,!1),l.appendChild(c),this.container.appendChild(l),(l=document.createElement("div")).setAttribute("id","owl_translator"),l.setAttribute("class","hide module"),(d=document.createElement("div")).setAttribute("id","translator_body"),d.setAttribute("class","module_body gcollapsible"),(u=document.createElement("div")).setAttribute("id","owl_axiomes"),d.appendChild(u),l.appendChild(d),(d=document.createElement("div")).setAttribute("class","module_head"),d.innerHTML="OWL 2",l.appendChild(d),(d=document.createElement("div")).setAttribute("id","translator-button"),d.setAttribute("class","module_button"),d.setAttribute("onclick","toggle(this)"),(c=p.cloneNode(!0)).innerHTML="arrow_drop_down",d.appendChild(c),l.appendChild(d),this.container.appendChild(l),(l=document.createElement("div")).setAttribute("id","onto_info"),l.setAttribute("class","module"),(d=document.createElement("div")).setAttribute("id","onto_info_body"),d.setAttribute("class","bottom_window hide"),d.innerHTML='<div style="text-align:center; margin-bottom:10px;"><strong>Ontology Info</strong></div>\t<table class="details_table">\t<tr><th>Name</th><td>'+this.ontology.name+"</td></tr>\t<tr><th>Version</th><td>"+this.ontology.version+"</td></tr></table>",d.innerHTML+='<div class="table_header"><strong>IRI Prefixes Dictionary</strong></div>',(u=document.createElement("div")).setAttribute("id","prefixes_dict_list");var v=document.createElement("table");v.setAttribute("id","prefix_dict_table"),this.ontology.iriSet.forEach(e=>{if(!e.isStandard()){var t=document.createElement("tr"),a=document.createElement("th"),i=document.createElement("td");e.isDefault()?a.innerHTML="<em>Default</em>":a.innerHTML=e.prefix,e.isProject()&&i.classList.add("project_iri"),i.innerHTML=e.value,t.appendChild(a),t.appendChild(i),v.appendChild(t)}}),d.appendChild(v),l.appendChild(d),l.innerHTML+='<div onclick="toggle(this)" class="bottom_button" title="Info"><i alt="info" class="material-icons md-24"/>info_outline</i></div>',this.container.appendChild(l);var w=document.getElementsByClassName("material-icons");for(e=0;e<w.length;e++)w[e].onselectstart=function(){return!1}};