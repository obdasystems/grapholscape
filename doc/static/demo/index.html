<!DOCTYPE html>
<html>
<head>
  <link href="style/style.css" rel="stylesheet" />
  <!--- for top nav bar ---->
  <link type="text/css" rel="stylesheet" href="./style/doc-generated-style.css">
  <link type="text/css" rel="stylesheet" href="../doc-style.css">
  <!------->

  

  <script src="js/examples.js" type="text/javascript"></script>
  <script src="./js/grapholscape.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <link rel="icon"
      type="image/png"
      href="../assets/img/icon.png">
  <title>Grapholscape</title>

</head>

<body style="margin: 0">

  <div class="top-nav" style="height: 75px">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
             
                <a class="image" href="../index.html">
                    <img src="../assets/img/icon.png" alt="logo">
                </a>
            
             
                <a href="../index.html">
                    <h1 class="navbar-item">Grapholscape</h1>
                </a>
            
        </div>
        <div class="menu">
          <div class="navigation">
              <a
                  href="../index.html"
                  class="link"
              >
                  API Documentation
              </a>
              
                
                  
                      <a
                          class="link user-link "
                          href="https://github.com/obdasystems/grapholscape"
                      >
                          Github
                      </a>
                  
                      <a
                          class="link user-link "
                          href="../demo/index.html"
                      >
                          Demo
                      </a>
                  
              
              
          </div>
        </div>
    </div>
  </div>

  <div id="grapholscape_container"></div>

  <div id="home">
    <div id="logo">
      <img style="width:20%" src="../assets/img/logo.png" />
    </div>
    <div class="panel" id="left-panel">
      <h2>Select an example</h2>
      <div id="examples_list">
        <ul>
        </ul>
      </div>
    </div>

    <div class="panel" id="right-panel">
      <div id="dropbox">
        <h2>Select or drop a file</h2>
        <h1 id="add-button">+</h1>
        <input id="file-input" type="file" name="select-graphol" style="display: none" />
        <p>Select your .graphol file to display it</p>
      </div>
    </div>
  </div>

  <script>
    var grapholscape_container = document.getElementById('grapholscape_container');
    var dropbox = document.getElementById('dropbox');

    dropbox.addEventListener('click', selectGraphol)
    dropbox.addEventListener("dragenter",dragenter,false);
    dropbox.addEventListener("dragover", dragover, false);
    dropbox.addEventListener("drop", drop,false);

    function dragenter(e) {
      e.stopPropagation();
      e.preventDefault();
    }

    function dragover(e) {
      e.stopPropagation();
      e.preventDefault();
    }

    function drop(e) {
      e.stopPropagation();
      e.preventDefault();

      var dt = e.dataTransfer;
      var files = dt.files;

      useGrapholscape(files[0])
    }

    // Handle  dialog for file selection
    const hidden_input = document.getElementById('file-input')

    function selectGraphol() {
      hidden_input.click()
    }

    hidden_input.onchange = function(e) {
      useGrapholscape(e.target.files[0])
    }

    // Examples
    var examples_list = document.getElementById('examples_list');
    var i = 0;

    for (i=0; i<examples.length; i++) {
      var li = document.createElement('li');
      li.innerHTML = examples[i][0];
      li.setAttribute('exmp_id',i);

      li.onclick = function() {
        useGrapholscape(examples[this.getAttribute('exmp_id')][1])
      };

      examples_list.appendChild(li);
    }
    let grapholscape
    async function useGrapholscape(file) {
      document.getElementById('home').style.display = 'none';
      grapholscape_container.style.display = 'block';

      grapholscape = await Grapholscape.fullGrapholscape(file, grapholscape_container)
      grapholscape.showDiagram(0)
    }
  </script>
</body>
</html>
